var isNeedFpsMeter=!1, isLevelEditor=!1, isSkipMenus=!1, isSkipReadyWin=!1, editLevelToLoad = 3, isLastLevelLoad=!1, isDisableWin=!1, isOpenAllLevels=!1, isPhysicsDebugDraw=!1, isGetAllProperties=!1, isLoadAnimFromJSON=!1, isLowQuality=!1, isDesktopBrowser=!1, IS_KEY_GAMES=!1, SPONSOR_URL = IS_KEY_GAMES ? "http://keygames.com?utm_source=games&utm_medium=html5&utm_campaign=battlefish" : "http://spele.nl?utm_source=games&utm_medium=html5&utm_campaign=battlefish", PRELOADER_LOGO = IS_KEY_GAMES ? "logo_keygames.png" : "logo_spele.png",
HERO_TYPE = 1, ENEMY_SIMPLE_TYPE = 2, ENEMY_STONE_TYPE = 3, ENEMY_INFLATE_TYPE = 4, ENEMY_HARD_TYPE = 5, ENEMY_SICK_TYPE = 6;
this.createjs = this.createjs || {};
(function() {
    var c = function(b, k, d) {
        this.initialize(b, k, d)
    }, a = c.prototype;
    a.type = null;
    a.target = null;
    a.currentTarget = null;
    a.eventPhase = 0;
    a.bubbles=!1;
    a.cancelable=!1;
    a.timeStamp = 0;
    a.defaultPrevented=!1;
    a.propagationStopped=!1;
    a.immediatePropagationStopped=!1;
    a.removed=!1;
    a.initialize = function(b, k, d) {
        this.type = b;
        this.bubbles = k;
        this.cancelable = d;
        this.timeStamp = (new Date).getTime()
    };
    a.preventDefault = function() {
        this.defaultPrevented=!0
    };
    a.stopPropagation = function() {
        this.propagationStopped=!0
    };
    a.stopImmediatePropagation =
    function() {
        this.immediatePropagationStopped = this.propagationStopped=!0
    };
    a.remove = function() {
        this.removed=!0
    };
    a.clone = function() {
        return new c(this.type, this.bubbles, this.cancelable)
    };
    a.toString = function() {
        return "[Event (type=" + this.type + ")]"
    };
    createjs.Event = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {}, a = c.prototype;
    c.initialize = function(b) {
        b.addEventListener = a.addEventListener;
        b.on = a.on;
        b.removeEventListener = b.off = a.removeEventListener;
        b.removeAllEventListeners = a.removeAllEventListeners;
        b.hasEventListener = a.hasEventListener;
        b.dispatchEvent = a.dispatchEvent;
        b._dispatchEvent = a._dispatchEvent
    };
    a._listeners = null;
    a._captureListeners = null;
    a.initialize = function() {};
    a.addEventListener = function(b, k, d) {
        var a;
        a = d ? this._captureListeners = this._captureListeners || {} : this._listeners =
        this._listeners || {};
        var c = a[b];
        c && this.removeEventListener(b, k, d);
        (c = a[b]) ? c.push(k) : a[b] = [k];
        return k
    };
    a.on = function(b, a, d, c, f, g) {
        a.handleEvent && (d = d || a, a = a.handleEvent);
        d = d || this;
        return this.addEventListener(b, function(b) {
            a.call(d, b, f);
            c && b.remove()
        }, g)
    };
    a.removeEventListener = function(b, a, d) {
        if (d = d ? this._captureListeners : this._listeners) {
            var c = d[b];
            if (c)
                for (var f = 0, g = c.length; f < g; f++)
                    if (c[f] == a) {
                        1 == g ? delete d[b] : c.splice(f, 1);
                        break
                    }
        }
    };
    a.off = a.removeEventListener;
    a.removeAllEventListeners = function(b) {
        b ?
        (this._listeners && delete this._listeners[b], this._captureListeners && delete this._captureListeners[b]) : this._listeners = this._captureListeners = null
    };
    a.dispatchEvent = function(b, a) {
        if ("string" == typeof b) {
            var d = this._listeners;
            if (!d ||!d[b])
                return !1;
            b = new createjs.Event(b)
        }
        b.target = a || this;
        if (b.bubbles && this.parent) {
            for (var c = this, d = [c]; c.parent;)
                d.push(c = c.parent);
            for (var f = d.length, c = f-1; 0 <= c&&!b.propagationStopped; c--)
                d[c]._dispatchEvent(b, 1 + (0 == c));
            for (c = 1; c < f&&!b.propagationStopped; c++)
                d[c]._dispatchEvent(b,
                3)
        } else 
            this._dispatchEvent(b, 2);
        return b.defaultPrevented
    };
    a.hasEventListener = function(b) {
        var a = this._listeners, d = this._captureListeners;
        return !!(a && a[b] || d && d[b])
    };
    a.toString = function() {
        return "[EventDispatcher]"
    };
    a._dispatchEvent = function(b, a) {
        var d, c = 1 == a ? this._captureListeners: this._listeners;
        if (b && c && (c = c[b.type]) && (d = c.length)) {
            b.currentTarget = this;
            b.eventPhase = a;
            b.removed=!1;
            for (var c = c.slice(), f = 0; f < d&&!b.immediatePropagationStopped; f++) {
                var g = c[f];
                g.handleEvent ? g.handleEvent(b) : g(b);
                b.removed &&
                (this.off(b.type, g, 1 == a), b.removed=!1)
            }
        }
    };
    createjs.EventDispatcher = c
})();
this.createjs = this.createjs || {};
(function() {
    createjs.indexOf = function(c, a) {
        for (var b = 0, k = c.length; b < k; b++)
            if (a === c[b])
                return b;
        return -1
    }
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "UID cannot be instantiated";
    };
    c._nextID = 0;
    c.get = function() {
        return c._nextID++
    };
    createjs.UID = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "Ticker cannot be instantiated.";
    };
    c.RAF_SYNCHED = "synched";
    c.RAF = "raf";
    c.TIMEOUT = "timeout";
    c.useRAF=!1;
    c.timingMode = null;
    c.maxDelta = 60;
    c.removeEventListener = null;
    c.removeAllEventListeners = null;
    c.dispatchEvent = null;
    c.hasEventListener = null;
    c._listeners = null;
    createjs.EventDispatcher.initialize(c);
    c._addEventListener = c.addEventListener;
    c.addEventListener = function() {
        !c._inited && c.init();
        return c._addEventListener.apply(c, arguments)
    };
    c._paused=!1;
    c._inited=!1;
    c._startTime =
    0;
    c._pausedTime = 0;
    c._ticks = 0;
    c._pausedTicks = 0;
    c._interval = 50;
    c._lastTime = 0;
    c._times = [];
    c._tickTimes = [];
    c._timerId = null;
    c._raf=!0;
    c._isFirstInit=!0;
    c.init = function() {
        c._inited || (c._timerId = null, c._inited=!0, c._isFirstInit=!1, c._times = [], c._tickTimes = [], c._startTime = c._getTime(), c._times.push(c._lastTime = 0), c.setInterval(c._interval))
    };
    c.reset = function() {
        c._inited=!1;
        if (c._raf) {
            var b = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame ||
            window.msCancelAnimationFrame;
            b && b(c._timerId)
        } else 
            clearTimeout(c._timerId)
    };
    c.setInterval = function(b) {
        c._interval = b;
        c._inited && c._setupTick()
    };
    c.getInterval = function() {
        return c._interval
    };
    c.setFPS = function(b) {
        c.setInterval(1E3 / b)
    };
    c.getFPS = function() {
        return 1E3 / c._interval
    };
    c.getMeasuredTickTime = function(b) {
        var a = 0, d = c._tickTimes;
        if (1 > d.length)
            return -1;
        b = Math.min(d.length, b || c.getFPS() | 0);
        for (var e = 0; e < b; e++)
            a += d[e];
        return a / b
    };
    c.getMeasuredFPS = function(b) {
        var a = c._times;
        if (2 > a.length)
            return -1;
        b = Math.min(a.length-1, b || c.getFPS() | 0);
        return 1E3 / ((a[0] - a[b]) / b)
    };
    c.setPaused = function(b) {
        c._paused = b
    };
    c.getPaused = function() {
        return c._paused
    };
    c.getTime = function(b) {
        return c._getTime() - c._startTime - (b ? c._pausedTime : 0)
    };
    c.getEventTime = function(b) {
        return (c._lastTime || c._startTime) - (b ? c._pausedTime : 0)
    };
    c.getTicks = function(b) {
        return c._ticks - (b ? c._pausedTicks : 0)
    };
    c._handleSynch = function() {
        var b = c._getTime() - c._startTime;
        c._timerId = null;
        c._setupTick();
        b - c._lastTime >= 0.97 * (c._interval-1) && c._tick()
    };
    c._handleRAF = function() {
        c._timerId = null;
        c._setupTick();
        c._tick()
    };
    c._handleTimeout = function() {
        c._timerId = null;
        c._setupTick();
        c._tick()
    };
    c._setupTick = function() {
        if (null != c._timerId)
            trace("duplicate");
        else {
            var b = c.timingMode || c.useRAF && c.RAF_SYNCHED;
            if (b == c.RAF_SYNCHED || b == c.RAF) {
                var a = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;
                if (a) {
                    c._timerId = a(b == c.RAF ? c._handleRAF : c._handleSynch);
                    c._raf=!0;
                    return 
                }
            }
            c._raf=!1;
            c._timerId = setTimeout(c._handleTimeout, c._interval)
        }
    };
    c._tick = function() {
        var b = c._getTime() - c._startTime, a = b - c._lastTime, d = c._paused;
        c._ticks++;
        d && (c._pausedTicks++, c._pausedTime += a);
        c._lastTime = b;
        if (c.hasEventListener("tick")) {
            var e = new createjs.Event("tick"), f = c.maxDelta;
            e.delta = f && a > f ? f : a;
            e.paused = d;
            e.time = b;
            e.runTime = b - c._pausedTime;
            c.dispatchEvent(e)
        }
        for (c._tickTimes.unshift(c._getTime() - b); 100 < c._tickTimes.length;)
            c._tickTimes.pop();
        for (c._times.unshift(b); 100 < c._times.length;)
            c._times.pop()
    };
    var a = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);
    c._getTime = function() {
        return a && a.call(performance) || (new Date).getTime()
    };
    createjs.Ticker = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, d, c, f, g, h, m, n, w) {
        this.initialize(b, a, d, c, f, g, h, m, n, w)
    }, a = c.prototype = new createjs.Event;
    a.stageX = 0;
    a.stageY = 0;
    a.rawX = 0;
    a.rawY = 0;
    a.nativeEvent = null;
    a.pointerID = 0;
    a.primary=!1;
    a.addEventListener = null;
    a.removeEventListener = null;
    a.removeAllEventListeners = null;
    a.dispatchEvent = null;
    a.hasEventListener = null;
    a._listeners = null;
    createjs.EventDispatcher.initialize(a);
    a.Event_initialize = a.initialize;
    a.initialize = function(b, a, d, c, f, g, h, m, n, w) {
        this.Event_initialize(b, a, d);
        this.stageX =
        c;
        this.stageY = f;
        this.nativeEvent = g;
        this.pointerID = h;
        this.primary = m;
        this.rawX = null == n ? c : n;
        this.rawY = null == w ? f : w
    };
    a.clone = function() {
        return new c(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.target, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY)
    };
    a.toString = function() {
        return "[MouseEvent (type=" + this.type + " stageX=" + this.stageX + " stageY=" + this.stageY + ")]"
    };
    createjs.MouseEvent = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, d, c, f, g) {
        this.initialize(b, a, d, c, f, g)
    }, a = c.prototype;
    c.identity = null;
    c.DEG_TO_RAD = Math.PI / 180;
    a.a = 1;
    a.b = 0;
    a.c = 0;
    a.d = 1;
    a.tx = 0;
    a.ty = 0;
    a.alpha = 1;
    a.shadow = null;
    a.compositeOperation = null;
    a.initialize = function(b, a, d, c, f, g) {
        this.a = null == b ? 1 : b;
        this.b = a || 0;
        this.c = d || 0;
        this.d = null == c ? 1 : c;
        this.tx = f || 0;
        this.ty = g || 0;
        return this
    };
    a.prepend = function(b, a, d, c, f, g) {
        var h = this.tx;
        if (1 != b || 0 != a || 0 != d || 1 != c) {
            var m = this.a, n = this.c;
            this.a = m * b + this.b * d;
            this.b = m * a + this.b * c;
            this.c = n * b + this.d *
            d;
            this.d = n * a + this.d * c
        }
        this.tx = h * b + this.ty * d + f;
        this.ty = h * a + this.ty * c + g;
        return this
    };
    a.append = function(b, a, d, c, f, g) {
        var h = this.a, m = this.b, n = this.c, w = this.d;
        this.a = b * h + a * n;
        this.b = b * m + a * w;
        this.c = d * h + c * n;
        this.d = d * m + c * w;
        this.tx = f * h + g * n + this.tx;
        this.ty = f * m + g * w + this.ty;
        return this
    };
    a.prependMatrix = function(b) {
        this.prepend(b.a, b.b, b.c, b.d, b.tx, b.ty);
        this.prependProperties(b.alpha, b.shadow, b.compositeOperation);
        return this
    };
    a.appendMatrix = function(b) {
        this.append(b.a, b.b, b.c, b.d, b.tx, b.ty);
        this.appendProperties(b.alpha,
        b.shadow, b.compositeOperation);
        return this
    };
    a.prependTransform = function(b, a, d, e, f, g, h, m, n) {
        if (f%360) {
            var w = f * c.DEG_TO_RAD;
            f = Math.cos(w);
            w = Math.sin(w)
        } else 
            f = 1, w = 0;
        if (m || n)
            this.tx -= m, this.ty -= n;
        g || h ? (g*=c.DEG_TO_RAD, h*=c.DEG_TO_RAD, this.prepend(f * d, w * d, - w * e, f * e, 0, 0), this.prepend(Math.cos(h), Math.sin(h), - Math.sin(g), Math.cos(g), b, a)) : this.prepend(f * d, w * d, - w * e, f * e, b, a);
        return this
    };
    a.appendTransform = function(b, a, d, e, f, g, h, m, n) {
        if (f%360) {
            var w = f * c.DEG_TO_RAD;
            f = Math.cos(w);
            w = Math.sin(w)
        } else 
            f = 1, w = 0;
        g ||
        h ? (g*=c.DEG_TO_RAD, h*=c.DEG_TO_RAD, this.append(Math.cos(h), Math.sin(h), - Math.sin(g), Math.cos(g), b, a), this.append(f * d, w * d, - w * e, f * e, 0, 0)) : this.append(f * d, w * d, - w * e, f * e, b, a);
        if (m || n)
            this.tx -= m * this.a + n * this.c, this.ty -= m * this.b + n * this.d;
        return this
    };
    a.rotate = function(b) {
        var a = Math.cos(b);
        b = Math.sin(b);
        var d = this.a, c = this.c, f = this.tx;
        this.a = d * a - this.b * b;
        this.b = d * b + this.b * a;
        this.c = c * a - this.d * b;
        this.d = c * b + this.d * a;
        this.tx = f * a - this.ty * b;
        this.ty = f * b + this.ty * a;
        return this
    };
    a.skew = function(b, a) {
        b*=c.DEG_TO_RAD;
        a*=c.DEG_TO_RAD;
        this.append(Math.cos(a), Math.sin(a), - Math.sin(b), Math.cos(b), 0, 0);
        return this
    };
    a.scale = function(b, a) {
        this.a*=b;
        this.d*=a;
        this.c*=b;
        this.b*=a;
        this.tx*=b;
        this.ty*=a;
        return this
    };
    a.translate = function(b, a) {
        this.tx += b;
        this.ty += a;
        return this
    };
    a.identity = function() {
        this.alpha = this.a = this.d = 1;
        this.b = this.c = this.tx = this.ty = 0;
        this.shadow = this.compositeOperation = null;
        return this
    };
    a.invert = function() {
        var b = this.a, a = this.b, d = this.c, c = this.d, f = this.tx, g = b * c - a * d;
        this.a = c / g;
        this.b =- a / g;
        this.c =- d /
        g;
        this.d = b / g;
        this.tx = (d * this.ty - c * f) / g;
        this.ty =- (b * this.ty - a * f) / g;
        return this
    };
    a.isIdentity = function() {
        return 0 == this.tx && 0 == this.ty && 1 == this.a && 0 == this.b && 0 == this.c && 1 == this.d
    };
    a.transformPoint = function(b, a, d) {
        d = d || {};
        d.x = b * this.a + a * this.c + this.tx;
        d.y = b * this.b + a * this.d + this.ty;
        return d
    };
    a.decompose = function(b) {
        null == b && (b = {});
        b.x = this.tx;
        b.y = this.ty;
        b.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);
        b.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);
        var a = Math.atan2( - this.c, this.d), d = Math.atan2(this.b,
        this.a);
        a == d ? (b.rotation = d / c.DEG_TO_RAD, 0 > this.a && 0 <= this.d && (b.rotation += 0 >= b.rotation ? 180 : -180), b.skewX = b.skewY = 0) : (b.skewX = a / c.DEG_TO_RAD, b.skewY = d / c.DEG_TO_RAD);
        return b
    };
    a.reinitialize = function(b, a, d, c, f, g, h, m, n) {
        this.initialize(b, a, d, c, f, g);
        this.alpha = null == h ? 1 : h;
        this.shadow = m;
        this.compositeOperation = n;
        return this
    };
    a.copy = function(b) {
        return this.reinitialize(b.a, b.b, b.c, b.d, b.tx, b.ty, b.alpha, b.shadow, b.compositeOperation)
    };
    a.appendProperties = function(b, a, d) {
        this.alpha*=b;
        this.shadow = a || this.shadow;
        this.compositeOperation = d || this.compositeOperation;
        return this
    };
    a.prependProperties = function(b, a, d) {
        this.alpha*=b;
        this.shadow = this.shadow || a;
        this.compositeOperation = this.compositeOperation || d;
        return this
    };
    a.clone = function() {
        return (new c).copy(this)
    };
    a.toString = function() {
        return "[Matrix2D (a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + ")]"
    };
    c.identity = new c;
    createjs.Matrix2D = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a) {
        this.initialize(b, a)
    }, a = c.prototype;
    a.x = 0;
    a.y = 0;
    a.initialize = function(b, a) {
        this.x = null == b ? 0 : b;
        this.y = null == a ? 0 : a;
        return this
    };
    a.copy = function(b) {
        return this.initialize(b.x, b.y)
    };
    a.clone = function() {
        return new c(this.x, this.y)
    };
    a.toString = function() {
        return "[Point (x=" + this.x + " y=" + this.y + ")]"
    };
    createjs.Point = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, d, c) {
        this.initialize(b, a, d, c)
    }, a = c.prototype;
    a.x = 0;
    a.y = 0;
    a.width = 0;
    a.height = 0;
    a.initialize = function(b, a, d, c) {
        this.x = b || 0;
        this.y = a || 0;
        this.width = d || 0;
        this.height = c || 0;
        return this
    };
    a.copy = function(b) {
        return this.initialize(b.x, b.y, b.width, b.height)
    };
    a.clone = function() {
        return new c(this.x, this.y, this.width, this.height)
    };
    a.toString = function() {
        return "[Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")]"
    };
    createjs.Rectangle = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, d, c, f, g, h) {
        this.initialize(b, a, d, c, f, g, h)
    }, a = c.prototype;
    a.target = null;
    a.overLabel = null;
    a.outLabel = null;
    a.downLabel = null;
    a.play=!1;
    a._isPressed=!1;
    a._isOver=!1;
    a.initialize = function(b, a, d, c, f, g, h) {
        b.addEventListener && (this.target = b, b.cursor = "pointer", this.overLabel = null == d ? "over" : d, this.outLabel = null == a ? "out" : a, this.downLabel = null == c ? "down" : c, this.play = f, this.setEnabled(!0), this.handleEvent({}), g && (h && (g.actionsEnabled=!1, g.gotoAndStop && g.gotoAndStop(h)), b.hitArea = g))
    };
    a.setEnabled = function(b) {
        var a = this.target;
        b ? (a.addEventListener("rollover", this), a.addEventListener("rollout", this), a.addEventListener("mousedown", this), a.addEventListener("pressup", this)) : (a.removeEventListener("rollover", this), a.removeEventListener("rollout", this), a.removeEventListener("mousedown", this), a.removeEventListener("pressup", this))
    };
    a.toString = function() {
        return "[ButtonHelper]"
    };
    a.handleEvent = function(b) {
        var a = this.target;
        b = b.type;
        "mousedown" == b ? (this._isPressed=!0, b = this.downLabel) : "pressup" ==
        b ? (this._isPressed=!1, b = this._isOver ? this.overLabel : this.outLabel) : "rollover" == b ? (this._isOver=!0, b = this._isPressed ? this.downLabel : this.overLabel) : (this._isOver=!1, b = this._isPressed ? this.overLabel : this.outLabel);
        this.play ? a.gotoAndPlay && a.gotoAndPlay(b) : a.gotoAndStop && a.gotoAndStop(b)
    };
    createjs.ButtonHelper = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, d, c) {
        this.initialize(b, a, d, c)
    }, a = c.prototype;
    c.identity = null;
    a.color = null;
    a.offsetX = 0;
    a.offsetY = 0;
    a.blur = 0;
    a.initialize = function(b, a, d, c) {
        this.color = b;
        this.offsetX = a;
        this.offsetY = d;
        this.blur = c
    };
    a.toString = function() {
        return "[Shadow]"
    };
    a.clone = function() {
        return new c(this.color, this.offsetX, this.offsetY, this.blur)
    };
    c.identity = new c("transparent", 0, 0, 0);
    createjs.Shadow = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.EventDispatcher;
    a.complete=!0;
    a.framerate = 0;
    a._animations = null;
    a._frames = null;
    a._images = null;
    a._data = null;
    a._loadCount = 0;
    a._frameHeight = 0;
    a._frameWidth = 0;
    a._numFrames = 0;
    a._regX = 0;
    a._regY = 0;
    a.initialize = function(b) {
        var a, d, c;
        if (null != b) {
            this.framerate = b.framerate || 0;
            if (b.images && 0 < (d = b.images.length))
                for (c = this._images = [], a = 0; a < d; a++) {
                    var f = b.images[a];
                    if ("string" == typeof f) {
                        var g = f, f = document.createElement("img");
                        f.src = g
                    }
                    c.push(f);
                    f.getContext || f.complete || (this._loadCount++, this.complete=!1, function(b) {
                        f.onload = function() {
                            b._handleImageLoad()
                        }
                    }(this))
                }
            if (null != b.frames)
                if (b.frames instanceof Array)
                    for (this._frames = [], c = b.frames, a = 0, d = c.length; a < d; a++)
                        g = c[a], this._frames.push({
                image: this._images[g[4] ? g[4]: 0],
                rect: new createjs.Rectangle(g[0], g[1], g[2], g[3]),
                regX: g[5] || 0,
                regY: g[6] || 0
            });
            else 
                d = b.frames, this._frameWidth = d.width, this._frameHeight = d.height, this._regX = d.regX || 0, this._regY = d.regY || 0, this._numFrames = d.count, 0 == this._loadCount &&
            this._calculateFrames();
            this._animations = [];
            if (null != (d = b.animations)) {
                this._data = {};
                for (var h in d) {
                    b = {
                        name: h
                    };
                    g = d[h];
                    if ("number" == typeof g)
                        c = b.frames = [g];
                    else if (g instanceof Array)
                        if (1 == g.length)
                            b.frames = [g[0]];
                        else 
                            for (b.speed = g[3], b.next = g[2], c = b.frames = [], a = g[0]; a <= g[1]; a++)
                                c.push(a);
                    else 
                        b.speed = g.speed, b.next = g.next, a = g.frames, c = b.frames = "number" == typeof a ? [a] : a.slice(0);
                    if (!0 === b.next || void 0 === b.next)
                        b.next = h;
                    if (!1 === b.next || 2 > c.length && b.next == h)
                        b.next = null;
                    b.speed || (b.speed = 1);
                    this._animations.push(h);
                    this._data[h] = b
                }
            }
        }
    };
    a.getNumFrames = function(b) {
        if (null == b)
            return this._frames ? this._frames.length : this._numFrames;
        b = this._data[b];
        return null == b ? 0 : b.frames.length
    };
    a.getAnimations = function() {
        return this._animations.slice(0)
    };
    a.getAnimation = function(b) {
        return this._data[b]
    };
    a.getFrame = function(b) {
        var a;
        return this._frames && (a = this._frames[b]) ? a : null
    };
    a.getFrameBounds = function(b, a) {
        var d = this.getFrame(b);
        return d ? (a || new createjs.Rectangle).initialize( - d.regX, - d.regY, d.rect.width, d.rect.height) : null
    };
    a.toString = function() {
        return "[SpriteSheet]"
    };
    a.clone = function() {
        var b = new c;
        b.complete = this.complete;
        b._animations = this._animations;
        b._frames = this._frames;
        b._images = this._images;
        b._data = this._data;
        b._frameHeight = this._frameHeight;
        b._frameWidth = this._frameWidth;
        b._numFrames = this._numFrames;
        b._loadCount = this._loadCount;
        return b
    };
    a._handleImageLoad = function() {
        0==--this._loadCount && (this._calculateFrames(), this.complete=!0, this.dispatchEvent("complete"))
    };
    a._calculateFrames = function() {
        if (!this._frames &&
        0 != this._frameWidth) {
            this._frames = [];
            for (var b = 0, a = this._frameWidth, d = this._frameHeight, c = 0, f = this._images; c < f.length; c++) {
                for (var g = f[c], h = (g.width + 1) / a | 0, m = (g.height + 1) / d | 0, m = 0 < this._numFrames ? Math.min(this._numFrames - b, h * m) : h * m, n = 0; n < m; n++)
                    this._frames.push({
                        image: g,
                        rect: new createjs.Rectangle(n%h * a, (n / h | 0) * d, a, d),
                        regX: this._regX,
                        regY: this._regY
                    });
                b += m
            }
            this._numFrames = b
        }
    };
    createjs.SpriteSheet = c
})();
this.createjs = this.createjs || {};
(function() {
    function c(b, a, d) {
        this.f = b;
        this.params = a;
        this.path = null == d?!0 : d
    }
    c.prototype.exec = function(b) {
        this.f.apply(b, this.params)
    };
    var a = function() {
        this.initialize()
    }, b = a.prototype;
    a.getRGB = function(b, a, d, c) {
        null != b && null == d && (c = a, d = b & 255, a = b>>8 & 255, b = b>>16 & 255);
        return null == c ? "rgb(" + b + "," + a + "," + d + ")" : "rgba(" + b + "," + a + "," + d + "," + c + ")"
    };
    a.getHSL = function(b, a, d, c) {
        return null == c ? "hsl(" + b%360 + "," + a + "%," + d + "%)" : "hsla(" + b%360 + "," + a + "%," + d + "%," + c + ")"
    };
    a.Command = c;
    a.BASE_64 = {
        A: 0,
        B: 1,
        C: 2,
        D: 3,
        E: 4,
        F: 5,
        G: 6,
        H: 7,
        I: 8,
        J: 9,
        K: 10,
        L: 11,
        M: 12,
        N: 13,
        O: 14,
        P: 15,
        Q: 16,
        R: 17,
        S: 18,
        T: 19,
        U: 20,
        V: 21,
        W: 22,
        X: 23,
        Y: 24,
        Z: 25,
        a: 26,
        b: 27,
        c: 28,
        d: 29,
        e: 30,
        f: 31,
        g: 32,
        h: 33,
        i: 34,
        j: 35,
        k: 36,
        l: 37,
        m: 38,
        n: 39,
        o: 40,
        p: 41,
        q: 42,
        r: 43,
        s: 44,
        t: 45,
        u: 46,
        v: 47,
        w: 48,
        x: 49,
        y: 50,
        z: 51,
        0: 52,
        1: 53,
        2: 54,
        3: 55,
        4: 56,
        5: 57,
        6: 58,
        7: 59,
        8: 60,
        9: 61,
        "+": 62,
        "/": 63
    };
    a.STROKE_CAPS_MAP = ["butt", "round", "square"];
    a.STROKE_JOINTS_MAP = ["miter", "round", "bevel"];
    var k = createjs.createCanvas ? createjs.createCanvas(): document.createElement("canvas");
    if (k.getContext) {
        var d = a._ctx = k.getContext("2d");
        a.beginCmd = new c(d.beginPath, [], !1);
        a.fillCmd = new c(d.fill, [], !1);
        a.strokeCmd = new c(d.stroke, [], !1);
        k.width = k.height = 1
    }
    b._strokeInstructions = null;
    b._strokeStyleInstructions = null;
    b._strokeIgnoreScale=!1;
    b._fillInstructions = null;
    b._fillMatrix = null;
    b._instructions = null;
    b._oldInstructions = null;
    b._activeInstructions = null;
    b._active=!1;
    b._dirty=!1;
    b.initialize = function() {
        this.clear();
        this._ctx = a._ctx
    };
    b.isEmpty = function() {
        return !(this._instructions.length || this._oldInstructions.length || this._activeInstructions.length)
    };
    b.draw = function(b) {
        this._dirty && this._updateInstructions();
        for (var a = this._instructions, d = 0, c = a.length; d < c; d++)
            a[d].exec(b)
    };
    b.drawAsPath = function(b) {
        this._dirty && this._updateInstructions();
        for (var a, d = this._instructions, c = 0, k = d.length; c < k; c++)((a = d[c]).path || 0 == c) 
            && a.exec(b)
    };
    b.moveTo = function(b, a) {
        this._activeInstructions.push(new c(this._ctx.moveTo, [b, a]));
        return this
    };
    b.lineTo = function(b, a) {
        this._dirty = this._active=!0;
        this._activeInstructions.push(new c(this._ctx.lineTo, [b, a]));
        return this
    };
    b.arcTo =
    function(b, a, d, k, m) {
        this._dirty = this._active=!0;
        this._activeInstructions.push(new c(this._ctx.arcTo, [b, a, d, k, m]));
        return this
    };
    b.arc = function(b, a, d, k, m, n) {
        this._dirty = this._active=!0;
        null == n && (n=!1);
        this._activeInstructions.push(new c(this._ctx.arc, [b, a, d, k, m, n]));
        return this
    };
    b.quadraticCurveTo = function(b, a, d, k) {
        this._dirty = this._active=!0;
        this._activeInstructions.push(new c(this._ctx.quadraticCurveTo, [b, a, d, k]));
        return this
    };
    b.bezierCurveTo = function(b, a, d, k, m, n) {
        this._dirty = this._active=!0;
        this._activeInstructions.push(new c(this._ctx.bezierCurveTo,
        [b, a, d, k, m, n]));
        return this
    };
    b.rect = function(b, a, d, k) {
        this._dirty = this._active=!0;
        this._activeInstructions.push(new c(this._ctx.rect, [b, a, d, k]));
        return this
    };
    b.closePath = function() {
        this._active && (this._dirty=!0, this._activeInstructions.push(new c(this._ctx.closePath, [])));
        return this
    };
    b.clear = function() {
        this._instructions = [];
        this._oldInstructions = [];
        this._activeInstructions = [];
        this._strokeStyleInstructions = this._strokeInstructions = this._fillInstructions = this._fillMatrix = null;
        this._active = this._dirty =
        this._strokeIgnoreScale=!1;
        return this
    };
    b.beginFill = function(b) {
        this._active && this._newPath();
        this._fillInstructions = b ? [new c(this._setProp, ["fillStyle", b], !1)] : null;
        this._fillMatrix = null;
        return this
    };
    b.beginLinearGradientFill = function(b, a, d, k, m, n) {
        this._active && this._newPath();
        d = this._ctx.createLinearGradient(d, k, m, n);
        k = 0;
        for (m = b.length; k < m; k++)
            d.addColorStop(a[k], b[k]);
        this._fillInstructions = [new c(this._setProp, ["fillStyle", d], !1)];
        this._fillMatrix = null;
        return this
    };
    b.beginRadialGradientFill = function(b,
    a, d, k, m, n, w, t) {
        this._active && this._newPath();
        d = this._ctx.createRadialGradient(d, k, m, n, w, t);
        k = 0;
        for (m = b.length; k < m; k++)
            d.addColorStop(a[k], b[k]);
        this._fillInstructions = [new c(this._setProp, ["fillStyle", d], !1)];
        this._fillMatrix = null;
        return this
    };
    b.beginBitmapFill = function(b, a, d) {
        this._active && this._newPath();
        b = this._ctx.createPattern(b, a || "");
        this._fillInstructions = [new c(this._setProp, ["fillStyle", b], !1)];
        this._fillMatrix = d ? [d.a, d.b, d.c, d.d, d.tx, d.ty] : null;
        return this
    };
    b.endFill = function() {
        return this.beginFill()
    };
    b.setStrokeStyle = function(b, d, k, h, m) {
        this._active && this._newPath();
        this._strokeStyleInstructions = [new c(this._setProp, ["lineWidth", null == b ? "1": b], !1), new c(this._setProp, ["lineCap", null == d ? "butt": isNaN(d) ? d: a.STROKE_CAPS_MAP[d]], !1), new c(this._setProp, ["lineJoin", null == k ? "miter": isNaN(k) ? k: a.STROKE_JOINTS_MAP[k]], !1), new c(this._setProp, ["miterLimit", null == h ? "10": h], !1)];
        this._strokeIgnoreScale = m;
        return this
    };
    b.beginStroke = function(b) {
        this._active && this._newPath();
        this._strokeInstructions = b ? [new c(this._setProp,
        ["strokeStyle", b], !1)] : null;
        return this
    };
    b.beginLinearGradientStroke = function(b, a, d, k, m, n) {
        this._active && this._newPath();
        d = this._ctx.createLinearGradient(d, k, m, n);
        k = 0;
        for (m = b.length; k < m; k++)
            d.addColorStop(a[k], b[k]);
        this._strokeInstructions = [new c(this._setProp, ["strokeStyle", d], !1)];
        return this
    };
    b.beginRadialGradientStroke = function(b, a, d, k, m, n, w, t) {
        this._active && this._newPath();
        d = this._ctx.createRadialGradient(d, k, m, n, w, t);
        k = 0;
        for (m = b.length; k < m; k++)
            d.addColorStop(a[k], b[k]);
        this._strokeInstructions =
        [new c(this._setProp, ["strokeStyle", d], !1)];
        return this
    };
    b.beginBitmapStroke = function(b, a) {
        this._active && this._newPath();
        var d = this._ctx.createPattern(b, a || "");
        this._strokeInstructions = [new c(this._setProp, ["strokeStyle", d], !1)];
        return this
    };
    b.endStroke = function() {
        this.beginStroke();
        return this
    };
    b.curveTo = b.quadraticCurveTo;
    b.drawRect = b.rect;
    b.drawRoundRect = function(b, a, d, c, k) {
        this.drawRoundRectComplex(b, a, d, c, k, k, k, k);
        return this
    };
    b.drawRoundRectComplex = function(b, a, d, k, m, n, w, t) {
        var v = (d < k ? d : k) /
        2, x = 0, y = 0, p = 0, C = 0;
        0 > m && (m*=x =- 1);
        m > v && (m = v);
        0 > n && (n*=y =- 1);
        n > v && (n = v);
        0 > w && (w*=p =- 1);
        w > v && (w = v);
        0 > t && (t*=C =- 1);
        t > v && (t = v);
        this._dirty = this._active=!0;
        var v = this._ctx.arcTo, B = this._ctx.lineTo;
        this._activeInstructions.push(new c(this._ctx.moveTo, [b + d - n, a]), new c(v, [b + d + n * y, a - n * y, b + d, a + n, n]), new c(B, [b + d, a + k - w]), new c(v, [b + d + w * p, a + k + w * p, b + d - w, a + k, w]), new c(B, [b + t, a + k]), new c(v, [b - t * C, a + k + t * C, b, a + k - t, t]), new c(B, [b, a + m]), new c(v, [b - m * x, a - m * x, b + m, a, m]), new c(this._ctx.closePath));
        return this
    };
    b.drawCircle =
    function(b, a, d) {
        this.arc(b, a, d, 0, 2 * Math.PI);
        return this
    };
    b.drawEllipse = function(b, a, d, k) {
        this._dirty = this._active=!0;
        var m = 0.5522848 * (d / 2), n = 0.5522848 * (k / 2), w = b + d, t = a + k;
        d = b + d / 2;
        k = a + k / 2;
        this._activeInstructions.push(new c(this._ctx.moveTo, [b, k]), new c(this._ctx.bezierCurveTo, [b, k - n, d - m, a, d, a]), new c(this._ctx.bezierCurveTo, [d + m, a, w, k - n, w, k]), new c(this._ctx.bezierCurveTo, [w, k + n, d + m, t, d, t]), new c(this._ctx.bezierCurveTo, [d - m, t, b, k + n, b, k]));
        return this
    };
    b.inject = function(b, a) {
        this._dirty = this._active =
        !0;
        this._activeInstructions.push(new c(b, [a]));
        return this
    };
    b.drawPolyStar = function(b, a, d, k, m, n) {
        this._dirty = this._active=!0;
        null == m && (m = 0);
        m = 1 - m;
        n = null == n ? 0 : n / (180 / Math.PI);
        var w = Math.PI / k;
        this._activeInstructions.push(new c(this._ctx.moveTo, [b + Math.cos(n) * d, a + Math.sin(n) * d]));
        for (var t = 0; t < k; t++)
            n += w, 1 != m && this._activeInstructions.push(new c(this._ctx.lineTo, [b + Math.cos(n) * d * m, a + Math.sin(n) * d * m])), n += w, this._activeInstructions.push(new c(this._ctx.lineTo, [b + Math.cos(n) * d, a + Math.sin(n) * d]));
        return this
    };
    b.decodePath = function(b) {
        for (var d = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath], c = [2, 2, 4, 6, 0], k = 0, m = b.length, n = [], w = 0, t = 0, v = a.BASE_64; k < m;) {
            var x = b.charAt(k), y = v[x], p = y>>3, C = d[p];
            if (!C || y & 3)
                throw "bad path data (@" + k + "): " + x;
            x = c[p];
            p || (w = t = 0);
            n.length = 0;
            k++;
            y = (y>>2 & 1) + 2;
            for (p = 0; p < x; p++) {
                var B = v[b.charAt(k)], H = B>>5?-1 : 1, B = (B & 31)<<6 | v[b.charAt(k + 1)];
                3 == y && (B = B<<6 | v[b.charAt(k + 2)]);
                B = H * B / 10;
                p%2 ? w = B += w : t = B += t;
                n[p] = B;
                k += y
            }
            C.apply(this, n)
        }
        return this
    };
    b.clone = function() {
        var b =
        new a;
        b._instructions = this._instructions.slice();
        b._activeInstructions = this._activeInstructions.slice();
        b._oldInstructions = this._oldInstructions.slice();
        this._fillInstructions && (b._fillInstructions = this._fillInstructions.slice());
        this._strokeInstructions && (b._strokeInstructions = this._strokeInstructions.slice());
        this._strokeStyleInstructions && (b._strokeStyleInstructions = this._strokeStyleInstructions.slice());
        b._active = this._active;
        b._dirty = this._dirty;
        b._fillMatrix = this._fillMatrix;
        b._strokeIgnoreScale =
        this._strokeIgnoreScale;
        return b
    };
    b.toString = function() {
        return "[Graphics]"
    };
    b.mt = b.moveTo;
    b.lt = b.lineTo;
    b.at = b.arcTo;
    b.bt = b.bezierCurveTo;
    b.qt = b.quadraticCurveTo;
    b.a = b.arc;
    b.r = b.rect;
    b.cp = b.closePath;
    b.c = b.clear;
    b.f = b.beginFill;
    b.lf = b.beginLinearGradientFill;
    b.rf = b.beginRadialGradientFill;
    b.bf = b.beginBitmapFill;
    b.ef = b.endFill;
    b.ss = b.setStrokeStyle;
    b.s = b.beginStroke;
    b.ls = b.beginLinearGradientStroke;
    b.rs = b.beginRadialGradientStroke;
    b.bs = b.beginBitmapStroke;
    b.es = b.endStroke;
    b.dr = b.drawRect;
    b.rr = b.drawRoundRect;
    b.rc = b.drawRoundRectComplex;
    b.dc = b.drawCircle;
    b.de = b.drawEllipse;
    b.dp = b.drawPolyStar;
    b.p = b.decodePath;
    b._updateInstructions = function() {
        this._instructions = this._oldInstructions.slice();
        this._instructions.push(a.beginCmd);
        this._appendInstructions(this._fillInstructions);
        this._appendInstructions(this._strokeInstructions);
        this._appendInstructions(this._strokeInstructions && this._strokeStyleInstructions);
        this._appendInstructions(this._activeInstructions);
        this._fillInstructions && this._appendDraw(a.fillCmd,
        this._fillMatrix);
        this._strokeInstructions && this._appendDraw(a.strokeCmd, this._strokeIgnoreScale && [1, 0, 0, 1, 0, 0])
    };
    b._appendInstructions = function(b) {
        b && this._instructions.push.apply(this._instructions, b)
    };
    b._appendDraw = function(b, a) {
        a ? this._instructions.push(new c(this._ctx.save, [], !1), new c(this._ctx.transform, a, !1), b, new c(this._ctx.restore, [], !1)) : this._instructions.push(b)
    };
    b._newPath = function() {
        this._dirty && this._updateInstructions();
        this._oldInstructions = this._instructions;
        this._activeInstructions =
        [];
        this._active = this._dirty=!1
    };
    b._setProp = function(b, a) {
        this[b] = a
    };
    createjs.Graphics = a
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.initialize()
    }, a = c.prototype = new createjs.EventDispatcher;
    c.suppressCrossDomainErrors=!1;
    var b = createjs.createCanvas ? createjs.createCanvas(): document.createElement("canvas");
    b.getContext && (c._hitTestCanvas = b, c._hitTestContext = b.getContext("2d"), b.width = b.height = 1);
    c._nextCacheID = 1;
    a.alpha = 1;
    a.cacheCanvas = null;
    a.id =- 1;
    a.mouseEnabled=!0;
    a.name = null;
    a.parent = null;
    a.regX = 0;
    a.regY = 0;
    a.rotation = 0;
    a.scaleX = 1;
    a.scaleY = 1;
    a.skewX = 0;
    a.skewY = 0;
    a.shadow = null;
    a.visible=!0;
    a.x = 0;
    a.y = 0;
    a.compositeOperation = null;
    a.snapToPixel=!1;
    a.filters = null;
    a.cacheID = 0;
    a.mask = null;
    a.hitArea = null;
    a.cursor = null;
    a._cacheOffsetX = 0;
    a._cacheOffsetY = 0;
    a._cacheScale = 1;
    a._cacheDataURLID = 0;
    a._cacheDataURL = null;
    a._matrix = null;
    a._rectangle = null;
    a._bounds = null;
    a.initialize = function() {
        this.id = createjs.UID.get();
        this._matrix = new createjs.Matrix2D;
        this._rectangle = new createjs.Rectangle
    };
    a.isVisible = function() {
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY)
    };
    a.draw = function(b, a) {
        var c =
        this.cacheCanvas;
        if (a ||!c)
            return !1;
        var f = this._cacheScale, g = this._cacheOffsetX, h = this._cacheOffsetY, m;
        if (m = this._applyFilterBounds(g, h, 0, 0))
            g = m.x, h = m.y;
        b.drawImage(c, g, h, c.width / f, c.height / f);
        return !0
    };
    a.updateContext = function(b) {
        var a, c = this.mask;
        c && c.graphics&&!c.graphics.isEmpty() && (a = c.getMatrix(c._matrix), b.transform(a.a, a.b, a.c, a.d, a.tx, a.ty), c.graphics.drawAsPath(b), b.clip(), a.invert(), b.transform(a.a, a.b, a.c, a.d, a.tx, a.ty));
        a = this._matrix.identity().appendTransform(this.x, this.y, this.scaleX,
        this.scaleY, this.rotation, this.skewX, this.skewY, this.regX, this.regY);
        createjs.Stage._snapToPixelEnabled && this.snapToPixel ? b.transform(a.a, a.b, a.c, a.d, a.tx + 0.5 | 0, a.ty + 0.5 | 0) : b.transform(a.a, a.b, a.c, a.d, a.tx, a.ty);
        b.globalAlpha*=this.alpha;
        this.compositeOperation && (b.globalCompositeOperation = this.compositeOperation);
        this.shadow && this._applyShadow(b, this.shadow)
    };
    a.cache = function(b, a, c, f, g) {
        g = g || 1;
        this.cacheCanvas || (this.cacheCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas"));
        this._cacheWidth = c;
        this._cacheHeight = f;
        this._cacheOffsetX = b;
        this._cacheOffsetY = a;
        this._cacheScale = g;
        this.updateCache()
    };
    a.updateCache = function(b) {
        var a = this.cacheCanvas, e = this._cacheScale, f = this._cacheOffsetX * e, g = this._cacheOffsetY * e, h = this._cacheWidth, m = this._cacheHeight, n;
        if (!a)
            throw "cache() must be called before updateCache()";
        var w = a.getContext("2d");
        if (n = this._applyFilterBounds(f, g, h, m))
            f = n.x, g = n.y, h = n.width, m = n.height;
        h = Math.ceil(h * e);
        m = Math.ceil(m * e);
        h != a.width || m != a.height ? (a.width = h, a.height =
        m) : b || w.clearRect(0, 0, h + 1, m + 1);
        w.save();
        w.globalCompositeOperation = b;
        w.setTransform(e, 0, 0, e, - f, - g);
        this.draw(w, !0);
        this._applyFilters();
        w.restore();
        this.cacheID = c._nextCacheID++
    };
    a.uncache = function() {
        this._cacheDataURL = this.cacheCanvas = null;
        this.cacheID = this._cacheOffsetX = this._cacheOffsetY = 0;
        this._cacheScale = 1
    };
    a.getCacheDataURL = function() {
        if (!this.cacheCanvas)
            return null;
        this.cacheID != this._cacheDataURLID && (this._cacheDataURL = this.cacheCanvas.toDataURL());
        return this._cacheDataURL
    };
    a.getStage = function() {
        for (var b =
        this; b.parent;)
            b = b.parent;
        return b instanceof createjs.Stage ? b : null
    };
    a.localToGlobal = function(b, a) {
        var c = this.getConcatenatedMatrix(this._matrix);
        if (null == c)
            return null;
        c.append(1, 0, 0, 1, b, a);
        return new createjs.Point(c.tx, c.ty)
    };
    a.globalToLocal = function(b, a) {
        var c = this.getConcatenatedMatrix(this._matrix);
        if (null == c)
            return null;
        c.invert();
        c.append(1, 0, 0, 1, b, a);
        return new createjs.Point(c.tx, c.ty)
    };
    a.localToLocal = function(b, a, c) {
        b = this.localToGlobal(b, a);
        return c.globalToLocal(b.x, b.y)
    };
    a.setTransform =
    function(b, a, c, f, g, h, m, n, w) {
        this.x = b || 0;
        this.y = a || 0;
        this.scaleX = null == c ? 1 : c;
        this.scaleY = null == f ? 1 : f;
        this.rotation = g || 0;
        this.skewX = h || 0;
        this.skewY = m || 0;
        this.regX = n || 0;
        this.regY = w || 0;
        return this
    };
    a.getMatrix = function(b) {
        return (b ? b.identity() : new createjs.Matrix2D).appendTransform(this.x, this.y, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.regX, this.regY).appendProperties(this.alpha, this.shadow, this.compositeOperation)
    };
    a.getConcatenatedMatrix = function(b) {
        b ? b.identity() : b = new createjs.Matrix2D;
        for (var a = this; null != a;)
            b.prependTransform(a.x, a.y, a.scaleX, a.scaleY, a.rotation, a.skewX, a.skewY, a.regX, a.regY).prependProperties(a.alpha, a.shadow, a.compositeOperation), a = a.parent;
        return b
    };
    a.hitTest = function(b, a) {
        var e = c._hitTestContext;
        e.setTransform(1, 0, 0, 1, - b, - a);
        this.draw(e);
        var f = this._testHit(e);
        e.setTransform(1, 0, 0, 1, 0, 0);
        e.clearRect(0, 0, 2, 2);
        return f
    };
    a.set = function(b) {
        for (var a in b)
            this[a] = b[a];
        return this
    };
    a.getBounds = function() {
        if (this._bounds)
            return this._rectangle.copy(this._bounds);
        var b = this.cacheCanvas;
        if (b) {
            var a = this._cacheScale;
            return this._rectangle.initialize(this._cacheOffsetX, this._cacheOffsetY, b.width / a, b.height / a)
        }
        return null
    };
    a.getTransformedBounds = function() {
        return this._getBounds()
    };
    a.setBounds = function(b, a, c, f) {
        null == b && (this._bounds = b);
        this._bounds = (this._bounds || new createjs.Rectangle).initialize(b, a, c, f)
    };
    a.clone = function() {
        var b = new c;
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[DisplayObject (name=" + this.name + ")]"
    };
    a.cloneProps = function(b) {
        b.alpha =
        this.alpha;
        b.name = this.name;
        b.regX = this.regX;
        b.regY = this.regY;
        b.rotation = this.rotation;
        b.scaleX = this.scaleX;
        b.scaleY = this.scaleY;
        b.shadow = this.shadow;
        b.skewX = this.skewX;
        b.skewY = this.skewY;
        b.visible = this.visible;
        b.x = this.x;
        b.y = this.y;
        b._bounds = this._bounds;
        b.mouseEnabled = this.mouseEnabled;
        b.compositeOperation = this.compositeOperation
    };
    a._applyShadow = function(b, a) {
        a = a || Shadow.identity;
        b.shadowColor = a.color;
        b.shadowOffsetX = a.offsetX;
        b.shadowOffsetY = a.offsetY;
        b.shadowBlur = a.blur
    };
    a._tick = function(b) {
        var a =
        this._listeners;
        a && a.tick && (a = new createjs.Event("tick"), a.params = b, this._dispatchEvent(a, this, 2))
    };
    a._testHit = function(b) {
        try {
            var a = 1 < b.getImageData(0, 0, 1, 1).data[3]
        } catch (e) {
            if (!c.suppressCrossDomainErrors)
                throw "An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";
        }
        return a
    };
    a._applyFilters = function() {
        if (this.filters && 0 != this.filters.length && this.cacheCanvas)
            for (var b = this.filters.length, a = this.cacheCanvas.getContext("2d"),
            c = this.cacheCanvas.width, f = this.cacheCanvas.height, g = 0; g < b; g++)
                this.filters[g].applyFilter(a, 0, 0, c, f)
    };
    a._applyFilterBounds = function(b, a, c, f) {
        var g, h, m = this.filters;
        if (m && (h = m.length)) {
            for (m = 0; m < h; m++) {
                var n = this.filters[m];
                if (n = n.getBounds && n.getBounds())
                    g || (g = this._rectangle.initialize(b, a, c, f)), g.x += n.x, g.y += n.y, g.width += n.width, g.height += n.height
            }
            return g
        }
    };
    a._getBounds = function(b, a) {
        return this._transformBounds(this.getBounds(), b, a)
    };
    a._transformBounds = function(b, a, c) {
        if (!b)
            return b;
        var f = b.x,
        g = b.y, h = b.width, m = b.height, n = c ? this._matrix.identity(): this.getMatrix(this._matrix);
        (f || g) && n.appendTransform(0, 0, 1, 1, 0, 0, 0, - f, - g);
        a && n.prependMatrix(a);
        a = h * n.a;
        h*=n.b;
        c = m * n.c;
        var m = m * n.d, w = n.tx, n = n.ty, t = w, v = w, x = n, y = n;
        (f = a + w) < t ? t = f : f > v && (v = f);
        (f = a + c + w) < t ? t = f : f > v && (v = f);
        (f = c + w) < t ? t = f : f > v && (v = f);
        (g = h + n) < x ? x = g : g > y && (y = g);
        (g = h + m + n) < x ? x = g : g > y && (y = g);
        (g = m + n) < x ? x = g : g > y && (y = g);
        return b.initialize(t, x, v - t, y - x)
    };
    a.isRoot=!1;
    a.bounding_box = null;
    a.isCheckMouseWithDraw=!1;
    a.isOnlyBoundsCheck=!1;
    a.setBoundingBox =
    function(b, a, c, f) {
        return this.bounding_box = new createjs.Rectangle(b, a, c, f)
    };
    createjs.DisplayObject = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.initialize()
    }, a = c.prototype = new createjs.DisplayObject;
    a.children = null;
    a.mouseChildren=!0;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function() {
        this.DisplayObject_initialize();
        this.children = []
    };
    a.isVisible = function() {
        var b = this.cacheCanvas || this.children.length;
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY && b)
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        for (var c = this.children.slice(0),
        e = 0, f = c.length; e < f; e++) {
            var g = c[e];
            g.isVisible() && (b.save(), g.updateContext(b), g.draw(b), b.restore())
        }
        return !0
    };
    a.addChild = function(b) {
        if (null == b)
            return b;
        var a = arguments.length;
        if (1 < a) {
            for (var c = 0; c < a; c++)
                this.addChild(arguments[c]);
            return arguments[a-1]
        }
        b.parent && b.parent.removeChild(b);
        b.parent = this;
        this.children.push(b);
        return b
    };
    a.addChildAt = function(b, a) {
        var c = arguments.length, e = arguments[c-1];
        if (0 > e || e > this.children.length)
            return arguments[c-2];
        if (2 < c) {
            for (var f = 0; f < c-1; f++)
                this.addChildAt(arguments[f],
                e + f);
            return arguments[c-2]
        }
        b.parent && b.parent.removeChild(b);
        b.parent = this;
        this.children.splice(a, 0, b);
        return b
    };
    a.removeChild = function(b) {
        var a = arguments.length;
        if (1 < a) {
            for (var c=!0, e = 0; e < a; e++)
                c = c && this.removeChild(arguments[e]);
            return c
        }
        return this.removeChildAt(createjs.indexOf(this.children, b))
    };
    a.removeChildAt = function(b) {
        var a = arguments.length;
        if (1 < a) {
            for (var c = [], e = 0; e < a; e++)
                c[e] = arguments[e];
            c.sort(function(b, a) {
                return a - b
            });
            for (var f=!0, e = 0; e < a; e++)
                f = f && this.removeChildAt(c[e]);
            return f
        }
        if (0 >
        b || b > this.children.length-1)
            return !1;
        if (a = this.children[b])
            a.parent = null;
        this.children.splice(b, 1);
        return !0
    };
    a.removeAllChildren = function() {
        for (var b = this.children; b.length;)
            b.pop().parent = null
    };
    a.getChildAt = function(b) {
        return this.children[b]
    };
    a.getChildByName = function(b) {
        for (var a = this.children, c = 0, e = a.length; c < e; c++)
            if (a[c].name == b)
                return a[c];
        return null
    };
    a.sortChildren = function(b) {
        this.children.sort(b)
    };
    a.getChildIndex = function(b) {
        return createjs.indexOf(this.children, b)
    };
    a.getNumChildren = function() {
        return this.children.length
    };
    a.swapChildrenAt = function(b, a) {
        var c = this.children, e = c[b], f = c[a];
        e && f && (c[b] = f, c[a] = e)
    };
    a.swapChildren = function(b, a) {
        for (var c = this.children, e, f, g = 0, h = c.length; g < h && (c[g] == b && (e = g), c[g] == a && (f = g), null == e || null == f);
        g++);
        g != h && (c[e] = a, c[f] = b)
    };
    a.setChildIndex = function(b, a) {
        var c = this.children, e = c.length;
        if (!(b.parent != this || 0 > a || a >= e)) {
            for (var f = 0; f < e && c[f] != b; f++);
            f != e && f != a && (c.splice(f, 1), c.splice(a, 0, b))
        }
    };
    a.contains = function(b) {
        for (; b;) {
            if (b == this)
                return !0;
            b = b.parent
        }
        return !1
    };
    a.hitTest = function(b,
    a) {
        return null != this.getObjectUnderPoint(b, a)
    };
    a.getObjectsUnderPoint = function(b, a) {
        var c = [], e = this.localToGlobal(b, a);
        this._getObjectsUnderPoint(e.x, e.y, c);
        return c
    };
    a.getObjectUnderPoint = function(b, a) {
        var c = this.localToGlobal(b, a);
        return this._getObjectsUnderPoint(c.x, c.y)
    };
    a.DisplayObject_getBounds = a.getBounds;
    a.getBounds = function() {
        return this._getBounds(null, !0)
    };
    a.getTransformedBounds = function() {
        return this._getBounds()
    };
    a.clone = function(b) {
        var a = new c;
        this.cloneProps(a);
        if (b)
            for (var d = a.children =
            [], e = 0, f = this.children.length; e < f; e++) {
                var g = this.children[e].clone(b);
                g.parent = a;
                d.push(g)
            }
        return a
    };
    a.toString = function() {
        return "[Container (name=" + this.name + ")]"
    };
    a.DisplayObject__tick = a._tick;
    a._tick = function(b) {
        for (var a = this.children.length-1; 0 <= a; a--) {
            var c = this.children[a];
            c._tick && c._tick(b)
        }
        this.DisplayObject__tick(b)
    };
    a._getObjectsUnderPoint = function(b, a, d, e) {
        var f, g;
        f = this.children.length;
        if (!isDesktopBrowser) {
            var h, m;
            for (f -= 1; 0 <= f; f--)
                if (g = this.children[f], g.visible && g.mouseEnabled &&
                !(0 >= g.alpha)
                    ) {
                if (h = g.bounding_box) {
                    if (m = g.isRoot ? g.x + h.x <= b && b < g.x + h.x + h.width && g.y + h.y <= a && a < g.y + h.y + h.height : (g.x + h.x) * scaleFactor <= b && b < scaleFactor * (g.x + h.x + h.width) && (g.y + h.y) * scaleFactor <= a && a < scaleFactor * (g.y + h.y + h.height))
                        if (d) {
                            d.push(g);
                            continue
                        } else 
                            return g
                } else if (g.isCheckMouseWithDraw) {
                    m = createjs.DisplayObject._hitTestContext;
                    var n = this._matrix;
                    h = e && g.hitArea;
                    g.getConcatenatedMatrix(n);
                    h && (n.appendTransform(h.x, h.y, h.scaleX, h.scaleY, h.rotation, h.skewX, h.skewY, h.regX, h.regY), n.alpha =
                    h.alpha);
                    m.globalAlpha = n.alpha;
                    m.setTransform(n.a, n.b, n.c, n.d, n.tx - b, n.ty - a);
                    (h || g).draw(m);
                    if (!this._testHit(m))
                        continue;
                        m.setTransform(1, 0, 0, 1, 0, 0);
                        m.clearRect(0, 0, 2, 2);
                        if (d)
                            d.push(g);
                        else 
                            return e&&!this.mouseChildren ? this : g
                }
                if (g instanceof c && (g = g.isRoot ? g._getObjectsUnderPoint(b - (g.x + g.regX), a - (g.y + g.regY), d, e) : g._getObjectsUnderPoint(b - (g.x + g.regX) * scaleFactor, a - (g.y + g.regY) * scaleFactor, d, e)))
                    if (d)
                        d.push(g);
                    else 
                        return g
            }
            return null
        }
        m = createjs.DisplayObject._hitTestContext;
        n = this._matrix;
        for (f -=
        1; 0 <= f; f--)
            if (g = this.children[f], h = e && g.hitArea, g.visible && (h || g.isVisible()
                ) && (!e || g.mouseEnabled))if (!h && g instanceof c) {
            if (g = g._getObjectsUnderPoint(b, a, d, e), !d && g)
                return e&&!this.mouseChildren ? this : g
        } else {
            g.getConcatenatedMatrix(n);
            h && (n.appendTransform(h.x, h.y, h.scaleX, h.scaleY, h.rotation, h.skewX, h.skewY, h.regX, h.regY), n.alpha = h.alpha);
            if (g.isOnlyBoundsCheck) {
                if ((h = g.bounding_box)&&!((b - n.tx) / scaleFactor >= h.x && (b - n.tx) / scaleFactor <= h.x + h.width && (a - n.ty) / scaleFactor >= h.y && (a - n.ty) / scaleFactor <=
                h.y + h.height))
                    continue
            } else {
                m.globalAlpha = n.alpha;
                m.setTransform(n.a, n.b, n.c, n.d, n.tx - b, n.ty - a);
                (h || g).draw(m);
                if (!this._testHit(m))
                    continue;
                m.setTransform(1, 0, 0, 1, 0, 0);
                m.clearRect(0, 0, 2, 2)
            }
            if (d)
                d.push(g);
            else 
                return e&&!this.mouseChildren ? this : g
        }
        return null
    };
    a._getBounds = function(b, a) {
        var c = this.DisplayObject_getBounds();
        if (c)
            return this._transformBounds(c, b, a);
        var e, f, g, h, m = a ? this._matrix.identity(): this.getMatrix(this._matrix);
        b && m.prependMatrix(b);
        for (var n = this.children.length, w = 0; w < n; w++) {
            var t =
            this.children[w];
            if (t.visible && (c = t._getBounds(m))) {
                var t = c.x, v = c.y, x = t + c.width, y = v + c.height;
                if (t < e || null == e)
                    e = t;
                if (x > f || null == f)
                    f = x;
                if (v < g || null == g)
                    g = v;
                if (y > h || null == h)
                    h = y
            }
        }
        return null == f ? null : this._rectangle.initialize(e, g, f - e, h - g)
    };
    createjs.Container = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.Container;
    c._snapToPixelEnabled=!1;
    a.autoClear=!0;
    a.canvas = null;
    a.mouseX = 0;
    a.mouseY = 0;
    a.snapToPixelEnabled=!1;
    a.mouseInBounds=!1;
    a.tickOnUpdate=!0;
    a.mouseMoveOutside=!1;
    a.nextStage = null;
    a._pointerData = null;
    a._pointerCount = 0;
    a._primaryPointerID = null;
    a._mouseOverIntervalID = null;
    a.Container_initialize = a.initialize;
    a.initialize = function(b) {
        this.Container_initialize();
        this.canvas = "string" == typeof b ? document.getElementById(b) :
        b;
        this._pointerData = {};
        this.enableDOMEvents(!0)
    };
    a.update = function(b) {
        if (this.canvas) {
            this.tickOnUpdate && (this.dispatchEvent("tickstart"), this._tick(arguments.length ? arguments : null), this.dispatchEvent("tickend"));
            this.dispatchEvent("drawstart");
            c._snapToPixelEnabled = this.snapToPixelEnabled;
            this.autoClear && this.clear();
            var a = this.canvas.getContext("2d");
            a.save();
            this.updateContext(a);
            this.draw(a, !1);
            a.restore();
            this.dispatchEvent("drawend")
        }
    };
    a.handleEvent = function(b) {
        "tick" == b.type && this.update(b)
    };
    a.clear = function() {
        if (this.canvas) {
            var b = this.canvas.getContext("2d");
            b.setTransform(1, 0, 0, 1, 0, 0);
            b.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1)
        }
    };
    a.toDataURL = function(b, a) {
        a || (a = "image/png");
        var c = this.canvas.getContext("2d"), e = this.canvas.width, f = this.canvas.height, g;
        if (b) {
            g = c.getImageData(0, 0, e, f);
            var h = c.globalCompositeOperation;
            c.globalCompositeOperation = "destination-over";
            c.fillStyle = b;
            c.fillRect(0, 0, e, f)
        }
        var m = this.canvas.toDataURL(a);
        b && (c.clearRect(0, 0, e + 1, f + 1), c.putImageData(g,
        0, 0), c.globalCompositeOperation = h);
        return m
    };
    a.enableMouseOver = function(b) {
        this._mouseOverIntervalID && (clearInterval(this._mouseOverIntervalID), this._mouseOverIntervalID = null, 0 == b && this._testMouseOver(!0));
        if (null == b)
            b = 20;
        else if (0 >= b)
            return;
        var a = this;
        this._mouseOverIntervalID = setInterval(function() {
            a._testMouseOver()
        }, 1E3 / Math.min(50, b))
    };
    a.enableDOMEvents = function(b) {
        null == b && (b=!0);
        var a, c = this._eventListeners;
        if (!b && c) {
            for (a in c)
                b = c[a], b.t.removeEventListener(a, b.f, !1);
            this._eventListeners =
            null
        } else if (b&&!c && this.canvas) {
            b = window.addEventListener ? window : document;
            var e = this, c = this._eventListeners = {};
            c.mouseup = {
                t: b,
                f: function(b) {
                    e._handleMouseUp(b)
                }
            };
            c.mousemove = {
                t: b,
                f: function(b) {
                    e._handleMouseMove(b)
                }
            };
            c.dblclick = {
                t: b,
                f: function(b) {
                    e._handleDoubleClick(b)
                }
            };
            c.mousedown = {
                t: this.canvas,
                f: function(b) {
                    e._handleMouseDown(b)
                }
            };
            for (a in c)
                b = c[a], b.t.addEventListener(a, b.f, !1)
        }
    };
    a.clone = function() {
        var b = new c(null);
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[Stage (name=" + this.name +
        ")]"
    };
    a._getElementRect = function(b) {
        var a;
        try {
            a = b.getBoundingClientRect()
        } catch (c) {
            a = {
                top: b.offsetTop,
                left: b.offsetLeft,
                width: b.offsetWidth,
                height: b.offsetHeight
            }
        }
        var e = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0), f = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop || document.body.clientTop || 0), g = window.getComputedStyle ? getComputedStyle(b): b.currentStyle;
        b = parseInt(g.paddingLeft) + parseInt(g.borderLeftWidth);
        var h = parseInt(g.paddingTop) +
        parseInt(g.borderTopWidth), m = parseInt(g.paddingRight) + parseInt(g.borderRightWidth), g = parseInt(g.paddingBottom) + parseInt(g.borderBottomWidth);
        return {
            left: a.left + e + b,
            right: a.right + e - m,
            top: a.top + f + h,
            bottom: a.bottom + f - g
        }
    };
    a._getPointerData = function(b) {
        var a = this._pointerData[b];
        a || (a = this._pointerData[b] = {
            x: 0,
            y: 0
        }, null == this._primaryPointerID && (this._primaryPointerID = b));
        return a
    };
    a._handleMouseMove = function(b) {
        b || (b = window.event);
        this._handlePointerMove(-1, b, b.pageX, b.pageY)
    };
    a._handlePointerMove = function(b,
    a, c, e) {
        if (this.canvas) {
            var f = this._getPointerData(b), g = f.inBounds;
            this._updatePointerPosition(b, a, c, e);
            if (g || f.inBounds || this.mouseMoveOutside)
                -1 == b && f.inBounds==!g && this._dispatchMouseEvent(this, g ? "mouseleave" : "mouseenter", !1, b, f, a), this._dispatchMouseEvent(this, "stagemousemove", !1, b, f, a), this._dispatchMouseEvent(f.target, "pressmove", !0, b, f, a), (g = f.event) && g.hasEventListener("mousemove") && g.dispatchEvent(new createjs.MouseEvent("mousemove", !1, !1, f.x, f.y, a, b, b == this._primaryPointerID, f.rawX, f.rawY),
            oTarget), this.nextStage && this.nextStage._handlePointerMove(b, a, c, e)
        }
    };
    a._updatePointerPosition = function(b, a, c, e) {
        var f = this._getElementRect(this.canvas);
        c -= f.left;
        e -= f.top;
        var g = this.canvas.width, h = this.canvas.height;
        c/=(f.right - f.left) / g;
        e/=(f.bottom - f.top) / h;
        f = this._getPointerData(b);
        (f.inBounds = 0 <= c && 0 <= e && c <= g-1 && e <= h-1) ? (f.x = c, f.y = e) : this.mouseMoveOutside && (f.x = 0 > c ? 0 : c > g-1 ? g-1 : c, f.y = 0 > e ? 0 : e > h-1 ? h-1 : e);
        f.posEvtObj = a;
        f.rawX = c;
        f.rawY = e;
        b == this._primaryPointerID && (this.mouseX = f.x, this.mouseY = f.y,
        this.mouseInBounds = f.inBounds)
    };
    a._handleMouseUp = function(b) {
        this._handlePointerUp(-1, b, !1)
    };
    a._handlePointerUp = function(b, a, c) {
        var e = this._getPointerData(b), f = e.target;
        f && (f.hasEventListener("pressup") || f.hasEventListener("click")) ? (f.hasEventListener("click") && this._getObjectsUnderPoint(e.x, e.y, null, !0) == f && this._dispatchMouseEvent(f, "click", !0, b, e, a), this._dispatchMouseEvent(f, "pressup", !0, b, e, a)) : this._dispatchMouseEvent(this, "stagemouseup", !1, b, e, a);
        c ? (b == this._primaryPointerID && (this._primaryPointerID =
        null), delete this._pointerData[b]) : e.event = e.target = null;
        this.nextStage && this.nextStage._handlePointerUp(b, a, c)
    };
    a._handleMouseDown = function(b) {
        this._handlePointerDown(-1, b, b.pageX, b.pageY)
    };
    a._handlePointerDown = function(b, a, c, e) {
        null != e && this._updatePointerPosition(b, a, c, e);
        var f = this._getPointerData(b);
        f.target = this._getObjectsUnderPoint(f.x, f.y, null, !0);
        this._dispatchMouseEvent(f.target, "mousedown", !0, b, f, a);
        f.target && f.target.hasEventListener("mousedown") || this._dispatchMouseEvent(this, "stagemousedown",
        !1, b, f, a);
        this.nextStage && this.nextStage._handlePointerDown(b, a, c, e)
    };
    a._testMouseOver = function(b) {
        if (-1 == this._primaryPointerID && (b || this.mouseX != this._mouseOverX || this.mouseY != this._mouseOverY ||!this.mouseInBounds)) {
            var a = this._getPointerData(-1), c = a.posEvtObj, e, f =- 1, g = "", h;
            if (b || this.mouseInBounds && c && c.target == this.canvas)
                e = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, !0), this._mouseOverX = this.mouseX, this._mouseOverY = this.mouseY;
            b = this._mouseOverTarget || [];
            var m = b[b.length-1], n = this._mouseOverTarget =
            [];
            for (h = e; h;)
                n.unshift(h), null != h.cursor && (g = h.cursor), h = h.parent;
            this.canvas.style.cursor = g;
            g = 0;
            for (h = n.length; g < h && n[g] == b[g]; g++)
                f = g;
            m != e && this._dispatchMouseEvent(m, "mouseout", !0, -1, a, c);
            for (g = b.length-1; g > f; g--)
                this._dispatchMouseEvent(b[g], "rollout", !1, -1, a, c);
            for (g = n.length-1; g > f; g--)
                this._dispatchMouseEvent(n[g], "rollover", !1, -1, a, c);
            m != e && this._dispatchMouseEvent(e, "mouseover", !0, -1, a, c)
        }
    };
    a._handleDoubleClick = function(b) {
        var a = this._getPointerData(-1), c = this._getObjectsUnderPoint(a.x, a.y,
        null, !0);
        this._dispatchMouseEvent(c, "dblclick", !0, -1, a, b);
        this.nextStage && this.nextStage._handleDoubleClick(b)
    };
    a._dispatchMouseEvent = function(b, a, c, e, f, g) {
        b && (c || b.hasEventListener(a)) && (a = new createjs.MouseEvent(a, c, !1, f.x, f.y, g, e, e == this._primaryPointerID, f.rawX, f.rawY), b.dispatchEvent(a))
    };
    createjs.Stage = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.DisplayObject;
    a.image = null;
    a.snapToPixel=!0;
    a.sourceRect = null;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b) {
        this.DisplayObject_initialize();
        "string" == typeof b ? (this.image = document.createElement("img"), this.image.src = b) : this.image = b
    };
    a.isVisible = function() {
        var b = this.cacheCanvas || this.image && (this.image.complete || this.image.getContext || 2 <= this.image.readyState);
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX &&
        0 != this.scaleY && b)
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        var c = this.sourceRect;
        c ? b.drawImage(this.image, c.x, c.y, c.width, c.height, 0, 0, c.width, c.height) : b.drawImage(this.image, 0, 0);
        return !0
    };
    a.DisplayObject_getBounds = a.getBounds;
    a.getBounds = function() {
        var b = this.DisplayObject_getBounds();
        if (b)
            return b;
        b = this.sourceRect || this.image;
        return this.image && (this.image.complete || this.image.getContext || 2 <= this.image.readyState) ? this._rectangle.initialize(0,
        0, b.width, b.height) : null
    };
    a.clone = function() {
        var b = new c(this.image);
        this.sourceRect && (b.sourceRect = this.sourceRect.clone());
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[Bitmap (name=" + this.name + ")]"
    };
    createjs.Bitmap = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a) {
        this.initialize(b, a)
    }, a = c.prototype = new createjs.DisplayObject;
    a.currentFrame = 0;
    a.currentAnimation = null;
    a.paused=!0;
    a.spriteSheet = null;
    a.snapToPixel=!0;
    a.isLoop=!0;
    a.offset = 0;
    a.currentAnimationFrame = 0;
    a.framerate = 0;
    a._advanceCount = 0;
    a._animation = null;
    a._currentFrame = null;
    a.rectMask = null;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b, a) {
        this.DisplayObject_initialize();
        this.spriteSheet = b;
        a && this.gotoAndPlay(a)
    };
    a.isVisible = function() {
        var b = this.cacheCanvas ||
        this.spriteSheet.complete;
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY && b)
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        this._normalizeFrame();
        var c = this.spriteSheet.getFrame(this._currentFrame | 0);
        if (!c)
            return !1;
        var e = c.rect;
        this.rectMask ? b.drawImage(c.image, e.x + this.rectMask.x, e.y + this.rectMask.y, e.width + this.rectMask.width, e.height + this.rectMask.height, - c.regX + this.rectMask.x, - c.regY + this.rectMask.y, e.width + this.rectMask.width,
        e.height + this.rectMask.height) : 1 <= e.width && 1 <= e.height && b.drawImage(c.image, e.x, e.y, e.width, e.height, - c.regX, - c.regY, e.width, e.height);
        return !0
    };
    a.play = function() {
        this.paused=!1
    };
    a.stop = function() {
        this.paused=!0
    };
    a.gotoAndPlay = function(b) {
        this.paused=!1;
        this._goto(b)
    };
    a.gotoAndStop = function(b) {
        this.paused=!0;
        this._goto(b)
    };
    a.advance = function(b) {
        var a = this._animation && this._animation.speed || 1, c = this.framerate || this.spriteSheet.framerate;
        b = c && null != b ? b / (1E3 / c) : 1;
        this._animation ? this.currentAnimationFrame +=
        b * a : this._currentFrame += b * a;
        this._normalizeFrame()
    };
    a.DisplayObject_getBounds = a.getBounds;
    a.getBounds = function() {
        return this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle)
    };
    a.clone = function() {
        var b = new c(this.spriteSheet);
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[Sprite (name=" + this.name + ")]"
    };
    a.DisplayObject__tick = a._tick;
    a._tick = function(b) {
        this.paused || this.advance(b && b[0] && b[0].delta);
        this.DisplayObject__tick(b)
    };
    a._normalizeFrame =
    function() {
        var b = this._animation, a = this.paused, c = this._currentFrame, e = this.currentAnimationFrame, f;
        if (b)
            if (f = b.frames.length, (e | 0) >= f) {
            var g = b.next;
            if (!this._dispatchAnimationEnd(b, c, a, g, f-1)) {
                if (g && this.isLoop)
                    return this._goto(g, e - f);
                this.paused=!0;
                e = this.currentAnimationFrame = b.frames.length-1;
                this._currentFrame = b.frames[e]
            }
        } else 
            this._currentFrame = b.frames[e | 0];
        else if (f = this.spriteSheet.getNumFrames(), c >= f&&!this._dispatchAnimationEnd(b, c, a, f-1) && (this._currentFrame -= f) >= f)return this._normalizeFrame();
        this.currentFrame = this._currentFrame | 0
    };
    a._dispatchAnimationEnd = function(b, a, c, e, f) {
        var g = b ? b.name: null;
        if (this.hasEventListener("animationend")) {
            var h = new createjs.Event("animationend");
            h.name = g;
            h.next = e;
            this.dispatchEvent(h)
        }
        b = this._animation != b || this._currentFrame != a;
        b || c ||!this.paused || (this.currentAnimationFrame = f, b=!0);
        return b
    };
    a.DisplayObject_cloneProps = a.cloneProps;
    a.cloneProps = function(b) {
        this.DisplayObject_cloneProps(b);
        b.currentFrame = this.currentFrame;
        b._currentFrame = this._currentFrame;
        b.currentAnimation = this.currentAnimation;
        b.paused = this.paused;
        b._animation = this._animation;
        b.currentAnimationFrame = this.currentAnimationFrame;
        b.framerate = this.framerate
    };
    a._goto = function(b, a) {
        if (isNaN(b)) {
            var c = this.spriteSheet.getAnimation(b);
            c && (this.currentAnimationFrame = a || 0, this._animation = c, this.currentAnimation = b, this._normalizeFrame())
        } else 
            this.currentAnimationFrame = 0, this.currentAnimation = this._animation = null, this._currentFrame = b, this._normalizeFrame()
    };
    createjs.Sprite = c
})();
this.createjs = this.createjs || {};
(function() {
    if (!createjs.Sprite)
        throw "BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";
    (createjs.BitmapAnimation = function(c) {
        console.log("BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.");
        this.initialize(c)
    }).prototype = new createjs.Sprite
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.DisplayObject;
    a.graphics = null;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b) {
        this.DisplayObject_initialize();
        this.graphics = b ? b : new createjs.Graphics
    };
    a.isVisible = function() {
        var b = this.cacheCanvas || this.graphics&&!this.graphics.isEmpty();
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY && b)
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        this.graphics.draw(b);
        return !0
    };
    a.clone = function(b) {
        b = new c(b && this.graphics ? this.graphics.clone() : this.graphics);
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[Shape (name=" + this.name + ")]"
    };
    createjs.Shape = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c) {
        this.initialize(b, a, c)
    }, a = c.prototype = new createjs.DisplayObject, b = createjs.createCanvas ? createjs.createCanvas(): document.createElement("canvas");
    b.getContext && (c._workingContext = b.getContext("2d"), b.width = b.height = 1);
    c.H_OFFSETS = {
        start: 0,
        left: 0,
        center: -0.5,
        end: -1,
        right: -1
    };
    c.V_OFFSETS = {
        top: 0,
        hanging: -0.01,
        middle: -0.4,
        alphabetic: -0.8,
        ideographic: -0.85,
        bottom: -1
    };
    a.text = "";
    a.font = null;
    a.color = null;
    a.textAlign = "left";
    a.textBaseline = "top";
    a.maxWidth = null;
    a.outline = 0;
    a.lineHeight = 0;
    a.lineWidth = null;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b, a, c) {
        this.DisplayObject_initialize();
        this.text = b;
        this.font = a;
        this.color = c
    };
    a.isVisible = function() {
        var b = this.cacheCanvas || null != this.text && "" !== this.text;
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY && b)
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        var c = this.color || "#000";
        this.outline ? (b.strokeStyle = c, b.lineWidth = 1 * this.outline) : b.fillStyle =
        c;
        this._drawText(this._prepContext(b));
        return !0
    };
    a.getMeasuredWidth = function() {
        return this._prepContext(c._workingContext).measureText(this.text).width
    };
    a.getMeasuredLineHeight = function() {
        return 1.2 * this._prepContext(c._workingContext).measureText("M").width
    };
    a.getMeasuredHeight = function() {
        return this._drawText(null, {}).height
    };
    a.DisplayObject_getBounds = a.getBounds;
    a.getBounds = function() {
        var b = this.DisplayObject_getBounds();
        if (b)
            return b;
        if (null == this.text || "" == this.text)
            return null;
        var b = this._drawText(null,
        {}), a = this.maxWidth && this.maxWidth < b.width ? this.maxWidth: b.width, e = a * c.H_OFFSETS[this.textAlign || "left"], f = (this.lineHeight || this.getMeasuredLineHeight()) * c.V_OFFSETS[this.textBaseline || "top"];
        return this._rectangle.initialize(e, f, a, b.height)
    };
    a.clone = function() {
        var b = new c(this.text, this.font, this.color);
        this.cloneProps(b);
        return b
    };
    a.toString = function() {
        return "[Text (text=" + (20 < this.text.length ? this.text.substr(0, 17) + "..." : this.text) + ")]"
    };
    a.DisplayObject_cloneProps = a.cloneProps;
    a.cloneProps = function(b) {
        this.DisplayObject_cloneProps(b);
        b.textAlign = this.textAlign;
        b.textBaseline = this.textBaseline;
        b.maxWidth = this.maxWidth;
        b.outline = this.outline;
        b.lineHeight = this.lineHeight;
        b.lineWidth = this.lineWidth
    };
    a._prepContext = function(b) {
        b.font = this.font;
        b.textAlign = this.textAlign || "left";
        b.textBaseline = this.textBaseline || "top";
        return b
    };
    a._drawText = function(b, a) {
        var e=!!b;
        e || (b = this._prepContext(c._workingContext));
        for (var f = this.lineHeight || this.getMeasuredLineHeight(), g = 0, h = 0, m = String(this.text).split(/(?:\r\n|\r|\n)/), n = 0, w = m.length; n < w; n++) {
            var t =
            m[n], v = null;
            if (null != this.lineWidth && (v = b.measureText(t).width) > this.lineWidth)
                for (var x = t.split(/(\s)/), t = x[0], v = b.measureText(t).width, y = 1, p = x.length; y < p; y += 2) {
                    var C = b.measureText(x[y] + x[y + 1]).width;
                    v + C > this.lineWidth ? (e && this._drawTextLine(b, t, h * f), v > g && (g = v), t = x[y + 1], v = b.measureText(t).width, h++) : (t += x[y] + x[y + 1], v += C)
                }
            e && this._drawTextLine(b, t, h * f);
            a && null == v && (v = b.measureText(t).width);
            v > g && (g = v);
            h++
        }
        a && (a.count = h, a.width = g, a.height = h * f);
        return a
    };
    a._drawTextLine = function(b, a, c) {
        this.outline ?
        b.strokeText(a, 0, c, this.maxWidth || 65535) : b.fillText(a, 0, c, this.maxWidth || 65535)
    };
    createjs.Text = c
})();
this.createjs = this.createjs || {};
(function() {
    function c(b, a) {
        this.initialize(b, a)
    }
    var a = c.prototype = new createjs.DisplayObject;
    a.text = "";
    a.spriteSheet = null;
    a.lineHeight = 0;
    a.letterSpacing = 0;
    a.isNeedCenter=!1;
    a.centerX = 0;
    a.centerY = 0;
    a.textBounds;
    a.spaceWidth = 0;
    a.postfix = "";
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b, c) {
        this.DisplayObject_initialize();
        this.text = b;
        this.spriteSheet = c;
        a.textBounds = new createjs.Rectangle
    };
    a.DisplayObject_draw = a.draw;
    a.draw = function(b, a) {
        if (this.DisplayObject_draw(b, a))
            return !0;
        this._drawText(b)
    };
    a.isVisible = function() {
        var b = this.cacheCanvas || this.spriteSheet && this.spriteSheet.complete && this.text;
        return !!(this.visible && 0 < this.alpha && 0 != this.scaleX && 0 != this.scaleY && b)
    };
    a.getBounds = function() {
        var b = this._rectangle;
        this._drawText(null, b);
        return b.width ? b : null
    };
    a._getFrame = function(b, a) {
        var c, e = a.getAnimation(b + this.postfix);
        e || (b != (c = b.toUpperCase()) || b != (c = b.toLowerCase()) || (c = null), c && (e = a.getAnimation(c + this.postfix)));
        return e && a.getFrame(e.frames[0])
    };
    a._getLineHeight = function(b) {
        return (b =
        this._getFrame("1", b) || this._getFrame("T", b) || this._getFrame("L", b) || b.getFrame(0)) ? b.rect.height : 1
    };
    a._getSpaceWidth = function(b) {
        return (b = this._getFrame("1", b) || this._getFrame("l", b) || this._getFrame("e", b) || this._getFrame("a", b) || b.getFrame(0)) ? b.rect.width : 1
    };
    a._drawText = function(b, a) {
        var c, e, f, g = 0, h = 0, m = this.spaceWidth, n = this.lineHeight, w = this.spriteSheet;
        0 == m && (m = this._getSpaceWidth(w));
        0 == n && (n = this._getLineHeight(w));
        for (var t = 0, v = 0, x = this.text.length; v < x; v++)
            if (c = this.text.charAt(v), " " == c)
                g +=
                m;
            else if ("\n" == c || "\r" == c)
                "\r" == c && "\n" == this.text.charAt(v + 1) && v++, g - f > t && (t = g - f), g = 0, h += n;
        else {
            var y = this._getFrame(c, w);
            if (y) {
                var p = y.rect;
                f = y.regX;
                c = p.width;
                b && b.drawImage(y.image, p.x, p.y, c, e = p.height, g - f, h - y.regY, c, e);
                g += c + this.letterSpacing
            }
        }
        g - f > t && (t = g - f);
        a && (a.width = t - this.letterSpacing, a.height = h + n);
        this.textBounds.width = t - this.letterSpacing;
        this.textBounds.height = h + n
    };
    createjs.BitmapText = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "SpriteSheetUtils cannot be instantiated";
    }, a = createjs.createCanvas ? createjs.createCanvas(): document.createElement("canvas");
    a.getContext && (c._workingCanvas = a, c._workingContext = a.getContext("2d"), a.width = a.height = 1);
    c.addFlippedFrames = function(b, a, d, e) {
        if (a || d || e) {
            var f = 0;
            a && c._flip(b, ++f, !0, !1);
            d && c._flip(b, ++f, !1, !0);
            e && c._flip(b, ++f, !0, !0)
        }
    };
    c.extractFrame = function(b, a) {
        isNaN(a) && (a = b.getAnimation(a).frames[0]);
        var d = b.getFrame(a);
        if (!d)
            return null;
        var e = d.rect,
        f = c._workingCanvas;
        f.width = e.width;
        f.height = e.height;
        c._workingContext.drawImage(d.image, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height);
        d = document.createElement("img");
        d.src = f.toDataURL("image/png");
        return d
    };
    c.mergeAlpha = function(b, a, c) {
        c || (c = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas"));
        c.width = Math.max(a.width, b.width);
        c.height = Math.max(a.height, b.height);
        var e = c.getContext("2d");
        e.save();
        e.drawImage(b, 0, 0);
        e.globalCompositeOperation = "destination-in";
        e.drawImage(a,
        0, 0);
        e.restore();
        return c
    };
    c._flip = function(b, a, d, e) {
        for (var f = b._images, g = c._workingCanvas, h = c._workingContext, m = f.length / a, n = 0; n < m; n++) {
            var w = f[n];
            w.__tmp = n;
            h.setTransform(1, 0, 0, 1, 0, 0);
            h.clearRect(0, 0, g.width + 1, g.height + 1);
            g.width = w.width;
            g.height = w.height;
            h.setTransform(d?-1 : 1, 0, 0, e?-1 : 1, d ? w.width : 0, e ? w.height : 0);
            h.drawImage(w, 0, 0);
            var t = document.createElement("img");
            t.src = g.toDataURL("image/png");
            t.width = w.width;
            t.height = w.height;
            f.push(t)
        }
        h = b._frames;
        g = h.length / a;
        for (n = 0; n < g; n++) {
            var w = h[n],
            v = w.rect.clone(), t = f[w.image.__tmp + m * a], x = {
                image: t,
                rect: v,
                regX: w.regX,
                regY: w.regY
            };
            d && (v.x = t.width - v.x - v.width, x.regX = v.width - w.regX);
            e && (v.y = t.height - v.y - v.height, x.regY = v.height - w.regY);
            h.push(x)
        }
        d = "_" + (d ? "h" : "") + (e ? "v" : "");
        e = b._animations;
        b = b._data;
        f = e.length / a;
        for (n = 0; n < f; n++) {
            h = e[n];
            w = b[h];
            m = {
                name: h + d,
                frequency: w.frequency,
                next: w.next,
                frames: []
            };
            w.next && (m.next += d);
            h = w.frames;
            w = 0;
            for (t = h.length; w < t; w++)
                m.frames.push(h[w] + g * a);
            b[m.name] = m;
            e.push(m.name)
        }
    };
    createjs.SpriteSheetUtils = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.initialize()
    }, a = c.prototype = new createjs.EventDispatcher;
    c.ERR_DIMENSIONS = "frame dimensions exceed max spritesheet dimensions";
    c.ERR_RUNNING = "a build is already running";
    a.maxWidth = 2048;
    a.maxHeight = 2048;
    a.spriteSheet = null;
    a.scale = 1;
    a.padding = 1;
    a.timeSlice = 0.3;
    a.progress =- 1;
    a._frames = null;
    a._animations = null;
    a._data = null;
    a._nextFrameIndex = 0;
    a._index = 0;
    a._timerID = null;
    a._scale = 1;
    a.initialize = function() {
        this._frames = [];
        this._animations = {}
    };
    a.addFrame = function(b, a, d, e,
    f, g) {
        if (this._data)
            throw c.ERR_RUNNING;
        a = a || b.bounds || b.nominalBounds;
        !a && b.getBounds && (a = b.getBounds());
        if (!a)
            return null;
        d = d || 1;
        return this._frames.push({
            source: b,
            sourceRect: a,
            scale: d,
            funct: e,
            params: f,
            scope: g,
            index: this._frames.length,
            height: a.height * d
        })-1
    };
    a.addAnimation = function(b, a, d, e) {
        if (this._data)
            throw c.ERR_RUNNING;
        this._animations[b] = {
            frames: a,
            next: d,
            frequency: e
        }
    };
    a.addMovieClip = function(b, a, d) {
        if (this._data)
            throw c.ERR_RUNNING;
        var e = b.frameBounds, f = a || b.bounds || b.nominalBounds;
        !f && b.getBounds &&
        (f = b.getBounds());
        if (!f&&!e)
            return null;
        a = this._frames.length;
        for (var g = b.timeline.duration, h = 0; h < g; h++)
            this.addFrame(b, e && e[h] ? e[h] : f, d, function(b) {
                var a = this.actionsEnabled;
                this.actionsEnabled=!1;
                this.gotoAndStop(b);
                this.actionsEnabled = a
            }, [h], b);
        h = b.timeline._labels;
        b = [];
        for (var m in h)
            b.push({
                index: h[m],
                label: m
            });
        if (b.length)
            for (b.sort(function(b, a) {
                return b.index - a.index
            }), h = 0, m = b.length; h < m; h++) {
                d = b[h].label;
                for (var e = a + (h == m-1 ? g : b[h + 1].index), f = [], n = a + b[h].index; n < e; n++)
                    f.push(n);
                    this.addAnimation(d,
                    f, !0)
            }
    };
    a.build = function() {
        if (this._data)
            throw c.ERR_RUNNING;
        for (this._startBuild(); this._drawNext(););
        this._endBuild();
        return this.spriteSheet
    };
    a.buildAsync = function(b) {
        if (this._data)
            throw c.ERR_RUNNING;
        this.timeSlice = b;
        this._startBuild();
        var a = this;
        this._timerID = setTimeout(function() {
            a._run()
        }, 50-50 * Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)))
    };
    a.stopAsync = function() {
        clearTimeout(this._timerID);
        this._data = null
    };
    a.clone = function() {
        throw "SpriteSheetBuilder cannot be cloned.";
    };
    a.toString = function() {
        return "[SpriteSheetBuilder]"
    };
    a._startBuild = function() {
        var b = this.padding || 0;
        this.progress = 0;
        this.spriteSheet = null;
        this._index = 0;
        this._scale = this.scale;
        var a = [];
        this._data = {
            images: [],
            frames: a,
            animations: this._animations
        };
        var d = this._frames.slice();
        d.sort(function(b, a) {
            return b.height <= a.height?-1 : 1
        });
        if (d[d.length-1].height + 2 * b > this.maxHeight)
            throw c.ERR_DIMENSIONS;
        for (var e = 0, f = 0, g = 0; d.length;) {
            var h = this._fillRow(d, e, g, a, b);
            h.w > f && (f = h.w);
            e += h.h;
            if (!h.h ||!d.length) {
                var m = createjs.createCanvas ? createjs.createCanvas(): document.createElement("canvas");
                m.width = this._getSize(f, this.maxWidth);
                m.height = this._getSize(e, this.maxHeight);
                this._data.images[g] = m;
                h.h || (f = e = 0, g++)
            }
        }
    };
    a._getSize = function(b, a) {
        for (var c = 4; Math.pow(2, ++c) < b;);
        return Math.min(a, Math.pow(2, c))
    };
    a._fillRow = function(b, a, d, e, f) {
        var g = this.maxWidth, h = this.maxHeight;
        a += f;
        for (var h = h - a, m = f, n = 0, w = b.length-1; 0 <= w; w--) {
            var t = b[w], v = this._scale * t.scale, x = t.sourceRect, y = t.source, p = Math.floor(v * x.x - f), C = Math.floor(v * x.y - f), B = Math.ceil(v * x.height + 2 * f), x = Math.ceil(v * x.width + 2 * f);
            if (x > g)
                throw c.ERR_DIMENSIONS;
            B > h || m + x > g || (t.img = d, t.rect = new createjs.Rectangle(m, a, x, B), n = n || B, b.splice(w, 1), e[t.index] = [m, a, x, B, d, Math.round( - p + v * y.regX - f), Math.round( - C + v * y.regY - f)], m += x)
        }
        return {
            w: m,
            h: n
        }
    };
    a._endBuild = function() {
        this.spriteSheet = new createjs.SpriteSheet(this._data);
        this._data = null;
        this.progress = 1;
        this.dispatchEvent("complete")
    };
    a._run = function() {
        for (var b = 50 * Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)), a = (new Date).getTime() + b, c=!1; a > (new Date).getTime();)
            if (!this._drawNext()) {
                c=!0;
                break
            }
        if (c)
            this._endBuild();
        else {
            var e = this;
            this._timerID = setTimeout(function() {
                e._run()
            }, 50 - b)
        }
        b = this.progress = this._index / this._frames.length;
        this.hasEventListener("progress") && (a = new createjs.Event("progress"), a.progress = b, this.dispatchEvent(a))
    };
    a._drawNext = function() {
        var b = this._frames[this._index], a = b.scale * this._scale, c = b.rect, e = b.sourceRect, f = this._data.images[b.img].getContext("2d");
        b.funct && b.funct.apply(b.scope, b.params);
        f.save();
        f.beginPath();
        f.rect(c.x, c.y, c.width, c.height);
        f.clip();
        f.translate(Math.ceil(c.x - e.x *
        a), Math.ceil(c.y - e.y * a));
        f.scale(a, a);
        b.source.draw(f);
        f.restore();
        return ++this._index < this._frames.length
    };
    createjs.SpriteSheetBuilder = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.DisplayObject;
    a.htmlElement = null;
    a._oldMtx = null;
    a._visible=!1;
    a.DisplayObject_initialize = a.initialize;
    a.initialize = function(b) {
        "string" == typeof b && (b = document.getElementById(b));
        this.DisplayObject_initialize();
        this.mouseEnabled=!1;
        this.htmlElement = b;
        b = b.style;
        b.position = "absolute";
        b.transformOrigin = b.WebkitTransformOrigin = b.msTransformOrigin = b.MozTransformOrigin = b.OTransformOrigin = "0% 0%"
    };
    a.isVisible = function() {
        return null !=
        this.htmlElement
    };
    a.draw = function(b, a) {
        this.visible && (this._visible=!0);
        return !0
    };
    a.cache = function() {};
    a.uncache = function() {};
    a.updateCache = function() {};
    a.hitTest = function() {};
    a.localToGlobal = function() {};
    a.globalToLocal = function() {};
    a.localToLocal = function() {};
    a.clone = function() {
        throw "DOMElement cannot be cloned.";
    };
    a.toString = function() {
        return "[DOMElement (name=" + this.name + ")]"
    };
    a.DisplayObject__tick = a._tick;
    a._tick = function(b) {
        var a = this.getStage();
        this._visible=!1;
        a && a.on("drawend", this._handleDrawEnd,
        this, !0);
        this.DisplayObject__tick(b)
    };
    a._handleDrawEnd = function(b) {
        if (b = this.htmlElement) {
            b = b.style;
            var a = this._visible ? "visible": "hidden";
            a != b.visibility && (b.visibility = a);
            if (this._visible) {
                var a = this.getConcatenatedMatrix(this._matrix), c = this._oldMtx;
                c && c.alpha == a.alpha || (b.opacity = "" + (1E4 * a.alpha | 0) / 1E4, c && (c.alpha = a.alpha));
                if (!c || c.tx != a.tx || c.ty != a.ty || c.a != a.a || c.b != a.b || c.c != a.c || c.d != a.d) {
                    var e = "matrix(" + (1E4 * a.a | 0) / 1E4 + "," + (1E4 * a.b | 0) / 1E4 + "," + (1E4 * a.c | 0) / 1E4 + "," + (1E4 * a.d | 0) / 1E4 + "," + (a.tx +
                    0.5 | 0);
                    b.transform = b.WebkitTransform = b.OTransform = b.msTransform = e + "," + (a.ty + 0.5 | 0) + ")";
                    b.MozTransform = e + "px," + (a.ty + 0.5 | 0) + "px)";
                    this._oldMtx = c ? c.copy(a) : a.clone()
                }
            }
        }
    };
    createjs.DOMElement = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.initialize()
    }, a = c.prototype;
    a.initialize = function() {};
    a.getBounds = function() {
        return null
    };
    a.applyFilter = function(b, a, c, e, f, g, h, m) {};
    a.toString = function() {
        return "[Filter]"
    };
    a.clone = function() {
        return new c
    };
    createjs.Filter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c) {
        this.initialize(b, a, c)
    }, a = c.prototype = new createjs.Filter;
    a.initialize = function(b, a, c) {
        if (isNaN(b) || 0 > b)
            b = 0;
        this.blurX = b | 0;
        if (isNaN(a) || 0 > a)
            a = 0;
        this.blurY = a | 0;
        if (isNaN(c) || 1 > c)
            c = 1;
        this.quality = c | 0
    };
    a.blurX = 0;
    a.blurY = 0;
    a.quality = 1;
    a.mul_table = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281,
    69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343,
    341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];
    a.shg_table = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15,
    16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16,
    17, 16, 17, 16, 17, 9];
    a.getBounds = function() {
        var b = 0.5 * Math.pow(this.quality, 0.6);
        return new createjs.Rectangle( - this.blurX * b, - this.blurY * b, 2 * this.blurX * b, 2 * this.blurY * b)
    };
    a.applyFilter = function(b, a, c, e, f, g, h, m) {
        g = g || b;
        null == h && (h = a);
        null == m && (m = c);
        try {
            var n = b.getImageData(a, c, e, f)
        } catch (w) {
            return !1
        }
        b = this.blurX / 2;
        if (isNaN(b) || 0 > b)
            return !1;
        b|=0;
        var t = this.blurY / 2;
        if (isNaN(t) || 0 > t)
            return !1;
        t|=0;
        if (0 == b && 0 == t)
            return !1;
        var v = this.quality;
        if (isNaN(v) || 1 > v)
            v = 1;
        v|=0;
        3 < v && (v = 3);
        1 > v && (v = 1);
        var x = n.data, y, p, C,
        B, H, E, G, D, K, F, I, O, L = b + b + 1;
        B = t + t + 1;
        var r = e-1, s = f-1, A = b + 1, z = t + 1, J = {
            r: 0,
            b: 0,
            g: 0,
            a: 0,
            next: null
        };
        a = J;
        for (y = 1; y < L; y++)
            a = a.next = {
                r: 0,
                b: 0,
                g: 0,
                a: 0,
                next: null
            };
        a.next = J;
        c = L = {
            r: 0,
            b: 0,
            g: 0,
            a: 0,
            next: null
        };
        for (y = 1; y < B; y++)
            c = c.next = {
                r: 0,
                b: 0,
                g: 0,
                a: 0,
                next: null
            };
        c.next = L;
        for (y = null; 0 < v--;) {
            H = B = 0;
            var M = this.mul_table[b], P = this.shg_table[b];
            for (c = f; -1<--c;) {
                E = A * (F = x[B]);
                G = A * (I = x[B + 1]);
                D = A * (O = x[B + 2]);
                K = A * (C = x[B + 3]);
                a = J;
                for (y = A; -1<--y;)
                    a.r = F, a.g = I, a.b = O, a.a = C, a = a.next;
                for (y = 1; y < A; y++)
                    p = B + ((r < y ? r : y)<<2), E += a.r = x[p], G += a.g =
                x[p + 1], D += a.b = x[p + 2], K += a.a = x[p + 3], a = a.next;
                y = J;
                for (a = 0; a < e; a++)
                    x[B++] = E * M>>>P, x[B++] = G * M>>>P, x[B++] = D * M>>>P, x[B++] = K * M>>>P, p = H + ((p = a + b + 1) < r ? p : r)<<2, E -= y.r - (y.r = x[p]), G -= y.g - (y.g = x[p + 1]), D -= y.b - (y.b = x[p + 2]), K -= y.a - (y.a = x[p + 3]), y = y.next;
                H += e
            }
            M = this.mul_table[t];
            P = this.shg_table[t];
            for (a = 0; a < e; a++) {
                B = a<<2;
                E = z * (F = x[B]);
                G = z * (I = x[B + 1]);
                D = z * (O = x[B + 2]);
                K = z * (C = x[B + 3]);
                c = L;
                for (y = 0; y < z; y++)
                    c.r = F, c.g = I, c.b = O, c.a = C, c = c.next;
                C = e;
                for (y = 1; y <= t; y++)
                    B = C + a<<2, E += c.r = x[B], G += c.g = x[B + 1], D += c.b = x[B + 2], K += c.a = x[B + 3], c =
                c.next, y < s && (C += e);
                B = a;
                y = L;
                if (0 < v)
                    for (c = 0; c < f; c++)
                        p = B<<2, x[p + 3] = C = K * M>>>P, 0 < C ? (x[p] = E * M>>>P, x[p + 1] = G * M>>>P, x[p + 2] = D * M>>>P) : x[p] = x[p + 1] = x[p + 2] = 0, p = a + ((p = c + z) < s ? p : s) * e<<2, E -= y.r - (y.r = x[p]), G -= y.g - (y.g = x[p + 1]), D -= y.b - (y.b = x[p + 2]), K -= y.a - (y.a = x[p + 3]), y = y.next, B += e;
                else 
                    for (c = 0; c < f; c++)
                        p = B<<2, x[p + 3] = C = K * M>>>P, 0 < C ? (C = 255 / C, x[p] = (E * M>>>P) * C, x[p + 1] = (G * M>>>P) * C, x[p + 2] = (D * M>>>P) * C) : x[p] = x[p + 1] = x[p + 2] = 0, p = a + ((p = c + z) < s ? p : s) * e<<2, E -= y.r - (y.r = x[p]), G -= y.g - (y.g = x[p + 1]), D -= y.b - (y.b = x[p + 2]), K -= y.a - (y.a = x[p + 3]), y =
                y.next, B += e
            }
        }
        g.putImageData(n, h, m);
        return !0
    };
    a.clone = function() {
        return new c(this.blurX, this.blurY, this.quality)
    };
    a.toString = function() {
        return "[BlurFilter]"
    };
    createjs.BlurFilter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.Filter;
    a.initialize = function(b) {
        this.alphaMap = b
    };
    a.alphaMap = null;
    a._alphaMap = null;
    a._mapData = null;
    a.applyFilter = function(b, a, c, e, f, g, h, m) {
        if (!this.alphaMap)
            return !0;
        if (!this._prepAlphaMap())
            return !1;
        g = g || b;
        null == h && (h = a);
        null == m && (m = c);
        try {
            var n = b.getImageData(a, c, e, f)
        } catch (w) {
            return !1
        }
        b = n.data;
        a = this._mapData;
        c = b.length;
        for (e = 0; e < c; e += 4)
            b[e + 3] = a[e] || 0;
        n.data = b;
        g.putImageData(n, h, m);
        return !0
    };
    a.clone = function() {
        return new c(this.alphaMap)
    };
    a.toString = function() {
        return "[AlphaMapFilter]"
    };
    a._prepAlphaMap = function() {
        if (!this.alphaMap)
            return !1;
        if (this.alphaMap == this._alphaMap && this._mapData)
            return !0;
        this._mapData = null;
        var b = this._alphaMap = this.alphaMap, a = b;
        b instanceof HTMLCanvasElement ? a = a.getContext("2d") : (a = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas"), a.width = b.width, a.height = b.height, a = a.getContext("2d"), a.drawImage(b, 0, 0));
        try {
            var c = a.getImageData(0, 0, b.width, b.height)
        } catch (e) {
            return !1
        }
        this._mapData =
        c.data;
        return !0
    };
    createjs.AlphaMapFilter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.Filter;
    a.initialize = function(b) {
        this.mask = b
    };
    a.mask = null;
    a.applyFilter = function(b, a, c, e, f, g, h, m) {
        if (!this.mask)
            return !0;
        g = g || b;
        null == h && (h = a);
        null == m && (m = c);
        g.save();
        g.globalCompositeOperation = "destination-in";
        g.drawImage(this.mask, h, m);
        g.restore();
        return !0
    };
    a.clone = function() {
        return new c(this.mask)
    };
    a.toString = function() {
        return "[AlphaMaskFilter]"
    };
    createjs.AlphaMaskFilter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c, e, f, g, h, m) {
        this.initialize(b, a, c, e, f, g, h, m)
    }, a = c.prototype = new createjs.Filter;
    a.redMultiplier = 1;
    a.greenMultiplier = 1;
    a.blueMultiplier = 1;
    a.alphaMultiplier = 1;
    a.redOffset = 0;
    a.greenOffset = 0;
    a.blueOffset = 0;
    a.alphaOffset = 0;
    a.initialize = function(b, a, c, e, f, g, h, m) {
        this.redMultiplier = null != b ? b : 1;
        this.greenMultiplier = null != a ? a : 1;
        this.blueMultiplier = null != c ? c : 1;
        this.alphaMultiplier = null != e ? e : 1;
        this.redOffset = f || 0;
        this.greenOffset = g || 0;
        this.blueOffset = h || 0;
        this.alphaOffset = m ||
        0
    };
    a.applyFilter = function(b, a, c, e, f, g, h, m) {
        g = g || b;
        null == h && (h = a);
        null == m && (m = c);
        try {
            var n = b.getImageData(a, c, e, f)
        } catch (w) {
            return !1
        }
        b = n.data;
        a = b.length;
        for (c = 0; c < a; c += 4)
            b[c] = b[c] * this.redMultiplier + this.redOffset, b[c + 1] = b[c + 1] * this.greenMultiplier + this.greenOffset, b[c + 2] = b[c + 2] * this.blueMultiplier + this.blueOffset, b[c + 3] = b[c + 3] * this.alphaMultiplier + this.alphaOffset;
        g.putImageData(n, h, m);
        return !0
    };
    a.toString = function() {
        return "[ColorFilter]"
    };
    a.clone = function() {
        return new c(this.redMultiplier, this.greenMultiplier,
        this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset)
    };
    createjs.ColorFilter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c, e) {
        this.initialize(b, a, c, e)
    }, a = c.prototype = [];
    c.DELTA_INDEX = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.2, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.8, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1, 1.06, 1.12, 1.18, 1.24, 1.3, 1.36, 1.42, 1.48, 1.54, 1.6, 1.66, 1.72, 1.78, 1.84, 1.9, 1.96, 2, 2.12, 2.25, 2.37, 2.5, 2.62, 2.75, 2.87, 3, 3.2, 3.4, 3.6, 3.8, 4, 4.3, 4.7, 4.9, 5, 5.5, 6, 6.5, 6.8, 7, 7.3,
    7.5, 7.8, 8, 8.4, 8.7, 9, 9.4, 9.6, 9.8, 10];
    c.IDENTITY_MATRIX = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];
    c.LENGTH = c.IDENTITY_MATRIX.length;
    a.initialize = function(b, a, c, e) {
        this.reset();
        this.adjustColor(b, a, c, e);
        return this
    };
    a.reset = function() {
        return this.copyMatrix(c.IDENTITY_MATRIX)
    };
    a.adjustColor = function(b, a, c, e) {
        this.adjustHue(e);
        this.adjustContrast(a);
        this.adjustBrightness(b);
        return this.adjustSaturation(c)
    };
    a.adjustBrightness = function(b) {
        if (0 == b || isNaN(b))
            return this;
        b = this._cleanValue(b, 255);
        this._multiplyMatrix([1, 0, 0, 0, b, 0, 1, 0, 0, b, 0, 0, 1, 0, b, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);
        return this
    };
    a.adjustContrast = function(b) {
        if (0 == b || isNaN(b))
            return this;
        b = this._cleanValue(b, 100);
        var a;
        0 > b ? a = 127 + 127 * (b / 100) : (a = b%1, a = 0 == a ? c.DELTA_INDEX[b] : c.DELTA_INDEX[b<<0] * (1 - a) + c.DELTA_INDEX[(b<<0) + 1] * a, a = 127 * a + 127);
        this._multiplyMatrix([a / 127, 0, 0, 0, 0.5 * (127 - a), 0, a / 127, 0, 0, 0.5 * (127 - a), 0, 0, a / 127, 0, 0.5 * (127 - a), 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);
        return this
    };
    a.adjustSaturation = function(b) {
        if (0 == b || isNaN(b))
            return this;
        b = this._cleanValue(b,
        100);
        b = 1 + (0 < b ? 3 * b / 100 : b / 100);
        this._multiplyMatrix([0.3086 * (1 - b) + b, 0.6094 * (1 - b), 0.082 * (1 - b), 0, 0, 0.3086 * (1 - b), 0.6094 * (1 - b) + b, 0.082 * (1 - b), 0, 0, 0.3086 * (1 - b), 0.6094 * (1 - b), 0.082 * (1 - b) + b, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);
        return this
    };
    a.adjustHue = function(b) {
        if (0 == b || isNaN(b))
            return this;
        b = this._cleanValue(b, 180) / 180 * Math.PI;
        var a = Math.cos(b);
        b = Math.sin(b);
        this._multiplyMatrix([0.213 + 0.787 * a +- 0.213 * b, 0.715 +- 0.715 * a +- 0.715 * b, 0.072 +- 0.072 * a + 0.928 * b, 0, 0, 0.213 +- 0.213 * a + 0.143 * b, 0.715 + a * (1-0.715) + 0.14 * b, 0.072 +- 0.072 * a +
        -0.283 * b, 0, 0, 0.213 +- 0.213 * a +- 0.787 * b, 0.715 +- 0.715 * a + 0.715 * b, 0.072 + 0.928 * a + 0.072 * b, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);
        return this
    };
    a.concat = function(b) {
        b = this._fixMatrix(b);
        if (b.length != c.LENGTH)
            return this;
        this._multiplyMatrix(b);
        return this
    };
    a.clone = function() {
        return new c(this)
    };
    a.toArray = function() {
        return this.slice(0, c.LENGTH)
    };
    a.copyMatrix = function(b) {
        for (var a = c.LENGTH, d = 0; d < a; d++)
            this[d] = b[d];
        return this
    };
    a._multiplyMatrix = function(b) {
        for (var a = [], c = 0; 5 > c; c++) {
            for (var e = 0; 5 > e; e++)
                a[e] = this[e + 5 * c];
            for (e =
            0; 5 > e; e++) {
                for (var f = 0, g = 0; 5 > g; g++)
                    f += b[e + 5 * g] * a[g];
                this[e + 5 * c] = f
            }
        }
    };
    a._cleanValue = function(b, a) {
        return Math.min(a, Math.max( - a, b))
    };
    a._fixMatrix = function(b) {
        b instanceof c && (b = b.slice(0));
        b.length < c.LENGTH ? b = b.slice(0, b.length).concat(c.IDENTITY_MATRIX.slice(b.length, c.LENGTH)) : b.length > c.LENGTH && (b = b.slice(0, c.LENGTH));
        return b
    };
    createjs.ColorMatrix = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b) {
        this.initialize(b)
    }, a = c.prototype = new createjs.Filter;
    a.matrix = null;
    a.initialize = function(b) {
        this.matrix = b
    };
    a.applyFilter = function(b, a, c, e, f, g, h, m) {
        g = g || b;
        null == h && (h = a);
        null == m && (m = c);
        try {
            var n = b.getImageData(a, c, e, f)
        } catch (w) {
            return !1
        }
        b = n.data;
        a = b.length;
        var t, v, x, y;
        t = this.matrix;
        c = t[0];
        e = t[1];
        f = t[2];
        for (var p = t[3], C = t[4], B = t[5], H = t[6], E = t[7], G = t[8], D = t[9], K = t[10], F = t[11], I = t[12], O = t[13], L = t[14], r = t[15], s = t[16], A = t[17], z = t[18], J = t[19], M = 0; M < a; M += 4)
            t = b[M], v = b[M + 1], x =
        b[M + 2], y = b[M + 3], b[M] = t * c + v * e + x * f + y * p + C, b[M + 1] = t * B + v * H + x * E + y * G + D, b[M + 2] = t * K + v * F + x * I + y * O + L, b[M + 3] = t * r + v * s + x * A + y * z + J;
        g.putImageData(n, h, m);
        return !0
    };
    a.toString = function() {
        return "[ColorMatrixFilter]"
    };
    a.clone = function() {
        return new c(this.matrix)
    };
    createjs.ColorMatrixFilter = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "Touch cannot be instantiated";
    };
    c.isSupported = function() {
        return "ontouchstart"in window || window.navigator.msPointerEnabled && 0 < window.navigator.msMaxTouchPoints
    };
    c.enable = function(a, b, k) {
        if (!a ||!a.canvas ||!c.isSupported())
            return !1;
        a.__touch = {
            pointers: {},
            multitouch: !b,
            preventDefault: !k,
            count: 0
        };
        "ontouchstart"in window ? c._IOS_enable(a) : window.navigator.msPointerEnabled && c._IE_enable(a);
        return !0
    };
    c.disable = function(a) {
        a && ("ontouchstart"in window ? c._IOS_disable(a) : window.navigator.msPointerEnabled &&
        c._IE_disable(a))
    };
    c._IOS_enable = function(a) {
        var b = a.canvas, k = a.__touch.f = function(b) {
            c._IOS_handleEvent(a, b)
        };
        b.addEventListener("touchstart", k, !1);
        b.addEventListener("touchmove", k, !1);
        b.addEventListener("touchend", k, !1);
        b.addEventListener("touchcancel", k, !1)
    };
    c._IOS_disable = function(a) {
        var b = a.canvas;
        b && (a = a.__touch.f, b.removeEventListener("touchstart", a, !1), b.removeEventListener("touchmove", a, !1), b.removeEventListener("touchend", a, !1), b.removeEventListener("touchcancel", a, !1))
    };
    c._IOS_handleEvent =
    function(a, b) {
        if (a) {
            a.__touch.preventDefault && b.preventDefault && b.preventDefault();
            for (var c = b.changedTouches, d = b.type, e = 0, f = c.length; e < f; e++) {
                var g = c[e], h = g.identifier;
                g.target == a.canvas && ("touchstart" == d ? this._handleStart(a, h, b, g.pageX, g.pageY) : "touchmove" == d ? this._handleMove(a, h, b, g.pageX, g.pageY) : "touchend" != d && "touchcancel" != d || this._handleEnd(a, h, b))
            }
        }
    };
    c._IE_enable = function(a) {
        var b = a.canvas, k = a.__touch.f = function(b) {
            c._IE_handleEvent(a, b)
        };
        b.addEventListener("MSPointerDown", k, !1);
        window.addEventListener("MSPointerMove",
        k, !1);
        window.addEventListener("MSPointerUp", k, !1);
        window.addEventListener("MSPointerCancel", k, !1);
        a.__touch.preventDefault && (b.style.msTouchAction = "none");
        a.__touch.activeIDs = {}
    };
    c._IE_disable = function(a) {
        var b = a.__touch.f;
        window.removeEventListener("MSPointerMove", b, !1);
        window.removeEventListener("MSPointerUp", b, !1);
        window.removeEventListener("MSPointerCancel", b, !1);
        a.canvas && a.canvas.removeEventListener("MSPointerDown", b, !1)
    };
    c._IE_handleEvent = function(a, b) {
        if (a) {
            a.__touch.preventDefault && b.preventDefault &&
            b.preventDefault();
            var c = b.type, d = b.pointerId, e = a.__touch.activeIDs;
            if ("MSPointerDown" == c)
                b.srcElement == a.canvas && (e[d]=!0, this._handleStart(a, d, b, b.pageX, b.pageY));
            else if (e[d])
                if ("MSPointerMove" == c)
                    this._handleMove(a, d, b, b.pageX, b.pageY);
                else if ("MSPointerUp" == c || "MSPointerCancel" == c)
                    delete e[d], this._handleEnd(a, d, b)
        }
    };
    c._handleStart = function(a, b, c, d, e) {
        var f = a.__touch;
        if (f.multitouch ||!f.count) {
            var g = f.pointers;
            g[b] || (g[b]=!0, f.count++, a._handlePointerDown(b, c, d, e))
        }
    };
    c._handleMove = function(a,
    b, c, d, e) {
        a.__touch.pointers[b] && a._handlePointerMove(b, c, d, e)
    };
    c._handleEnd = function(a, b, c) {
        var d = a.__touch, e = d.pointers;
        e[b] && (d.count--, a._handlePointerUp(b, c, !0), delete e[b])
    };
    createjs.Touch = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = createjs.EaselJS = createjs.EaselJS || {};
    c.version = "NEXT";
    c.buildDate = "Sun, 06 Oct 2013 10:56:52 GMT"
})();
(function() {
    var c = createjs.Stage.prototype._handlePointerDown, a = createjs.Stage.prototype._handlePointerUp, b=!1;
    -1 < navigator.userAgent.indexOf("Android") && (createjs.Stage.prototype._handlePointerDown = function(a, d, e, f) {
        d.touches && (b=!0, this.enableDOMEvents(!1));
        b ? d.touches && "undefined" != typeof d.touches[0].pageX && (d.screenX = d.touches[0].pageX, d.screenY = d.touches[0].pageY, c.call(this, a, d, e, f)) : (d.screenX = d.x, d.screenY = d.y, c.call(this, a, d, e, f))
    }, createjs.Stage.prototype._handlePointerUp = function(c, d,
    e) {
        d.changedTouches && (b=!0);
        b ? d.changedTouches && "undefined" != typeof d.changedTouches[0].pageX && (d.screenX = d.changedTouches[0].pageX, d.screenY = d.changedTouches[0].pageY, a.call(this, c, d, e)) : (d.screenX = d.x, d.screenY = d.y, a.call(this, c, d, e))
    })
})();
this.createjs = this.createjs || {};
(function() {
    var c = createjs.PreloadJS = createjs.PreloadJS || {};
    c.version = "0.4.0";
    c.buildDate = "Wed, 25 Sep 2013 17:09:35 GMT"
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c) {
        this.initialize(b, a, c)
    }, a = c.prototype;
    a.type = null;
    a.target = null;
    a.currentTarget = null;
    a.eventPhase = 0;
    a.bubbles=!1;
    a.cancelable=!1;
    a.timeStamp = 0;
    a.defaultPrevented=!1;
    a.propagationStopped=!1;
    a.immediatePropagationStopped=!1;
    a.removed=!1;
    a.initialize = function(b, a, c) {
        this.type = b;
        this.bubbles = a;
        this.cancelable = c;
        this.timeStamp = (new Date).getTime()
    };
    a.preventDefault = function() {
        this.defaultPrevented=!0
    };
    a.stopPropagation = function() {
        this.propagationStopped=!0
    };
    a.stopImmediatePropagation =
    function() {
        this.immediatePropagationStopped = this.propagationStopped=!0
    };
    a.remove = function() {
        this.removed=!0
    };
    a.clone = function() {
        return new c(this.type, this.bubbles, this.cancelable)
    };
    a.toString = function() {
        return "[Event (type=" + this.type + ")]"
    };
    createjs.Event = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {}, a = c.prototype;
    c.initialize = function(b) {
        b.addEventListener = a.addEventListener;
        b.on = a.on;
        b.removeEventListener = b.off = a.removeEventListener;
        b.removeAllEventListeners = a.removeAllEventListeners;
        b.hasEventListener = a.hasEventListener;
        b.dispatchEvent = a.dispatchEvent;
        b._dispatchEvent = a._dispatchEvent
    };
    a._listeners = null;
    a._captureListeners = null;
    a.initialize = function() {};
    a.addEventListener = function(b, a, c) {
        var e;
        e = c ? this._captureListeners = this._captureListeners || {} : this._listeners =
        this._listeners || {};
        var f = e[b];
        return f && this.removeEventListener(b, a, c), f = e[b], f ? f.push(a) : e[b] = [a], a
    };
    a.on = function(b, a, c, e, f, g) {
        return a.handleEvent && (c = c || a, a = a.handleEvent), c = c || this, this.addEventListener(b, function(b) {
            a.call(c, b, f);
            e && b.remove()
        }, g)
    };
    a.removeEventListener = function(b, a, c) {
        if (c = c ? this._captureListeners : this._listeners) {
            var e = c[b];
            if (e)
                for (var f = 0, g = e.length; g > f; f++)
                    if (e[f] == a) {
                        1 == g ? delete c[b] : e.splice(f, 1);
                        break
                    }
        }
    };
    a.off = a.removeEventListener;
    a.removeAllEventListeners = function(b) {
        b ?
        (this._listeners && delete this._listeners[b], this._captureListeners && delete this._captureListeners[b]) : this._listeners = this._captureListeners = null
    };
    a.dispatchEvent = function(b, a) {
        if ("string" == typeof b) {
            var c = this._listeners;
            if (!c ||!c[b])
                return !1;
            b = new createjs.Event(b)
        }
        if (b.target = a || this, b.bubbles && this.parent) {
            for (var e = this, c = [e]; e.parent;)
                c.push(e = e.parent);
            for (var f = c.length, e = f-1; 0 <= e&&!b.propagationStopped; e--)
                c[e]._dispatchEvent(b, 1 + (0 == e));
            for (e = 1; f > e&&!b.propagationStopped; e++)
                c[e]._dispatchEvent(b,
                3)
        } else 
            this._dispatchEvent(b, 2);
        return b.defaultPrevented
    };
    a.hasEventListener = function(b) {
        var a = this._listeners, c = this._captureListeners;
        return !!(a && a[b] || c && c[b])
    };
    a.toString = function() {
        return "[EventDispatcher]"
    };
    a._dispatchEvent = function(b, a) {
        var c, e = 1 == a ? this._captureListeners: this._listeners;
        if (b && e && (e = e[b.type]) && (c = e.length)) {
            b.currentTarget = this;
            b.eventPhase = a;
            b.removed=!1;
            for (var e = e.slice(), f = 0; c > f&&!b.immediatePropagationStopped; f++) {
                var g = e[f];
                g.handleEvent ? g.handleEvent(b) : g(b);
                b.removed &&
                (this.off(b.type, g, 1 == a), b.removed=!1)
            }
        }
    };
    createjs.EventDispatcher = c
})();
this.createjs = this.createjs || {};
(function() {
    createjs.indexOf = function(c, a) {
        for (var b = 0, k = c.length; k > b; b++)
            if (a === c[b])
                return b;
        return -1
    }
})();
this.createjs = this.createjs || {};
(function() {
    createjs.proxy = function(c, a) {
        var b = Array.prototype.slice.call(arguments, 2);
        return function() {
            return c.apply(a, Array.prototype.slice.call(arguments, 0).concat(b))
        }
    }
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.init()
    };
    c.prototype = {};
    var a = c.prototype;
    c.FILE_PATTERN = /^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?( ? : [^?] + ) ? \ / ) ? (( ? : [^/?]+)\.(\w+))(?:\?(\S+)?)?$/;
    a.loaded=!1;
    a.canceled=!1;
    a.progress = 0;
    a._item = null;
    a._basePath = null;
    a.addEventListener = null;
    a.removeEventListener = null;
    a.removeAllEventListeners = null;
    a.dispatchEvent = null;
    a.hasEventListener = null;
    a._listeners = null;
    createjs.EventDispatcher.initialize(a);
    a.getItem = function() {
        return this._item
    };
    a.init = function() {};
    a.load =
    function() {};
    a.close = function() {};
    a._sendLoadStart = function() {
        this._isCanceled() || this.dispatchEvent("loadstart")
    };
    a._sendProgress = function(b) {
        if (!this._isCanceled()) {
            var a = null;
            "number" == typeof b ? (this.progress = b, a = new createjs.Event("progress"), a.loaded = this.progress, a.total = 1): (a = b, this.progress = b.loaded / b.total, (isNaN(this.progress) || 1 / 0 == this.progress) && (this.progress = 0));
            a.progress = this.progress;
            this.hasEventListener("progress") && this.dispatchEvent(a)
        }
    };
    a._sendComplete = function() {
        this._isCanceled() ||
        this.dispatchEvent("complete")
    };
    a._sendError = function(b) {
        !this._isCanceled() && this.hasEventListener("error") && (null == b && (b = new createjs.Event("error")), this.dispatchEvent(b))
    };
    a._isCanceled = function() {
        return null == window.createjs || this.canceled?!0: !1
    };
    a._parseURI = function(b) {
        return b ? b.match(c.FILE_PATTERN): null
    };
    a._formatQueryString = function(b, a) {
        if (null == b)throw Error("You must specify data.");
        var c = [], e;
        for (e in b)
            c.push(e + "=" + escape(b[e]));
        return a && (c = c.concat(a)), c.join("&")
    }; a.buildPath = function(b,
    a, c) {
        if (null != a) {
            var e = this._parseURI(b);
            null != e && null != e[1] && "" != e[1] || (b = a + b)
        }
        if (null == c)
            return b;
        a = [];
        e = b.indexOf("?");
        if (-1 != e) {
            var f = b.slice(e + 1);
            a = a.concat(f.split("&"))
        }
        return -1 != e ? b.slice(0, e) + "?" + this._formatQueryString(c, a) : b + "?" + this._formatQueryString(c, a)
    };
    a.toString = function() {
        return "[PreloadJS AbstractLoader]"
    };
    createjs.AbstractLoader = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a) {
        this.init(b, a)
    }, a = c.prototype = new createjs.AbstractLoader;
    c.LOAD_TIMEOUT = 8E3;
    c.BINARY = "binary";
    c.CSS = "css";
    c.IMAGE = "image";
    c.JAVASCRIPT = "javascript";
    c.JSON = "json";
    c.JSONP = "jsonp";
    c.SOUND = "sound";
    c.SVG = "svg";
    c.TEXT = "text";
    c.XML = "xml";
    c.POST = "POST";
    c.GET = "GET";
    a.useXHR=!0;
    a.stopOnError=!1;
    a.maintainScriptOrder=!0;
    a.next = null;
    a._typeCallbacks = null;
    a._extensionCallbacks = null;
    a._loadStartWasDispatched=!1;
    a._maxConnections = 1;
    a._currentlyLoadingScript = null;
    a._currentLoads =
    null;
    a._loadQueue = null;
    a._loadQueueBackup = null;
    a._loadItemsById = null;
    a._loadItemsBySrc = null;
    a._loadedResults = null;
    a._loadedRawResults = null;
    a._numItems = 0;
    a._numItemsLoaded = 0;
    a._scriptOrder = null;
    a._loadedScripts = null;
    a.init = function(b, a) {
        this._numItems = this._numItemsLoaded = 0;
        this._loadStartWasDispatched = this._paused=!1;
        this._currentLoads = [];
        this._loadQueue = [];
        this._loadQueueBackup = [];
        this._scriptOrder = [];
        this._loadedScripts = [];
        this._loadItemsById = {};
        this._loadItemsBySrc = {};
        this._loadedResults = {};
        this._loadedRawResults =
        {};
        this._typeCallbacks = {};
        this._extensionCallbacks = {};
        this._basePath = a;
        this.setUseXHR(b)
    };
    a.setUseXHR = function(b) {
        return this.useXHR = 0 != b && null != window.XMLHttpRequest, this.useXHR
    };
    a.removeAll = function() {
        this.remove()
    };
    a.remove = function(b) {
        var a = null;
        if (!b || b instanceof Array)
            if (b)
                a = b;
            else {
                if (0 < arguments.length)
                    return 
            } else 
                a = [b];
        var c=!1;
        if (a) {
            for (; a.length;) {
                for (var f = a.pop(), g = this.getResult(f), h = this._loadQueue.length-1; 0 <= h; h--)
                    if (m = this._loadQueue[h].getItem(), m.id == f || m.src == f) {
                        this._loadQueue.splice(h,
                        1)[0].cancel();
                        break
                    }
                for (h = this._loadQueueBackup.length-1; 0 <= h; h--)
                    if (m = this._loadQueueBackup[h].getItem(), m.id == f || m.src == f) {
                        this._loadQueueBackup.splice(h, 1)[0].cancel();
                        break
                    }
                if (g)
                    delete this._loadItemsById[g.id], delete this._loadItemsBySrc[g.src], this._disposeItem(g);
                else 
                    for (var h = this._currentLoads.length-1; 0 <= h; h--) {
                        var m = this._currentLoads[h].getItem();
                        if (m.id == f || m.src == f) {
                            this._currentLoads.splice(h, 1)[0].cancel();
                            c=!0;
                            break
                        }
                    }
            }
            c && this._loadNext()
        } else {
            this.close();
            for (f in this._loadItemsById)
                this._disposeItem(this._loadItemsById[f]);
            this.init(this.useXHR)
        }
    };
    a.reset = function() {
        this.close();
        for (var b in this._loadItemsById)
            this._disposeItem(this._loadItemsById[b]);
        b = [];
        i = 0;
        for (l = this._loadQueueBackup.length; l > i; i++)
            b.push(this._loadQueueBackup[i].getItem());
        this.loadManifest(b, !1)
    };
    c.isBinary = function(b) {
        switch (b) {
        case createjs.LoadQueue.IMAGE:
        case createjs.LoadQueue.BINARY:
            return !0;
        default:
            return !1
        }
    };
    a.installPlugin = function(b) {
        if (null != b && null != b.getPreloadHandlers) {
            b = b.getPreloadHandlers();
            if (null != b.types)
                for (var a = 0, c = b.types.length; c >
                a; a++)
                    this._typeCallbacks[b.types[a]] = b.callback;
            if (null != b.extensions)
                for (a = 0, c = b.extensions.length; c > a; a++)
                    this._extensionCallbacks[b.extensions[a]] = b.callback
        }
    };
    a.setMaxConnections = function(b) {
        this._maxConnections = b;
        !this._paused && 0 < this._loadQueue.length && this._loadNext()
    };
    a.loadFile = function(b, a, c) {
        if (null == b)
            return b = new createjs.Event("error"), b.text = "PRELOAD_NO_FILE", this._sendError(b), void 0;
        this._addItem(b, c);
        !1 !== a ? this.setPaused(!1) : this.setPaused(!0)
    };
    a.loadManifest = function(b, a, c) {
        var f =
        null;
        if (b instanceof Array) {
            if (0 == b.length)
                return a = new createjs.Event("error"), a.text = "PRELOAD_MANIFEST_EMPTY", this._sendError(a), void 0;
            f = b
        } else {
            if (null == b)
                return a = new createjs.Event("error"), a.text = "PRELOAD_MANIFEST_NULL", this._sendError(a), void 0;
            f = [b]
        }
        b = 0;
        for (var g = f.length; g > b; b++)
            this._addItem(f[b], c);
        !1 !== a ? this.setPaused(!1) : this.setPaused(!0)
    };
    a.load = function() {
        this.setPaused(!1)
    };
    a.getItem = function(b) {
        return this._loadItemsById[b] || this._loadItemsBySrc[b]
    };
    a.getResult = function(b, a) {
        var c =
        this._loadItemsById[b] || this._loadItemsBySrc[b];
        if (null == c)
            return null;
        c = c.id;
        return a && this._loadedRawResults[c] ? this._loadedRawResults[c] : this._loadedResults[c]
    };
    a.setPaused = function(b) {
        (this._paused = b) || this._loadNext()
    };
    a.close = function() {
        for (; this._currentLoads.length;)
            this._currentLoads.pop().cancel();
        this._scriptOrder.length = 0;
        this._loadedScripts.length = 0;
        this.loadStartWasDispatched=!1
    };
    a._addItem = function(b, a) {
        var c = this._createLoadItem(b);
        if (null != c) {
            var f = this._createLoader(c, a);
            null != f &&
            (this._loadQueue.push(f), this._loadQueueBackup.push(f), this._numItems++, this._updateProgress(), this.maintainScriptOrder && c.type == createjs.LoadQueue.JAVASCRIPT && f instanceof createjs.XHRLoader && (this._scriptOrder.push(c), this._loadedScripts.push(null)))
        }
    };
    a._createLoadItem = function(b) {
        var a = null;
        switch (typeof b) {
        case "string":
            a = {
                src: b
            };
            break;
        case "object":
            a = window.HTMLAudioElement && b instanceof HTMLAudioElement ? {
                tag: b,
                src: a.tag.src,
                type: createjs.LoadQueue.SOUND
            } : b;
            break;
        default:
            return null
        }
        b = this._parseURI(a.src);
        if (null != b && (a.ext = b[5]), null == a.type && (a.type = this._getTypeByExtension(a.ext)
            ), a.type == createjs.LoadQueue.JSON && null != a.callback && (a.type = createjs.LoadQueue.JSONP), a.type == createjs.LoadQueue.JSONP && null == a.callback)throw Error("callback is required for loading JSONP requests.");
        null == a.tag && (a.tag = this._createTag(a.type));
        null != a.id && "" != a.id || (a.id = a.src);
        if (b = this._typeCallbacks[a.type] || this._extensionCallbacks[a.ext]) {
            b = b(a.src, a.type, a.id, a.data);
            if (!1 === b)
                return null;
            !0 === b || (null != b.src &&
            (a.src = b.src), null != b.id && (a.id = b.id), null != b.tag && b.tag.load instanceof Function && (a.tag = b.tag), null != b.completeHandler && (a.completeHandler = b.completeHandler));
            b.type && (a.type = b.type);
            b = this._parseURI(a.src);
            null != b && null != b[5] && (a.ext = b[5].toLowerCase())
        }
        return this._loadItemsById[a.id] = a, this._loadItemsBySrc[a.src] = a, a
    };
    a._createLoader = function(b, a) {
        var c = this.useXHR;
        switch (b.type) {
        case createjs.LoadQueue.JSON:
        case createjs.LoadQueue.XML:
        case createjs.LoadQueue.TEXT:
            c=!0;
            break;
        case createjs.LoadQueue.SOUND:
        case createjs.LoadQueue.JSONP:
            c =
            !1;
            break;
        case null:
            return null
        }
        return null == a && (a = this._basePath), c ? new createjs.XHRLoader(b, a) : new createjs.TagLoader(b, a)
    };
    a._loadNext = function() {
        if (!this._paused) {
            this._loadStartWasDispatched || (this._sendLoadStart(), this._loadStartWasDispatched=!0);
            this._numItems == this._numItemsLoaded ? (this.loaded=!0, this._sendComplete(), this.next && this.next.load && this.next.load()) : this.loaded=!1;
            for (var b = 0; b < this._loadQueue.length&&!(this._currentLoads.length >= this._maxConnections); b++) {
                var a = this._loadQueue[b];
                if (this.maintainScriptOrder && a instanceof createjs.TagLoader && a.getItem().type == createjs.LoadQueue.JAVASCRIPT) {
                    if (this._currentlyLoadingScript)
                        continue;
                    this._currentlyLoadingScript=!0
                }
                this._loadQueue.splice(b, 1);
                b--;
                this._loadItem(a)
            }
        }
    };
    a._loadItem = function(b) {
        b.addEventListener("progress", createjs.proxy(this._handleProgress, this));
        b.addEventListener("complete", createjs.proxy(this._handleFileComplete, this));
        b.addEventListener("error", createjs.proxy(this._handleFileError, this));
        this._currentLoads.push(b);
        this._sendFileStart(b.getItem());
        b.load()
    };
    a._handleFileError = function(b) {
        var a = b.target;
        this._numItemsLoaded++;
        this._updateProgress();
        b = new createjs.Event("error");
        b.text = "FILE_LOAD_ERROR";
        b.item = a.getItem();
        this._sendError(b);
        this.stopOnError || (this._removeLoadItem(a), this._loadNext())
    };
    a._handleFileComplete = function(b) {
        b = b.target;
        var a = b.getItem();
        if (this._loadedResults[a.id] = b.getResult(), b instanceof createjs.XHRLoader && (this._loadedRawResults[a.id] = b.getResult(!0)
            ), this._removeLoadItem(b), this.maintainScriptOrder &&
        a.type == createjs.LoadQueue.JAVASCRIPT) {
            if (!(b instanceof createjs.TagLoader))
                return this._loadedScripts[createjs.indexOf(this._scriptOrder, a)] = a, this._checkScriptLoadOrder(b), void 0;
            this._currentlyLoadingScript=!1
        }
        this._processFinishedLoad(a, b)
    };
    a._processFinishedLoad = function(b, a) {
        this._numItemsLoaded++;
        this._updateProgress();
        this._sendFileComplete(b, a);
        this._loadNext()
    };
    a._checkScriptLoadOrder = function() {
        for (var b = this._loadedScripts.length, a = 0; b > a; a++) {
            var c = this._loadedScripts[a];
            if (null === c)
                break;
            !0 !== c && (this._processFinishedLoad(c), this._loadedScripts[a]=!0, a--, b--)
        }
    };
    a._removeLoadItem = function(b) {
        for (var a = this._currentLoads.length, c = 0; a > c; c++)
            if (this._currentLoads[c] == b) {
                this._currentLoads.splice(c, 1);
                break
            }
    };
    a._handleProgress = function(b) {
        b = b.target;
        this._sendFileProgress(b.getItem(), b.progress);
        this._updateProgress()
    };
    a._updateProgress = function() {
        var b = this._numItemsLoaded / this._numItems, a = this._numItems - this._numItemsLoaded;
        if (0 < a) {
            for (var c = 0, f = 0, g = this._currentLoads.length; g > f; f++)
                c +=
                this._currentLoads[f].progress;
            b += c / a * (a / this._numItems)
        }
        this._sendProgress(b)
    };
    a._disposeItem = function(b) {
        delete this._loadedResults[b.id];
        delete this._loadedRawResults[b.id];
        delete this._loadItemsById[b.id];
        delete this._loadItemsBySrc[b.src]
    };
    a._createTag = function(b) {
        var a = null;
        switch (b) {
        case createjs.LoadQueue.IMAGE:
            return document.createElement("img");
        case createjs.LoadQueue.SOUND:
            return a = document.createElement("audio"), a.autoplay=!1, a;
        case createjs.LoadQueue.JSONP:
        case createjs.LoadQueue.JAVASCRIPT:
            return a =
            document.createElement("script"), a.type = "text/javascript", a;
        case createjs.LoadQueue.CSS:
            return a = this.useXHR ? document.createElement("style") : document.createElement("link"), a.rel = "stylesheet", a.type = "text/css", a;
        case createjs.LoadQueue.SVG:
            return this.useXHR ? a = document.createElement("svg") : (a = document.createElement("object"), a.type = "image/svg+xml"), a
        }
        return null
    };
    a._getTypeByExtension = function(b) {
        if (null == b)
            return createjs.LoadQueue.TEXT;
        switch (b.toLowerCase()) {
        case "jpeg":
        case "jpg":
        case "gif":
        case "png":
        case "webp":
        case "bmp":
            return createjs.LoadQueue.IMAGE;
        case "ogg":
        case "mp3":
        case "wav":
            return createjs.LoadQueue.SOUND;
        case "json":
            return createjs.LoadQueue.JSON;
        case "xml":
            return createjs.LoadQueue.XML;
        case "css":
            return createjs.LoadQueue.CSS;
        case "js":
            return createjs.LoadQueue.JAVASCRIPT;
        case "svg":
            return createjs.LoadQueue.SVG;
        default:
            return createjs.LoadQueue.TEXT
        }
    };
    a._sendFileProgress = function(b, a) {
        if (this._isCanceled())
            return this._cleanUp(), void 0;
        if (this.hasEventListener("fileprogress")) {
            var c = new createjs.Event("fileprogress");
            c.progress = a;
            c.loaded = a;
            c.total = 1;
            c.item = b;
            this.dispatchEvent(c)
        }
    };
    a._sendFileComplete = function(b, a) {
        if (!this._isCanceled()) {
            var c = new createjs.Event("fileload");
            c.loader = a;
            c.item = b;
            c.result = this._loadedResults[b.id];
            c.rawResult = this._loadedRawResults[b.id];
            b.completeHandler && b.completeHandler(c);
            this.hasEventListener("fileload") && this.dispatchEvent(c)
        }
    };
    a._sendFileStart = function(b) {
        var a = new createjs.Event("filestart");
        a.item = b;
        this.hasEventListener("filestart") && this.dispatchEvent(a)
    };
    a.toString = function() {
        return "[PreloadJS LoadQueue]"
    };
    createjs.LoadQueue = c;
    var b = function() {};
    b.init = function() {
        var a = navigator.userAgent;
        b.isFirefox =- 1 < a.indexOf("Firefox");
        b.isOpera = null != window.opera;
        b.isChrome =- 1 < a.indexOf("Chrome");
        b.isIOS =- 1 < a.indexOf("iPod")||-1 < a.indexOf("iPhone")||-1 < a.indexOf("iPad")
    };
    b.init();
    createjs.LoadQueue.BrowserDetect = b
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a) {
        this.init(b, a)
    }, a = c.prototype = new createjs.AbstractLoader;
    a._loadTimeout = null;
    a._tagCompleteProxy = null;
    a._isAudio=!1;
    a._tag = null;
    a._jsonResult = null;
    a.init = function(b, a) {
        this._item = b;
        this._basePath = a;
        this._tag = b.tag;
        this._isAudio = window.HTMLAudioElement && b.tag instanceof HTMLAudioElement;
        this._tagCompleteProxy = createjs.proxy(this._handleLoad, this)
    };
    a.getResult = function() {
        return this._item.type == createjs.LoadQueue.JSONP ? this._jsonResult : this._tag
    };
    a.cancel = function() {
        this.canceled =
        !0;
        this._clean();
        this.getItem()
    };
    a.load = function() {
        var b = this._item, a = this._tag;
        clearTimeout(this._loadTimeout);
        this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), createjs.LoadQueue.LOAD_TIMEOUT);
        this._isAudio && (a.src = null, a.preload = "auto");
        a.onerror = createjs.proxy(this._handleError, this);
        this._isAudio ? (a.onstalled = createjs.proxy(this._handleStalled, this), a.addEventListener("canplaythrough", this._tagCompleteProxy, !1)) : (a.onload = createjs.proxy(this._handleLoad, this), a.onreadystatechange =
        createjs.proxy(this._handleReadyStateChange, this));
        var c = this.buildPath(b.src, this._basePath, b.values);
        switch (b.type) {
        case createjs.LoadQueue.CSS:
            a.href = c;
            break;
        case createjs.LoadQueue.SVG:
            a.data = c;
            break;
        default:
            a.src = c
        }
        if (b.type == createjs.LoadQueue.JSONP) {
            if (null == b.callback)
                throw Error("callback is required for loading JSONP requests.");
            if (null != window[b.callback])
                throw Error('JSONP callback "' + b.callback + '" already exists on window. You need to specify a different callback. Or re-name the current one.');
            window[b.callback] = createjs.proxy(this._handleJSONPLoad, this)
        }
        b.type != createjs.LoadQueue.SVG && b.type != createjs.LoadQueue.JSONP && b.type != createjs.LoadQueue.JSON && b.type != createjs.LoadQueue.JAVASCRIPT && b.type != createjs.LoadQueue.CSS || (this._startTagVisibility = a.style.visibility, a.style.visibility = "hidden", (document.body || document.getElementsByTagName("body")[0]).appendChild(a));
        null != a.load && a.load()
    };
    a._handleJSONPLoad = function(b) {
        this._jsonResult = b
    };
    a._handleTimeout = function() {
        this._clean();
        var b =
        new createjs.Event("error");
        b.text = "PRELOAD_TIMEOUT";
        this._sendError(b)
    };
    a._handleStalled = function() {};
    a._handleError = function() {
        this._clean();
        var b = new createjs.Event("error");
        this._sendError(b)
    };
    a._handleReadyStateChange = function() {
        clearTimeout(this._loadTimeout);
        var b = this.getItem().tag;
        "loaded" != b.readyState && "complete" != b.readyState || this._handleLoad()
    };
    a._handleLoad = function() {
        if (!this._isCanceled()) {
            var b = this.getItem(), a = b.tag;
            if (!(this.loaded || this.isAudio && 4 !== a.readyState)) {
                switch (this.loaded =
                !0, b.type) {
                case createjs.LoadQueue.SVG:
                case createjs.LoadQueue.JSONP:
                    a.style.visibility = this._startTagVisibility, (document.body || document.getElementsByTagName("body")[0]).removeChild(a)
                }
                this._clean();
                this._sendComplete()
            }
        }
    };
    a._clean = function() {
        clearTimeout(this._loadTimeout);
        var b = this.getItem().tag;
        b.onload = null;
        b.removeEventListener && b.removeEventListener("canplaythrough", this._tagCompleteProxy, !1);
        b.onstalled = null;
        b.onprogress = null;
        b.onerror = null;
        b.parentNode && b.parentNode.removeChild(b);
        b = this.getItem();
        b.type == createjs.LoadQueue.JSONP && (window[b.callback] = null)
    };
    a.toString = function() {
        return "[PreloadJS TagLoader]"
    };
    createjs.TagLoader = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a) {
        this.init(b, a)
    }, a = c.prototype = new createjs.AbstractLoader;
    a._request = null;
    a._loadTimeout = null;
    a._xhrLevel = 1;
    a._response = null;
    a._rawResponse = null;
    a.init = function(b, a) {
        this._item = b;
        this._basePath = a;
        !this._createXHR(b)
    };
    a.getResult = function(b) {
        return b && this._rawResponse ? this._rawResponse : this._response
    };
    a.cancel = function() {
        this.canceled=!0;
        this._clean();
        this._request.abort()
    };
    a.load = function() {
        if (null == this._request)
            return this._handleError(), void 0;
        this._request.onloadstart =
        createjs.proxy(this._handleLoadStart, this);
        this._request.onprogress = createjs.proxy(this._handleProgress, this);
        this._request.onabort = createjs.proxy(this._handleAbort, this);
        this._request.onerror = createjs.proxy(this._handleError, this);
        this._request.ontimeout = createjs.proxy(this._handleTimeout, this);
        1 == this._xhrLevel && (this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), createjs.LoadQueue.LOAD_TIMEOUT));
        this._request.onload = createjs.proxy(this._handleLoad, this);
        this._request.onreadystatechange =
        createjs.proxy(this._handleReadyStateChange, this);
        try {
            this._item.values && this._item.method != createjs.LoadQueue.GET ? this._item.method == createjs.LoadQueue.POST && this._request.send(this._formatQueryString(this._item.values)) : this._request.send()
        } catch (b) {
            var a = new createjs.Event("error");
            a.error = b;
            this._sendError(a)
        }
    };
    a.getAllResponseHeaders = function() {
        return this._request.getAllResponseHeaders instanceof Function ? this._request.getAllResponseHeaders() : null
    };
    a.getResponseHeader = function(b) {
        return this._request.getResponseHeader instanceof
        Function ? this._request.getResponseHeader(b) : null
    };
    a._handleProgress = function(b) {
        if (b&&!(0 < b.loaded && 0 == b.total)) {
            var a = new createjs.Event("progress");
            a.loaded = b.loaded;
            a.total = b.total;
            this._sendProgress(a)
        }
    };
    a._handleLoadStart = function() {
        clearTimeout(this._loadTimeout);
        this._sendLoadStart()
    };
    a._handleAbort = function(b) {
        this._clean();
        b = new createjs.Event("error");
        b.text = "XHR_ABORTED";
        this._sendError(b)
    };
    a._handleError = function() {
        this._clean();
        var b = new createjs.Event("error");
        this._sendError(b)
    };
    a._handleReadyStateChange =
    function() {
        4 == this._request.readyState && this._handleLoad()
    };
    a._handleLoad = function() {
        if (!this.loaded) {
            if (this.loaded=!0, !this._checkError()
                )return this._handleError(), void 0;
            this._response = this._getResponse();
            this._clean();
            this._generateTag() && this._sendComplete()
        }
    };
    a._handleTimeout = function(b) {
        this._clean();
        (new createjs.Event("error")).text = "PRELOAD_TIMEOUT";
        this._sendError(b)
    };
    a._checkError = function() {
        switch (parseInt(this._request.status)) {
        case 404:
        case 0:
            return !1
        }
        return !0
    };
    a._getResponse = function() {
        if (null !=
        this._response)
            return this._response;
        if (null != this._request.response)
            return this._request.response;
        try {
            if (null != this._request.responseText)
                return this._request.responseText
        } catch (b) {}
        try {
            if (null != this._request.responseXML)
                return this._request.responseXML
        } catch (a) {}
        return null
    };
    a._createXHR = function(b) {
        var a = document.createElement("a");
        a.href = this.buildPath(b.src, this._basePath);
        var c = document.createElement("a");
        c.href = location.href;
        a = "" != a.hostname && (a.port != c.port || a.protocol != c.protocol || a.hostname !=
        c.hostname);
        c = null;
        if (a && window.XDomainRequest)
            c = new XDomainRequest;
        else if (window.XMLHttpRequest)
            c = new XMLHttpRequest;
        else 
            try {
                c = new ActiveXObject("Msxml2.XMLHTTP.6.0")
        } catch (e) {
            try {
                c = new ActiveXObject("Msxml2.XMLHTTP.3.0")
            } catch (f) {
                try {
                    c = new ActiveXObject("Msxml2.XMLHTTP")
                } catch (g) {
                    return !1
                }
            }
        }
        b.type == createjs.LoadQueue.TEXT && c.overrideMimeType && c.overrideMimeType("text/plain; charset=x-user-defined");
        this._xhrLevel = "string" == typeof c.responseType ? 2 : 1;
        var h = null;
        return h = b.method == createjs.LoadQueue.GET ?
        this.buildPath(b.src, this._basePath, b.values) : this.buildPath(b.src, this._basePath), c.open(b.method || createjs.LoadQueue.GET, h, !0), a && c instanceof XMLHttpRequest && 1 == this._xhrLevel && c.setRequestHeader("Origin", location.origin), b.values && b.method == createjs.LoadQueue.POST && c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), createjs.LoadQueue.isBinary(b.type) && (c.responseType = "arraybuffer"), this._request = c, !0
    };
    a._clean = function() {
        clearTimeout(this._loadTimeout);
        var b = this._request;
        b.onloadstart = null;
        b.onprogress = null;
        b.onabort = null;
        b.onerror = null;
        b.onload = null;
        b.ontimeout = null;
        b.onloadend = null;
        b.onreadystatechange = null
    };
    a._generateTag = function() {
        var b = this._item.tag;
        switch (this._item.type) {
        case createjs.LoadQueue.IMAGE:
            return b.onload = createjs.proxy(this._handleTagReady, this), b.src = this.buildPath(this._item.src, this._basePath, this._item.values), this._rawResponse = this._response, this._response = b, !1;
        case createjs.LoadQueue.JAVASCRIPT:
            return b = document.createElement("script"),
            b.text = this._response, this._rawResponse = this._response, this._response = b, !0;
        case createjs.LoadQueue.CSS:
            if (document.getElementsByTagName("head")[0].appendChild(b), b.styleSheet)
                b.styleSheet.cssText = this._response;
            else {
                var a = document.createTextNode(this._response);
                b.appendChild(a)
            }
            return this._rawResponse = this._response, this._response = b, !0;
        case createjs.LoadQueue.XML:
            return a = this._parseXML(this._response, "text/xml"), this._response = a, !0;
        case createjs.LoadQueue.SVG:
            return a = this._parseXML(this._response,
            "image/svg+xml"), this._rawResponse = this._response, null != a.documentElement ? (b.appendChild(a.documentElement), this._response = b) : this._response = a, !0;
        case createjs.LoadQueue.JSON:
            b = {};
            try {
                b = JSON.parse(this._response)
            } catch (c) {
                b = c
            }
            return this._rawResponse = this._response, this._response = b, !0
        }
        return !0
    };
    a._parseXML = function(b, a) {
        var c = null;
        window.DOMParser ? c = (new DOMParser).parseFromString(b, a) : (c = new ActiveXObject("Microsoft.XMLDOM"), c.async=!1, c.loadXML(b));
        return c
    };
    a._handleTagReady = function() {
        this._sendComplete()
    };
    a.toString = function() {
        return "[PreloadJS XHRLoader]"
    };
    createjs.XHRLoader = c
})();
"object" != typeof JSON && (JSON = {});
(function() {
    function c(b) {
        return 10 > b ? "0" + b : b
    }
    function a(b) {
        return d.lastIndex = 0, d.test(b) ? '"' + b.replace(d, function(b) {
            var a = g[b];
            return "string" == typeof a ? a : "\\u" + ("0000" + b.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + b + '"'
    }
    function b(c, d) {
        var g, k, v, x, y, p = e, C = d[c];
        switch (C && "object" == typeof C && "function" == typeof C.toJSON && (C = C.toJSON(c)), "function" == typeof h && (C = h.call(d, c, C)),
        typeof C) {
        case "string":
            return a(C);
        case "number":
            return isFinite(C) ? String(C) : "null";
        case "boolean":
        case "null":
            return String(C);
        case "object":
            if (!C)
                return "null";
            if (e += f, y = [], "[object Array]" === Object.prototype.toString.apply(C)
                ) {
                x = C.length;
                for (g = 0; x > g; g += 1)
                    y[g] = b(g, C) || "null";
                return v = 0 === y.length ? "[]" : e ? "[\n" + e + y.join(",\n" + e) + "\n" + p + "]" : "[" + y.join(",") + "]", e = p, v
            }
            if (h && "object" == typeof h)
                for (x = h.length, g = 0; x > g; g += 1)
                    "string" == typeof h[g] && (k = h[g], v = b(k, C), v && y.push(a(k) + (e ? ": " : ":") + v));
            else 
                for (k in C)
                    Object.prototype.hasOwnProperty.call(C, k) && (v = b(k, C), v && y.push(a(k) + (e ? ": " : ":") + v));
            return v = 0 === y.length ? "{}" : e ? "{\n" + e +
            y.join(",\n" + e) + "\n" + p + "}" : "{" + y.join(",") + "}", e = p, v
        }
    }
    "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function() {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + c(this.getUTCMonth() + 1) + "-" + c(this.getUTCDate()) + "T" + c(this.getUTCHours()) + ":" + c(this.getUTCMinutes()) + ":" + c(this.getUTCSeconds()) + "Z" : null
    }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
        return this.valueOf()
    });
    var k = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    d = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, e, f, g = {
        "\b": "\\b",
        "\t": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    }, h;
    "function" != typeof JSON.stringify && (JSON.stringify = function(a, c, d) {
        var g;
        if (e = "", f = "", "number" == typeof d)
            for (g = 0; d > g; g += 1)
                f += " ";
        else 
            "string" == typeof d && (f = d);
        if (h = c, c && "function" != typeof c && ("object" != typeof c || "number" != typeof c.length)
            )throw Error("JSON.stringify");
        return b("", {
            "": a
        })
    });
    "function" != typeof JSON.parse && (JSON.parse = function(b, a) {
        function c(b, d) {
            var e, g, k = b[d];
            if (k && "object" == typeof k)
                for (e in k)
                    Object.prototype.hasOwnProperty.call(k, e) && (g = c(k, e), void 0 !== g ? k[e] = g : delete k[e]);
            return a.call(b, d, k)
        }
        var d;
        if (b = String(b), k.lastIndex = 0, k.test(b) && (b = b.replace(k, function(b) {
            return "\\u" + ("0000" + b.charCodeAt(0).toString(16)).slice(-4)
        }))
            , /^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
        "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")))return d = eval("(" + b + ")"), "function" == typeof a ? c({
            "": d
        }, "") : d;
        throw new SyntaxError("JSON.parse");
    })
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c) {
        this.initialize(b, a, c)
    }, a = c.prototype;
    a.type = null;
    a.target = null;
    a.currentTarget = null;
    a.eventPhase = 0;
    a.bubbles=!1;
    a.cancelable=!1;
    a.timeStamp = 0;
    a.defaultPrevented=!1;
    a.propagationStopped=!1;
    a.immediatePropagationStopped=!1;
    a.removed=!1;
    a.initialize = function(b, a, c) {
        this.type = b;
        this.bubbles = a;
        this.cancelable = c;
        this.timeStamp = (new Date).getTime()
    };
    a.preventDefault = function() {
        this.defaultPrevented=!0
    };
    a.stopPropagation = function() {
        this.propagationStopped=!0
    };
    a.stopImmediatePropagation =
    function() {
        this.immediatePropagationStopped = this.propagationStopped=!0
    };
    a.remove = function() {
        this.removed=!0
    };
    a.clone = function() {
        return new c(this.type, this.bubbles, this.cancelable)
    };
    a.toString = function() {
        return "[Event (type=" + this.type + ")]"
    };
    createjs.Event = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        this.initialize()
    }, a = c.prototype;
    c.initialize = function(b) {
        b.addEventListener = a.addEventListener;
        b.on = a.on;
        b.removeEventListener = b.off = a.removeEventListener;
        b.removeAllEventListeners = a.removeAllEventListeners;
        b.hasEventListener = a.hasEventListener;
        b.dispatchEvent = a.dispatchEvent;
        b._dispatchEvent = a._dispatchEvent
    };
    a._listeners = null;
    a._captureListeners = null;
    a.initialize = function() {};
    a.addEventListener = function(b, a, c) {
        var e;
        e = c ? this._captureListeners = this._captureListeners ||
        {} : this._listeners = this._listeners || {};
        var f = e[b];
        return f && this.removeEventListener(b, a, c), f = e[b], f ? f.push(a) : e[b] = [a], a
    };
    a.on = function(b, a, c, e, f, g) {
        return a.handleEvent && (c = c || a, a = a.handleEvent), c = c || this, this.addEventListener(b, function(b) {
            a.call(c, b, f);
            e && b.remove()
        }, g)
    };
    a.removeEventListener = function(b, a, c) {
        if (c = c ? this._captureListeners : this._listeners) {
            var e = c[b];
            if (e)
                for (var f = 0, g = e.length; g > f; f++)
                    if (e[f] == a) {
                        1 == g ? delete c[b] : e.splice(f, 1);
                        break
                    }
        }
    };
    a.off = a.removeEventListener;
    a.removeAllEventListeners =
    function(b) {
        b ? (this._listeners && delete this._listeners[b], this._captureListeners && delete this._captureListeners[b]) : this._listeners = this._captureListeners = null
    };
    a.dispatchEvent = function(b, a) {
        if ("string" == typeof b) {
            var c = this._listeners;
            if (!c ||!c[b])
                return !1;
            b = new createjs.Event(b)
        }
        if (b.target = a || this, b.bubbles && this.parent) {
            for (var e = this, c = [e]; e.parent;)
                c.push(e = e.parent);
            for (var f = c.length, e = f-1; 0 <= e&&!b.propagationStopped; e--)
                c[e]._dispatchEvent(b, 1 + (0 == e));
            for (e = 1; f > e&&!b.propagationStopped; e++)
                c[e]._dispatchEvent(b,
                3)
        } else 
            this._dispatchEvent(b, 2);
        return b.defaultPrevented
    };
    a.hasEventListener = function(b) {
        var a = this._listeners, c = this._captureListeners;
        return !!(a && a[b] || c && c[b])
    };
    a.toString = function() {
        return "[EventDispatcher]"
    };
    a._dispatchEvent = function(b, a) {
        var c, e = 1 == a ? this._captureListeners: this._listeners;
        if (b && e && (e = e[b.type]) && (c = e.length)) {
            b.currentTarget = this;
            b.eventPhase = a;
            b.removed=!1;
            for (var e = e.slice(), f = 0; c > f&&!b.immediatePropagationStopped; f++) {
                var g = e[f];
                g.handleEvent ? g.handleEvent(b) : g(b);
                b.removed &&
                (this.off(b.type, g, 1 == a), b.removed=!1)
            }
        }
    };
    createjs.EventDispatcher = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(b, a, c) {
        this.initialize(b, a, c)
    }, a = c.prototype = new createjs.EventDispatcher;
    c.NONE = 0;
    c.LOOP = 1;
    c.REVERSE = 2;
    c.IGNORE = {};
    c._tweens = [];
    c._plugins = {};
    c.get = function(b, a, d, e) {
        return e && c.removeTweens(b), new c(b, a, d)
    };
    c.tick = function(b, a) {
        for (var d = c._tweens.slice(), e = d.length-1; 0 <= e; e--) {
            var f = d[e];
            a&&!f.ignoreGlobalPause || f._paused || f.tick(f._useTicks ? 1 : b)
        }
    };
    c.handleEvent = function(b) {
        "tick" == b.type && this.tick(b.delta, b.paused)
    };
    c.removeTweens = function(b) {
        if (b.tweenjs_count) {
            for (var a =
            c._tweens, d = a.length-1; 0 <= d; d--)
                a[d]._target == b && (a[d]._paused=!0, a.splice(d, 1));
            b.tweenjs_count = 0
        }
    };
    c.removeAllTweens = function() {
        for (var b = c._tweens, a = 0, d = b.length; d > a; a++) {
            var e = b[a];
            e.paused=!0;
            e.target.tweenjs_count = 0
        }
        b.length = 0
    };
    c.hasActiveTweens = function(b) {
        return b ? b.tweenjs_count : c._tweens&&!!c._tweens.length
    };
    c.installPlugin = function(b, a) {
        var d = b.priority;
        null == d && (b.priority = d = 0);
        for (var e = 0, f = a.length, g = c._plugins; f > e; e++) {
            var h = a[e];
            if (g[h]) {
                for (var m = g[h], n = 0, w = m.length; w > n&&!(d < m[n].priority); n++);
                g[h].splice(n, 0, b)
            } else 
                g[h] = [b]
        }
    };
    c._register = function(b, a) {
        var d = b._target, e = c._tweens;
        if (a)
            d && (d.tweenjs_count = d.tweenjs_count ? d.tweenjs_count + 1 : 1), e.push(b), !c._inited && createjs.Ticker && (createjs.Ticker.addEventListener("tick", c), c._inited=!0);
        else 
            for (d && d.tweenjs_count--, d = e.length; d--;)
                if (e[d] == b)
                    return e.splice(d, 1), void 0
    };
    a.ignoreGlobalPause=!1;
    a.loop=!1;
    a.duration = 0;
    a.pluginData = null;
    a.target = null;
    a.position = null;
    a.passive=!1;
    a._paused=!1;
    a._curQueueProps = null;
    a._initQueueProps = null;
    a._steps =
    null;
    a._actions = null;
    a._prevPosition = 0;
    a._stepPosition = 0;
    a._prevPos =- 1;
    a._target = null;
    a._useTicks=!1;
    a._inited=!1;
    a.initialize = function(b, a, d) {
        this.target = this._target = b;
        a && (this._useTicks = a.useTicks, this.ignoreGlobalPause = a.ignoreGlobalPause, this.loop = a.loop, a.onChange && this.addEventListener("change", a.onChange), a.override && c.removeTweens(b));
        this.pluginData = d || {};
        this._curQueueProps = {};
        this._initQueueProps = {};
        this._steps = [];
        this._actions = [];
        a && a.paused ? this._paused=!0 : c._register(this, !0);
        a && null !=
        a.position && this.setPosition(a.position, c.NONE)
    };
    a.wait = function(b, a) {
        if (null == b || 0 >= b)
            return this;
        var c = this._cloneProps(this._curQueueProps);
        return this._addStep({
            d: b,
            p0: c,
            e: this._linearEase,
            p1: c,
            v: a
        })
    };
    a.to = function(b, a, c) {
        return (isNaN(a) || 0 > a) && (a = 0), this._addStep({
            d: a || 0,
            p0: this._cloneProps(this._curQueueProps),
            e: c,
            p1: this._cloneProps(this._appendQueueProps(b))
        })
    };
    a.call = function(b, a, c) {
        return this._addAction({
            f: b,
            p: a ? a: [this],
            o: c ? c: this._target
        })
    };
    a.set = function(b, a) {
        return this._addAction({
            f: this._set,
            o: this,
            p: [b, a ? a: this._target]
        })
    };
    a.play = function(b) {
        return b || (b = this), this.call(b.setPaused, [!1], b)
    };
    a.pause = function(b) {
        return b || (b = this), this.call(b.setPaused, [!0], b)
    };
    a.setPosition = function(b, a) {
        0 > b && (b = 0);
        null == a && (a = 1);
        var c = b, e=!1;
        if (c >= this.duration && (this.loop ? c%=this.duration : (c = this.duration, e=!0)), c == this._prevPos)
            return e;
        var f = this._prevPos;
        if (this.position = this._prevPos = c, this._prevPosition = b, this._target)
            if (e)
                this._updateTargetProps(null, 1);
            else if (0 < this._steps.length) {
                for (var g =
                0, h = this._steps.length; h > g&&!(this._steps[g].t > c); g++);
                g = this._steps[g-1];
                this._updateTargetProps(g, (this._stepPosition = c - g.t) / g.d)
            }
        return 0 != a && 0 < this._actions.length && (this._useTicks ? this._runActions(c, c) : 1 == a && f > c ? (f != this.duration && this._runActions(f, this.duration), this._runActions(0, c, !0)) : this._runActions(f, c)), e && this.setPaused(!0), this.dispatchEvent("change"), e
    };
    a.tick = function(b) {
        this._paused || this.setPosition(this._prevPosition + b)
    };
    a.setPaused = function(b) {
        return this._paused=!!b, c._register(this,
        !b), this
    };
    a.w = a.wait;
    a.t = a.to;
    a.c = a.call;
    a.s = a.set;
    a.toString = function() {
        return "[Tween]"
    };
    a.clone = function() {
        throw "Tween can not be cloned.";
    };
    a._updateTargetProps = function(b, a) {
        var d, e, f, g;
        if (b || 1 != a) {
            if (this.passive=!!b.v, this.passive)
                return;
            b.e && (a = b.e(a, 0, 1, 1));
            d = b.p0;
            e = b.p1
        } else 
            this.passive=!1, d = e = this._curQueueProps;
        for (var h in this._initQueueProps) {
            null == (f = d[h]) && (d[h] = f = this._initQueueProps[h]);
            null == (g = e[h]) && (e[h] = g = f);
            f = f == g || 0 == a || 1 == a || "number" != typeof f ? 1 == a ? g : f : f + (g - f) * a;
            var m=!1;
            if (g = c._plugins[h])
                for (var n = 0, w = g.length; w > n; n++) {
                    var t = g[n].tween(this, h, f, d, e, a, !!b && d == e, !b);
                    t == c.IGNORE ? m=!0 : f = t
                }
            m || (this._target[h] = f)
        }
    };
    a._runActions = function(a, c, d) {
        var e = a, f = c, g =- 1, h = this._actions.length, m = 1;
        for (a > c && (e = c, f = a, g = h, h = m =- 1); (g += m) != h;) {
            c = this._actions[g];
            var n = c.t;
            (n == f || n > e && f > n || d && n == a) && c.f.apply(c.o, c.p)
        }
    };
    a._appendQueueProps = function(a) {
        var k, d, e, f, g, h;
        for (h in a)
            if (void 0 === this._initQueueProps[h]) {
                if (d = this._target[h], k = c._plugins[h])
                    for (e = 0, f = k.length; f > e; e++)
                        d = k[e].init(this,
                        h, d);
                        this._initQueueProps[h] = this._curQueueProps[h] = void 0 === d ? null : d
            }
        for (h in a) {
            if (d = this._curQueueProps[h], k = c._plugins[h])
                for (g = g || {}, e = 0, f = k.length; f > e; e++)
                    k[e].step && k[e].step(this, h, d, a[h], g);
            this._curQueueProps[h] = a[h]
        }
        return g && this._appendQueueProps(g), this._curQueueProps
    };
    a._cloneProps = function(a) {
        var c = {}, d;
        for (d in a)
            c[d] = a[d];
        return c
    };
    a._addStep = function(a) {
        return 0 < a.d && (this._steps.push(a), a.t = this.duration, this.duration += a.d), this
    };
    a._addAction = function(a) {
        return a.t = this.duration,
        this._actions.push(a), this
    };
    a._set = function(a, c) {
        for (var d in a)
            c[d] = a[d]
    };
    createjs.Tween = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(a, c, d) {
        this.initialize(a, c, d)
    }, a = c.prototype = new createjs.EventDispatcher;
    a.ignoreGlobalPause=!1;
    a.duration = 0;
    a.loop=!1;
    a.position = null;
    a._paused=!1;
    a._tweens = null;
    a._labels = null;
    a._labelList = null;
    a._prevPosition = 0;
    a._prevPos =- 1;
    a._useTicks=!1;
    a.initialize = function(a, c, d) {
        this._tweens = [];
        d && (this._useTicks = d.useTicks, this.loop = d.loop, this.ignoreGlobalPause = d.ignoreGlobalPause, d.onChange && this.addEventListener("change", d.onChange));
        a && this.addTween.apply(this, a);
        this.setLabels(c);
        d && d.paused ? this._paused=!0 : createjs.Tween._register(this, !0);
        d && null != d.position && this.setPosition(d.position, createjs.Tween.NONE)
    };
    a.addTween = function(a) {
        var c = arguments.length;
        if (1 < c) {
            for (var d = 0; c > d; d++)
                this.addTween(arguments[d]);
            return arguments[0]
        }
        return 0 == c ? null : (this.removeTween(a), this._tweens.push(a), a.setPaused(!0), a._paused=!1, a._useTicks = this._useTicks, a.duration > this.duration && (this.duration = a.duration), 0 <= this._prevPos && a.setPosition(this._prevPos, createjs.Tween.NONE), a)
    };
    a.removeTween =
    function(a) {
        var c = arguments.length;
        if (1 < c) {
            for (var d=!0, e = 0; c > e; e++)
                d = d && this.removeTween(arguments[e]);
            return d
        }
        if (0 == c)
            return !1;
        c = this._tweens;
        for (e = c.length; e--;)
            if (c[e] == a)
                return c.splice(e, 1), a.duration >= this.duration && this.updateDuration(), !0;
        return !1
    };
    a.addLabel = function(a, c) {
        this._labels[a] = c;
        var d = this._labelList;
        if (d) {
            for (var e = 0, f = d.length; f > e&&!(c < d[e].position); e++);
            d.splice(e, 0, {
                label: a,
                position: c
            })
        }
    };
    a.setLabels = function(a) {
        this._labels = a ? a : {}
    };
    a.getLabels = function() {
        var a = this._labelList;
        if (!a) {
            var a = this._labelList = [], c = this._labels, d;
            for (d in c)
                a.push({
                    label: d,
                    position: c[d]
                });
            a.sort(function(a, b) {
                return a.position - b.position
            })
        }
        return a
    };
    a.getCurrentLabel = function() {
        var a = this.getLabels(), c = this.position, d = a.length;
        if (d) {
            for (var e = 0; d > e&&!(c < a[e].position); e++);
            return 0 == e ? null : a[e-1].label
        }
        return null
    };
    a.gotoAndPlay = function(a) {
        this.setPaused(!1);
        this._goto(a)
    };
    a.gotoAndStop = function(a) {
        this.setPaused(!0);
        this._goto(a)
    };
    a.setPosition = function(a, c) {
        0 > a && (a = 0);
        var d = this.loop ? a%this.duration:
        a, e=!this.loop && a >= this.duration;
        if (d == this._prevPos)
            return e;
        this._prevPosition = a;
        this.position = this._prevPos = d;
        for (var f = 0, g = this._tweens.length; g > f; f++)
            if (this._tweens[f].setPosition(d, c), d != this._prevPos)
                return !1;
        return e && this.setPaused(!0), this.dispatchEvent("change"), e
    };
    a.setPaused = function(a) {
        this._paused=!!a;
        createjs.Tween._register(this, !a)
    };
    a.updateDuration = function() {
        for (var a = this.duration = 0, c = this._tweens.length; c > a; a++) {
            var d = this._tweens[a];
            d.duration > this.duration && (this.duration =
            d.duration)
        }
    };
    a.tick = function(a) {
        this.setPosition(this._prevPosition + a)
    };
    a.resolve = function(a) {
        var c = parseFloat(a);
        return isNaN(c) && (c = this._labels[a]), c
    };
    a.toString = function() {
        return "[Timeline]"
    };
    a.clone = function() {
        throw "Timeline can not be cloned.";
    };
    a._goto = function(a) {
        a = this.resolve(a);
        null != a && this.setPosition(a)
    };
    createjs.Timeline = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "Ease cannot be instantiated.";
    };
    c.linear = function(a) {
        return a
    };
    c.none = c.linear;
    c.get = function(a) {
        return -1 > a && (a =- 1), 1 < a && (a = 1), function(b) {
            return 0 == a ? b : 0 > a ? b * (b*-a + 1 + a) : b * ((2 - b) * a + (1 - a))
        }
    };
    c.getPowIn = function(a) {
        return function(b) {
            return Math.pow(b, a)
        }
    };
    c.getPowOut = function(a) {
        return function(b) {
            return 1 - Math.pow(1 - b, a)
        }
    };
    c.getPowInOut = function(a) {
        return function(b) {
            return 1 > (b*=2) ? 0.5 * Math.pow(b, a) : 1-0.5 * Math.abs(Math.pow(2 - b, a))
        }
    };
    c.quadIn = c.getPowIn(2);
    c.quadOut =
    c.getPowOut(2);
    c.quadInOut = c.getPowInOut(2);
    c.cubicIn = c.getPowIn(3);
    c.cubicOut = c.getPowOut(3);
    c.cubicInOut = c.getPowInOut(3);
    c.quartIn = c.getPowIn(4);
    c.quartOut = c.getPowOut(4);
    c.quartInOut = c.getPowInOut(4);
    c.quintIn = c.getPowIn(5);
    c.quintOut = c.getPowOut(5);
    c.quintInOut = c.getPowInOut(5);
    c.sineIn = function(a) {
        return 1 - Math.cos(a * Math.PI / 2)
    };
    c.sineOut = function(a) {
        return Math.sin(a * Math.PI / 2)
    };
    c.sineInOut = function(a) {
        return -0.5 * (Math.cos(Math.PI * a)-1)
    };
    c.getBackIn = function(a) {
        return function(b) {
            return b *
            b * ((a + 1) * b - a)
        }
    };
    c.backIn = c.getBackIn(1.7);
    c.getBackOut = function(a) {
        return function(b) {
            return --b * b * ((a + 1) * b + a) + 1
        }
    };
    c.backOut = c.getBackOut(1.7);
    c.getBackInOut = function(a) {
        return a*=1.525, function(b) {
            return 1 > (b*=2) ? 0.5 * b * b * ((a + 1) * b - a) : 0.5 * ((b -= 2) * b * ((a + 1) * b + a) + 2)
        }
    };
    c.backInOut = c.getBackInOut(1.7);
    c.circIn = function(a) {
        return - (Math.sqrt(1 - a * a)-1)
    };
    c.circOut = function(a) {
        return Math.sqrt(1 - --a * a)
    };
    c.circInOut = function(a) {
        return 1 > (a*=2)?-0.5 * (Math.sqrt(1 - a * a)-1) : 0.5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
    };
    c.bounceIn =
    function(a) {
        return 1 - c.bounceOut(1 - a)
    };
    c.bounceOut = function(a) {
        return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + 0.75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + 0.9375 : 7.5625 * (a -= 2.625 / 2.75) * a + 0.984375
    };
    c.bounceInOut = function(a) {
        return 0.5 > a ? 0.5 * c.bounceIn(2 * a) : 0.5 * c.bounceOut(2 * a-1) + 0.5
    };
    c.getElasticIn = function(a, b) {
        var c = 2 * Math.PI;
        return function(d) {
            if (0 == d || 1 == d)
                return d;
            var e = b / c * Math.asin(1 / a);
            return - (a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - e) * c / b))
        }
    };
    c.elasticIn = c.getElasticIn(1, 0.3);
    c.getElasticOut =
    function(a, b) {
        var c = 2 * Math.PI;
        return function(d) {
            if (0 == d || 1 == d)
                return d;
            var e = b / c * Math.asin(1 / a);
            return a * Math.pow(2, -10 * d) * Math.sin((d - e) * c / b) + 1
        }
    };
    c.elasticOut = c.getElasticOut(1, 0.3);
    c.getElasticInOut = function(a, b) {
        var c = 2 * Math.PI;
        return function(d) {
            var e = b / c * Math.asin(1 / a);
            return 1 > (d*=2)?-0.5 * a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - e) * c / b) : 0.5 * a * Math.pow(2, -10 * (d -= 1)) * Math.sin((d - e) * c / b) + 1
        }
    };
    c.elasticInOut = c.getElasticInOut(1, 0.3 * 1.5);
    createjs.Ease = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {
        throw "MotionGuidePlugin cannot be instantiated.";
    };
    c.priority = 0;
    c._rotOffS;
    c._rotOffE;
    c._rotNormS;
    c._rotNormE;
    c.install = function() {
        return createjs.Tween.installPlugin(c, ["guide", "x", "y", "rotation"]), createjs.Tween.IGNORE
    };
    c.init = function(a, b, c) {
        var d = a.target;
        return d.hasOwnProperty("x") || (d.x = 0), d.hasOwnProperty("y") || (d.y = 0), d.hasOwnProperty("rotation") || (d.rotation = 0), "rotation" == b && (a.__needsRot=!0), "guide" == b ? null : c
    };
    c.step = function(a, b, k, d, e) {
        if ("rotation" == b && (a.__rotGlobalS =
        k, a.__rotGlobalE = d, c.testRotData(a, e))
            , "guide" != b)return d;
        var f;
        d.hasOwnProperty("path") || (d.path = []);
        b = d.path;
        if (d.hasOwnProperty("end") || (d.end = 1), d.hasOwnProperty("start") || (d.start = k && k.hasOwnProperty("end") && k.path === b ? k.end : 0)
            , d.hasOwnProperty("_segments") && d._length)return d;
        k = b.length;
        if (!(6 <= k && 0 == (k-2)%4))
            throw "invalid 'path' data, please see documentation for valid paths";
        d._segments = [];
        d._length = 0;
        for (var g = 2; k > g; g += 4) {
            for (var h, m, n = b[g-2], w = b[g-1], t = b[g + 0], v = b[g + 1], x = b[g + 2], y = b[g + 3],
            p = n, C = w, B = 0, H = [], E = 1; 10 >= E; E++) {
                m = E / 10;
                var G = 1 - m;
                h = G * G * n + 2 * G * m * t + m * m * x;
                m = G * G * w + 2 * G * m * v + m * m * y;
                B += H[H.push(Math.sqrt((f = h - p) * f + (f = m - C) * f))-1];
                p = h;
                C = m
            }
            d._segments.push(B);
            d._segments.push(H);
            d._length += B
        }
        f = d.orient;
        d.orient=!0;
        b = {};
        return c.calc(d, d.start, b), a.__rotPathS = Number(b.rotation.toFixed(5)), c.calc(d, d.end, b), a.__rotPathE = Number(b.rotation.toFixed(5)), d.orient=!1, c.calc(d, d.end, e), d.orient = f, d.orient ? (a.__guideData = d, c.testRotData(a, e), d) : d
    };
    c.testRotData = function(a, b) {
        if (void 0 === a.__rotGlobalS ||
        void 0 === a.__rotGlobalE) {
            if (a.__needsRot)
                return;
            a.__rotGlobalS = a.__rotGlobalE = void 0 !== a._curQueueProps.rotation ? a._curQueueProps.rotation : b.rotation = a.target.rotation || 0
        }
        if (void 0 !== a.__guideData) {
            var c = a.__guideData, d = a.__rotGlobalE - a.__rotGlobalS, e = a.__rotPathE - a.__rotPathS, f = d - e;
            if ("auto" == c.orient)
                180 < f ? f -= 360 : -180 > f && (f += 360);
            else if ("cw" == c.orient) {
                for (; 0 > f;)
                    f += 360;
                    0 == f && 0 < d && 180 != d && (f += 360)
            } else if ("ccw" == c.orient) {
                for (f = d - (180 < e ? 360 - e : e); 0 < f;)
                    f -= 360;
                    0 == f && 0 > d&&-180 != d && (f -= 360)
            }
            c.rotDelta =
            f;
            c.rotOffS = a.__rotGlobalS - a.__rotPathS;
            a.__rotGlobalS = a.__rotGlobalE = a.__guideData = a.__needsRot = void 0
        }
    };
    c.tween = function(a, b, k, d, e, f, g) {
        e = e.guide;
        if (void 0 == e || e === d.guide)
            return k;
        if (e.lastRatio != f) {
            switch (c.calc(e, (e.end - e.start) * (g ? e.end : f) + e.start, a.target), e.orient) {
            case "cw":
            case "ccw":
            case "auto":
                a.target.rotation += e.rotOffS + e.rotDelta * f;
                break;
            default:
                a.target.rotation += e.rotOffS
            }
            e.lastRatio = f
        }
        return "rotation" != b || e.orient && "false" != e.orient ? a.target[b] : k
    };
    c.calc = function(a, b, k) {
        void 0 ==
        a._segments && c.validate(a);
        void 0 == k && (k = {
            x: 0,
            y: 0,
            rotation: 0
        });
        var d = a._segments, e = a.path, f = a._length * b, g = d.length-2;
        for (b = 0; f > d[b] && g > b;)
            f -= d[b], b += 2;
        for (var d = d[b + 1], h = 0, g = d.length-1; f > d[h] && g > h;)
            f -= d[h], h++;
        f = h/++g + f / (g * d[h]);
        b = 2 * b + 2;
        g = 1 - f;
        return k.x = g * g * e[b-2] + 2 * g * f * e[b + 0] + f * f * e[b + 2], k.y = g * g * e[b-1] + 2 * g * f * e[b + 1] + f * f * e[b + 3], a.orient && (k.rotation = 57.2957795 * Math.atan2((e[b + 1] - e[b-1]) * g + (e[b + 3] - e[b + 1]) * f, (e[b + 0] - e[b-2]) * g + (e[b + 2] - e[b + 0]) * f)), k
    };
    createjs.MotionGuidePlugin = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = createjs.TweenJS = createjs.TweenJS || {};
    c.version = "0.5.0";
    c.buildDate = "Wed, 25 Sep 2013 17:09:35 GMT"
})();
this.createjs = this.createjs || {};
(function() {
    var c = createjs.SoundJS = createjs.SoundJS || {};
    c.version = "0.5.0";
    c.buildDate = "Wed, 25 Sep 2013 17:09:35 GMT"
})();
this.createjs = this.createjs || {};
(function() {
    var c = function() {}, a = c.prototype;
    c.initialize = function(b) {
        b.addEventListener = a.addEventListener;
        b.on = a.on;
        b.removeEventListener = b.off = a.removeEventListener;
        b.removeAllEventListeners = a.removeAllEventListeners;
        b.hasEventListener = a.hasEventListener;
        b.dispatchEvent = a.dispatchEvent;
        b._dispatchEvent = a._dispatchEvent
    };
    a._listeners = null;
    a._captureListeners = null;
    a.initialize = function() {};
    a.addEventListener = function(a, c, d) {
        var e;
        e = d ? this._captureListeners = this._captureListeners || {} : this._listeners =
        this._listeners || {};
        var f = e[a];
        return f && this.removeEventListener(a, c, d), f = e[a], f ? f.push(c) : e[a] = [c], c
    };
    a.on = function(a, c, d, e, f, g) {
        return c.handleEvent && (d = d || c, c = c.handleEvent), d = d || this, this.addEventListener(a, function(a) {
            c.call(d, a, f);
            e && a.remove()
        }, g)
    };
    a.removeEventListener = function(a, c, d) {
        if (d = d ? this._captureListeners : this._listeners) {
            var e = d[a];
            if (e)
                for (var f = 0, g = e.length; g > f; f++)
                    if (e[f] == c) {
                        1 == g ? delete d[a] : e.splice(f, 1);
                        break
                    }
        }
    };
    a.off = a.removeEventListener;
    a.removeAllEventListeners = function(a) {
        a ?
        (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
    };
    a.dispatchEvent = function(a, c) {
        if ("string" == typeof a) {
            var d = this._listeners;
            if (!d ||!d[a])
                return !1;
            a = new createjs.Event(a)
        }
        if (a.target = c || this, a.bubbles && this.parent) {
            for (var e = this, d = [e]; e.parent;)
                d.push(e = e.parent);
            for (var f = d.length, e = f-1; 0 <= e&&!a.propagationStopped; e--)
                d[e]._dispatchEvent(a, 1 + (0 == e));
            for (e = 1; f > e&&!a.propagationStopped; e++)
                d[e]._dispatchEvent(a,
                3)
        } else 
            this._dispatchEvent(a, 2);
        return a.defaultPrevented
    };
    a.hasEventListener = function(a) {
        var c = this._listeners, d = this._captureListeners;
        return !!(c && c[a] || d && d[a])
    };
    a.toString = function() {
        return "[EventDispatcher]"
    };
    a._dispatchEvent = function(a, c) {
        var d, e = 1 == c ? this._captureListeners: this._listeners;
        if (a && e && (e = e[a.type]) && (d = e.length)) {
            a.currentTarget = this;
            a.eventPhase = c;
            a.removed=!1;
            for (var e = e.slice(), f = 0; d > f&&!a.immediatePropagationStopped; f++) {
                var g = e[f];
                g.handleEvent ? g.handleEvent(a) : g(a);
                a.removed &&
                (this.off(a.type, g, 1 == c), a.removed=!1)
            }
        }
    };
    createjs.EventDispatcher = c
})();
this.createjs = this.createjs || {};
(function() {
    var c = function(a, c, d) {
        this.initialize(a, c, d)
    }, a = c.prototype;
    a.type = null;
    a.target = null;
    a.currentTarget = null;
    a.eventPhase = 0;
    a.bubbles=!1;
    a.cancelable=!1;
    a.timeStamp = 0;
    a.defaultPrevented=!1;
    a.propagationStopped=!1;
    a.immediatePropagationStopped=!1;
    a.removed=!1;
    a.initialize = function(a, c, d) {
        this.type = a;
        this.bubbles = c;
        this.cancelable = d;
        this.timeStamp = (new Date).getTime()
    };
    a.preventDefault = function() {
        this.defaultPrevented=!0
    };
    a.stopPropagation = function() {
        this.propagationStopped=!0
    };
    a.stopImmediatePropagation =
    function() {
        this.immediatePropagationStopped = this.propagationStopped=!0
    };
    a.remove = function() {
        this.removed=!0
    };
    a.clone = function() {
        return new c(this.type, this.bubbles, this.cancelable)
    };
    a.toString = function() {
        return "[Event (type=" + this.type + ")]"
    };
    createjs.Event = c
})();
this.createjs = this.createjs || {};
(function() {
    createjs.indexOf = function(c, a) {
        for (var b = 0, k = c.length; k > b; b++)
            if (a === c[b])
                return b;
        return -1
    }
})();
this.createjs = this.createjs || {};
(function() {
    createjs.proxy = function(c, a) {
        var b = Array.prototype.slice.call(arguments, 2);
        return function() {
            return c.apply(a, Array.prototype.slice.call(arguments, 0).concat(b))
        }
    }
})();
this.createjs = this.createjs || {};
(function() {
    function c() {
        throw "Sound cannot be instantiated";
    }
    function a(a, b) {
        this.init(a, b)
    }
    function b() {}
    c.DELIMITER = "|";
    c.AUDIO_TIMEOUT = 8E3;
    c.INTERRUPT_ANY = "any";
    c.INTERRUPT_EARLY = "early";
    c.INTERRUPT_LATE = "late";
    c.INTERRUPT_NONE = "none";
    c.PLAY_INITED = "playInited";
    c.PLAY_SUCCEEDED = "playSucceeded";
    c.PLAY_INTERRUPTED = "playInterrupted";
    c.PLAY_FINISHED = "playFinished";
    c.PLAY_FAILED = "playFailed";
    c.SUPPORTED_EXTENSIONS = "mp3 ogg mpeg wav m4a mp4 aiff wma mid".split(" ");
    c.EXTENSION_MAP = {
        m4a: "mp4"
    };
    c.FILE_PATTERN =
    /^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?( ? : [^?] + ) ? \ / ) ? (( ? : [^/?]+)\.(\w+))(?:\?(\S+)?)?$/;
    c.defaultInterruptBehavior = c.INTERRUPT_NONE;
    c.lastId = 0;
    c.activePlugin = null;
    c.pluginsRegistered=!1;
    c.masterVolume = 1;
    c.masterMute=!1;
    c.instances = [];
    c.idHash = {};
    c.preloadHash = {};
    c.defaultSoundInstance = null;
    c.addEventListener = null;
    c.removeEventListener = null;
    c.removeAllEventListeners = null;
    c.dispatchEvent = null;
    c.hasEventListener = null;
    c._listeners = null;
    createjs.EventDispatcher.initialize(c);
    c.sendFileLoadEvent = function(a) {
        if (c.preloadHash[a])
            for (var b =
            0, f = c.preloadHash[a].length; f > b; b++) {
                var g = c.preloadHash[a][b];
                if (c.preloadHash[a][b]=!0, c.hasEventListener("fileload")
                    ) {
                        var k = new createjs.Event("fileload");
                        k.src = g.src;
                        k.id = g.id;
                        k.data = g.data;
                        c.dispatchEvent(k)
                    }
        }
    };
    c.getPreloadHandlers = function() {
        return {
            callback: createjs.proxy(c.initLoad, c),
            types: ["sound"],
            extensions: c.SUPPORTED_EXTENSIONS
        }
    };
    c.registerPlugin = function(a) {
        return c.pluginsRegistered=!0, null == a?!1 : a.isSupported() ? (c.activePlugin = new a, !0) : !1
    };
    c.registerPlugins = function(a) {
        for (var b =
        0, f = a.length; f > b; b++)
            if (c.registerPlugin(a[b]))
                return !0;
        return !1
    };
    c.initializeDefaultPlugins = function() {
        return null != c.activePlugin?!0 : c.pluginsRegistered?!1 : c.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])?!0 : !1
    };
    c.isReady = function() {
        return null != c.activePlugin
    };
    c.getCapabilities = function() {
        return null == c.activePlugin ? null : c.activePlugin.capabilities
    };
    c.getCapability = function(a) {
        return null == c.activePlugin ? null : c.activePlugin.capabilities[a]
    };
    c.initLoad = function(a, b, f, g, k) {
        a =
        c.registerSound(a, f, g, !1, k);
        return null == a?!1 : a
    };
    c.registerSound = function(b, e, f, g, k) {
        if (!c.initializeDefaultPlugins())
            return !1;
        b instanceof Object && (k = e, e = b.id, f = b.data, b = b.src);
        var m = c.parsePath(b, "sound", e, f);
        if (null == m)
            return !1;
        null != e && (c.idHash[e] = m.src);
        var n = null;
        null != f && (isNaN(f.channels) ? isNaN(f) || (n = parseInt(f)) : n = parseInt(f.channels));
        var w = c.activePlugin.register(m.src, n);
        if (null != w && (null != w.numChannels && (n = w.numChannels), a.create(m.src, n), null != f && isNaN(f) ? f.channels = m.data.channels =
        n || a.maxPerChannel(): f = m.data = n || a.maxPerChannel()
            , null != w.tag ? m.tag = w.tag : w.src && (m.src = w.src), null != w.completeHandler && (m.completeHandler = w.completeHandler), w.type && (m.type = w.type)), 0 != g)if (c.preloadHash[m.src] || (c.preloadHash[m.src] = []), c.preloadHash[m.src].push({
            src : b, id : e, data : f
        })
            , 1 == c.preloadHash[m.src].length)null == k && (k = ""), c.activePlugin.preload(m.src, w, k);
        else if (1 == c.preloadHash[m.src][0])
            return !0;
        return m
    };
    c.registerManifest = function(a, b) {
        for (var c = [], g = 0, k = a.length; k > g; g++)
            c[g] = createjs.Sound.registerSound(a[g].src,
            a[g].id, a[g].data, a[g].preload, b);
        return c
    };
    c.removeSound = function(b) {
        if (null == c.activePlugin)
            return !1;
        b instanceof Object && (b = b.src);
        b = c.getSrcById(b);
        b = c.parsePath(b);
        if (null == b)
            return !1;
        b = b.src;
        for (var e in c.idHash)
            c.idHash[e] == b && delete c.idHash[e];
        return a.removeSrc(b), delete c.preloadHash[b], c.activePlugin.removeSound(b), !0
    };
    c.removeManifest = function(a) {
        for (var b = [], c = 0, g = a.length; g > c; c++)
            b[c] = createjs.Sound.removeSound(a[c].src);
        return b
    };
    c.removeAllSounds = function() {
        c.idHash = {};
        c.preloadHash =
        {};
        a.removeAll();
        c.activePlugin.removeAllSounds()
    };
    c.loadComplete = function(a) {
        var b = c.parsePath(a, "sound");
        return a = b ? c.getSrcById(b.src) : c.getSrcById(a), 1 == c.preloadHash[a][0]
    };
    c.parsePath = function(a, b, f, g) {
        "string" != typeof a && (a = a.toString());
        a = a.split(c.DELIMITER);
        b = {
            type: b || "sound",
            id: f,
            data: g
        };
        f = c.getCapabilities();
        g = 0;
        for (var k = a.length; k > g; g++) {
            var m = a[g], n = m.match(c.FILE_PATTERN);
            if (null == n)
                return !1;
            var w = n[4], n = n[5];
            if (f[n]&&-1 < createjs.indexOf(c.SUPPORTED_EXTENSIONS, n))
                return b.name = w, b.src =
            m, b.extension = n, b
        }
        return null
    };
    c.play = function(a, b, f, g, k, m, n) {
        a = c.createInstance(a);
        return c.playInstance(a, b, f, g, k, m, n) || a.playFailed(), a
    };
    c.createInstance = function(b) {
        if (!c.initializeDefaultPlugins())
            return c.defaultSoundInstance;
        b = c.getSrcById(b);
        b = c.parsePath(b, "sound");
        var e = null;
        return null != b && null != b.src ? (a.create(b.src), e = c.activePlugin.create(b.src)) : e = c.defaultSoundInstance, e.uniqueId = c.lastId++, e
    };
    c.setVolume = function(a) {
        if (null == Number(a))
            return !1;
        if (a = Math.max(0, Math.min(1, a)), c.masterVolume =
        a, !this.activePlugin ||!this.activePlugin.setVolume ||!this.activePlugin.setVolume(a)
            )for (var b = this.instances, f = 0, g = b.length; g > f; f++)
            b[f].setMasterVolume(a)
    };
    c.getVolume = function() {
        return c.masterVolume
    };
    c.setMute = function(a) {
        if (null == a || void 0 == a)
            return !1;
        if (this.masterMute = a, !this.activePlugin ||!this.activePlugin.setMute ||!this.activePlugin.setMute(a)
            )for (var b = this.instances, c = 0, g = b.length; g > c; c++)
            b[c].setMasterMute(a);
        return !0
    };
    c.getMute = function() {
        return this.masterMute
    };
    c.stop = function() {
        for (var a =
        this.instances, b = a.length; b--;)
            a[b].stop()
        };
    c.playInstance = function(a, b, f, g, k, m, n) {
        if (b instanceof Object && (f = b.delay, g = b.offset, k = b.loop, m = b.volume, n = b.pan), b = b || c.defaultInterruptBehavior, null == f && (f = 0)
            , null == g && (g = a.getPosition()), null == k && (k = 0), null == m && (m = a.volume), null == n && (n = a.pan), 0 == f) {
            if (!c.beginPlaying(a, b, g, k, m, n))
                return !1
        } else 
            f = setTimeout(function() {
                c.beginPlaying(a, b, g, k, m, n)
            }, f), a.delayTimeoutId = f;
        return this.instances.push(a), !0
    };
    c.beginPlaying = function(b, c, f, g, k, m) {
        return a.add(b,
        c) ? b.beginPlaying(f, g, k, m)?!0 : (b = createjs.indexOf(this.instances, b), -1 < b && this.instances.splice(b, 1), !1) : !1
    };
    c.getSrcById = function(a) {
        return null == c.idHash || null == c.idHash[a] ? a : c.idHash[a]
    };
    c.playFinished = function(b) {
        a.remove(b);
        b = createjs.indexOf(this.instances, b);
        -1 < b && this.instances.splice(b, 1)
    };
    createjs.Sound = c;
    a.channels = {};
    a.create = function(b, c) {
        return null == a.get(b) ? (a.channels[b] = new a(b, c), !0) : !1
    };
    a.removeSrc = function(b) {
        var c = a.get(b);
        return null == c?!1 : (c.removeAll(), delete a.channels[b],
        !0)
    };
    a.removeAll = function() {
        for (var b in a.channels)
            a.channels[b].removeAll();
        a.channels = {}
    };
    a.add = function(b, c) {
        var f = a.get(b.src);
        return null == f?!1 : f.add(b, c)
    };
    a.remove = function(b) {
        var c = a.get(b.src);
        return null == c?!1 : (c.remove(b), !0)
    };
    a.maxPerChannel = function() {
        return k.maxDefault
    };
    a.get = function(b) {
        return a.channels[b]
    };
    var k = a.prototype;
    k.src = null;
    k.max = null;
    k.maxDefault = 100;
    k.length = 0;
    k.init = function(a, b) {
        this.src = a;
        this.max = b || this.maxDefault;
        -1 == this.max && this.max == this.maxDefault;
        this.instances =
        []
    };
    k.get = function(a) {
        return this.instances[a]
    };
    k.add = function(a, b) {
        return this.getSlot(b, a) ? (this.instances.push(a), this.length++, !0) : !1
    };
    k.remove = function(a) {
        a = createjs.indexOf(this.instances, a);
        return -1 == a?!1 : (this.instances.splice(a, 1), this.length--, !0)
    };
    k.removeAll = function() {
        for (var a = this.length-1; 0 <= a; a--)
            this.instances[a].stop()
    };
    k.getSlot = function(a) {
        for (var b, f, g = 0, k = this.max; k > g; g++) {
            if (b = this.get(g), null == b)
                return !0;
            (a != c.INTERRUPT_NONE || b.playState == c.PLAY_FINISHED) && (0 != g ? b.playState ==
            c.PLAY_FINISHED || b.playState == c.PLAY_INTERRUPTED || b.playState == c.PLAY_FAILED ? f = b : (a == c.INTERRUPT_EARLY && b.getPosition() < f.getPosition() || a == c.INTERRUPT_LATE && b.getPosition() > f.getPosition()) && (f = b) : f = b)
        }
        return null != f ? (f.interrupt(), this.remove(f), !0) : !1
    };
    k.toString = function() {
        return "[Sound SoundChannel]"
    };
    c.defaultSoundInstance = new function() {
        this.isDefault=!0;
        this.addEventListener = this.removeEventListener = this.removeAllEventListener = this.dispatchEvent = this.hasEventListener = this._listeners = this.interrupt =
        this.playFailed = this.pause = this.resume = this.play = this.beginPlaying = this.cleanUp = this.stop = this.setMasterVolume = this.setVolume = this.mute = this.setMute = this.getMute = this.setPan = this.getPosition = this.setPosition = function() {
            return !1
        };
        this.getVolume = this.getPan = this.getDuration = function() {
            return 0
        };
        this.playState = c.PLAY_FAILED;
        this.toString = function() {
            return "[Sound Default Sound Instance]"
        }
    };
    null == createjs.proxy && (createjs.proxy = function() {
        throw "Proxy has been moved to an external file, and must be included separately.";
    });
    b.init = function() {
        var a = window.navigator.userAgent;
        b.isFirefox =- 1 < a.indexOf("Firefox");
        b.isOpera = null != window.opera;
        b.isChrome =- 1 < a.indexOf("Chrome");
        b.isIOS =- 1 < a.indexOf("iPod")||-1 < a.indexOf("iPhone")||-1 < a.indexOf("iPad");
        b.isAndroid =- 1 < a.indexOf("Android");
        b.isBlackberry =- 1 < a.indexOf("Blackberry")
    };
    b.init();
    createjs.Sound.BrowserDetect = b
})();
this.createjs = this.createjs || {};
(function() {
    function c() {
        this.init()
    }
    c.capabilities = null;
    c.isSupported = function() {
        var a = createjs.Sound.BrowserDetect.isIOS || createjs.Sound.BrowserDetect.isAndroid || createjs.Sound.BrowserDetect.isBlackberry;
        return "file:" != location.protocol || a || this.isFileXHRSupported() ? (c.generateCapabilities(), null == c.context?!1 : !0) : !1
    };
    c.isFileXHRSupported = function() {
        var a=!0, c = new XMLHttpRequest;
        try {
            c.open("GET", "fail.fail", !1)
        } catch (d) {
            return a=!1
        }
        c.onerror = function() {
            a=!1
        };
        c.onload = function() {
            a = 404 == this.status ||
            200 == this.status || 0 == this.status && "" != this.response
        };
        try {
            c.send()
        } catch (e) {
            a=!1
        }
        return a
    };
    c.generateCapabilities = function() {
        if (null == c.capabilities) {
            var a = document.createElement("audio");
            if (null == a.canPlayType)
                return null;
            if (window.webkitAudioContext)
                c.context = new webkitAudioContext;
            else {
                if (!window.AudioContext)
                    return null;
                c.context = new AudioContext
            }
            c.compatibilitySetUp();
            c.playEmptySound();
            c.capabilities = {
                panning: !0,
                volume: !0,
                tracks: -1
            };
            for (var k = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP,
            e = 0, f = k.length; f > e; e++) {
                var g = k[e], h = d[g] || g;
                c.capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
            }
            2 > c.context.destination.numberOfChannels && (c.capabilities.panning=!1);
            c.dynamicsCompressorNode = c.context.createDynamicsCompressor();
            c.dynamicsCompressorNode.connect(c.context.destination);
            c.gainNode = c.context.createGain();
            c.gainNode.connect(c.dynamicsCompressorNode)
        }
    };
    c.compatibilitySetUp = function() {
        if (!c.context.createGain) {
            c.context.createGain =
            c.context.createGainNode;
            var a = c.context.createBufferSource();
            a.__proto__.start = a.__proto__.noteGrainOn;
            a.__proto__.stop = a.__proto__.noteOff;
            this.panningModel = 0
        }
    };
    c.playEmptySound = function() {
        var a = this.context.createBuffer(1, 1, 22050), c = this.context.createBufferSource();
        c.buffer = a;
        c.connect(this.context.destination);
        c.start(0, 0, 0)
    };
    var a = c.prototype;
    a.capabilities = null;
    a.volume = 1;
    a.context = null;
    a.panningModel = "equalpower";
    a.dynamicsCompressorNode = null;
    a.gainNode = null;
    a.arrayBuffers = null;
    a.init = function() {
        this.capabilities =
        c.capabilities;
        this.arrayBuffers = {};
        this.context = c.context;
        this.gainNode = c.gainNode;
        this.dynamicsCompressorNode = c.dynamicsCompressorNode
    };
    a.register = function(a) {
        this.arrayBuffers[a]=!0;
        return {
            tag: new createjs.WebAudioPlugin.Loader(a, this)
        }
    };
    a.isPreloadStarted = function(a) {
        return null != this.arrayBuffers[a]
    };
    a.isPreloadComplete = function(a) {
        return !(null == this.arrayBuffers[a] || 1 == this.arrayBuffers[a])
    };
    a.removeFromPreload = function(a) {
        delete this.arrayBuffers[a]
    };
    a.removeSound = function(a) {
        delete this.arrayBuffers[a]
    };
    a.removeAllSounds = function() {
        this.arrayBuffers = {}
    };
    a.addPreloadResults = function(a, c) {
        this.arrayBuffers[a] = c
    };
    a.handlePreloadComplete = function() {
        createjs.Sound.sendFileLoadEvent(this.src)
    };
    a.preload = function(a, c, d) {
        this.arrayBuffers[a]=!0;
        a = new createjs.WebAudioPlugin.Loader(a, this);
        a.onload = this.handlePreloadComplete;
        null != d && (a.src = d + a.src);
        a.load()
    };
    a.create = function(a) {
        return this.isPreloadStarted(a) || this.preload(a), new createjs.WebAudioPlugin.SoundInstance(a, this)
    };
    a.setVolume = function(a) {
        return this.volume =
        a, this.updateVolume(), !0
    };
    a.updateVolume = function() {
        var a = createjs.Sound.masterMute ? 0: this.volume;
        a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
    };
    a.getVolume = function() {
        return this.volume
    };
    a.setMute = function() {
        return this.updateVolume(), !0
    };
    a.toString = function() {
        return "[WebAudioPlugin]"
    };
    createjs.WebAudioPlugin = c
})();
(function() {
    function c(a, c) {
        this.init(a, c)
    }
    var a = c.prototype;
    a.src = null;
    a.uniqueId =- 1;
    a.playState = null;
    a.owner = null;
    a.offset = 0;
    a.delay = 0;
    a._volume = 1;
    Object.defineProperty(a, "volume", {
        get: function() {
            return this._volume
        },
        set: function(a) {
            return null == Number(a)?!1 : (a = Math.max(0, Math.min(1, a)), this._volume = a, this.updateVolume(), void 0)
        }
    });
    a._pan = 0;
    Object.defineProperty(a, "pan", {
        get: function() {
            return this._pan
        },
        set: function(a) {
            return this.owner.capabilities.panning && null != Number(a) ? (a = Math.max(-1, Math.min(1,
            a)), this._pan = a, this.panNode.setPosition(a, 0, -0.5), void 0) : !1
        }
    });
    a.duration = 0;
    a.remainingLoops = 0;
    a.delayTimeoutId = null;
    a.soundCompleteTimeout = null;
    a.panNode = null;
    a.gainNode = null;
    a.sourceNode = null;
    a.sourceNodeNext = null;
    a.muted=!1;
    a.paused=!1;
    a.startTime = 0;
    a.addEventListener = null;
    a.removeEventListener = null;
    a.removeAllEventListeners = null;
    a.dispatchEvent = null;
    a.hasEventListener = null;
    a._listeners = null;
    a.endedHandler = null;
    a.readyHandler = null;
    a.stalledHandler = null;
    a.sendEvent = function(a) {
        a = new createjs.Event(a);
        this.dispatchEvent(a)
    };
    a.init = function(a, c) {
        this.owner = c;
        this.src = a;
        this.panNode = this.owner.context.createPanner();
        this.panNode.panningModel = this.owner.panningModel;
        this.gainNode = this.owner.context.createGain();
        this.gainNode.connect(this.panNode);
        this.owner.isPreloadComplete(this.src) && (this.duration = 1E3 * this.owner.arrayBuffers[this.src].duration);
        this.endedHandler = createjs.proxy(this.handleSoundComplete, this);
        this.readyHandler = createjs.proxy(this.handleSoundReady, this);
        this.stalledHandler = createjs.proxy(this.handleSoundStalled,
        this)
    };
    a.cleanUp = function() {
        this.sourceNode && this.sourceNode.playbackState != this.sourceNode.UNSCHEDULED_STATE && (this.sourceNode = this.cleanUpAudioNode(this.sourceNode), this.sourceNodeNext = this.cleanUpAudioNode(this.sourceNodeNext));
        0 != this.panNode.numberOfOutputs && this.panNode.disconnect(0);
        clearTimeout(this.delayTimeoutId);
        clearTimeout(this.soundCompleteTimeout);
        this.startTime = 0;
        null != window.createjs && createjs.Sound.playFinished(this)
    };
    a.cleanUpAudioNode = function(a) {
        return a && (a.stop(0), a.disconnect(this.gainNode),
        a = null), a
    };
    a.interrupt = function() {
        this.playState = createjs.Sound.PLAY_INTERRUPTED;
        this.cleanUp();
        this.paused=!1;
        this.sendEvent("interrupted")
    };
    a.handleSoundStalled = function() {
        this.sendEvent("failed")
    };
    a.handleSoundReady = function() {
        if (null != window.createjs) {
            if (1E3 * this.offset > this.getDuration())
                return this.playFailed(), void 0;
            0 > this.offset && (this.offset = 0);
            this.playState = createjs.Sound.PLAY_SUCCEEDED;
            this.paused=!1;
            this.panNode.connect(this.owner.gainNode);
            var a = this.owner.arrayBuffers[this.src].duration;
            this.sourceNode = this.createAndPlayAudioNode(this.owner.context.currentTime - a, this.offset);
            this.duration = 1E3 * a;
            this.startTime = this.sourceNode.startTime - this.offset;
            this.soundCompleteTimeout = setTimeout(this.endedHandler, 1E3 * (a - this.offset));
            0 != this.remainingLoops && (this.sourceNodeNext = this.createAndPlayAudioNode(this.startTime, 0))
        }
    };
    a.createAndPlayAudioNode = function(a, c) {
        var d = this.owner.context.createBufferSource();
        return d.buffer = this.owner.arrayBuffers[this.src], d.connect(this.gainNode), this.owner.context.currentTime,
        d.startTime = a + d.buffer.duration, d.start(d.startTime, c, d.buffer.duration - c), d
    };
    a.play = function(a, c, d, e, f, g) {
        this.cleanUp();
        createjs.Sound.playInstance(this, a, c, d, e, f, g)
    };
    a.beginPlaying = function(a, c, d, e) {
        return null != window.createjs && this.src ? (this.offset = a / 1E3, this.remainingLoops = c, this.volume = d, this.pan = e, this.owner.isPreloadComplete(this.src) ? (this.handleSoundReady(null), this.sendEvent("succeeded"), 1) : (this.playFailed(), void 0)) : void 0
    };
    a.pause = function() {
        return this.paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ?
        !1 : (this.paused=!0, this.offset = this.owner.context.currentTime - this.startTime, this.cleanUpAudioNode(this.sourceNode), this.cleanUpAudioNode(this.sourceNodeNext), 0 != this.panNode.numberOfOutputs && this.panNode.disconnect(), clearTimeout(this.delayTimeoutId), clearTimeout(this.soundCompleteTimeout), !0)
    };
    a.resume = function() {
        return this.paused ? (this.handleSoundReady(null), !0) : !1
    };
    a.stop = function() {
        return this.playState = createjs.Sound.PLAY_FINISHED, this.cleanUp(), this.offset = 0, !0
    };
    a.setVolume = function(a) {
        return this.volume =
        a, !0
    };
    a.updateVolume = function() {
        var a = this.muted ? 0: this._volume;
        return a != this.gainNode.gain.value ? (this.gainNode.gain.value = a, !0) : !1
    };
    a.getVolume = function() {
        return this.volume
    };
    a.setMute = function(a) {
        return null == a || void 0 == a?!1 : (this.muted = a, this.updateVolume(), !0)
    };
    a.getMute = function() {
        return this.muted
    };
    a.setPan = function(a) {
        return this.pan = a, this.pan != a?!1 : void 0
    };
    a.getPan = function() {
        return this.pan
    };
    a.getPosition = function() {
        return 1E3 * (this.paused || null == this.sourceNode ? this.offset : this.owner.context.currentTime -
        this.startTime)
    };
    a.setPosition = function(a) {
        return this.offset = a / 1E3, this.sourceNode && this.sourceNode.playbackState != this.sourceNode.UNSCHEDULED_STATE && (this.cleanUpAudioNode(this.sourceNode), this.cleanUpAudioNode(this.sourceNodeNext), clearTimeout(this.soundCompleteTimeout)), this.paused || this.playState != createjs.Sound.PLAY_SUCCEEDED || this.handleSoundReady(null), !0
    };
    a.getDuration = function() {
        return this.duration
    };
    a.handleSoundComplete = function() {
        return this.offset = 0, 0 != this.remainingLoops ? (this.remainingLoops--,
        this.sourceNodeNext ? (this.cleanUpAudioNode(this.sourceNode), this.sourceNode = this.sourceNodeNext, this.startTime = this.sourceNode.startTime, this.sourceNodeNext = this.createAndPlayAudioNode(this.startTime, 0), this.soundCompleteTimeout = setTimeout(this.endedHandler, this.duration)) : this.handleSoundReady(null), this.sendEvent("loop"), void 0) : (null != window.createjs && (this.playState = createjs.Sound.PLAY_FINISHED, this.cleanUp(), this.sendEvent("complete")), void 0)
    };
    a.playFailed = function() {
        null != window.createjs &&
        (this.playState = createjs.Sound.PLAY_FAILED, this.cleanUp(), this.sendEvent("failed"))
    };
    a.toString = function() {
        return "[WebAudioPlugin SoundInstance]"
    };
    createjs.EventDispatcher.initialize(c.prototype);
    createjs.WebAudioPlugin.SoundInstance = c
})();
(function() {
    function c(a, c) {
        this.init(a, c)
    }
    var a = c.prototype;
    a.request = null;
    a.owner = null;
    a.progress =- 1;
    a.src = null;
    a.originalSrc = null;
    a.result = null;
    a.onload = null;
    a.onprogress = null;
    a.onError = null;
    a.init = function(a, c) {
        this.originalSrc = this.src = a;
        this.owner = c
    };
    a.load = function(a) {
        null != a && (this.src = a);
        this.request = new XMLHttpRequest;
        this.request.open("GET", this.src, !0);
        this.request.responseType = "arraybuffer";
        this.request.onload = createjs.proxy(this.handleLoad, this);
        this.request.onError = createjs.proxy(this.handleError,
        this);
        this.request.onprogress = createjs.proxy(this.handleProgress, this);
        this.request.send()
    };
    a.handleProgress = function(a, c) {
        this.progress = a / c;
        null != this.onprogress && this.onprogress({
            loaded: a,
            total: c,
            progress: this.progress
        })
    };
    a.handleLoad = function() {
        this.owner.context.decodeAudioData(this.request.response, createjs.proxy(this.handleAudioDecoded, this), createjs.proxy(this.handleError, this))
    };
    a.handleAudioDecoded = function(a) {
        this.progress = 1;
        this.result = a;
        this.src = this.originalSrc;
        this.owner.addPreloadResults(this.src,
        this.result);
        this.onload && this.onload()
    };
    a.handleError = function(a) {
        this.owner.removeSound(this.src);
        this.onerror && this.onerror(a)
    };
    a.toString = function() {
        return "[WebAudioPlugin Loader]"
    };
    createjs.WebAudioPlugin.Loader = c
})();
this.createjs = this.createjs || {};
(function() {
    function c() {
        this.init()
    }
    c.MAX_INSTANCES = 30;
    c.capabilities = null;
    c.AUDIO_READY = "canplaythrough";
    c.AUDIO_ENDED = "ended";
    c.AUDIO_SEEKED = "seeked";
    c.AUDIO_ERROR = "error";
    c.AUDIO_STALLED = "stalled";
    c.enableIOS=!1;
    c.isSupported = function() {
        if (createjs.Sound.BrowserDetect.isIOS&&!c.enableIOS)
            return !1;
        c.generateCapabilities();
        return null == c.tag || null == c.capabilities?!1 : !0
    };
    c.generateCapabilities = function() {
        if (null == c.capabilities) {
            var a = c.tag = document.createElement("audio");
            if (null == a.canPlayType)
                return null;
            c.capabilities = {
                panning: !0,
                volume: !0,
                tracks: -1
            };
            for (var k = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = k.length; f > e; e++) {
                var g = k[e], h = d[g] || g;
                c.capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
            }
        }
    };
    var a = c.prototype;
    a.capabilities = null;
    a.audioSources = null;
    a.defaultNumChannels = 2;
    a.loadedHandler = null;
    a.init = function() {
        this.capabilities = c.capabilities;
        this.audioSources = {}
    };
    a.register =
    function(a, c) {
        this.audioSources[a]=!0;
        for (var d = createjs.HTMLAudioPlugin.TagPool.get(a), e = null, f = c || this.defaultNumChannels, g = 0; f > g; g++)
            e = this.createTag(a), d.add(e);
        if (e.id = a, this.loadedHandler = createjs.proxy(this.handleTagLoad, this)
            , e.addEventListener && e.addEventListener("canplaythrough", this.loadedHandler), null == e.onreadystatechange)e.onreadystatechange = this.loadedHandler;
        else {
            var h = e.onreadystatechange;
            e.onreadystatechange = function() {
                h();
                this.loadedHandler()
            }
        }
        return {
            tag: e,
            numChannels: f
        }
    };
    a.handleTagLoad =
    function(a) {
        a.target.removeEventListener && a.target.removeEventListener("canplaythrough", this.loadedHandler);
        a.target.onreadystatechange = null;
        a.target.src != a.target.id && createjs.HTMLAudioPlugin.TagPool.checkSrc(a.target.id)
    };
    a.createTag = function(a) {
        var c = document.createElement("audio");
        return c.autoplay=!1, c.preload = "none", c.src = a, c
    };
    a.removeSound = function(a) {
        delete this.audioSources[a];
        createjs.HTMLAudioPlugin.TagPool.remove(a)
    };
    a.removeAllSounds = function() {
        this.audioSources = {};
        createjs.HTMLAudioPlugin.TagPool.removeAll()
    };
    a.create = function(a) {
        if (!this.isPreloadStarted(a)) {
            var c = createjs.HTMLAudioPlugin.TagPool.get(a), d = this.createTag(a);
            d.id = a;
            c.add(d);
            this.preload(a, {
                tag: d
            })
        }
        return new createjs.HTMLAudioPlugin.SoundInstance(a, this)
    };
    a.isPreloadStarted = function(a) {
        return null != this.audioSources[a]
    };
    a.preload = function(a, c, d) {
        this.audioSources[a]=!0;
        null != d && (c.tag.src = d + a);
        new createjs.HTMLAudioPlugin.Loader(a, c.tag)
    };
    a.toString = function() {
        return "[HTMLAudioPlugin]"
    };
    createjs.HTMLAudioPlugin = c
})();
(function() {
    function c(a, c) {
        this.init(a, c)
    }
    var a = c.prototype;
    a.src = null;
    a.uniqueId =- 1;
    a.playState = null;
    a.owner = null;
    a.loaded=!1;
    a.offset = 0;
    a.delay = 0;
    a._volume = 1;
    Object.defineProperty(a, "volume", {
        get: function() {
            return this._volume
        },
        set: function(a) {
            null != Number(a) && (a = Math.max(0, Math.min(1, a)), this._volume = a, this.updateVolume())
        }
    });
    a.pan = 0;
    a.duration = 0;
    a.remainingLoops = 0;
    a.delayTimeoutId = null;
    a.tag = null;
    a.muted=!1;
    a.paused=!1;
    a.addEventListener = null;
    a.removeEventListener = null;
    a.removeAllEventListeners =
    null;
    a.dispatchEvent = null;
    a.hasEventListener = null;
    a._listeners = null;
    a.endedHandler = null;
    a.readyHandler = null;
    a.stalledHandler = null;
    a.loopHandler = null;
    a.init = function(a, c) {
        this.src = a;
        this.owner = c;
        this.endedHandler = createjs.proxy(this.handleSoundComplete, this);
        this.readyHandler = createjs.proxy(this.handleSoundReady, this);
        this.stalledHandler = createjs.proxy(this.handleSoundStalled, this);
        this.loopHandler = createjs.proxy(this.handleSoundLoop, this)
    };
    a.sendEvent = function(a) {
        a = new createjs.Event(a);
        this.dispatchEvent(a)
    };
    a.cleanUp = function() {
        var a = this.tag;
        if (null != a) {
            a.pause();
            a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED, this.endedHandler, !1);
            a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY, this.readyHandler, !1);
            a.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED, this.loopHandler, !1);
            try {
                a.currentTime = 0
            } catch (c) {}
            createjs.HTMLAudioPlugin.TagPool.setInstance(this.src, a);
            this.tag = null
        }
        clearTimeout(this.delayTimeoutId);
        null != window.createjs && createjs.Sound.playFinished(this)
    };
    a.interrupt =
    function() {
        null != this.tag && (this.playState = createjs.Sound.PLAY_INTERRUPTED, this.cleanUp(), this.paused=!1, this.sendEvent("interrupted"))
    };
    a.play = function(a, c, d, e, f, g) {
        this.cleanUp();
        createjs.Sound.playInstance(this, a, c, d, e, f, g)
    };
    a.beginPlaying = function(a, c, d, e) {
        if (null == window.createjs)
            return -1;
        var f = this.tag = createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);
        return null == f ? (this.playFailed(), -1) : (f.addEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED, this.endedHandler, !1), this.offset = a, this.volume =
        d, this.pan = e, this.updateVolume(), this.remainingLoops = c, 4 !== f.readyState ? (f.addEventListener(createjs.HTMLAudioPlugin.AUDIO_READY, this.readyHandler, !1), f.addEventListener(createjs.HTMLAudioPlugin.AUDIO_STALLED, this.stalledHandler, !1), f.preload = "auto", f.load()) : this.handleSoundReady(null), this.sendEvent("succeeded"), 1)
    };
    a.handleSoundStalled = function() {
        this.cleanUp();
        this.sendEvent("failed")
    };
    a.handleSoundReady = function() {
        if (null != window.createjs) {
            if (this.duration = 1E3 * this.tag.duration, this.playState =
            createjs.Sound.PLAY_SUCCEEDED, this.paused=!1, this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY, this.readyHandler, !1)
                , this.offset >= this.getDuration())return this.playFailed(), void 0;
            0 < this.offset && (this.tag.currentTime = 0.0010 * this.offset);
            -1 == this.remainingLoops && (this.tag.loop=!0);
            0 != this.remainingLoops && (this.tag.addEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED, this.loopHandler, !1), this.tag.loop=!0);
            this.tag.play()
        }
    };
    a.pause = function() {
        return this.paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ||
        null == this.tag?!1 : (this.paused=!0, this.tag.pause(), clearTimeout(this.delayTimeoutId), !0)
    };
    a.resume = function() {
        return this.paused && null != this.tag ? (this.paused=!1, this.tag.play(), !0) : !1
    };
    a.stop = function() {
        return this.offset = 0, this.pause(), this.playState = createjs.Sound.PLAY_FINISHED, this.cleanUp(), !0
    };
    a.setMasterVolume = function() {
        return this.updateVolume(), !0
    };
    a.setVolume = function(a) {
        return this.volume = a, !0
    };
    a.updateVolume = function() {
        if (null != this.tag) {
            var a = this.muted || createjs.Sound.masterMute ? 0: this._volume *
            createjs.Sound.masterVolume;
            return a != this.tag.volume && (this.tag.volume = a), !0
        }
        return !1
    };
    a.getVolume = function() {
        return this.volume
    };
    a.setMasterMute = function() {
        return this.updateVolume(), !0
    };
    a.setMute = function(a) {
        return null == a || void 0 == a?!1 : (this.muted = a, this.updateVolume(), !0)
    };
    a.getMute = function() {
        return this.muted
    };
    a.setPan = function() {
        return !1
    };
    a.getPan = function() {
        return 0
    };
    a.getPosition = function() {
        return null == this.tag ? this.offset : 1E3 * this.tag.currentTime
    };
    a.setPosition = function(a) {
        if (null == this.tag)
            this.offset =
            a;
        else {
            this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED, this.loopHandler, !1);
            try {
                this.tag.currentTime = 0.0010 * a
            } catch (c) {
                return !1
            }
            this.tag.addEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED, this.loopHandler, !1)
        }
        return !0
    };
    a.getDuration = function() {
        return this.duration
    };
    a.handleSoundComplete = function() {
        this.offset = 0;
        null != window.createjs && (this.playState = createjs.Sound.PLAY_FINISHED, this.cleanUp(), this.sendEvent("complete"))
    };
    a.handleSoundLoop = function() {
        this.offset = 0;
        this.remainingLoops--;
        0 == this.remainingLoops && (this.tag.loop=!1, this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_SEEKED, this.loopHandler, !1));
        this.sendEvent("loop")
    };
    a.playFailed = function() {
        null != window.createjs && (this.playState = createjs.Sound.PLAY_FAILED, this.cleanUp(), this.sendEvent("failed"))
    };
    a.toString = function() {
        return "[HTMLAudioPlugin SoundInstance]"
    };
    createjs.EventDispatcher.initialize(c.prototype);
    createjs.HTMLAudioPlugin.SoundInstance = c
})();
(function() {
    function c(a, c) {
        this.init(a, c)
    }
    var a = c.prototype;
    a.src = null;
    a.tag = null;
    a.preloadTimer = null;
    a.loadedHandler = null;
    a.init = function(a, c) {
        if (this.src = a, this.tag = c, this.preloadTimer = setInterval(createjs.proxy(this.preloadTick, this)
            , 200), this.loadedHandler = createjs.proxy(this.sendLoadedEvent, this), this.tag.addEventListener && this.tag.addEventListener("canplaythrough", this.loadedHandler), null == this.tag.onreadystatechange)this.tag.onreadystatechange = createjs.proxy(this.sendLoadedEvent, this);
        else {
            var d =
            this.tag.onreadystatechange;
            this.tag.onreadystatechange = function() {
                d();
                this.tag.onreadystatechange = createjs.proxy(this.sendLoadedEvent, this)
            }
        }
        this.tag.preload = "auto";
        this.tag.load()
    };
    a.preloadTick = function() {
        var a = this.tag.buffered, c = this.tag.duration;
        0 < a.length && a.end(0) >= c-1 && this.handleTagLoaded()
    };
    a.handleTagLoaded = function() {
        clearInterval(this.preloadTimer)
    };
    a.sendLoadedEvent = function() {
        this.tag.removeEventListener && this.tag.removeEventListener("canplaythrough", this.loadedHandler);
        this.tag.onreadystatechange =
        null;
        createjs.Sound.sendFileLoadEvent(this.src)
    };
    a.toString = function() {
        return "[HTMLAudioPlugin Loader]"
    };
    createjs.HTMLAudioPlugin.Loader = c
})();
(function() {
    function c(a) {
        this.init(a)
    }
    c.tags = {};
    c.get = function(a) {
        var k = c.tags[a];
        return null == k && (k = c.tags[a] = new c(a)), k
    };
    c.remove = function(a) {
        var k = c.tags[a];
        return null == k?!1 : (k.removeAll(), delete c.tags[a], !0)
    };
    c.removeAll = function() {
        for (var a in c.tags)
            c.tags[a].removeAll();
        c.tags = {}
    };
    c.getInstance = function(a) {
        a = c.tags[a];
        return null == a ? null : a.get()
    };
    c.setInstance = function(a, k) {
        var d = c.tags[a];
        return null == d ? null : d.set(k)
    };
    c.checkSrc = function(a) {
        a = c.tags[a];
        return null == a ? null : (a.checkSrcChange(),
        void 0)
    };
    var a = c.prototype;
    a.src = null;
    a.length = 0;
    a.available = 0;
    a.tags = null;
    a.init = function(a) {
        this.src = a;
        this.tags = []
    };
    a.add = function(a) {
        this.tags.push(a);
        this.length++;
        this.available++
    };
    a.removeAll = function() {
        for (; this.length--;)
            delete this.tags[this.length];
        this.src = null;
        this.tags.length = 0
    };
    a.get = function() {
        if (0 == this.tags.length)
            return null;
        this.available = this.tags.length;
        var a = this.tags.pop();
        return null == a.parentNode && document.body.appendChild(a), a
    };
    a.set = function(a) {
        -1 == createjs.indexOf(this.tags,
        a) && this.tags.push(a);
        this.available = this.tags.length
    };
    a.checkSrcChange = function() {
        for (var a = this.tags.length-1, c = this.tags[a].src; a--;)
            this.tags[a].src = c
    };
    a.toString = function() {
        return "[HTMLAudioPlugin TagPool]"
    };
    createjs.HTMLAudioPlugin.TagPool = c
})();
var Box2D = {};
(function(c, a) {
    function b() {}
    !(Object.prototype.defineProperty instanceof Function) && Object.prototype.__defineGetter__ instanceof Function && Object.prototype.__defineSetter__ instanceof Function && (Object.defineProperty = function(a, b, c) {
        c.get instanceof Function && a.__defineGetter__(b, c.get);
        c.set instanceof Function && a.__defineSetter__(b, c.set)
    });
    c.inherit = function(a, c) {
        b.prototype = c.prototype;
        a.prototype = new b;
        a.prototype.constructor = a
    };
    c.generateCallback = function(a, b) {
        return function() {
            b.apply(a, arguments)
        }
    };
    c.NVector = function(b) {
        b === a && (b = 0);
        for (var c = Array(b || 0), e = 0; e < b; ++e)
            c[e] = 0;
        return c
    };
    c.is = function(b, c) {
        return null === b?!1 : c instanceof Function && b instanceof c || b.constructor.__implements != a && b.constructor.__implements[c]?!0 : !1
    };
    c.parseUInt = function(a) {
        return Math.abs(parseInt(a))
    }
})(Box2D);
var Vector = Array, Vector_a2j_Number = Box2D.NVector;
"undefined" === typeof Box2D && (Box2D = {});
"undefined" === typeof Box2D.Collision && (Box2D.Collision = {});
"undefined" === typeof Box2D.Collision.Shapes && (Box2D.Collision.Shapes = {});
"undefined" === typeof Box2D.Common && (Box2D.Common = {});
"undefined" === typeof Box2D.Common.Math && (Box2D.Common.Math = {});
"undefined" === typeof Box2D.Dynamics && (Box2D.Dynamics = {});
"undefined" === typeof Box2D.Dynamics.Contacts && (Box2D.Dynamics.Contacts = {});
"undefined" === typeof Box2D.Dynamics.Controllers && (Box2D.Dynamics.Controllers = {});
"undefined" === typeof Box2D.Dynamics.Joints && (Box2D.Dynamics.Joints = {});
(function() {
    function c() {
        c.b2AABB.apply(this, arguments)
    }
    function a() {
        a.b2Bound.apply(this, arguments)
    }
    function b() {
        b.b2BoundValues.apply(this, arguments);
        this.constructor === b && this.b2BoundValues.apply(this, arguments)
    }
    function k() {
        k.b2Collision.apply(this, arguments)
    }
    function d() {
        d.b2ContactID.apply(this, arguments);
        this.constructor === d && this.b2ContactID.apply(this, arguments)
    }
    function e() {
        e.b2ContactPoint.apply(this, arguments)
    }
    function f() {
        f.b2Distance.apply(this, arguments)
    }
    function g() {
        g.b2DistanceInput.apply(this,
        arguments)
    }
    function h() {
        h.b2DistanceOutput.apply(this, arguments)
    }
    function m() {
        m.b2DistanceProxy.apply(this, arguments)
    }
    function n() {
        n.b2DynamicTree.apply(this, arguments);
        this.constructor === n && this.b2DynamicTree.apply(this, arguments)
    }
    function w() {
        w.b2DynamicTreeBroadPhase.apply(this, arguments)
    }
    function t() {
        t.b2DynamicTreeNode.apply(this, arguments)
    }
    function v() {
        v.b2DynamicTreePair.apply(this, arguments)
    }
    function x() {
        x.b2Manifold.apply(this, arguments);
        this.constructor === x && this.b2Manifold.apply(this, arguments)
    }
    function y() {
        y.b2ManifoldPoint.apply(this, arguments);
        this.constructor === y && this.b2ManifoldPoint.apply(this, arguments)
    }
    function p() {
        p.b2Point.apply(this, arguments)
    }
    function C() {
        C.b2RayCastInput.apply(this, arguments);
        this.constructor === C && this.b2RayCastInput.apply(this, arguments)
    }
    function B() {
        B.b2RayCastOutput.apply(this, arguments)
    }
    function H() {
        H.b2Segment.apply(this, arguments)
    }
    function E() {
        E.b2SeparationFunction.apply(this, arguments)
    }
    function G() {
        G.b2Simplex.apply(this, arguments);
        this.constructor ===
        G && this.b2Simplex.apply(this, arguments)
    }
    function D() {
        D.b2SimplexCache.apply(this, arguments)
    }
    function K() {
        K.b2SimplexVertex.apply(this, arguments)
    }
    function F() {
        F.b2TimeOfImpact.apply(this, arguments)
    }
    function I() {
        I.b2TOIInput.apply(this, arguments)
    }
    function O() {
        O.b2WorldManifold.apply(this, arguments);
        this.constructor === O && this.b2WorldManifold.apply(this, arguments)
    }
    function L() {
        L.ClipVertex.apply(this, arguments)
    }
    function r() {
        r.Features.apply(this, arguments)
    }
    function s() {
        s.b2CircleShape.apply(this, arguments);
        this.constructor === s && this.b2CircleShape.apply(this, arguments)
    }
    function A() {
        A.b2EdgeChainDef.apply(this, arguments);
        this.constructor === A && this.b2EdgeChainDef.apply(this, arguments)
    }
    function z() {
        z.b2EdgeShape.apply(this, arguments);
        this.constructor === z && this.b2EdgeShape.apply(this, arguments)
    }
    function J() {
        J.b2MassData.apply(this, arguments)
    }
    function M() {
        M.b2PolygonShape.apply(this, arguments);
        this.constructor === M && this.b2PolygonShape.apply(this, arguments)
    }
    function P() {
        P.b2Shape.apply(this, arguments);
        this.constructor ===
        P && this.b2Shape.apply(this, arguments)
    }
    function u() {
        u.b2Color.apply(this, arguments);
        this.constructor === u && this.b2Color.apply(this, arguments)
    }
    function q() {
        q.b2Settings.apply(this, arguments)
    }
    function N() {
        N.b2Mat22.apply(this, arguments);
        this.constructor === N && this.b2Mat22.apply(this, arguments)
    }
    function Q() {
        Q.b2Mat33.apply(this, arguments);
        this.constructor === Q && this.b2Mat33.apply(this, arguments)
    }
    function Ba() {
        Ba.b2Math.apply(this, arguments)
    }
    function Ca() {
        Ca.b2Sweep.apply(this, arguments)
    }
    function R() {
        R.b2Transform.apply(this,
        arguments);
        this.constructor === R && this.b2Transform.apply(this, arguments)
    }
    function S() {
        S.b2Vec2.apply(this, arguments);
        this.constructor === S && this.b2Vec2.apply(this, arguments)
    }
    function T() {
        T.b2Vec3.apply(this, arguments);
        this.constructor === T && this.b2Vec3.apply(this, arguments)
    }
    function U() {
        U.b2Body.apply(this, arguments);
        this.constructor === U && this.b2Body.apply(this, arguments)
    }
    function V() {
        V.b2BodyDef.apply(this, arguments);
        this.constructor === V && this.b2BodyDef.apply(this, arguments)
    }
    function Da() {
        Da.b2ContactFilter.apply(this,
        arguments)
    }
    function Ea() {
        Ea.b2ContactImpulse.apply(this, arguments)
    }
    function Fa() {
        Fa.b2ContactListener.apply(this, arguments)
    }
    function W() {
        W.b2ContactManager.apply(this, arguments);
        this.constructor === W && this.b2ContactManager.apply(this, arguments)
    }
    function X() {
        X.b2DebugDraw.apply(this, arguments);
        this.constructor === X && this.b2DebugDraw.apply(this, arguments)
    }
    function Ga() {
        Ga.b2DestructionListener.apply(this, arguments)
    }
    function Ha() {
        Ha.b2FilterData.apply(this, arguments)
    }
    function Y() {
        Y.b2Fixture.apply(this,
        arguments);
        this.constructor === Y && this.b2Fixture.apply(this, arguments)
    }
    function Z() {
        Z.b2FixtureDef.apply(this, arguments);
        this.constructor === Z && this.b2FixtureDef.apply(this, arguments)
    }
    function $() {
        $.b2Island.apply(this, arguments);
        this.constructor === $ && this.b2Island.apply(this, arguments)
    }
    function Ia() {
        Ia.b2TimeStep.apply(this, arguments)
    }
    function aa() {
        aa.b2World.apply(this, arguments);
        this.constructor === aa && this.b2World.apply(this, arguments)
    }
    function Ja() {
        Ja.b2CircleContact.apply(this, arguments)
    }
    function ba() {
        ba.b2Contact.apply(this,
        arguments);
        this.constructor === ba && this.b2Contact.apply(this, arguments)
    }
    function ca() {
        ca.b2ContactConstraint.apply(this, arguments);
        this.constructor === ca && this.b2ContactConstraint.apply(this, arguments)
    }
    function Ka() {
        Ka.b2ContactConstraintPoint.apply(this, arguments)
    }
    function La() {
        La.b2ContactEdge.apply(this, arguments)
    }
    function da() {
        da.b2ContactFactory.apply(this, arguments);
        this.constructor === da && this.b2ContactFactory.apply(this, arguments)
    }
    function Ma() {
        Ma.b2ContactRegister.apply(this, arguments)
    }
    function Na() {
        Na.b2ContactResult.apply(this,
        arguments)
    }
    function ea() {
        ea.b2ContactSolver.apply(this, arguments);
        this.constructor === ea && this.b2ContactSolver.apply(this, arguments)
    }
    function Oa() {
        Oa.b2EdgeAndCircleContact.apply(this, arguments)
    }
    function fa() {
        fa.b2NullContact.apply(this, arguments);
        this.constructor === fa && this.b2NullContact.apply(this, arguments)
    }
    function Pa() {
        Pa.b2PolyAndCircleContact.apply(this, arguments)
    }
    function Qa() {
        Qa.b2PolyAndEdgeContact.apply(this, arguments)
    }
    function Ra() {
        Ra.b2PolygonContact.apply(this, arguments)
    }
    function ga() {
        ga.b2PositionSolverManifold.apply(this,
        arguments);
        this.constructor === ga && this.b2PositionSolverManifold.apply(this, arguments)
    }
    function Sa() {
        Sa.b2BuoyancyController.apply(this, arguments)
    }
    function Ta() {
        Ta.b2ConstantAccelController.apply(this, arguments)
    }
    function Ua() {
        Ua.b2ConstantForceController.apply(this, arguments)
    }
    function Va() {
        Va.b2Controller.apply(this, arguments)
    }
    function Wa() {
        Wa.b2ControllerEdge.apply(this, arguments)
    }
    function Xa() {
        Xa.b2GravityController.apply(this, arguments)
    }
    function Ya() {
        Ya.b2TensorDampingController.apply(this, arguments)
    }
    function ha() {
        ha.b2DistanceJoint.apply(this, arguments);
        this.constructor === ha && this.b2DistanceJoint.apply(this, arguments)
    }
    function ia() {
        ia.b2DistanceJointDef.apply(this, arguments);
        this.constructor === ia && this.b2DistanceJointDef.apply(this, arguments)
    }
    function ja() {
        ja.b2FrictionJoint.apply(this, arguments);
        this.constructor === ja && this.b2FrictionJoint.apply(this, arguments)
    }
    function ka() {
        ka.b2FrictionJointDef.apply(this, arguments);
        this.constructor === ka && this.b2FrictionJointDef.apply(this, arguments)
    }
    function la() {
        la.b2GearJoint.apply(this,
        arguments);
        this.constructor === la && this.b2GearJoint.apply(this, arguments)
    }
    function ma() {
        ma.b2GearJointDef.apply(this, arguments);
        this.constructor === ma && this.b2GearJointDef.apply(this, arguments)
    }
    function Za() {
        Za.b2Jacobian.apply(this, arguments)
    }
    function na() {
        na.b2Joint.apply(this, arguments);
        this.constructor === na && this.b2Joint.apply(this, arguments)
    }
    function oa() {
        oa.b2JointDef.apply(this, arguments);
        this.constructor === oa && this.b2JointDef.apply(this, arguments)
    }
    function $a() {
        $a.b2JointEdge.apply(this, arguments)
    }
    function pa() {
        pa.b2LineJoint.apply(this, arguments);
        this.constructor === pa && this.b2LineJoint.apply(this, arguments)
    }
    function qa() {
        qa.b2LineJointDef.apply(this, arguments);
        this.constructor === qa && this.b2LineJointDef.apply(this, arguments)
    }
    function ra() {
        ra.b2MouseJoint.apply(this, arguments);
        this.constructor === ra && this.b2MouseJoint.apply(this, arguments)
    }
    function sa() {
        sa.b2MouseJointDef.apply(this, arguments);
        this.constructor === sa && this.b2MouseJointDef.apply(this, arguments)
    }
    function ta() {
        ta.b2PrismaticJoint.apply(this,
        arguments);
        this.constructor === ta && this.b2PrismaticJoint.apply(this, arguments)
    }
    function ua() {
        ua.b2PrismaticJointDef.apply(this, arguments);
        this.constructor === ua && this.b2PrismaticJointDef.apply(this, arguments)
    }
    function va() {
        va.b2PulleyJoint.apply(this, arguments);
        this.constructor === va && this.b2PulleyJoint.apply(this, arguments)
    }
    function wa() {
        wa.b2PulleyJointDef.apply(this, arguments);
        this.constructor === wa && this.b2PulleyJointDef.apply(this, arguments)
    }
    function xa() {
        xa.b2RevoluteJoint.apply(this, arguments);
        this.constructor === xa && this.b2RevoluteJoint.apply(this, arguments)
    }
    function ya() {
        ya.b2RevoluteJointDef.apply(this, arguments);
        this.constructor === ya && this.b2RevoluteJointDef.apply(this, arguments)
    }
    function za() {
        za.b2WeldJoint.apply(this, arguments);
        this.constructor === za && this.b2WeldJoint.apply(this, arguments)
    }
    function Aa() {
        Aa.b2WeldJointDef.apply(this, arguments);
        this.constructor === Aa && this.b2WeldJointDef.apply(this, arguments)
    }
    Box2D.Collision.IBroadPhase = "Box2D.Collision.IBroadPhase";
    Box2D.Collision.b2AABB =
    c;
    Box2D.Collision.b2Bound = a;
    Box2D.Collision.b2BoundValues = b;
    Box2D.Collision.b2Collision = k;
    Box2D.Collision.b2ContactID = d;
    Box2D.Collision.b2ContactPoint = e;
    Box2D.Collision.b2Distance = f;
    Box2D.Collision.b2DistanceInput = g;
    Box2D.Collision.b2DistanceOutput = h;
    Box2D.Collision.b2DistanceProxy = m;
    Box2D.Collision.b2DynamicTree = n;
    Box2D.Collision.b2DynamicTreeBroadPhase = w;
    Box2D.Collision.b2DynamicTreeNode = t;
    Box2D.Collision.b2DynamicTreePair = v;
    Box2D.Collision.b2Manifold = x;
    Box2D.Collision.b2ManifoldPoint = y;
    Box2D.Collision.b2Point =
    p;
    Box2D.Collision.b2RayCastInput = C;
    Box2D.Collision.b2RayCastOutput = B;
    Box2D.Collision.b2Segment = H;
    Box2D.Collision.b2SeparationFunction = E;
    Box2D.Collision.b2Simplex = G;
    Box2D.Collision.b2SimplexCache = D;
    Box2D.Collision.b2SimplexVertex = K;
    Box2D.Collision.b2TimeOfImpact = F;
    Box2D.Collision.b2TOIInput = I;
    Box2D.Collision.b2WorldManifold = O;
    Box2D.Collision.ClipVertex = L;
    Box2D.Collision.Features = r;
    Box2D.Collision.Shapes.b2CircleShape = s;
    Box2D.Collision.Shapes.b2EdgeChainDef = A;
    Box2D.Collision.Shapes.b2EdgeShape = z;
    Box2D.Collision.Shapes.b2MassData =
    J;
    Box2D.Collision.Shapes.b2PolygonShape = M;
    Box2D.Collision.Shapes.b2Shape = P;
    Box2D.Common.b2internal = "Box2D.Common.b2internal";
    Box2D.Common.b2Color = u;
    Box2D.Common.b2Settings = q;
    Box2D.Common.Math.b2Mat22 = N;
    Box2D.Common.Math.b2Mat33 = Q;
    Box2D.Common.Math.b2Math = Ba;
    Box2D.Common.Math.b2Sweep = Ca;
    Box2D.Common.Math.b2Transform = R;
    Box2D.Common.Math.b2Vec2 = S;
    Box2D.Common.Math.b2Vec3 = T;
    Box2D.Dynamics.b2Body = U;
    Box2D.Dynamics.b2BodyDef = V;
    Box2D.Dynamics.b2ContactFilter = Da;
    Box2D.Dynamics.b2ContactImpulse = Ea;
    Box2D.Dynamics.b2ContactListener =
    Fa;
    Box2D.Dynamics.b2ContactManager = W;
    Box2D.Dynamics.b2DebugDraw = X;
    Box2D.Dynamics.b2DestructionListener = Ga;
    Box2D.Dynamics.b2FilterData = Ha;
    Box2D.Dynamics.b2Fixture = Y;
    Box2D.Dynamics.b2FixtureDef = Z;
    Box2D.Dynamics.b2Island = $;
    Box2D.Dynamics.b2TimeStep = Ia;
    Box2D.Dynamics.b2World = aa;
    Box2D.Dynamics.Contacts.b2CircleContact = Ja;
    Box2D.Dynamics.Contacts.b2Contact = ba;
    Box2D.Dynamics.Contacts.b2ContactConstraint = ca;
    Box2D.Dynamics.Contacts.b2ContactConstraintPoint = Ka;
    Box2D.Dynamics.Contacts.b2ContactEdge = La;
    Box2D.Dynamics.Contacts.b2ContactFactory =
    da;
    Box2D.Dynamics.Contacts.b2ContactRegister = Ma;
    Box2D.Dynamics.Contacts.b2ContactResult = Na;
    Box2D.Dynamics.Contacts.b2ContactSolver = ea;
    Box2D.Dynamics.Contacts.b2EdgeAndCircleContact = Oa;
    Box2D.Dynamics.Contacts.b2NullContact = fa;
    Box2D.Dynamics.Contacts.b2PolyAndCircleContact = Pa;
    Box2D.Dynamics.Contacts.b2PolyAndEdgeContact = Qa;
    Box2D.Dynamics.Contacts.b2PolygonContact = Ra;
    Box2D.Dynamics.Contacts.b2PositionSolverManifold = ga;
    Box2D.Dynamics.Controllers.b2BuoyancyController = Sa;
    Box2D.Dynamics.Controllers.b2ConstantAccelController =
    Ta;
    Box2D.Dynamics.Controllers.b2ConstantForceController = Ua;
    Box2D.Dynamics.Controllers.b2Controller = Va;
    Box2D.Dynamics.Controllers.b2ControllerEdge = Wa;
    Box2D.Dynamics.Controllers.b2GravityController = Xa;
    Box2D.Dynamics.Controllers.b2TensorDampingController = Ya;
    Box2D.Dynamics.Joints.b2DistanceJoint = ha;
    Box2D.Dynamics.Joints.b2DistanceJointDef = ia;
    Box2D.Dynamics.Joints.b2FrictionJoint = ja;
    Box2D.Dynamics.Joints.b2FrictionJointDef = ka;
    Box2D.Dynamics.Joints.b2GearJoint = la;
    Box2D.Dynamics.Joints.b2GearJointDef = ma;
    Box2D.Dynamics.Joints.b2Jacobian = Za;
    Box2D.Dynamics.Joints.b2Joint = na;
    Box2D.Dynamics.Joints.b2JointDef = oa;
    Box2D.Dynamics.Joints.b2JointEdge = $a;
    Box2D.Dynamics.Joints.b2LineJoint = pa;
    Box2D.Dynamics.Joints.b2LineJointDef = qa;
    Box2D.Dynamics.Joints.b2MouseJoint = ra;
    Box2D.Dynamics.Joints.b2MouseJointDef = sa;
    Box2D.Dynamics.Joints.b2PrismaticJoint = ta;
    Box2D.Dynamics.Joints.b2PrismaticJointDef = ua;
    Box2D.Dynamics.Joints.b2PulleyJoint = va;
    Box2D.Dynamics.Joints.b2PulleyJointDef = wa;
    Box2D.Dynamics.Joints.b2RevoluteJoint =
    xa;
    Box2D.Dynamics.Joints.b2RevoluteJointDef = ya;
    Box2D.Dynamics.Joints.b2WeldJoint = za;
    Box2D.Dynamics.Joints.b2WeldJointDef = Aa
})();
Box2D.postDefs = [];
(function() {
    var c = Box2D.Collision.Shapes.b2CircleShape, a = Box2D.Collision.Shapes.b2PolygonShape, b = Box2D.Collision.Shapes.b2Shape, k = Box2D.Common.b2Settings, d = Box2D.Common.Math.b2Math, e = Box2D.Common.Math.b2Sweep, f = Box2D.Common.Math.b2Transform, g = Box2D.Common.Math.b2Vec2, h = Box2D.Collision.b2AABB, m = Box2D.Collision.b2Bound, n = Box2D.Collision.b2BoundValues, w = Box2D.Collision.b2Collision, t = Box2D.Collision.b2ContactID, v = Box2D.Collision.b2ContactPoint, x = Box2D.Collision.b2Distance, y = Box2D.Collision.b2DistanceInput,
    p = Box2D.Collision.b2DistanceOutput, C = Box2D.Collision.b2DistanceProxy, B = Box2D.Collision.b2DynamicTree, H = Box2D.Collision.b2DynamicTreeBroadPhase, E = Box2D.Collision.b2DynamicTreeNode, G = Box2D.Collision.b2DynamicTreePair, D = Box2D.Collision.b2Manifold, K = Box2D.Collision.b2ManifoldPoint, F = Box2D.Collision.b2Point, I = Box2D.Collision.b2RayCastInput, O = Box2D.Collision.b2RayCastOutput, L = Box2D.Collision.b2Segment, r = Box2D.Collision.b2SeparationFunction, s = Box2D.Collision.b2Simplex, A = Box2D.Collision.b2SimplexCache, z =
    Box2D.Collision.b2SimplexVertex, J = Box2D.Collision.b2TimeOfImpact, M = Box2D.Collision.b2TOIInput, P = Box2D.Collision.b2WorldManifold, u = Box2D.Collision.ClipVertex, q = Box2D.Collision.Features, N = Box2D.Collision.IBroadPhase;
    h.b2AABB = function() {
        this.lowerBound = new g;
        this.upperBound = new g
    };
    h.prototype.IsValid = function() {
        var a = this.upperBound.y - this.lowerBound.y;
        return 0 <= this.upperBound.x - this.lowerBound.x && 0 <= a && this.lowerBound.IsValid() && this.upperBound.IsValid()
    };
    h.prototype.GetCenter = function() {
        return new g((this.lowerBound.x +
        this.upperBound.x) / 2, (this.lowerBound.y + this.upperBound.y) / 2)
    };
    h.prototype.GetExtents = function() {
        return new g((this.upperBound.x - this.lowerBound.x) / 2, (this.upperBound.y - this.lowerBound.y) / 2)
    };
    h.prototype.Contains = function(a) {
        return this.lowerBound.x <= a.lowerBound.x && this.lowerBound.y <= a.lowerBound.y && a.upperBound.x <= this.upperBound.x && a.upperBound.y <= this.upperBound.y
    };
    h.prototype.RayCast = function(a, b) {
        var c =- Number.MAX_VALUE, u = Number.MAX_VALUE, g = b.p1.x, d = b.p1.y, e = b.p2.x - b.p1.x, q = b.p2.y - b.p1.y, r =
        Math.abs(q), f = a.normal, s = 0, A = 0, z = 0;
        if (Math.abs(e) < Number.MIN_VALUE) {
            if (g < this.lowerBound.x || this.upperBound.x < g)
                return !1
        } else if (s = 1 / e, A = (this.lowerBound.x - g) * s, s*=this.upperBound.x - g, z =- 1, A > s && (z = A, A = s, s = z, z = 1), A > c && (f.x = z, f.y = 0, c = A), u = Math.min(u, s), c > u)return !1;
        if (r < Number.MIN_VALUE) {
            if (d < this.lowerBound.y || this.upperBound.y < d)
                return !1
        } else if (s = 1 / q, A = (this.lowerBound.y - d) * s, s*=this.upperBound.y - d, z =- 1, A > s && (z = A, A = s, s = z, z = 1), A > c && (f.y = z, f.x = 0, c = A), u = Math.min(u, s), c > u)return !1;
        a.fraction = c;
        return !0
    };
    h.prototype.TestOverlap = function(a) {
        var b = a.lowerBound.y - this.upperBound.y, c = this.lowerBound.y - a.upperBound.y;
        return 0 < a.lowerBound.x - this.upperBound.x || 0 < b || 0 < this.lowerBound.x - a.upperBound.x || 0 < c?!1 : !0
    };
    h.Combine = function(a, b) {
        var c = new h;
        c.Combine(a, b);
        return c
    };
    h.prototype.Combine = function(a, b) {
        this.lowerBound.x = Math.min(a.lowerBound.x, b.lowerBound.x);
        this.lowerBound.y = Math.min(a.lowerBound.y, b.lowerBound.y);
        this.upperBound.x = Math.max(a.upperBound.x, b.upperBound.x);
        this.upperBound.y = Math.max(a.upperBound.y,
        b.upperBound.y)
    };
    m.b2Bound = function() {};
    m.prototype.IsLower = function() {
        return 0 == (this.value & 1)
    };
    m.prototype.IsUpper = function() {
        return 1 == (this.value & 1)
    };
    m.prototype.Swap = function(a) {
        var b = this.value, c = this.proxy, u = this.stabbingCount;
        this.value = a.value;
        this.proxy = a.proxy;
        this.stabbingCount = a.stabbingCount;
        a.value = b;
        a.proxy = c;
        a.stabbingCount = u
    };
    n.b2BoundValues = function() {};
    n.prototype.b2BoundValues = function() {
        this.lowerValues = new Vector_a2j_Number;
        this.lowerValues[0] = 0;
        this.lowerValues[1] = 0;
        this.upperValues =
        new Vector_a2j_Number;
        this.upperValues[0] = 0;
        this.upperValues[1] = 0
    };
    w.b2Collision = function() {};
    w.ClipSegmentToLine = function(a, b, c, u) {
        void 0 === u && (u = 0);
        var g, d = 0;
        g = b[0];
        var e = g.v;
        g = b[1];
        var q = g.v, r = c.x * e.x + c.y * e.y - u;
        g = c.x * q.x + c.y * q.y - u;
        0 >= r && a[d++].Set(b[0]);
        0 >= g && a[d++].Set(b[1]);
        0 > r * g && (c = r / (r - g), g = a[d], g = g.v, g.x = e.x + c * (q.x - e.x), g.y = e.y + c * (q.y - e.y), g = a[d], g.id = (0 < r ? b[0] : b[1]).id, ++d);
        return d
    };
    w.EdgeSeparation = function(a, b, c, u, g) {
        void 0 === c && (c = 0);
        parseInt(a.m_vertexCount);
        var d = a.m_vertices;
        a = a.m_normals;
        var e = parseInt(u.m_vertexCount), q = u.m_vertices, r, s;
        r = b.R;
        s = a[c];
        a = r.col1.x * s.x + r.col2.x * s.y;
        u = r.col1.y * s.x + r.col2.y * s.y;
        r = g.R;
        var f = r.col1.x * a + r.col1.y * u;
        r = r.col2.x * a + r.col2.y * u;
        for (var A = 0, z = Number.MAX_VALUE, h = 0; h < e; ++h)
            s = q[h], s = s.x * f + s.y * r, s < z && (z = s, A = h);
        s = d[c];
        r = b.R;
        c = b.position.x + (r.col1.x * s.x + r.col2.x * s.y);
        b = b.position.y + (r.col1.y * s.x + r.col2.y * s.y);
        s = q[A];
        r = g.R;
        d = g.position.x + (r.col1.x * s.x + r.col2.x * s.y);
        g = g.position.y + (r.col1.y * s.x + r.col2.y * s.y);
        return (d - c) * a + (g - b) * u
    };
    w.FindMaxSeparation = function(a,
    b, c, u, g) {
        var d = parseInt(b.m_vertexCount), e = b.m_normals, q, r;
        r = g.R;
        q = u.m_centroid;
        var s = g.position.x + (r.col1.x * q.x + r.col2.x * q.y), f = g.position.y + (r.col1.y * q.x + r.col2.y * q.y);
        r = c.R;
        q = b.m_centroid;
        s -= c.position.x + (r.col1.x * q.x + r.col2.x * q.y);
        f -= c.position.y + (r.col1.y * q.x + r.col2.y * q.y);
        r = s * c.R.col1.x + f * c.R.col1.y;
        for (var f = s * c.R.col2.x + f * c.R.col2.y, s = 0, A =- Number.MAX_VALUE, z = 0; z < d; ++z)
            q = e[z], q = q.x * r + q.y * f, q > A && (A = q, s = z);
        e = w.EdgeSeparation(b, c, s, u, g);
        q = parseInt(0 <= s-1 ? s-1 : d-1);
        r = w.EdgeSeparation(b, c, q, u, g);
        var f = parseInt(s + 1 < d ? s + 1 : 0), A = w.EdgeSeparation(b, c, f, u, g), h = 0, k = 0;
        if (r > e && r > A)
            k =- 1, z = q, h = r;
        else if (A > e)
            k = 1, z = f, h = A;
        else 
            return a[0] = s, e;
        for (; ;)
            if (s =- 1 == k ? 0 <= z-1 ? z-1 : d-1 : z + 1 < d ? z + 1 : 0, e = w.EdgeSeparation(b, c, s, u, g)
                , e > h)z = s, h = e;
        else 
            break;
        a[0] = z;
        return h
    };
    w.FindIncidentEdge = function(a, b, c, u, g, d) {
        void 0 === u && (u = 0);
        parseInt(b.m_vertexCount);
        var e = b.m_normals, q = parseInt(g.m_vertexCount);
        b = g.m_vertices;
        g = g.m_normals;
        var r;
        r = c.R;
        c = e[u];
        var e = r.col1.x * c.x + r.col2.x * c.y, s = r.col1.y * c.x + r.col2.y * c.y;
        r = d.R;
        c = r.col1.x *
        e + r.col1.y * s;
        s = r.col2.x * e + r.col2.y * s;
        e = c;
        r = 0;
        for (var f = Number.MAX_VALUE, A = 0; A < q; ++A)
            c = g[A], c = e * c.x + s * c.y, c < f && (f = c, r = A);
        g = parseInt(r);
        e = parseInt(g + 1 < q ? g + 1 : 0);
        q = a[0];
        c = b[g];
        r = d.R;
        q.v.x = d.position.x + (r.col1.x * c.x + r.col2.x * c.y);
        q.v.y = d.position.y + (r.col1.y * c.x + r.col2.y * c.y);
        q.id.features.referenceEdge = u;
        q.id.features.incidentEdge = g;
        q.id.features.incidentVertex = 0;
        q = a[1];
        c = b[e];
        r = d.R;
        q.v.x = d.position.x + (r.col1.x * c.x + r.col2.x * c.y);
        q.v.y = d.position.y + (r.col1.y * c.x + r.col2.y * c.y);
        q.id.features.referenceEdge =
        u;
        q.id.features.incidentEdge = e;
        q.id.features.incidentVertex = 1
    };
    w.MakeClipPointVector = function() {
        var a = new Vector(2);
        a[0] = new u;
        a[1] = new u;
        return a
    };
    w.CollidePolygons = function(a, b, c, u, g) {
        var d;
        a.m_pointCount = 0;
        var e = b.m_radius + u.m_radius;
        w.s_edgeAO[0] = 0;
        var q = w.FindMaxSeparation(w.s_edgeAO, b, c, u, g);
        d = w.s_edgeAO[0];
        if (!(q > e)) {
            var r;
            w.s_edgeBO[0] = 0;
            var s = w.FindMaxSeparation(w.s_edgeBO, u, g, b, c);
            r = w.s_edgeBO[0];
            if (!(s > e)) {
                var f = 0, A = 0;
                s > 0.98 * q + 0.0010 ? (q = u, u = b, b = g, f = r, a.m_type = D.e_faceB, A = 1) : (q = b, b = c, c =
                g, f = d, a.m_type = D.e_faceA, A = 0);
                d = w.s_incidentEdge;
                w.FindIncidentEdge(d, q, b, f, u, c);
                r = parseInt(q.m_vertexCount);
                g = q.m_vertices;
                var q = g[f], z;
                z = f + 1 < r ? g[parseInt(f + 1)] : g[0];
                f = w.s_localTangent;
                f.Set(z.x - q.x, z.y - q.y);
                f.Normalize();
                g = w.s_localNormal;
                g.x = f.y;
                g.y =- f.x;
                u = w.s_planePoint;
                u.Set(0.5 * (q.x + z.x), 0.5 * (q.y + z.y));
                s = w.s_tangent;
                r = b.R;
                s.x = r.col1.x * f.x + r.col2.x * f.y;
                s.y = r.col1.y * f.x + r.col2.y * f.y;
                var h = w.s_tangent2;
                h.x =- s.x;
                h.y =- s.y;
                f = w.s_normal;
                f.x = s.y;
                f.y =- s.x;
                var N = w.s_v11, p = w.s_v12;
                N.x = b.position.x + (r.col1.x *
                q.x + r.col2.x * q.y);
                N.y = b.position.y + (r.col1.y * q.x + r.col2.y * q.y);
                p.x = b.position.x + (r.col1.x * z.x + r.col2.x * z.y);
                p.y = b.position.y + (r.col1.y * z.x + r.col2.y * z.y);
                b = f.x * N.x + f.y * N.y;
                r = s.x * p.x + s.y * p.y + e;
                z = w.s_clipPoints1;
                q = w.s_clipPoints2;
                p = w.ClipSegmentToLine(z, d, h, - s.x * N.x - s.y * N.y + e);
                if (!(2 > p || (p = w.ClipSegmentToLine(q, z, s, r), 2 > p))) {
                    a.m_localPlaneNormal.SetV(g);
                    a.m_localPoint.SetV(u);
                    for (u = g = 0; u < k.b2_maxManifoldPoints; ++u)
                        d = q[u], f.x * d.v.x + f.y * d.v.y - b <= e && (s = a.m_points[g], r = c.R, h = d.v.x - c.position.x, N = d.v.y - c.position.y,
                    s.m_localPoint.x = h * r.col1.x + N * r.col1.y, s.m_localPoint.y = h * r.col2.x + N * r.col2.y, s.m_id.Set(d.id), s.m_id.features.flip = A, ++g);
                    a.m_pointCount = g
                }
            }
        }
    };
    w.CollideCircles = function(a, b, c, u, g) {
        a.m_pointCount = 0;
        var d, e;
        d = c.R;
        e = b.m_p;
        var q = c.position.x + (d.col1.x * e.x + d.col2.x * e.y);
        c = c.position.y + (d.col1.y * e.x + d.col2.y * e.y);
        d = g.R;
        e = u.m_p;
        q = g.position.x + (d.col1.x * e.x + d.col2.x * e.y) - q;
        g = g.position.y + (d.col1.y * e.x + d.col2.y * e.y) - c;
        d = b.m_radius + u.m_radius;
        q * q + g * g > d * d || (a.m_type = D.e_circles, a.m_localPoint.SetV(b.m_p), a.m_localPlaneNormal.SetZero(),
        a.m_pointCount = 1, a.m_points[0].m_localPoint.SetV(u.m_p), a.m_points[0].m_id.key = 0)
    };
    w.CollidePolygonAndCircle = function(a, b, c, u, g) {
        var d = a.m_pointCount = 0, e = 0, q, r;
        r = g.R;
        q = u.m_p;
        var s = g.position.y + (r.col1.y * q.x + r.col2.y * q.y), d = g.position.x + (r.col1.x * q.x + r.col2.x * q.y) - c.position.x, e = s - c.position.y;
        r = c.R;
        c = d * r.col1.x + e * r.col1.y;
        r = d * r.col2.x + e * r.col2.y;
        var f = 0, s =- Number.MAX_VALUE;
        g = b.m_radius + u.m_radius;
        var A = parseInt(b.m_vertexCount), z = b.m_vertices;
        b = b.m_normals;
        for (var h = 0; h < A; ++h) {
            q = z[h];
            d = c - q.x;
            e = r -
            q.y;
            q = b[h];
            d = q.x * d + q.y * e;
            if (d > g)
                return;
            d > s && (s = d, f = h)
        }
        d = parseInt(f);
        e = parseInt(d + 1 < A ? d + 1 : 0);
        q = z[d];
        z = z[e];
        if (s < Number.MIN_VALUE)
            a.m_pointCount = 1, a.m_type = D.e_faceA, a.m_localPlaneNormal.SetV(b[f]), a.m_localPoint.x = 0.5 * (q.x + z.x), a.m_localPoint.y = 0.5 * (q.y + z.y);
        else if (s = (c - z.x) * (q.x - z.x) + (r - z.y) * (q.y - z.y), 0 >= (c - q.x) * (z.x - q.x) + (r - q.y) * (z.y - q.y)
            ) {
            if ((c - q.x) * (c - q.x) + (r - q.y) * (r - q.y) > g * g)
                return;
            a.m_pointCount = 1;
            a.m_type = D.e_faceA;
            a.m_localPlaneNormal.x = c - q.x;
            a.m_localPlaneNormal.y = r - q.y;
            a.m_localPlaneNormal.Normalize();
            a.m_localPoint.SetV(q)
        } else if (0 >= s) {
            if ((c - z.x) * (c - z.x) + (r - z.y) * (r - z.y) > g * g)
                return;
                a.m_pointCount = 1;
                a.m_type = D.e_faceA;
                a.m_localPlaneNormal.x = c - z.x;
                a.m_localPlaneNormal.y = r - z.y;
                a.m_localPlaneNormal.Normalize();
                a.m_localPoint.SetV(z)
        } else {
            f = 0.5 * (q.x + z.x);
            q = 0.5 * (q.y + z.y);
            s = (c - f) * b[d].x + (r - q) * b[d].y;
            if (s > g)
                return;
                a.m_pointCount = 1;
                a.m_type = D.e_faceA;
                a.m_localPlaneNormal.x = b[d].x;
                a.m_localPlaneNormal.y = b[d].y;
                a.m_localPlaneNormal.Normalize();
                a.m_localPoint.Set(f, q)
        }
        a.m_points[0].m_localPoint.SetV(u.m_p);
        a.m_points[0].m_id.key = 0
    };
    w.TestOverlap = function(a, b) {
        var c = b.lowerBound, u = a.upperBound, g = c.x - u.x, d = c.y - u.y, c = a.lowerBound, u = b.upperBound, e = c.y - u.y;
        return 0 < g || 0 < d || 0 < c.x - u.x || 0 < e?!1 : !0
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.b2Collision.s_incidentEdge = w.MakeClipPointVector();
        Box2D.Collision.b2Collision.s_clipPoints1 = w.MakeClipPointVector();
        Box2D.Collision.b2Collision.s_clipPoints2 = w.MakeClipPointVector();
        Box2D.Collision.b2Collision.s_edgeAO = new Vector_a2j_Number(1);
        Box2D.Collision.b2Collision.s_edgeBO =
        new Vector_a2j_Number(1);
        Box2D.Collision.b2Collision.s_localTangent = new g;
        Box2D.Collision.b2Collision.s_localNormal = new g;
        Box2D.Collision.b2Collision.s_planePoint = new g;
        Box2D.Collision.b2Collision.s_normal = new g;
        Box2D.Collision.b2Collision.s_tangent = new g;
        Box2D.Collision.b2Collision.s_tangent2 = new g;
        Box2D.Collision.b2Collision.s_v11 = new g;
        Box2D.Collision.b2Collision.s_v12 = new g;
        Box2D.Collision.b2Collision.b2CollidePolyTempVec = new g;
        Box2D.Collision.b2Collision.b2_nullFeature = 255
    });
    t.b2ContactID = function() {
        this.features =
        new q
    };
    t.prototype.b2ContactID = function() {
        this.features._m_id = this
    };
    t.prototype.Set = function(a) {
        this.key = a._key
    };
    t.prototype.Copy = function() {
        var a = new t;
        a.key = this.key;
        return a
    };
    Object.defineProperty(t.prototype, "key", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._key
        }
    });
    Object.defineProperty(t.prototype, "key", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._key = a;
            this.features._referenceEdge = this._key & 255;
            this.features._incidentEdge = (this._key & 65280)>>8 & 255;
            this.features._incidentVertex =
            (this._key & 16711680)>>16 & 255;
            this.features._flip = (this._key & 4278190080)>>24 & 255
        }
    });
    v.b2ContactPoint = function() {
        this.position = new g;
        this.velocity = new g;
        this.normal = new g;
        this.id = new t
    };
    x.b2Distance = function() {};
    x.Distance = function(a, b, c) {
        ++x.b2_gjkCalls;
        var u = c.proxyA, e = c.proxyB, q = c.transformA, r = c.transformB, s = x.s_simplex;
        s.ReadCache(b, u, q, e, r);
        var f = s.m_vertices, z = x.s_saveA, A = x.s_saveB, h = 0;
        s.GetClosestPoint().LengthSquared();
        for (var N = 0, p, J = 0; 20 > J;) {
            h = s.m_count;
            for (N = 0; N < h; N++)
                z[N] = f[N].indexA, A[N] =
            f[N].indexB;
            switch (s.m_count) {
            case 1:
                break;
            case 2:
                s.Solve2();
                break;
            case 3:
                s.Solve3();
                break;
            default:
                k.b2Assert(!1)
            }
            if (3 == s.m_count)
                break;
            p = s.GetClosestPoint();
            p.LengthSquared();
            N = s.GetSearchDirection();
            if (N.LengthSquared() < Number.MIN_VALUE * Number.MIN_VALUE)
                break;
            p = f[s.m_count];
            p.indexA = u.GetSupport(d.MulTMV(q.R, N.GetNegative()));
            p.wA = d.MulX(q, u.GetVertex(p.indexA));
            p.indexB = e.GetSupport(d.MulTMV(r.R, N));
            p.wB = d.MulX(r, e.GetVertex(p.indexB));
            p.w = d.SubtractVV(p.wB, p.wA);
            ++J;
            ++x.b2_gjkIters;
            for (var P =
            !1, N = 0; N < h; N++)
                if (p.indexA == z[N] && p.indexB == A[N]) {
                    P=!0;
                    break
                }
            if (P)
                break;
            ++s.m_count
        }
        x.b2_gjkMaxIters = d.Max(x.b2_gjkMaxIters, J);
        s.GetWitnessPoints(a.pointA, a.pointB);
        a.distance = d.SubtractVV(a.pointA, a.pointB).Length();
        a.iterations = J;
        s.WriteCache(b);
        c.useRadii && (b = u.m_radius, e = e.m_radius, a.distance > b + e && a.distance > Number.MIN_VALUE ? (a.distance -= b + e, c = d.SubtractVV(a.pointB, a.pointA), c.Normalize(), a.pointA.x += b * c.x, a.pointA.y += b * c.y, a.pointB.x -= e * c.x, a.pointB.y -= e * c.y) : (p = new g, p.x = 0.5 * (a.pointA.x + a.pointB.x),
        p.y = 0.5 * (a.pointA.y + a.pointB.y), a.pointA.x = a.pointB.x = p.x, a.pointA.y = a.pointB.y = p.y, a.distance = 0))
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.b2Distance.s_simplex = new s;
        Box2D.Collision.b2Distance.s_saveA = new Vector_a2j_Number(3);
        Box2D.Collision.b2Distance.s_saveB = new Vector_a2j_Number(3)
    });
    y.b2DistanceInput = function() {};
    p.b2DistanceOutput = function() {
        this.pointA = new g;
        this.pointB = new g
    };
    C.b2DistanceProxy = function() {};
    C.prototype.Set = function(u) {
        switch (u.GetType()) {
        case b.e_circleShape:
            u = u instanceof
            c ? u : null;
            this.m_vertices = new Vector(1, !0);
            this.m_vertices[0] = u.m_p;
            this.m_count = 1;
            this.m_radius = u.m_radius;
            break;
        case b.e_polygonShape:
            u = u instanceof a ? u : null;
            this.m_vertices = u.m_vertices;
            this.m_count = u.m_vertexCount;
            this.m_radius = u.m_radius;
            break;
        default:
            k.b2Assert(!1)
        }
    };
    C.prototype.GetSupport = function(a) {
        for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, u = 1; u < this.m_count; ++u) {
            var g = this.m_vertices[u].x * a.x + this.m_vertices[u].y * a.y;
            g > c && (b = u, c = g)
        }
        return b
    };
    C.prototype.GetSupportVertex =
    function(a) {
        for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, u = 1; u < this.m_count; ++u) {
            var g = this.m_vertices[u].x * a.x + this.m_vertices[u].y * a.y;
            g > c && (b = u, c = g)
        }
        return this.m_vertices[b]
    };
    C.prototype.GetVertexCount = function() {
        return this.m_count
    };
    C.prototype.GetVertex = function(a) {
        void 0 === a && (a = 0);
        k.b2Assert(0 <= a && a < this.m_count);
        return this.m_vertices[a]
    };
    B.b2DynamicTree = function() {};
    B.prototype.b2DynamicTree = function() {
        this.m_freeList = this.m_root = null;
        this.m_insertionCount = this.m_path =
        0
    };
    B.prototype.CreateProxy = function(a, b) {
        var c = this.AllocateNode(), u = k.b2_aabbExtension, g = k.b2_aabbExtension;
        c.aabb.lowerBound.x = a.lowerBound.x - u;
        c.aabb.lowerBound.y = a.lowerBound.y - g;
        c.aabb.upperBound.x = a.upperBound.x + u;
        c.aabb.upperBound.y = a.upperBound.y + g;
        c.userData = b;
        this.InsertLeaf(c);
        return c
    };
    B.prototype.DestroyProxy = function(a) {
        this.RemoveLeaf(a);
        this.FreeNode(a)
    };
    B.prototype.MoveProxy = function(a, b, c) {
        k.b2Assert(a.IsLeaf());
        if (a.aabb.Contains(b))
            return !1;
        this.RemoveLeaf(a);
        var u = k.b2_aabbExtension +
        k.b2_aabbMultiplier * (0 < c.x ? c.x : - c.x);
        c = k.b2_aabbExtension + k.b2_aabbMultiplier * (0 < c.y ? c.y : - c.y);
        a.aabb.lowerBound.x = b.lowerBound.x - u;
        a.aabb.lowerBound.y = b.lowerBound.y - c;
        a.aabb.upperBound.x = b.upperBound.x + u;
        a.aabb.upperBound.y = b.upperBound.y + c;
        this.InsertLeaf(a);
        return !0
    };
    B.prototype.Rebalance = function(a) {
        void 0 === a && (a = 0);
        if (null != this.m_root)
            for (var b = 0; b < a; b++) {
                for (var c = this.m_root, u = 0; !1 == c.IsLeaf();)
                    c = this.m_path>>u & 1 ? c.child2 : c.child1, u = u + 1 & 31;
                    ++this.m_path;
                    this.RemoveLeaf(c);
                    this.InsertLeaf(c)
            }
    };
    B.prototype.GetFatAABB = function(a) {
        return a.aabb
    };
    B.prototype.GetUserData = function(a) {
        return a.userData
    };
    B.prototype.Query = function(a, b) {
        if (null != this.m_root) {
            var c = new Vector, u = 0;
            for (c[u++] = this.m_root; 0 < u;) {
                var g = c[--u];
                if (g.aabb.TestOverlap(b))
                    if (g.IsLeaf()) {
                        if (!a(g))
                            break
                    } else 
                        c[u++] = g.child1, c[u++] = g.child2
            }
        }
    };
    B.prototype.RayCast = function(a, b) {
        if (null != this.m_root) {
            var c = b.p1, u = b.p2, g = d.SubtractVV(c, u);
            g.Normalize();
            var g = d.CrossFV(1, g), e = d.AbsV(g), q = b.maxFraction, r = new h, s = 0, f = 0, s = c.x + q * (u.x -
            c.x), f = c.y + q * (u.y - c.y);
            r.lowerBound.x = Math.min(c.x, s);
            r.lowerBound.y = Math.min(c.y, f);
            r.upperBound.x = Math.max(c.x, s);
            r.upperBound.y = Math.max(c.y, f);
            var z = new Vector, A = 0;
            for (z[A++] = this.m_root; 0 < A;)
                if (q = z[--A], !1 != q.aabb.TestOverlap(r) && (s = q.aabb.GetCenter(), f = q.aabb.GetExtents()
                    , !(0 < Math.abs(g.x * (c.x - s.x) + g.y * (c.y - s.y)) - e.x * f.x - e.y * f.y)))if (q.IsLeaf()) {
                s = new I;
                s.p1 = b.p1;
                s.p2 = b.p2;
                s.maxFraction = b.maxFraction;
                q = a(s, q);
                if (0 == q)
                    break;
                0 < q && (s = c.x + q * (u.x - c.x), f = c.y + q * (u.y - c.y), r.lowerBound.x = Math.min(c.x,
                s), r.lowerBound.y = Math.min(c.y, f), r.upperBound.x = Math.max(c.x, s), r.upperBound.y = Math.max(c.y, f))
            } else 
                z[A++] = q.child1, z[A++] = q.child2
        }
    };
    B.prototype.AllocateNode = function() {
        if (this.m_freeList) {
            var a = this.m_freeList;
            this.m_freeList = a.parent;
            a.parent = null;
            a.child1 = null;
            a.child2 = null;
            return a
        }
        return new E
    };
    B.prototype.FreeNode = function(a) {
        a.parent = this.m_freeList;
        this.m_freeList = a
    };
    B.prototype.InsertLeaf = function(a) {
        ++this.m_insertionCount;
        if (null == this.m_root)
            this.m_root = a, this.m_root.parent = null;
        else {
            var b =
            a.aabb.GetCenter(), c = this.m_root;
            if (!1 == c.IsLeaf()) {
                do 
                    var u = c.child1, c = c.child2, c = Math.abs((u.aabb.lowerBound.x + u.aabb.upperBound.x) / 2 - b.x) + Math.abs((u.aabb.lowerBound.y + u.aabb.upperBound.y) / 2 - b.y) < Math.abs((c.aabb.lowerBound.x + c.aabb.upperBound.x) / 2 - b.x) + Math.abs((c.aabb.lowerBound.y + c.aabb.upperBound.y) / 2 - b.y) ? u: c;
                while (!1 == c.IsLeaf())
                }
            b = c.parent;
            u = this.AllocateNode();
            u.parent = b;
            u.userData = null;
            u.aabb.Combine(a.aabb, c.aabb);
            if (b) {
                c.parent.child1 == c ? b.child1 = u : b.child2 = u;
                u.child1 = c;
                u.child2 = a;
                c.parent =
                u;
                a.parent = u;
                do {
                    if (b.aabb.Contains(u.aabb))
                        break;
                    b.aabb.Combine(b.child1.aabb, b.child2.aabb);
                    u = b;
                    b = b.parent
                }
                while (b)
                } else 
                    u.child1 = c, u.child2 = a, c.parent = u, this.m_root = a.parent = u
        }
    };
    B.prototype.RemoveLeaf = function(a) {
        if (a == this.m_root)
            this.m_root = null;
        else {
            var b = a.parent, c = b.parent;
            a = b.child1 == a ? b.child2 : b.child1;
            if (c)
                for (c.child1 == b ? c.child1 = a : c.child2 = a, a.parent = c, this.FreeNode(b);
            c;
            ) {
                b = c.aabb;
                c.aabb = h.Combine(c.child1.aabb, c.child2.aabb);
                if (b.Contains(c.aabb))
                    break;
                c = c.parent
            } else 
                this.m_root = a,
            a.parent = null, this.FreeNode(b)
        }
    };
    H.b2DynamicTreeBroadPhase = function() {
        this.m_tree = new B;
        this.m_moveBuffer = new Vector;
        this.m_pairBuffer = new Vector;
        this.m_pairCount = 0
    };
    H.prototype.CreateProxy = function(a, b) {
        var c = this.m_tree.CreateProxy(a, b);
        ++this.m_proxyCount;
        this.BufferMove(c);
        return c
    };
    H.prototype.DestroyProxy = function(a) {
        this.UnBufferMove(a);
        --this.m_proxyCount;
        this.m_tree.DestroyProxy(a)
    };
    H.prototype.MoveProxy = function(a, b, c) {
        this.m_tree.MoveProxy(a, b, c) && this.BufferMove(a)
    };
    H.prototype.TestOverlap =
    function(a, b) {
        var c = this.m_tree.GetFatAABB(a), u = this.m_tree.GetFatAABB(b);
        return c.TestOverlap(u)
    };
    H.prototype.GetUserData = function(a) {
        return this.m_tree.GetUserData(a)
    };
    H.prototype.GetFatAABB = function(a) {
        return this.m_tree.GetFatAABB(a)
    };
    H.prototype.GetProxyCount = function() {
        return this.m_proxyCount
    };
    H.prototype.UpdatePairs = function(a) {
        for (var b = this, c = b.m_pairCount = 0, u, c = 0; c < b.m_moveBuffer.length; ++c) {
            u = b.m_moveBuffer[c];
            var g = b.m_tree.GetFatAABB(u);
            b.m_tree.Query(function(a) {
                if (a == u)
                    return !0;
                b.m_pairCount ==
                b.m_pairBuffer.length && (b.m_pairBuffer[b.m_pairCount] = new G);
                var c = b.m_pairBuffer[b.m_pairCount];
                c.proxyA = a < u ? a : u;
                c.proxyB = a >= u ? a : u;
                ++b.m_pairCount;
                return !0
            }, g)
        }
        for (c = b.m_moveBuffer.length = 0; c < b.m_pairCount;) {
            var g = b.m_pairBuffer[c], d = b.m_tree.GetUserData(g.proxyA), e = b.m_tree.GetUserData(g.proxyB);
            a(d, e);
            for (++c; c < b.m_pairCount;) {
                d = b.m_pairBuffer[c];
                if (d.proxyA != g.proxyA || d.proxyB != g.proxyB)
                    break;
                ++c
            }
        }
    };
    H.prototype.Query = function(a, b) {
        this.m_tree.Query(a, b)
    };
    H.prototype.RayCast = function(a, b) {
        this.m_tree.RayCast(a,
        b)
    };
    H.prototype.Validate = function() {};
    H.prototype.Rebalance = function(a) {
        void 0 === a && (a = 0);
        this.m_tree.Rebalance(a)
    };
    H.prototype.BufferMove = function(a) {
        this.m_moveBuffer[this.m_moveBuffer.length] = a
    };
    H.prototype.UnBufferMove = function(a) {
        this.m_moveBuffer.splice(parseInt(this.m_moveBuffer.indexOf(a)), 1)
    };
    H.prototype.ComparePairs = function() {
        return 0
    };
    H.__implements = {};
    H.__implements[N]=!0;
    E.b2DynamicTreeNode = function() {
        this.aabb = new h
    };
    E.prototype.IsLeaf = function() {
        return null == this.child1
    };
    G.b2DynamicTreePair =
    function() {};
    D.b2Manifold = function() {
        this.m_pointCount = 0
    };
    D.prototype.b2Manifold = function() {
        this.m_points = new Vector(k.b2_maxManifoldPoints);
        for (var a = 0; a < k.b2_maxManifoldPoints; a++)
            this.m_points[a] = new K;
        this.m_localPlaneNormal = new g;
        this.m_localPoint = new g
    };
    D.prototype.Reset = function() {
        for (var a = 0; a < k.b2_maxManifoldPoints; a++)(this.m_points[a]instanceof K ? this.m_points[a] : null)
            .Reset();
        this.m_localPlaneNormal.SetZero();
        this.m_localPoint.SetZero();
        this.m_pointCount = this.m_type = 0
    };
    D.prototype.Set =
    function(a) {
        this.m_pointCount = a.m_pointCount;
        for (var b = 0; b < k.b2_maxManifoldPoints; b++)(this.m_points[b]instanceof K ? this.m_points[b] : null)
            .Set(a.m_points[b]);
        this.m_localPlaneNormal.SetV(a.m_localPlaneNormal);
        this.m_localPoint.SetV(a.m_localPoint);
        this.m_type = a.m_type
    };
    D.prototype.Copy = function() {
        var a = new D;
        a.Set(this);
        return a
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.b2Manifold.e_circles = 1;
        Box2D.Collision.b2Manifold.e_faceA = 2;
        Box2D.Collision.b2Manifold.e_faceB = 4
    });
    K.b2ManifoldPoint = function() {
        this.m_localPoint =
        new g;
        this.m_id = new t
    };
    K.prototype.b2ManifoldPoint = function() {
        this.Reset()
    };
    K.prototype.Reset = function() {
        this.m_localPoint.SetZero();
        this.m_tangentImpulse = this.m_normalImpulse = 0;
        this.m_id.key = 0
    };
    K.prototype.Set = function(a) {
        this.m_localPoint.SetV(a.m_localPoint);
        this.m_normalImpulse = a.m_normalImpulse;
        this.m_tangentImpulse = a.m_tangentImpulse;
        this.m_id.Set(a.m_id)
    };
    F.b2Point = function() {
        this.p = new g
    };
    F.prototype.Support = function() {
        return this.p
    };
    F.prototype.GetFirstVertex = function() {
        return this.p
    };
    I.b2RayCastInput =
    function() {
        this.p1 = new g;
        this.p2 = new g
    };
    I.prototype.b2RayCastInput = function(a, b, c) {
        void 0 === a && (a = null);
        void 0 === b && (b = null);
        void 0 === c && (c = 1);
        a && this.p1.SetV(a);
        b && this.p2.SetV(b);
        this.maxFraction = c
    };
    O.b2RayCastOutput = function() {
        this.normal = new g
    };
    L.b2Segment = function() {
        this.p1 = new g;
        this.p2 = new g
    };
    L.prototype.TestSegment = function(a, b, c, u) {
        void 0 === u && (u = 0);
        var g = c.p1, d = c.p2.x - g.x, e = c.p2.y - g.y;
        c = this.p2.y - this.p1.y;
        var q =- (this.p2.x - this.p1.x), r = 100 * Number.MIN_VALUE, s =- (d * c + e * q);
        if (s > r) {
            var f = g.x -
            this.p1.x, z = g.y - this.p1.y, g = f * c + z * q;
            if (0 <= g && g <= u * s && (u =- d * z + e * f, - r * s <= u && u <= s * (1 + r))
                )return g/=s, u = Math.sqrt(c * c + q * q), a[0] = g, b.Set(c / u, q / u), !0
        }
        return !1
    };
    L.prototype.Extend = function(a) {
        this.ExtendForward(a);
        this.ExtendBackward(a)
    };
    L.prototype.ExtendForward = function(a) {
        var b = this.p2.x - this.p1.x, c = this.p2.y - this.p1.y;
        a = Math.min(0 < b ? (a.upperBound.x - this.p1.x) / b : 0 > b ? (a.lowerBound.x - this.p1.x) / b : Number.POSITIVE_INFINITY, 0 < c ? (a.upperBound.y - this.p1.y) / c : 0 > c ? (a.lowerBound.y - this.p1.y) / c : Number.POSITIVE_INFINITY);
        this.p2.x = this.p1.x + b * a;
        this.p2.y = this.p1.y + c * a
    };
    L.prototype.ExtendBackward = function(a) {
        var b =- this.p2.x + this.p1.x, c =- this.p2.y + this.p1.y;
        a = Math.min(0 < b ? (a.upperBound.x - this.p2.x) / b : 0 > b ? (a.lowerBound.x - this.p2.x) / b : Number.POSITIVE_INFINITY, 0 < c ? (a.upperBound.y - this.p2.y) / c : 0 > c ? (a.lowerBound.y - this.p2.y) / c : Number.POSITIVE_INFINITY);
        this.p1.x = this.p2.x + b * a;
        this.p1.y = this.p2.y + c * a
    };
    r.b2SeparationFunction = function() {
        this.m_localPoint = new g;
        this.m_axis = new g
    };
    r.prototype.Initialize = function(a, b, c, u, e) {
        this.m_proxyA =
        b;
        this.m_proxyB = u;
        var q = parseInt(a.count);
        k.b2Assert(0 < q && 3 > q);
        var s, f, z, A, h = 0, N = 0;
        1 == q ? (this.m_type = r.e_points, s = this.m_proxyA.GetVertex(a.indexA[0]), f = this.m_proxyB.GetVertex(a.indexB[0]), q = s, a = c.R, b = c.position.x + (a.col1.x * q.x + a.col2.x * q.y), u = c.position.y + (a.col1.y * q.x + a.col2.y * q.y), q = f, a = e.R, z = e.position.x + (a.col1.x * q.x + a.col2.x * q.y), A = e.position.y + (a.col1.y * q.x + a.col2.y * q.y), this.m_axis.x = z - b, this.m_axis.y = A - u, this.m_axis.Normalize()) : (a.indexB[0] == a.indexB[1] ? (this.m_type = r.e_faceA, b = this.m_proxyA.GetVertex(a.indexA[0]),
        u = this.m_proxyA.GetVertex(a.indexA[1]), f = this.m_proxyB.GetVertex(a.indexB[0]), this.m_localPoint.x = 0.5 * (b.x + u.x), this.m_localPoint.y = 0.5 * (b.y + u.y), this.m_axis = d.CrossVF(d.SubtractVV(u, b), 1), this.m_axis.Normalize(), q = this.m_axis, a = c.R, h = a.col1.x * q.x + a.col2.x * q.y, N = a.col1.y * q.x + a.col2.y * q.y, q = this.m_localPoint, a = c.R, b = c.position.x + (a.col1.x * q.x + a.col2.x * q.y), u = c.position.y + (a.col1.y * q.x + a.col2.y * q.y), q = f, a = e.R, z = e.position.x + (a.col1.x * q.x + a.col2.x * q.y), A = e.position.y + (a.col1.y * q.x + a.col2.y * q.y), h = (z -
        b) * h + (A - u) * N) : a.indexA[0] == a.indexA[0] ? (this.m_type = r.e_faceB, z = this.m_proxyB.GetVertex(a.indexB[0]), A = this.m_proxyB.GetVertex(a.indexB[1]), s = this.m_proxyA.GetVertex(a.indexA[0]), this.m_localPoint.x = 0.5 * (z.x + A.x), this.m_localPoint.y = 0.5 * (z.y + A.y), this.m_axis = d.CrossVF(d.SubtractVV(A, z), 1), this.m_axis.Normalize(), q = this.m_axis, a = e.R, h = a.col1.x * q.x + a.col2.x * q.y, N = a.col1.y * q.x + a.col2.y * q.y, q = this.m_localPoint, a = e.R, z = e.position.x + (a.col1.x * q.x + a.col2.x * q.y), A = e.position.y + (a.col1.y * q.x + a.col2.y * q.y),
        q = s, a = c.R, b = c.position.x + (a.col1.x * q.x + a.col2.x * q.y), u = c.position.y + (a.col1.y * q.x + a.col2.y * q.y), h = (b - z) * h + (u - A) * N) : (b = this.m_proxyA.GetVertex(a.indexA[0]), u = this.m_proxyA.GetVertex(a.indexA[1]), z = this.m_proxyB.GetVertex(a.indexB[0]), A = this.m_proxyB.GetVertex(a.indexB[1]), d.MulX(c, s), s = d.MulMV(c.R, d.SubtractVV(u, b)), d.MulX(e, f), h = d.MulMV(e.R, d.SubtractVV(A, z)), e = s.x * s.x + s.y * s.y, f = h.x * h.x + h.y * h.y, a = d.SubtractVV(h, s), c = s.x * a.x + s.y * a.y, a = h.x * a.x + h.y * a.y, s = s.x * h.x + s.y * h.y, N = e * f - s * s, h = 0, 0 != N && (h = d.Clamp((s *
        a - c * f) / N, 0, 1)), 0 > (s * h + a) / f && (h = d.Clamp((s - c) / e, 0, 1)), s = new g, s.x = b.x + h * (u.x - b.x), s.y = b.y + h * (u.y - b.y), f = new g, f.x = z.x + h * (A.x - z.x), f.y = z.y + h * (A.y - z.y), 0 == h || 1 == h ? (this.m_type = r.e_faceB, this.m_axis = d.CrossVF(d.SubtractVV(A, z), 1), this.m_axis.Normalize(), this.m_localPoint = f) : (this.m_type = r.e_faceA, this.m_axis = d.CrossVF(d.SubtractVV(u, b), 1), this.m_localPoint = s)), 0 > h && this.m_axis.NegativeSelf())
    };
    r.prototype.Evaluate = function(a, b) {
        var c, u, g = 0;
        switch (this.m_type) {
        case r.e_points:
            return c = d.MulTMV(a.R, this.m_axis),
            u = d.MulTMV(b.R, this.m_axis.GetNegative()), c = this.m_proxyA.GetSupportVertex(c), u = this.m_proxyB.GetSupportVertex(u), c = d.MulX(a, c), u = d.MulX(b, u), (u.x - c.x) * this.m_axis.x + (u.y - c.y) * this.m_axis.y;
        case r.e_faceA:
            return g = d.MulMV(a.R, this.m_axis), c = d.MulX(a, this.m_localPoint), u = d.MulTMV(b.R, g.GetNegative()), u = this.m_proxyB.GetSupportVertex(u), u = d.MulX(b, u), (u.x - c.x) * g.x + (u.y - c.y) * g.y;
        case r.e_faceB:
            return g = d.MulMV(b.R, this.m_axis), u = d.MulX(b, this.m_localPoint), c = d.MulTMV(a.R, g.GetNegative()), c = this.m_proxyA.GetSupportVertex(c),
            c = d.MulX(a, c), (c.x - u.x) * g.x + (c.y - u.y) * g.y;
        default:
            return k.b2Assert(!1), 0
        }
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.b2SeparationFunction.e_points = 1;
        Box2D.Collision.b2SeparationFunction.e_faceA = 2;
        Box2D.Collision.b2SeparationFunction.e_faceB = 4
    });
    s.b2Simplex = function() {
        this.m_v1 = new z;
        this.m_v2 = new z;
        this.m_v3 = new z;
        this.m_vertices = new Vector(3)
    };
    s.prototype.b2Simplex = function() {
        this.m_vertices[0] = this.m_v1;
        this.m_vertices[1] = this.m_v2;
        this.m_vertices[2] = this.m_v3
    };
    s.prototype.ReadCache = function(a,
    b, c, u, g) {
        k.b2Assert(0 <= a.count && 3 >= a.count);
        var e, q;
        this.m_count = a.count;
        for (var r = this.m_vertices, s = 0; s < this.m_count; s++) {
            var f = r[s];
            f.indexA = a.indexA[s];
            f.indexB = a.indexB[s];
            e = b.GetVertex(f.indexA);
            q = u.GetVertex(f.indexB);
            f.wA = d.MulX(c, e);
            f.wB = d.MulX(g, q);
            f.w = d.SubtractVV(f.wB, f.wA);
            f.a = 0
        }
        1 < this.m_count && (a = a.metric, e = this.GetMetric(), e < 0.5 * a || 2 * a < e || e < Number.MIN_VALUE) && (this.m_count = 0);
        0 == this.m_count && (f = r[0], f.indexA = 0, f.indexB = 0, e = b.GetVertex(0), q = u.GetVertex(0), f.wA = d.MulX(c, e), f.wB = d.MulX(g,
        q), f.w = d.SubtractVV(f.wB, f.wA), this.m_count = 1)
    };
    s.prototype.WriteCache = function(a) {
        a.metric = this.GetMetric();
        a.count = Box2D.parseUInt(this.m_count);
        for (var b = this.m_vertices, c = 0; c < this.m_count; c++)
            a.indexA[c] = Box2D.parseUInt(b[c].indexA), a.indexB[c] = Box2D.parseUInt(b[c].indexB)
    };
    s.prototype.GetSearchDirection = function() {
        switch (this.m_count) {
        case 1:
            return this.m_v1.w.GetNegative();
        case 2:
            var a = d.SubtractVV(this.m_v2.w, this.m_v1.w);
            return 0 < d.CrossVV(a, this.m_v1.w.GetNegative()) ? d.CrossFV(1, a) : d.CrossVF(a,
            1);
        default:
            return k.b2Assert(!1), new g
        }
    };
    s.prototype.GetClosestPoint = function() {
        switch (this.m_count) {
        case 0:
            return k.b2Assert(!1), new g;
        case 1:
            return this.m_v1.w;
        case 2:
            return new g(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
        default:
            return k.b2Assert(!1), new g
        }
    };
    s.prototype.GetWitnessPoints = function(a, b) {
        switch (this.m_count) {
        case 0:
            k.b2Assert(!1);
            break;
        case 1:
            a.SetV(this.m_v1.wA);
            b.SetV(this.m_v1.wB);
            break;
        case 2:
            a.x = this.m_v1.a * this.m_v1.wA.x +
            this.m_v2.a * this.m_v2.wA.x;
            a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y;
            b.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x;
            b.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;
            break;
        case 3:
            b.x = a.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x;
            b.y = a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;
            break;
        default:
            k.b2Assert(!1)
        }
    };
    s.prototype.GetMetric = function() {
        switch (this.m_count) {
        case 0:
            return k.b2Assert(!1),
            0;
        case 1:
            return 0;
        case 2:
            return d.SubtractVV(this.m_v1.w, this.m_v2.w).Length();
        case 3:
            return d.CrossVV(d.SubtractVV(this.m_v2.w, this.m_v1.w), d.SubtractVV(this.m_v3.w, this.m_v1.w));
        default:
            return k.b2Assert(!1), 0
        }
    };
    s.prototype.Solve2 = function() {
        var a = this.m_v1.w, b = this.m_v2.w, c = d.SubtractVV(b, a), a =- (a.x * c.x + a.y * c.y);
        0 >= a ? this.m_count = this.m_v1.a = 1 : (b = b.x * c.x + b.y * c.y, 0 >= b ? (this.m_count = this.m_v2.a = 1, this.m_v1.Set(this.m_v2)) : (c = 1 / (b + a), this.m_v1.a = b * c, this.m_v2.a = a * c, this.m_count = 2))
    };
    s.prototype.Solve3 =
    function() {
        var a = this.m_v1.w, b = this.m_v2.w, c = this.m_v3.w, u = d.SubtractVV(b, a), g = d.Dot(a, u), e = d.Dot(b, u), g =- g, q = d.SubtractVV(c, a), r = d.Dot(a, q), s = d.Dot(c, q), r =- r, f = d.SubtractVV(c, b), z = d.Dot(b, f), f = d.Dot(c, f), z =- z, q = d.CrossVV(u, q), u = q * d.CrossVV(b, c), c = q * d.CrossVV(c, a), a = q * d.CrossVV(a, b);
        0 >= g && 0 >= r ? this.m_count = this.m_v1.a = 1 : 0 < e && 0 < g && 0 >= a ? (s = 1 / (e + g), this.m_v1.a = e * s, this.m_v2.a = g * s, this.m_count = 2) : 0 < s && 0 < r && 0 >= c ? (e = 1 / (s + r), this.m_v1.a = s * e, this.m_v3.a = r * e, this.m_count = 2, this.m_v2.Set(this.m_v3)) : 0 >= e &&
        0 >= z ? (this.m_count = this.m_v2.a = 1, this.m_v1.Set(this.m_v2)) : 0 >= s && 0 >= f ? (this.m_count = this.m_v3.a = 1, this.m_v1.Set(this.m_v3)) : 0 < f && 0 < z && 0 >= u ? (e = 1 / (f + z), this.m_v2.a = f * e, this.m_v3.a = z * e, this.m_count = 2, this.m_v1.Set(this.m_v3)) : (e = 1 / (u + c + a), this.m_v1.a = u * e, this.m_v2.a = c * e, this.m_v3.a = a * e, this.m_count = 3)
    };
    A.b2SimplexCache = function() {
        this.indexA = new Vector_a2j_Number(3);
        this.indexB = new Vector_a2j_Number(3)
    };
    z.b2SimplexVertex = function() {};
    z.prototype.Set = function(a) {
        this.wA.SetV(a.wA);
        this.wB.SetV(a.wB);
        this.w.SetV(a.w);
        this.a = a.a;
        this.indexA = a.indexA;
        this.indexB = a.indexB
    };
    J.b2TimeOfImpact = function() {};
    J.TimeOfImpact = function(a) {
        ++J.b2_toiCalls;
        var b = a.proxyA, c = a.proxyB, u = a.sweepA, g = a.sweepB;
        k.b2Assert(u.t0 == g.t0);
        k.b2Assert(1 - u.t0 > Number.MIN_VALUE);
        var e = b.m_radius + c.m_radius;
        a = a.tolerance;
        var q = 0, r = 0, s = 0;
        J.s_cache.count = 0;
        for (J.s_distanceInput.useRadii=!1; ;) {
            u.GetTransform(J.s_xfA, q);
            g.GetTransform(J.s_xfB, q);
            J.s_distanceInput.proxyA = b;
            J.s_distanceInput.proxyB = c;
            J.s_distanceInput.transformA = J.s_xfA;
            J.s_distanceInput.transformB = J.s_xfB;
            x.Distance(J.s_distanceOutput, J.s_cache, J.s_distanceInput);
            if (0 >= J.s_distanceOutput.distance) {
                q = 1;
                break
            }
            J.s_fcn.Initialize(J.s_cache, b, J.s_xfA, c, J.s_xfB);
            var f = J.s_fcn.Evaluate(J.s_xfA, J.s_xfB);
            if (0 >= f) {
                q = 1;
                break
            }
            0 == r && (s = f > e ? d.Max(e - a, 0.75 * e) : d.Max(f - a, 0.02 * e));
            if (f - s < 0.5 * a) {
                if (0 == r) {
                    q = 1;
                    break
                }
                break
            }
            var z = q, A = q, h = 1;
            u.GetTransform(J.s_xfA, h);
            g.GetTransform(J.s_xfB, h);
            var N = J.s_fcn.Evaluate(J.s_xfA, J.s_xfB);
            if (N >= s) {
                q = 1;
                break
            }
            for (var p = 0; ;) {
                var P = 0, P = p & 1 ? A + (s - f) *
                (h - A) / (N - f): 0.5 * (A + h);
                u.GetTransform(J.s_xfA, P);
                g.GetTransform(J.s_xfB, P);
                var M = J.s_fcn.Evaluate(J.s_xfA, J.s_xfB);
                if (d.Abs(M - s) < 0.025 * a) {
                    z = P;
                    break
                }
                M > s ? (A = P, f = M) : (h = P, N = M);
                ++p;
                ++J.b2_toiRootIters;
                if (50 == p)
                    break
            }
            J.b2_toiMaxRootIters = d.Max(J.b2_toiMaxRootIters, p);
            if (z < (1 + 100 * Number.MIN_VALUE) * q)
                break;
            q = z;
            r++;
            ++J.b2_toiIters;
            if (1E3 == r)
                break
        }
        J.b2_toiMaxIters = d.Max(J.b2_toiMaxIters, r);
        return q
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.b2TimeOfImpact.b2_toiCalls = 0;
        Box2D.Collision.b2TimeOfImpact.b2_toiIters =
        0;
        Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters = 0;
        Box2D.Collision.b2TimeOfImpact.b2_toiRootIters = 0;
        Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters = 0;
        Box2D.Collision.b2TimeOfImpact.s_cache = new A;
        Box2D.Collision.b2TimeOfImpact.s_distanceInput = new y;
        Box2D.Collision.b2TimeOfImpact.s_xfA = new f;
        Box2D.Collision.b2TimeOfImpact.s_xfB = new f;
        Box2D.Collision.b2TimeOfImpact.s_fcn = new r;
        Box2D.Collision.b2TimeOfImpact.s_distanceOutput = new p
    });
    M.b2TOIInput = function() {
        this.proxyA = new C;
        this.proxyB = new C;
        this.sweepA =
        new e;
        this.sweepB = new e
    };
    P.b2WorldManifold = function() {
        this.m_normal = new g
    };
    P.prototype.b2WorldManifold = function() {
        this.m_points = new Vector(k.b2_maxManifoldPoints);
        for (var a = 0; a < k.b2_maxManifoldPoints; a++)
            this.m_points[a] = new g
    };
    P.prototype.Initialize = function(a, b, c, u, g) {
        void 0 === c && (c = 0);
        void 0 === g && (g = 0);
        if (0 != a.m_pointCount) {
            var e = 0, d, q, r = 0, s = 0, f = 0, z = 0, A = 0;
            switch (a.m_type) {
            case D.e_circles:
                q = b.R;
                d = a.m_localPoint;
                e = b.position.x + q.col1.x * d.x + q.col2.x * d.y;
                b = b.position.y + q.col1.y * d.x + q.col2.y * d.y;
                q =
                u.R;
                d = a.m_points[0].m_localPoint;
                a = u.position.x + q.col1.x * d.x + q.col2.x * d.y;
                u = u.position.y + q.col1.y * d.x + q.col2.y * d.y;
                d = a - e;
                q = u - b;
                r = d * d + q * q;
                r > Number.MIN_VALUE * Number.MIN_VALUE ? (r = Math.sqrt(r), this.m_normal.x = d / r, this.m_normal.y = q / r) : (this.m_normal.x = 1, this.m_normal.y = 0);
                d = b + c * this.m_normal.y;
                u -= g * this.m_normal.y;
                this.m_points[0].x = 0.5 * (e + c * this.m_normal.x + (a - g * this.m_normal.x));
                this.m_points[0].y = 0.5 * (d + u);
                break;
            case D.e_faceA:
                q = b.R;
                d = a.m_localPlaneNormal;
                r = q.col1.x * d.x + q.col2.x * d.y;
                s = q.col1.y * d.x + q.col2.y *
                d.y;
                q = b.R;
                d = a.m_localPoint;
                f = b.position.x + q.col1.x * d.x + q.col2.x * d.y;
                z = b.position.y + q.col1.y * d.x + q.col2.y * d.y;
                this.m_normal.x = r;
                this.m_normal.y = s;
                for (e = 0; e < a.m_pointCount; e++)
                    q = u.R, d = a.m_points[e].m_localPoint, A = u.position.x + q.col1.x * d.x + q.col2.x * d.y, d = u.position.y + q.col1.y * d.x + q.col2.y * d.y, this.m_points[e].x = A + 0.5 * (c - (A - f) * r - (d - z) * s - g) * r, this.m_points[e].y = d + 0.5 * (c - (A - f) * r - (d - z) * s - g) * s;
                break;
            case D.e_faceB:
                for (q = u.R, d = a.m_localPlaneNormal, r = q.col1.x * d.x + q.col2.x * d.y, s = q.col1.y * d.x + q.col2.y * d.y, q =
                u.R, d = a.m_localPoint, f = u.position.x + q.col1.x * d.x + q.col2.x * d.y, z = u.position.y + q.col1.y * d.x + q.col2.y * d.y, this.m_normal.x =- r, this.m_normal.y =- s, e = 0; e < a.m_pointCount; e++)
                    q = b.R, d = a.m_points[e].m_localPoint, A = b.position.x + q.col1.x * d.x + q.col2.x * d.y, d = b.position.y + q.col1.y * d.x + q.col2.y * d.y, this.m_points[e].x = A + 0.5 * (g - (A - f) * r - (d - z) * s - c) * r, this.m_points[e].y = d + 0.5 * (g - (A - f) * r - (d - z) * s - c) * s
            }
        }
    };
    u.ClipVertex = function() {
        this.v = new g;
        this.id = new t
    };
    u.prototype.Set = function(a) {
        this.v.SetV(a.v);
        this.id.Set(a.id)
    };
    q.Features =
    function() {};
    Object.defineProperty(q.prototype, "referenceEdge", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._referenceEdge
        }
    });
    Object.defineProperty(q.prototype, "referenceEdge", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._referenceEdge = a;
            this._m_id._key = this._m_id._key & 4294967040 | this._referenceEdge & 255
        }
    });
    Object.defineProperty(q.prototype, "incidentEdge", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._incidentEdge
        }
    });
    Object.defineProperty(q.prototype,
    "incidentEdge", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._incidentEdge = a;
            this._m_id._key = this._m_id._key & 4294902015 | this._incidentEdge<<8 & 65280
        }
    });
    Object.defineProperty(q.prototype, "incidentVertex", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._incidentVertex
        }
    });
    Object.defineProperty(q.prototype, "incidentVertex", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._incidentVertex = a;
            this._m_id._key = this._m_id._key & 4278255615 | this._incidentVertex<<
            16 & 16711680
        }
    });
    Object.defineProperty(q.prototype, "flip", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._flip
        }
    });
    Object.defineProperty(q.prototype, "flip", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._flip = a;
            this._m_id._key = this._m_id._key & 16777215 | this._flip<<24 & 4278190080
        }
    })
})();
(function() {
    var c = Box2D.Common.b2Settings, a = Box2D.Collision.Shapes.b2CircleShape, b = Box2D.Collision.Shapes.b2EdgeChainDef, k = Box2D.Collision.Shapes.b2EdgeShape, d = Box2D.Collision.Shapes.b2MassData, e = Box2D.Collision.Shapes.b2PolygonShape, f = Box2D.Collision.Shapes.b2Shape, g = Box2D.Common.Math.b2Mat22, h = Box2D.Common.Math.b2Math, m = Box2D.Common.Math.b2Transform, n = Box2D.Common.Math.b2Vec2, w = Box2D.Collision.b2Distance, t = Box2D.Collision.b2DistanceInput, v = Box2D.Collision.b2DistanceOutput, x = Box2D.Collision.b2DistanceProxy,
    y = Box2D.Collision.b2SimplexCache;
    Box2D.inherit(a, Box2D.Collision.Shapes.b2Shape);
    a.prototype.__super = Box2D.Collision.Shapes.b2Shape.prototype;
    a.b2CircleShape = function() {
        Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments);
        this.m_p = new n
    };
    a.prototype.Copy = function() {
        var b = new a;
        b.Set(this);
        return b
    };
    a.prototype.Set = function(b) {
        this.__super.Set.call(this, b);
        Box2D.is(b, a) && this.m_p.SetV((b instanceof a ? b : null).m_p)
    };
    a.prototype.TestPoint = function(a, b) {
        var c = a.R, g = a.position.x + (c.col1.x * this.m_p.x +
        c.col2.x * this.m_p.y), c = a.position.y + (c.col1.y * this.m_p.x + c.col2.y * this.m_p.y), g = b.x - g, c = b.y - c;
        return g * g + c * c <= this.m_radius * this.m_radius
    };
    a.prototype.RayCast = function(a, b, c) {
        var g = c.R, d = b.p1.x - (c.position.x + (g.col1.x * this.m_p.x + g.col2.x * this.m_p.y));
        c = b.p1.y - (c.position.y + (g.col1.y * this.m_p.x + g.col2.y * this.m_p.y));
        var g = b.p2.x - b.p1.x, e = b.p2.y - b.p1.y, f = d * g + c * e, h = g * g + e * e, k = f * f - h * (d * d + c * c - this.m_radius * this.m_radius);
        if (0 > k || h < Number.MIN_VALUE)
            return !1;
        f =- (f + Math.sqrt(k));
        return 0 <= f && f <= b.maxFraction *
        h ? (f/=h, a.fraction = f, a.normal.x = d + f * g, a.normal.y = c + f * e, a.normal.Normalize(), !0) : !1
    };
    a.prototype.ComputeAABB = function(a, b) {
        var c = b.R, g = b.position.x + (c.col1.x * this.m_p.x + c.col2.x * this.m_p.y), c = b.position.y + (c.col1.y * this.m_p.x + c.col2.y * this.m_p.y);
        a.lowerBound.Set(g - this.m_radius, c - this.m_radius);
        a.upperBound.Set(g + this.m_radius, c + this.m_radius)
    };
    a.prototype.ComputeMass = function(a, b) {
        void 0 === b && (b = 0);
        a.mass = b * c.b2_pi * this.m_radius * this.m_radius;
        a.center.SetV(this.m_p);
        a.I = a.mass * (0.5 * this.m_radius *
        this.m_radius + (this.m_p.x * this.m_p.x + this.m_p.y * this.m_p.y))
    };
    a.prototype.ComputeSubmergedArea = function(a, b, c, g) {
        void 0 === b && (b = 0);
        c = h.MulX(c, this.m_p);
        var d =- (h.Dot(a, c) - b);
        if (d<-this.m_radius + Number.MIN_VALUE)
            return 0;
        if (d > this.m_radius)
            return g.SetV(c), Math.PI * this.m_radius * this.m_radius;
        b = this.m_radius * this.m_radius;
        var e = d * d, d = b * (Math.asin(d / this.m_radius) + Math.PI / 2) + d * Math.sqrt(b - e);
        b =- 2 / 3 * Math.pow(b - e, 1.5) / d;
        g.x = c.x + a.x * b;
        g.y = c.y + a.y * b;
        return d
    };
    a.prototype.GetLocalPosition = function() {
        return this.m_p
    };
    a.prototype.SetLocalPosition = function(a) {
        this.m_p.SetV(a)
    };
    a.prototype.GetRadius = function() {
        return this.m_radius
    };
    a.prototype.SetRadius = function(a) {
        void 0 === a && (a = 0);
        this.m_radius = a
    };
    a.prototype.b2CircleShape = function(a) {
        void 0 === a && (a = 0);
        this.__super.b2Shape.call(this);
        this.m_type = f.e_circleShape;
        this.m_radius = a
    };
    b.b2EdgeChainDef = function() {};
    b.prototype.b2EdgeChainDef = function() {
        this.vertexCount = 0;
        this.isALoop=!0;
        this.vertices = []
    };
    Box2D.inherit(k, Box2D.Collision.Shapes.b2Shape);
    k.prototype.__super =
    Box2D.Collision.Shapes.b2Shape.prototype;
    k.b2EdgeShape = function() {
        Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments);
        this.s_supportVec = new n;
        this.m_v1 = new n;
        this.m_v2 = new n;
        this.m_coreV1 = new n;
        this.m_coreV2 = new n;
        this.m_normal = new n;
        this.m_direction = new n;
        this.m_cornerDir1 = new n;
        this.m_cornerDir2 = new n
    };
    k.prototype.TestPoint = function() {
        return !1
    };
    k.prototype.RayCast = function(a, b, c) {
        var g, d = b.p2.x - b.p1.x, e = b.p2.y - b.p1.y;
        g = c.R;
        var f = c.position.x + (g.col1.x * this.m_v1.x + g.col2.x * this.m_v1.y),
        h = c.position.y + (g.col1.y * this.m_v1.x + g.col2.y * this.m_v1.y), k = c.position.y + (g.col1.y * this.m_v2.x + g.col2.y * this.m_v2.y) - h;
        c =- (c.position.x + (g.col1.x * this.m_v2.x + g.col2.x * this.m_v2.y) - f);
        g = 100 * Number.MIN_VALUE;
        var m =- (d * k + e * c);
        if (m > g) {
            var f = b.p1.x - f, n = b.p1.y - h, h = f * k + n * c;
            if (0 <= h && h <= b.maxFraction * m && (b =- d * n + e * f, - g * m <= b && b <= m * (1 + g))
                )return a.fraction = h / m, b = Math.sqrt(k * k + c * c), a.normal.x = k / b, a.normal.y = c / b, !0
        }
        return !1
    };
    k.prototype.ComputeAABB = function(a, b) {
        var c = b.R, g = b.position.x + (c.col1.x * this.m_v1.x +
        c.col2.x * this.m_v1.y), d = b.position.y + (c.col1.y * this.m_v1.x + c.col2.y * this.m_v1.y), e = b.position.x + (c.col1.x * this.m_v2.x + c.col2.x * this.m_v2.y), c = b.position.y + (c.col1.y * this.m_v2.x + c.col2.y * this.m_v2.y);
        g < e ? (a.lowerBound.x = g, a.upperBound.x = e) : (a.lowerBound.x = e, a.upperBound.x = g);
        d < c ? (a.lowerBound.y = d, a.upperBound.y = c) : (a.lowerBound.y = c, a.upperBound.y = d)
    };
    k.prototype.ComputeMass = function(a) {
        a.mass = 0;
        a.center.SetV(this.m_v1);
        a.I = 0
    };
    k.prototype.ComputeSubmergedArea = function(a, b, c, g) {
        void 0 === b && (b = 0);
        var d =
        new n(a.x * b, a.y * b), e = h.MulX(c, this.m_v1);
        c = h.MulX(c, this.m_v2);
        var f = h.Dot(a, e) - b;
        a = h.Dot(a, c) - b;
        if (0 < f) {
            if (0 < a)
                return 0;
            e.x =- a / (f - a) * e.x + f / (f - a) * c.x;
            e.y =- a / (f - a) * e.y + f / (f - a) * c.y
        } else 
            0 < a && (c.x =- a / (f - a) * e.x + f / (f - a) * c.x, c.y =- a / (f - a) * e.y + f / (f - a) * c.y);
        g.x = (d.x + e.x + c.x) / 3;
        g.y = (d.y + e.y + c.y) / 3;
        return 0.5 * ((e.x - d.x) * (c.y - d.y) - (e.y - d.y) * (c.x - d.x))
    };
    k.prototype.GetLength = function() {
        return this.m_length
    };
    k.prototype.GetVertex1 = function() {
        return this.m_v1
    };
    k.prototype.GetVertex2 = function() {
        return this.m_v2
    };
    k.prototype.GetCoreVertex1 = function() {
        return this.m_coreV1
    };
    k.prototype.GetCoreVertex2 = function() {
        return this.m_coreV2
    };
    k.prototype.GetNormalVector = function() {
        return this.m_normal
    };
    k.prototype.GetDirectionVector = function() {
        return this.m_direction
    };
    k.prototype.GetCorner1Vector = function() {
        return this.m_cornerDir1
    };
    k.prototype.GetCorner2Vector = function() {
        return this.m_cornerDir2
    };
    k.prototype.Corner1IsConvex = function() {
        return this.m_cornerConvex1
    };
    k.prototype.Corner2IsConvex = function() {
        return this.m_cornerConvex2
    };
    k.prototype.GetFirstVertex = function(a) {
        var b = a.R;
        return new n(a.position.x + (b.col1.x * this.m_coreV1.x + b.col2.x * this.m_coreV1.y), a.position.y + (b.col1.y * this.m_coreV1.x + b.col2.y * this.m_coreV1.y))
    };
    k.prototype.GetNextEdge = function() {
        return this.m_nextEdge
    };
    k.prototype.GetPrevEdge = function() {
        return this.m_prevEdge
    };
    k.prototype.Support = function(a, b, c) {
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var g = a.R, d = a.position.x + (g.col1.x * this.m_coreV1.x + g.col2.x * this.m_coreV1.y), e = a.position.y + (g.col1.y * this.m_coreV1.x +
        g.col2.y * this.m_coreV1.y), f = a.position.x + (g.col1.x * this.m_coreV2.x + g.col2.x * this.m_coreV2.y);
        a = a.position.y + (g.col1.y * this.m_coreV2.x + g.col2.y * this.m_coreV2.y);
        d * b + e * c > f * b + a * c ? (this.s_supportVec.x = d, this.s_supportVec.y = e) : (this.s_supportVec.x = f, this.s_supportVec.y = a);
        return this.s_supportVec
    };
    k.prototype.b2EdgeShape = function(a, b) {
        this.__super.b2Shape.call(this);
        this.m_type = f.e_edgeShape;
        this.m_nextEdge = this.m_prevEdge = null;
        this.m_v1 = a;
        this.m_v2 = b;
        this.m_direction.Set(this.m_v2.x - this.m_v1.x, this.m_v2.y -
        this.m_v1.y);
        this.m_length = this.m_direction.Normalize();
        this.m_normal.Set(this.m_direction.y, - this.m_direction.x);
        this.m_coreV1.Set( - c.b2_toiSlop * (this.m_normal.x - this.m_direction.x) + this.m_v1.x, - c.b2_toiSlop * (this.m_normal.y - this.m_direction.y) + this.m_v1.y);
        this.m_coreV2.Set( - c.b2_toiSlop * (this.m_normal.x + this.m_direction.x) + this.m_v2.x, - c.b2_toiSlop * (this.m_normal.y + this.m_direction.y) + this.m_v2.y);
        this.m_cornerDir1 = this.m_normal;
        this.m_cornerDir2.Set( - this.m_normal.x, - this.m_normal.y)
    };
    k.prototype.SetPrevEdge =
    function(a, b, c, g) {
        this.m_prevEdge = a;
        this.m_coreV1 = b;
        this.m_cornerDir1 = c;
        this.m_cornerConvex1 = g
    };
    k.prototype.SetNextEdge = function(a, b, c, g) {
        this.m_nextEdge = a;
        this.m_coreV2 = b;
        this.m_cornerDir2 = c;
        this.m_cornerConvex2 = g
    };
    d.b2MassData = function() {
        this.mass = 0;
        this.center = new n(0, 0);
        this.I = 0
    };
    Box2D.inherit(e, Box2D.Collision.Shapes.b2Shape);
    e.prototype.__super = Box2D.Collision.Shapes.b2Shape.prototype;
    e.b2PolygonShape = function() {
        Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments)
    };
    e.prototype.Copy =
    function() {
        var a = new e;
        a.Set(this);
        return a
    };
    e.prototype.Set = function(a) {
        this.__super.Set.call(this, a);
        if (Box2D.is(a, e)) {
            a = a instanceof e ? a : null;
            this.m_centroid.SetV(a.m_centroid);
            this.m_vertexCount = a.m_vertexCount;
            this.Reserve(this.m_vertexCount);
            for (var b = 0; b < this.m_vertexCount; b++)
                this.m_vertices[b].SetV(a.m_vertices[b]), this.m_normals[b].SetV(a.m_normals[b])
        }
    };
    e.prototype.SetAsArray = function(a, b) {
        void 0 === b && (b = 0);
        for (var c = new Vector, g = 0, d, g = 0; g < a.length; ++g)
            d = a[g], c.push(d);
        this.SetAsVector(c,
        b)
    };
    e.AsArray = function(a, b) {
        void 0 === b && (b = 0);
        var c = new e;
        c.SetAsArray(a, b);
        return c
    };
    e.prototype.SetAsVector = function(a, b) {
        void 0 === b && (b = 0);
        0 == b && (b = a.length);
        c.b2Assert(2 <= b);
        this.m_vertexCount = b;
        this.Reserve(b);
        for (var g = 0, g = 0; g < this.m_vertexCount; g++)
            this.m_vertices[g].SetV(a[g]);
        for (g = 0; g < this.m_vertexCount; ++g) {
            var d = parseInt(g), f = parseInt(g + 1 < this.m_vertexCount ? g + 1 : 0), d = h.SubtractVV(this.m_vertices[f], this.m_vertices[d]);
            c.b2Assert(d.LengthSquared() > Number.MIN_VALUE);
            this.m_normals[g].SetV(h.CrossVF(d,
            1));
            this.m_normals[g].Normalize()
        }
        this.m_centroid = e.ComputeCentroid(this.m_vertices, this.m_vertexCount)
    };
    e.AsVector = function(a, b) {
        void 0 === b && (b = 0);
        var c = new e;
        c.SetAsVector(a, b);
        return c
    };
    e.prototype.SetAsBox = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.m_vertexCount = 4;
        this.Reserve(4);
        this.m_vertices[0].Set( - a, - b);
        this.m_vertices[1].Set(a, - b);
        this.m_vertices[2].Set(a, b);
        this.m_vertices[3].Set( - a, b);
        this.m_normals[0].Set(0, -1);
        this.m_normals[1].Set(1, 0);
        this.m_normals[2].Set(0, 1);
        this.m_normals[3].Set(-1,
        0);
        this.m_centroid.SetZero()
    };
    e.AsBox = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        var c = new e;
        c.SetAsBox(a, b);
        return c
    };
    e.prototype.SetAsOrientedBox = function(a, b, c, g) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = null);
        void 0 === g && (g = 0);
        this.m_vertexCount = 4;
        this.Reserve(4);
        this.m_vertices[0].Set( - a, - b);
        this.m_vertices[1].Set(a, - b);
        this.m_vertices[2].Set(a, b);
        this.m_vertices[3].Set( - a, b);
        this.m_normals[0].Set(0, -1);
        this.m_normals[1].Set(1, 0);
        this.m_normals[2].Set(0, 1);
        this.m_normals[3].Set(-1,
        0);
        this.m_centroid = c;
        a = new m;
        a.position = c;
        a.R.Set(g);
        for (c = 0; c < this.m_vertexCount; ++c)
            this.m_vertices[c] = h.MulX(a, this.m_vertices[c]), this.m_normals[c] = h.MulMV(a.R, this.m_normals[c])
    };
    e.AsOrientedBox = function(a, b, c, g) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = null);
        void 0 === g && (g = 0);
        var d = new e;
        d.SetAsOrientedBox(a, b, c, g);
        return d
    };
    e.prototype.SetAsEdge = function(a, b) {
        this.m_vertexCount = 2;
        this.Reserve(2);
        this.m_vertices[0].SetV(a);
        this.m_vertices[1].SetV(b);
        this.m_centroid.x = 0.5 * (a.x + b.x);
        this.m_centroid.y = 0.5 * (a.y + b.y);
        this.m_normals[0] = h.CrossVF(h.SubtractVV(b, a), 1);
        this.m_normals[0].Normalize();
        this.m_normals[1].x =- this.m_normals[0].x;
        this.m_normals[1].y =- this.m_normals[0].y
    };
    e.AsEdge = function(a, b) {
        var c = new e;
        c.SetAsEdge(a, b);
        return c
    };
    e.prototype.TestPoint = function(a, b) {
        var c;
        c = a.R;
        for (var g = b.x - a.position.x, d = b.y - a.position.y, e = g * c.col1.x + d * c.col1.y, f = g * c.col2.x + d * c.col2.y, h = 0; h < this.m_vertexCount; ++h)
            if (c = this.m_vertices[h], g = e - c.x, d = f - c.y, c = this.m_normals[h], 0 < c.x * g + c.y * d)
                return !1;
        return !0
    };
    e.prototype.RayCast = function(a, b, c) {
        var g = 0, d = b.maxFraction, e = 0, f = 0, h, k, e = b.p1.x - c.position.x, f = b.p1.y - c.position.y;
        h = c.R;
        var m = e * h.col1.x + f * h.col1.y, n = e * h.col2.x + f * h.col2.y, e = b.p2.x - c.position.x, f = b.p2.y - c.position.y;
        h = c.R;
        b = e * h.col1.x + f * h.col1.y - m;
        h = e * h.col2.x + f * h.col2.y - n;
        for (var t =- 1, r = 0; r < this.m_vertexCount; ++r) {
            k = this.m_vertices[r];
            e = k.x - m;
            f = k.y - n;
            k = this.m_normals[r];
            e = k.x * e + k.y * f;
            f = k.x * b + k.y * h;
            if (0 == f) {
                if (0 > e)
                    return !1
            } else 
                0 > f && e < g * f ? (g = e / f, t = r) : 0 < f && e < d * f && (d = e / f);
            if (d < g - Number.MIN_VALUE)
                return !1
        }
        return 0 <=
        t ? (a.fraction = g, h = c.R, k = this.m_normals[t], a.normal.x = h.col1.x * k.x + h.col2.x * k.y, a.normal.y = h.col1.y * k.x + h.col2.y * k.y, !0) : !1
    };
    e.prototype.ComputeAABB = function(a, b) {
        for (var c = b.R, g = this.m_vertices[0], d = b.position.x + (c.col1.x * g.x + c.col2.x * g.y), e = b.position.y + (c.col1.y * g.x + c.col2.y * g.y), f = d, h = e, k = 1; k < this.m_vertexCount; ++k)
            var g = this.m_vertices[k], m = b.position.x + (c.col1.x * g.x + c.col2.x * g.y), g = b.position.y + (c.col1.y * g.x + c.col2.y * g.y), d = d < m ? d: m, e = e < g ? e: g, f = f > m ? f: m, h = h > g ? h: g;
        a.lowerBound.x = d - this.m_radius;
        a.lowerBound.y = e - this.m_radius;
        a.upperBound.x = f + this.m_radius;
        a.upperBound.y = h + this.m_radius
    };
    e.prototype.ComputeMass = function(a, b) {
        void 0 === b && (b = 0);
        if (2 == this.m_vertexCount)
            a.center.x = 0.5 * (this.m_vertices[0].x + this.m_vertices[1].x), a.center.y = 0.5 * (this.m_vertices[0].y + this.m_vertices[1].y), a.mass = 0, a.I = 0;
        else {
            for (var c = 0, g = 0, d = 0, e = 0, f = 1 / 3, h = 0; h < this.m_vertexCount; ++h)
                var k = this.m_vertices[h], m = h + 1 < this.m_vertexCount ? this.m_vertices[parseInt(h + 1)]: this.m_vertices[0], n = k.x-0, t = k.y-0, r = m.x-0, s = m.y -
            0, A = n * s - t * r, z = 0.5 * A, d = d + z, c = c + z * f * (0 + k.x + m.x), g = g + z * f * (0 + k.y + m.y), k = n, e = e + A * (f * (0.25 * (k * k + r * k + r * r) + (0 * k + 0 * r)) + 0 + (f * (0.25 * (t * t + s * t + s * s) + (0 * t + 0 * s)) + 0));
            a.mass = b * d;
            a.center.Set(c * (1 / d), g * (1 / d));
            a.I = b * e
        }
    };
    e.prototype.ComputeSubmergedArea = function(a, b, c, g) {
        void 0 === b && (b = 0);
        var e = h.MulTMV(c.R, a), f = b - h.Dot(a, c.position), k = new Vector_a2j_Number, m = 0, t =- 1;
        b =- 1;
        var v=!1;
        for (a = a = 0; a < this.m_vertexCount; ++a) {
            k[a] = h.Dot(e, this.m_vertices[a]) - f;
            var w = k[a]<-Number.MIN_VALUE;
            0 < a && (w ? v || (t = a-1, m++) : v && (b = a-1, m++));
            v = w
        }
        switch (m) {
        case 0:
            return v ? (a = new d, this.ComputeMass(a, 1), g.SetV(h.MulX(c, a.center)), a.mass) : 0;
        case 1:
            -1 == t ? t = this.m_vertexCount-1 : b = this.m_vertexCount-1
        }
        a = parseInt((t + 1)%this.m_vertexCount);
        e = parseInt((b + 1)%this.m_vertexCount);
        f = (0 - k[t]) / (k[a] - k[t]);
        k = (0 - k[b]) / (k[e] - k[b]);
        t = new n(this.m_vertices[t].x * (1 - f) + this.m_vertices[a].x * f, this.m_vertices[t].y * (1 - f) + this.m_vertices[a].y * f);
        b = new n(this.m_vertices[b].x * (1 - k) + this.m_vertices[e].x * k, this.m_vertices[b].y * (1 - k) + this.m_vertices[e].y * k);
        k = 0;
        f =
        new n;
        for (m = this.m_vertices[a]; a != e;)
            a = (a + 1)%this.m_vertexCount, v = a == e ? b : this.m_vertices[a], w = 0.5 * ((m.x - t.x) * (v.y - t.y) - (m.y - t.y) * (v.x - t.x)), k += w, f.x += w * (t.x + m.x + v.x) / 3, f.y += w * (t.y + m.y + v.y) / 3, m = v;
        f.Multiply(1 / k);
        g.SetV(h.MulX(c, f));
        return k
    };
    e.prototype.GetVertexCount = function() {
        return this.m_vertexCount
    };
    e.prototype.GetVertices = function() {
        return this.m_vertices
    };
    e.prototype.GetNormals = function() {
        return this.m_normals
    };
    e.prototype.GetSupport = function(a) {
        for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y *
        a.y, g = 1; g < this.m_vertexCount; ++g) {
            var d = this.m_vertices[g].x * a.x + this.m_vertices[g].y * a.y;
            d > c && (b = g, c = d)
        }
        return b
    };
    e.prototype.GetSupportVertex = function(a) {
        for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, g = 1; g < this.m_vertexCount; ++g) {
            var d = this.m_vertices[g].x * a.x + this.m_vertices[g].y * a.y;
            d > c && (b = g, c = d)
        }
        return this.m_vertices[b]
    };
    e.prototype.Validate = function() {
        return !1
    };
    e.prototype.b2PolygonShape = function() {
        this.__super.b2Shape.call(this);
        this.m_type = f.e_polygonShape;
        this.m_centroid =
        new n;
        this.m_vertices = new Vector;
        this.m_normals = new Vector
    };
    e.prototype.Reserve = function(a) {
        void 0 === a && (a = 0);
        for (var b = parseInt(this.m_vertices.length); b < a; b++)
            this.m_vertices[b] = new n, this.m_normals[b] = new n
    };
    e.ComputeCentroid = function(a, b) {
        void 0 === b && (b = 0);
        for (var c = new n, g = 0, d = 1 / 3, e = 0; e < b; ++e) {
            var f = a[e], h = e + 1 < b ? a[parseInt(e + 1)]: a[0], k = 0.5 * ((f.x-0) * (h.y-0) - (f.y-0) * (h.x-0)), g = g + k;
            c.x += k * d * (0 + f.x + h.x);
            c.y += k * d * (0 + f.y + h.y)
        }
        c.x*=1 / g;
        c.y*=1 / g;
        return c
    };
    e.ComputeOBB = function(a, b, c) {
        void 0 === c && (c =
        0);
        for (var g = 0, d = new Vector(c + 1), g = 0; g < c; ++g)
            d[g] = b[g];
        d[c] = d[0];
        b = Number.MAX_VALUE;
        for (g = 1; g <= c; ++g) {
            for (var e = d[parseInt(g-1)], f = d[g].x - e.x, h = d[g].y - e.y, k = Math.sqrt(f * f + h * h), f = f / k, h = h / k, m =- h, n = f, t = k = Number.MAX_VALUE, r =- Number.MAX_VALUE, s =- Number.MAX_VALUE, A = 0; A < c; ++A) {
                var z = d[A].x - e.x, J = d[A].y - e.y, M = f * z + h * J, z = m * z + n * J;
                M < k && (k = M);
                z < t && (t = z);
                M > r && (r = M);
                z > s && (s = z)
            }
            A = (r - k) * (s - t);
            A < 0.95 * b && (b = A, a.R.col1.x = f, a.R.col1.y = h, a.R.col2.x = m, a.R.col2.y = n, f = 0.5 * (k + r), h = 0.5 * (t + s), m = a.R, a.center.x = e.x + (m.col1.x *
            f + m.col2.x * h), a.center.y = e.y + (m.col1.y * f + m.col2.y * h), a.extents.x = 0.5 * (r - k), a.extents.y = 0.5 * (s - t))
        }
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.Shapes.b2PolygonShape.s_mat = new g
    });
    f.b2Shape = function() {};
    f.prototype.Copy = function() {
        return null
    };
    f.prototype.Set = function(a) {
        this.m_radius = a.m_radius
    };
    f.prototype.GetType = function() {
        return this.m_type
    };
    f.prototype.TestPoint = function() {
        return !1
    };
    f.prototype.RayCast = function() {
        return !1
    };
    f.prototype.ComputeAABB = function() {};
    f.prototype.ComputeMass = function() {};
    f.prototype.ComputeSubmergedArea = function() {
        return 0
    };
    f.TestOverlap = function(a, b, c, g) {
        var d = new t;
        d.proxyA = new x;
        d.proxyA.Set(a);
        d.proxyB = new x;
        d.proxyB.Set(c);
        d.transformA = b;
        d.transformB = g;
        d.useRadii=!0;
        a = new y;
        a.count = 0;
        b = new v;
        w.Distance(b, a, d);
        return b.distance < 10 * Number.MIN_VALUE
    };
    f.prototype.b2Shape = function() {
        this.m_type = f.e_unknownShape;
        this.m_radius = c.b2_linearSlop
    };
    Box2D.postDefs.push(function() {
        Box2D.Collision.Shapes.b2Shape.e_unknownShape =- 1;
        Box2D.Collision.Shapes.b2Shape.e_circleShape =
        0;
        Box2D.Collision.Shapes.b2Shape.e_polygonShape = 1;
        Box2D.Collision.Shapes.b2Shape.e_edgeShape = 2;
        Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount = 3;
        Box2D.Collision.Shapes.b2Shape.e_hitCollide = 1;
        Box2D.Collision.Shapes.b2Shape.e_missCollide = 0;
        Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide =- 1
    })
})();
(function() {
    var c = Box2D.Common.b2Color, a = Box2D.Common.b2Settings, b = Box2D.Common.Math.b2Math;
    c.b2Color = function() {
        this._b = this._g = this._r = 0
    };
    c.prototype.b2Color = function(a, c, e) {
        void 0 === a && (a = 0);
        void 0 === c && (c = 0);
        void 0 === e && (e = 0);
        this._r = Box2D.parseUInt(255 * b.Clamp(a, 0, 1));
        this._g = Box2D.parseUInt(255 * b.Clamp(c, 0, 1));
        this._b = Box2D.parseUInt(255 * b.Clamp(e, 0, 1))
    };
    c.prototype.Set = function(a, c, e) {
        void 0 === a && (a = 0);
        void 0 === c && (c = 0);
        void 0 === e && (e = 0);
        this._r = Box2D.parseUInt(255 * b.Clamp(a, 0, 1));
        this._g =
        Box2D.parseUInt(255 * b.Clamp(c, 0, 1));
        this._b = Box2D.parseUInt(255 * b.Clamp(e, 0, 1))
    };
    Object.defineProperty(c.prototype, "r", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._r = Box2D.parseUInt(255 * b.Clamp(a, 0, 1))
        }
    });
    Object.defineProperty(c.prototype, "g", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._g = Box2D.parseUInt(255 * b.Clamp(a, 0, 1))
        }
    });
    Object.defineProperty(c.prototype, "b", {
        enumerable: !1,
        configurable: !0,
        set: function(a) {
            void 0 === a && (a = 0);
            this._b = Box2D.parseUInt(255 *
            b.Clamp(a, 0, 1))
        }
    });
    Object.defineProperty(c.prototype, "color", {
        enumerable: !1,
        configurable: !0,
        get: function() {
            return this._r<<16 | this._g<<8 | this._b
        }
    });
    a.b2Settings = function() {};
    a.b2MixFriction = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        return Math.sqrt(a * b)
    };
    a.b2MixRestitution = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        return a > b ? a : b
    };
    a.b2Assert = function(a) {
        if (!a)
            throw "Assertion Failed";
    };
    Box2D.postDefs.push(function() {
        Box2D.Common.b2Settings.VERSION = "2.1alpha";
        Box2D.Common.b2Settings.USHRT_MAX =
        65535;
        Box2D.Common.b2Settings.b2_pi = Math.PI;
        Box2D.Common.b2Settings.b2_maxManifoldPoints = 2;
        Box2D.Common.b2Settings.b2_aabbExtension = 0.1;
        Box2D.Common.b2Settings.b2_aabbMultiplier = 2;
        Box2D.Common.b2Settings.b2_polygonRadius = 2 * a.b2_linearSlop;
        Box2D.Common.b2Settings.b2_linearSlop = 0.0050;
        Box2D.Common.b2Settings.b2_angularSlop = 2 / 180 * a.b2_pi;
        Box2D.Common.b2Settings.b2_toiSlop = 8 * a.b2_linearSlop;
        Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland = 32;
        Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland = 32;
        Box2D.Common.b2Settings.b2_velocityThreshold =
        1;
        Box2D.Common.b2Settings.b2_maxLinearCorrection = 0.2;
        Box2D.Common.b2Settings.b2_maxAngularCorrection = 8 / 180 * a.b2_pi;
        Box2D.Common.b2Settings.b2_maxTranslation = 2;
        Box2D.Common.b2Settings.b2_maxTranslationSquared = a.b2_maxTranslation * a.b2_maxTranslation;
        Box2D.Common.b2Settings.b2_maxRotation = 0.5 * a.b2_pi;
        Box2D.Common.b2Settings.b2_maxRotationSquared = a.b2_maxRotation * a.b2_maxRotation;
        Box2D.Common.b2Settings.b2_contactBaumgarte = 0.2;
        Box2D.Common.b2Settings.b2_timeToSleep = 0.5;
        Box2D.Common.b2Settings.b2_linearSleepTolerance =
        0.01;
        Box2D.Common.b2Settings.b2_angularSleepTolerance = 2 / 180 * a.b2_pi
    })
})();
(function() {
    var c = Box2D.Common.Math.b2Mat22, a = Box2D.Common.Math.b2Mat33, b = Box2D.Common.Math.b2Math, k = Box2D.Common.Math.b2Sweep, d = Box2D.Common.Math.b2Transform, e = Box2D.Common.Math.b2Vec2, f = Box2D.Common.Math.b2Vec3;
    c.b2Mat22 = function() {
        this.col1 = new e;
        this.col2 = new e
    };
    c.prototype.b2Mat22 = function() {
        this.SetIdentity()
    };
    c.FromAngle = function(a) {
        void 0 === a && (a = 0);
        var b = new c;
        b.Set(a);
        return b
    };
    c.FromVV = function(a, b) {
        var d = new c;
        d.SetVV(a, b);
        return d
    };
    c.prototype.Set = function(a) {
        void 0 === a && (a = 0);
        var b =
        Math.cos(a);
        a = Math.sin(a);
        this.col1.x = b;
        this.col2.x =- a;
        this.col1.y = a;
        this.col2.y = b
    };
    c.prototype.SetVV = function(a, b) {
        this.col1.SetV(a);
        this.col2.SetV(b)
    };
    c.prototype.Copy = function() {
        var a = new c;
        a.SetM(this);
        return a
    };
    c.prototype.SetM = function(a) {
        this.col1.SetV(a.col1);
        this.col2.SetV(a.col2)
    };
    c.prototype.AddM = function(a) {
        this.col1.x += a.col1.x;
        this.col1.y += a.col1.y;
        this.col2.x += a.col2.x;
        this.col2.y += a.col2.y
    };
    c.prototype.SetIdentity = function() {
        this.col1.x = 1;
        this.col2.x = 0;
        this.col1.y = 0;
        this.col2.y = 1
    };
    c.prototype.SetZero = function() {
        this.col1.x = 0;
        this.col2.x = 0;
        this.col1.y = 0;
        this.col2.y = 0
    };
    c.prototype.GetAngle = function() {
        return Math.atan2(this.col1.y, this.col1.x)
    };
    c.prototype.GetInverse = function(a) {
        var b = this.col1.x, c = this.col2.x, d = this.col1.y, e = this.col2.y, f = b * e - c * d;
        0 != f && (f = 1 / f);
        a.col1.x = f * e;
        a.col2.x =- f * c;
        a.col1.y =- f * d;
        a.col2.y = f * b;
        return a
    };
    c.prototype.Solve = function(a, b, c) {
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var d = this.col1.x, e = this.col2.x, f = this.col1.y, k = this.col2.y, x = d * k - e * f;
        0 != x && (x = 1 / x);
        a.x = x * (k * b - e * c);
        a.y = x * (d * c - f * b);
        return a
    };
    c.prototype.Abs = function() {
        this.col1.Abs();
        this.col2.Abs()
    };
    a.b2Mat33 = function() {
        this.col1 = new f;
        this.col2 = new f;
        this.col3 = new f
    };
    a.prototype.b2Mat33 = function(a, b, c) {
        void 0 === a && (a = null);
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        a || b || c ? (this.col1.SetV(a), this.col2.SetV(b), this.col3.SetV(c)) : (this.col1.SetZero(), this.col2.SetZero(), this.col3.SetZero())
    };
    a.prototype.SetVVV = function(a, b, c) {
        this.col1.SetV(a);
        this.col2.SetV(b);
        this.col3.SetV(c)
    };
    a.prototype.Copy =
    function() {
        return new a(this.col1, this.col2, this.col3)
    };
    a.prototype.SetM = function(a) {
        this.col1.SetV(a.col1);
        this.col2.SetV(a.col2);
        this.col3.SetV(a.col3)
    };
    a.prototype.AddM = function(a) {
        this.col1.x += a.col1.x;
        this.col1.y += a.col1.y;
        this.col1.z += a.col1.z;
        this.col2.x += a.col2.x;
        this.col2.y += a.col2.y;
        this.col2.z += a.col2.z;
        this.col3.x += a.col3.x;
        this.col3.y += a.col3.y;
        this.col3.z += a.col3.z
    };
    a.prototype.SetIdentity = function() {
        this.col1.x = 1;
        this.col2.x = 0;
        this.col3.x = 0;
        this.col1.y = 0;
        this.col2.y = 1;
        this.col3.y = 0;
        this.col1.z = 0;
        this.col2.z = 0;
        this.col3.z = 1
    };
    a.prototype.SetZero = function() {
        this.col1.x = 0;
        this.col2.x = 0;
        this.col3.x = 0;
        this.col1.y = 0;
        this.col2.y = 0;
        this.col3.y = 0;
        this.col1.z = 0;
        this.col2.z = 0;
        this.col3.z = 0
    };
    a.prototype.Solve22 = function(a, b, c) {
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var d = this.col1.x, e = this.col2.x, f = this.col1.y, k = this.col2.y, x = d * k - e * f;
        0 != x && (x = 1 / x);
        a.x = x * (k * b - e * c);
        a.y = x * (d * c - f * b);
        return a
    };
    a.prototype.Solve33 = function(a, b, c, d) {
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        var e = this.col1.x,
        f = this.col1.y, k = this.col1.z, x = this.col2.x, y = this.col2.y, p = this.col2.z, C = this.col3.x, B = this.col3.y, H = this.col3.z, E = e * (y * H - p * B) + f * (p * C - x * H) + k * (x * B - y * C);
        0 != E && (E = 1 / E);
        a.x = E * (b * (y * H - p * B) + c * (p * C - x * H) + d * (x * B - y * C));
        a.y = E * (e * (c * H - d * B) + f * (d * C - b * H) + k * (b * B - c * C));
        a.z = E * (e * (y * d - p * c) + f * (p * b - x * d) + k * (x * c - y * b));
        return a
    };
    b.b2Math = function() {};
    b.IsValid = function(a) {
        void 0 === a && (a = 0);
        return isFinite(a)
    };
    b.Dot = function(a, b) {
        return a.x * b.x + a.y * b.y
    };
    b.CrossVV = function(a, b) {
        return a.x * b.y - a.y * b.x
    };
    b.CrossVF = function(a,
    b) {
        void 0 === b && (b = 0);
        return new e(b * a.y, - b * a.x)
    };
    b.CrossFV = function(a, b) {
        void 0 === a && (a = 0);
        return new e( - a * b.y, a * b.x)
    };
    b.MulMV = function(a, b) {
        return new e(a.col1.x * b.x + a.col2.x * b.y, a.col1.y * b.x + a.col2.y * b.y)
    };
    b.MulTMV = function(a, c) {
        return new e(b.Dot(c, a.col1), b.Dot(c, a.col2))
    };
    b.MulX = function(a, c) {
        var d = b.MulMV(a.R, c);
        d.x += a.position.x;
        d.y += a.position.y;
        return d
    };
    b.MulXT = function(a, c) {
        var d = b.SubtractVV(c, a.position), e = d.x * a.R.col1.x + d.y * a.R.col1.y;
        d.y = d.x * a.R.col2.x + d.y * a.R.col2.y;
        d.x = e;
        return d
    };
    b.AddVV = function(a, b) {
        return new e(a.x + b.x, a.y + b.y)
    };
    b.SubtractVV = function(a, b) {
        return new e(a.x - b.x, a.y - b.y)
    };
    b.Distance = function(a, b) {
        var c = a.x - b.x, d = a.y - b.y;
        return Math.sqrt(c * c + d * d)
    };
    b.DistanceSquared = function(a, b) {
        var c = a.x - b.x, d = a.y - b.y;
        return c * c + d * d
    };
    b.MulFV = function(a, b) {
        void 0 === a && (a = 0);
        return new e(a * b.x, a * b.y)
    };
    b.AddMM = function(a, d) {
        return c.FromVV(b.AddVV(a.col1, d.col1), b.AddVV(a.col2, d.col2))
    };
    b.MulMM = function(a, d) {
        return c.FromVV(b.MulMV(a, d.col1), b.MulMV(a, d.col2))
    };
    b.MulTMM = function(a,
    d) {
        var f = new e(b.Dot(a.col1, d.col1), b.Dot(a.col2, d.col1)), k = new e(b.Dot(a.col1, d.col2), b.Dot(a.col2, d.col2));
        return c.FromVV(f, k)
    };
    b.Abs = function(a) {
        void 0 === a && (a = 0);
        return 0 < a ? a : - a
    };
    b.AbsV = function(a) {
        return new e(b.Abs(a.x), b.Abs(a.y))
    };
    b.AbsM = function(a) {
        return c.FromVV(b.AbsV(a.col1), b.AbsV(a.col2))
    };
    b.Min = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        return a < b ? a : b
    };
    b.MinV = function(a, c) {
        return new e(b.Min(a.x, c.x), b.Min(a.y, c.y))
    };
    b.Max = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        return a > b ? a : b
    };
    b.MaxV = function(a, c) {
        return new e(b.Max(a.x, c.x), b.Max(a.y, c.y))
    };
    b.Clamp = function(a, b, c) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        return a < b ? b : a > c ? c : a
    };
    b.ClampV = function(a, c, d) {
        return b.MaxV(c, b.MinV(a, d))
    };
    b.Swap = function(a, b) {
        var c = a[0];
        a[0] = b[0];
        b[0] = c
    };
    b.Random = function() {
        return 2 * Math.random()-1
    };
    b.RandomRange = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        var c = Math.random();
        return (b - a) * c + a
    };
    b.NextPowerOfTwo = function(a) {
        void 0 === a && (a = 0);
        a|=a>>1 & 2147483647;
        a|=
        a>>2 & 1073741823;
        a|=a>>4 & 268435455;
        a|=a>>8 & 16777215;
        return (a | a>>16 & 65535) + 1
    };
    b.IsPowerOfTwo = function(a) {
        void 0 === a && (a = 0);
        return 0 < a && 0 == (a & a-1)
    };
    Box2D.postDefs.push(function() {
        Box2D.Common.Math.b2Math.b2Vec2_zero = new e(0, 0);
        Box2D.Common.Math.b2Math.b2Mat22_identity = c.FromVV(new e(1, 0), new e(0, 1));
        Box2D.Common.Math.b2Math.b2Transform_identity = new d(b.b2Vec2_zero, b.b2Mat22_identity)
    });
    k.b2Sweep = function() {
        this.localCenter = new e;
        this.c0 = new e;
        this.c = new e
    };
    k.prototype.Set = function(a) {
        this.localCenter.SetV(a.localCenter);
        this.c0.SetV(a.c0);
        this.c.SetV(a.c);
        this.a0 = a.a0;
        this.a = a.a;
        this.t0 = a.t0
    };
    k.prototype.Copy = function() {
        var a = new k;
        a.localCenter.SetV(this.localCenter);
        a.c0.SetV(this.c0);
        a.c.SetV(this.c);
        a.a0 = this.a0;
        a.a = this.a;
        a.t0 = this.t0;
        return a
    };
    k.prototype.GetTransform = function(a, b) {
        void 0 === b && (b = 0);
        a.position.x = (1 - b) * this.c0.x + b * this.c.x;
        a.position.y = (1 - b) * this.c0.y + b * this.c.y;
        a.R.Set((1 - b) * this.a0 + b * this.a);
        var c = a.R;
        a.position.x -= c.col1.x * this.localCenter.x + c.col2.x * this.localCenter.y;
        a.position.y -= c.col1.y *
        this.localCenter.x + c.col2.y * this.localCenter.y
    };
    k.prototype.Advance = function(a) {
        void 0 === a && (a = 0);
        if (this.t0 < a && 1 - this.t0 > Number.MIN_VALUE) {
            var b = (a - this.t0) / (1 - this.t0);
            this.c0.x = (1 - b) * this.c0.x + b * this.c.x;
            this.c0.y = (1 - b) * this.c0.y + b * this.c.y;
            this.a0 = (1 - b) * this.a0 + b * this.a;
            this.t0 = a
        }
    };
    d.b2Transform = function() {
        this.position = new e;
        this.R = new c
    };
    d.prototype.b2Transform = function(a, b) {
        void 0 === a && (a = null);
        void 0 === b && (b = null);
        a && (this.position.SetV(a), this.R.SetM(b))
    };
    d.prototype.Initialize = function(a,
    b) {
        this.position.SetV(a);
        this.R.SetM(b)
    };
    d.prototype.SetIdentity = function() {
        this.position.SetZero();
        this.R.SetIdentity()
    };
    d.prototype.Set = function(a) {
        this.position.SetV(a.position);
        this.R.SetM(a.R)
    };
    d.prototype.GetAngle = function() {
        return Math.atan2(this.R.col1.y, this.R.col1.x)
    };
    e.b2Vec2 = function() {};
    e.prototype.b2Vec2 = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.x = a;
        this.y = b
    };
    e.prototype.SetZero = function() {
        this.y = this.x = 0
    };
    e.prototype.Set = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.x = a;
        this.y = b
    };
    e.prototype.SetV = function(a) {
        this.x = a.x;
        this.y = a.y
    };
    e.prototype.GetNegative = function() {
        return new e( - this.x, - this.y)
    };
    e.prototype.NegativeSelf = function() {
        this.x =- this.x;
        this.y =- this.y
    };
    e.Make = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        return new e(a, b)
    };
    e.prototype.Copy = function() {
        return new e(this.x, this.y)
    };
    e.prototype.Add = function(a) {
        this.x += a.x;
        this.y += a.y
    };
    e.prototype.Subtract = function(a) {
        this.x -= a.x;
        this.y -= a.y
    };
    e.prototype.Multiply = function(a) {
        void 0 === a && (a = 0);
        this.x*=
        a;
        this.y*=a
    };
    e.prototype.MulM = function(a) {
        var b = this.x;
        this.x = a.col1.x * b + a.col2.x * this.y;
        this.y = a.col1.y * b + a.col2.y * this.y
    };
    e.prototype.MulTM = function(a) {
        var c = b.Dot(this, a.col1);
        this.y = b.Dot(this, a.col2);
        this.x = c
    };
    e.prototype.CrossVF = function(a) {
        void 0 === a && (a = 0);
        var b = this.x;
        this.x = a * this.y;
        this.y =- a * b
    };
    e.prototype.CrossFV = function(a) {
        void 0 === a && (a = 0);
        var b = this.x;
        this.x =- a * this.y;
        this.y = a * b
    };
    e.prototype.MinV = function(a) {
        this.x = this.x < a.x ? this.x : a.x;
        this.y = this.y < a.y ? this.y : a.y
    };
    e.prototype.MaxV =
    function(a) {
        this.x = this.x > a.x ? this.x : a.x;
        this.y = this.y > a.y ? this.y : a.y
    };
    e.prototype.Abs = function() {
        0 > this.x && (this.x =- this.x);
        0 > this.y && (this.y =- this.y)
    };
    e.prototype.Length = function() {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    };
    e.prototype.LengthSquared = function() {
        return this.x * this.x + this.y * this.y
    };
    e.prototype.Normalize = function() {
        var a = Math.sqrt(this.x * this.x + this.y * this.y);
        if (a < Number.MIN_VALUE)
            return 0;
        var b = 1 / a;
        this.x*=b;
        this.y*=b;
        return a
    };
    e.prototype.IsValid = function() {
        return b.IsValid(this.x) &&
        b.IsValid(this.y)
    };
    f.b2Vec3 = function() {};
    f.prototype.b2Vec3 = function(a, b, c) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        this.x = a;
        this.y = b;
        this.z = c
    };
    f.prototype.SetZero = function() {
        this.x = this.y = this.z = 0
    };
    f.prototype.Set = function(a, b, c) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        this.x = a;
        this.y = b;
        this.z = c
    };
    f.prototype.SetV = function(a) {
        this.x = a.x;
        this.y = a.y;
        this.z = a.z
    };
    f.prototype.GetNegative = function() {
        return new f( - this.x, - this.y, - this.z)
    };
    f.prototype.NegativeSelf = function() {
        this.x =
        - this.x;
        this.y =- this.y;
        this.z =- this.z
    };
    f.prototype.Copy = function() {
        return new f(this.x, this.y, this.z)
    };
    f.prototype.Add = function(a) {
        this.x += a.x;
        this.y += a.y;
        this.z += a.z
    };
    f.prototype.Subtract = function(a) {
        this.x -= a.x;
        this.y -= a.y;
        this.z -= a.z
    };
    f.prototype.Multiply = function(a) {
        void 0 === a && (a = 0);
        this.x*=a;
        this.y*=a;
        this.z*=a
    }
})();
(function() {
    var c = Box2D.Common.Math.b2Math, a = Box2D.Common.Math.b2Sweep, b = Box2D.Common.Math.b2Transform, k = Box2D.Common.Math.b2Vec2, d = Box2D.Common.b2Color, e = Box2D.Common.b2Settings, f = Box2D.Collision.b2AABB, g = Box2D.Collision.b2ContactPoint, h = Box2D.Collision.b2DynamicTreeBroadPhase, m = Box2D.Collision.b2RayCastInput, n = Box2D.Collision.b2RayCastOutput, w = Box2D.Collision.Shapes.b2CircleShape, t = Box2D.Collision.Shapes.b2EdgeShape, v = Box2D.Collision.Shapes.b2MassData, x = Box2D.Collision.Shapes.b2PolygonShape, y = Box2D.Collision.Shapes.b2Shape,
    p = Box2D.Dynamics.b2Body, C = Box2D.Dynamics.b2BodyDef, B = Box2D.Dynamics.b2ContactFilter, H = Box2D.Dynamics.b2ContactImpulse, E = Box2D.Dynamics.b2ContactListener, G = Box2D.Dynamics.b2ContactManager, D = Box2D.Dynamics.b2DebugDraw, K = Box2D.Dynamics.b2DestructionListener, F = Box2D.Dynamics.b2FilterData, I = Box2D.Dynamics.b2Fixture, O = Box2D.Dynamics.b2FixtureDef, L = Box2D.Dynamics.b2Island, r = Box2D.Dynamics.b2TimeStep, s = Box2D.Dynamics.b2World, A = Box2D.Dynamics.Contacts.b2Contact, z = Box2D.Dynamics.Contacts.b2ContactFactory, J =
    Box2D.Dynamics.Contacts.b2ContactSolver, M = Box2D.Dynamics.Joints.b2Joint, P = Box2D.Dynamics.Joints.b2PulleyJoint;
    p.b2Body = function() {
        this.m_xf = new b;
        this.m_sweep = new a;
        this.m_linearVelocity = new k;
        this.m_force = new k
    };
    p.prototype.connectEdges = function(a, b, d) {
        void 0 === d && (d = 0);
        var f = Math.atan2(b.GetDirectionVector().y, b.GetDirectionVector().x);
        d = c.MulFV(Math.tan(0.5 * (f - d)), b.GetDirectionVector());
        d = c.SubtractVV(d, b.GetNormalVector());
        d = c.MulFV(e.b2_toiSlop, d);
        d = c.AddVV(d, b.GetVertex1());
        var g = c.AddVV(a.GetDirectionVector(),
        b.GetDirectionVector());
        g.Normalize();
        var r = 0 < c.Dot(a.GetDirectionVector(), b.GetNormalVector());
        a.SetNextEdge(b, d, g, r);
        b.SetPrevEdge(a, d, g, r);
        return f
    };
    p.prototype.CreateFixture = function(a) {
        if (!0 == this.m_world.IsLocked())
            return null;
        var b = new I;
        b.Create(this, this.m_xf, a);
        this.m_flags & p.e_activeFlag && b.CreateProxy(this.m_world.m_contactManager.m_broadPhase, this.m_xf);
        b.m_next = this.m_fixtureList;
        this.m_fixtureList = b;
        ++this.m_fixtureCount;
        b.m_body = this;
        0 < b.m_density && this.ResetMassData();
        this.m_world.m_flags|=
        s.e_newFixture;
        return b
    };
    p.prototype.CreateFixture2 = function(a, b) {
        void 0 === b && (b = 0);
        var c = new O;
        c.shape = a;
        c.density = b;
        return this.CreateFixture(c)
    };
    p.prototype.DestroyFixture = function(a) {
        if (!0 != this.m_world.IsLocked()) {
            for (var b = this.m_fixtureList, c = null; null != b;) {
                if (b == a) {
                    c ? c.m_next = a.m_next : this.m_fixtureList = a.m_next;
                    break
                }
                c = b;
                b = b.m_next
            }
            for (b = this.m_contactList; b;) {
                var c = b.contact, b = b.next, d = c.GetFixtureA(), e = c.GetFixtureB();
                a != d && a != e || this.m_world.m_contactManager.Destroy(c)
            }
            this.m_flags & p.e_activeFlag &&
            a.DestroyProxy(this.m_world.m_contactManager.m_broadPhase);
            a.Destroy();
            a.m_body = null;
            a.m_next = null;
            --this.m_fixtureCount;
            this.ResetMassData()
        }
    };
    p.prototype.SetPositionAndAngle = function(a, b) {
        void 0 === b && (b = 0);
        var c;
        if (!0 != this.m_world.IsLocked()) {
            this.m_xf.R.Set(b);
            this.m_xf.position.SetV(a);
            c = this.m_xf.R;
            var d = this.m_sweep.localCenter;
            this.m_sweep.c.x = c.col1.x * d.x + c.col2.x * d.y;
            this.m_sweep.c.y = c.col1.y * d.x + c.col2.y * d.y;
            this.m_sweep.c.x += this.m_xf.position.x;
            this.m_sweep.c.y += this.m_xf.position.y;
            this.m_sweep.c0.SetV(this.m_sweep.c);
            this.m_sweep.a0 = this.m_sweep.a = b;
            d = this.m_world.m_contactManager.m_broadPhase;
            for (c = this.m_fixtureList; c; c = c.m_next)
                c.Synchronize(d, this.m_xf, this.m_xf);
            this.m_world.m_contactManager.FindNewContacts()
        }
    };
    p.prototype.SetTransform = function(a) {
        this.SetPositionAndAngle(a.position, a.GetAngle())
    };
    p.prototype.GetTransform = function() {
        return this.m_xf
    };
    p.prototype.GetPosition = function() {
        return this.m_xf.position
    };
    p.prototype.SetPosition = function(a) {
        this.SetPositionAndAngle(a,
        this.GetAngle())
    };
    p.prototype.GetAngle = function() {
        return this.m_sweep.a
    };
    p.prototype.SetAngle = function(a) {
        void 0 === a && (a = 0);
        this.SetPositionAndAngle(this.GetPosition(), a)
    };
    p.prototype.GetWorldCenter = function() {
        return this.m_sweep.c
    };
    p.prototype.GetLocalCenter = function() {
        return this.m_sweep.localCenter
    };
    p.prototype.SetLinearVelocity = function(a) {
        this.m_type != p.b2_staticBody && this.m_linearVelocity.SetV(a)
    };
    p.prototype.GetLinearVelocity = function() {
        return this.m_linearVelocity
    };
    p.prototype.SetAngularVelocity =
    function(a) {
        void 0 === a && (a = 0);
        this.m_type != p.b2_staticBody && (this.m_angularVelocity = a)
    };
    p.prototype.GetAngularVelocity = function() {
        return this.m_angularVelocity
    };
    p.prototype.GetDefinition = function() {
        var a = new C;
        a.type = this.GetType();
        a.allowSleep = (this.m_flags & p.e_allowSleepFlag) == p.e_allowSleepFlag;
        a.angle = this.GetAngle();
        a.angularDamping = this.m_angularDamping;
        a.angularVelocity = this.m_angularVelocity;
        a.fixedRotation = (this.m_flags & p.e_fixedRotationFlag) == p.e_fixedRotationFlag;
        a.bullet = (this.m_flags &
        p.e_bulletFlag) == p.e_bulletFlag;
        a.awake = (this.m_flags & p.e_awakeFlag) == p.e_awakeFlag;
        a.linearDamping = this.m_linearDamping;
        a.linearVelocity.SetV(this.GetLinearVelocity());
        a.position = this.GetPosition();
        a.userData = this.GetUserData();
        return a
    };
    p.prototype.ApplyForce = function(a, b) {
        this.m_type == p.b2_dynamicBody && (!1 == this.IsAwake() && this.SetAwake(!0), this.m_force.x += a.x, this.m_force.y += a.y, this.m_torque += (b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x)
    };
    p.prototype.ApplyTorque = function(a) {
        void 0 ===
        a && (a = 0);
        this.m_type == p.b2_dynamicBody && (!1 == this.IsAwake() && this.SetAwake(!0), this.m_torque += a)
    };
    p.prototype.ApplyImpulse = function(a, b) {
        this.m_type == p.b2_dynamicBody && (!1 == this.IsAwake() && this.SetAwake(!0), this.m_linearVelocity.x += this.m_invMass * a.x, this.m_linearVelocity.y += this.m_invMass * a.y, this.m_angularVelocity += this.m_invI * ((b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x))
    };
    p.prototype.Split = function(a) {
        for (var b = this.GetLinearVelocity().Copy(), d = this.GetAngularVelocity(), e = this.GetWorldCenter(),
        f = this.m_world.CreateBody(this.GetDefinition()), g, r = this.m_fixtureList; r;)
            if (a(r)) {
                var s = r.m_next;
                g ? g.m_next = s : this.m_fixtureList = s;
                this.m_fixtureCount--;
                r.m_next = f.m_fixtureList;
                f.m_fixtureList = r;
                f.m_fixtureCount++;
                r.m_body = f;
                r = s
            } else 
                g = r, r = r.m_next;
        this.ResetMassData();
        f.ResetMassData();
        g = this.GetWorldCenter();
        a = f.GetWorldCenter();
        g = c.AddVV(b, c.CrossFV(d, c.SubtractVV(g, e)));
        b = c.AddVV(b, c.CrossFV(d, c.SubtractVV(a, e)));
        this.SetLinearVelocity(g);
        f.SetLinearVelocity(b);
        this.SetAngularVelocity(d);
        f.SetAngularVelocity(d);
        this.SynchronizeFixtures();
        f.SynchronizeFixtures();
        return f
    };
    p.prototype.Merge = function(a) {
        var b;
        for (b = a.m_fixtureList; b;) {
            var c = b.m_next;
            a.m_fixtureCount--;
            b.m_next = this.m_fixtureList;
            this.m_fixtureList = b;
            this.m_fixtureCount++;
            b.m_body = e;
            b = c
        }
        d.m_fixtureCount = 0;
        var d = this, e = a;
        d.GetWorldCenter();
        e.GetWorldCenter();
        d.GetLinearVelocity().Copy();
        e.GetLinearVelocity().Copy();
        d.GetAngularVelocity();
        e.GetAngularVelocity();
        d.ResetMassData();
        this.SynchronizeFixtures()
    };
    p.prototype.GetMass = function() {
        return this.m_mass
    };
    p.prototype.GetInertia = function() {
        return this.m_I
    };
    p.prototype.GetMassData = function(a) {
        a.mass = this.m_mass;
        a.I = this.m_I;
        a.center.SetV(this.m_sweep.localCenter)
    };
    p.prototype.SetMassData = function(a) {
        e.b2Assert(!1 == this.m_world.IsLocked());
        if (!0 != this.m_world.IsLocked() && this.m_type == p.b2_dynamicBody) {
            this.m_invI = this.m_I = this.m_invMass = 0;
            this.m_mass = a.mass;
            0 >= this.m_mass && (this.m_mass = 1);
            this.m_invMass = 1 / this.m_mass;
            0 < a.I && 0 == (this.m_flags & p.e_fixedRotationFlag) && (this.m_I = a.I - this.m_mass * (a.center.x *
            a.center.x + a.center.y * a.center.y), this.m_invI = 1 / this.m_I);
            var b = this.m_sweep.c.Copy();
            this.m_sweep.localCenter.SetV(a.center);
            this.m_sweep.c0.SetV(c.MulX(this.m_xf, this.m_sweep.localCenter));
            this.m_sweep.c.SetV(this.m_sweep.c0);
            this.m_linearVelocity.x += this.m_angularVelocity*-(this.m_sweep.c.y - b.y);
            this.m_linearVelocity.y += this.m_angularVelocity*+(this.m_sweep.c.x - b.x)
        }
    };
    p.prototype.ResetMassData = function() {
        this.m_invI = this.m_I = this.m_invMass = this.m_mass = 0;
        this.m_sweep.localCenter.SetZero();
        if (this.m_type !=
        p.b2_staticBody && this.m_type != p.b2_kinematicBody) {
            for (var a = k.Make(0, 0), b = this.m_fixtureList; b; b = b.m_next)
                if (0 != b.m_density) {
                    var d = b.GetMassData();
                    this.m_mass += d.mass;
                    a.x += d.center.x * d.mass;
                    a.y += d.center.y * d.mass;
                    this.m_I += d.I
                }
            0 < this.m_mass ? (this.m_invMass = 1 / this.m_mass, a.x*=this.m_invMass, a.y*=this.m_invMass) : this.m_invMass = this.m_mass = 1;
            0 < this.m_I && 0 == (this.m_flags & p.e_fixedRotationFlag) ? (this.m_I -= this.m_mass * (a.x * a.x + a.y * a.y), this.m_I*=this.m_inertiaScale, e.b2Assert(0 < this.m_I), this.m_invI = 1 /
            this.m_I) : this.m_invI = this.m_I = 0;
            b = this.m_sweep.c.Copy();
            this.m_sweep.localCenter.SetV(a);
            this.m_sweep.c0.SetV(c.MulX(this.m_xf, this.m_sweep.localCenter));
            this.m_sweep.c.SetV(this.m_sweep.c0);
            this.m_linearVelocity.x += this.m_angularVelocity*-(this.m_sweep.c.y - b.y);
            this.m_linearVelocity.y += this.m_angularVelocity*+(this.m_sweep.c.x - b.x)
        }
    };
    p.prototype.GetWorldPoint = function(a) {
        var b = this.m_xf.R;
        a = new k(b.col1.x * a.x + b.col2.x * a.y, b.col1.y * a.x + b.col2.y * a.y);
        a.x += this.m_xf.position.x;
        a.y += this.m_xf.position.y;
        return a
    };
    p.prototype.GetWorldVector = function(a) {
        return c.MulMV(this.m_xf.R, a)
    };
    p.prototype.GetLocalPoint = function(a) {
        return c.MulXT(this.m_xf, a)
    };
    p.prototype.GetLocalVector = function(a) {
        return c.MulTMV(this.m_xf.R, a)
    };
    p.prototype.GetLinearVelocityFromWorldPoint = function(a) {
        return new k(this.m_linearVelocity.x - this.m_angularVelocity * (a.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (a.x - this.m_sweep.c.x))
    };
    p.prototype.GetLinearVelocityFromLocalPoint = function(a) {
        var b = this.m_xf.R;
        a = new k(b.col1.x * a.x + b.col2.x * a.y, b.col1.y * a.x + b.col2.y * a.y);
        a.x += this.m_xf.position.x;
        a.y += this.m_xf.position.y;
        return new k(this.m_linearVelocity.x - this.m_angularVelocity * (a.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (a.x - this.m_sweep.c.x))
    };
    p.prototype.GetLinearDamping = function() {
        return this.m_linearDamping
    };
    p.prototype.SetLinearDamping = function(a) {
        void 0 === a && (a = 0);
        this.m_linearDamping = a
    };
    p.prototype.GetAngularDamping = function() {
        return this.m_angularDamping
    };
    p.prototype.SetAngularDamping =
    function(a) {
        void 0 === a && (a = 0);
        this.m_angularDamping = a
    };
    p.prototype.SetType = function(a) {
        void 0 === a && (a = 0);
        if (this.m_type != a)
            for (this.m_type = a, this.ResetMassData(), this.m_type == p.b2_staticBody && (this.m_linearVelocity.SetZero()
                , this.m_angularVelocity = 0), this.SetAwake(!0), this.m_force.SetZero(), this.m_torque = 0, a = this.m_contactList;
        a;
        a = a.next)a.contact.FlagForFiltering()
    };
    p.prototype.GetType = function() {
        return this.m_type
    };
    p.prototype.SetBullet = function(a) {
        this.m_flags = a ? this.m_flags | p.e_bulletFlag : this.m_flags &
        ~p.e_bulletFlag
    };
    p.prototype.IsBullet = function() {
        return (this.m_flags & p.e_bulletFlag) == p.e_bulletFlag
    };
    p.prototype.SetSleepingAllowed = function(a) {
        a ? this.m_flags|=p.e_allowSleepFlag : (this.m_flags&=~p.e_allowSleepFlag, this.SetAwake(!0))
    };
    p.prototype.SetAwake = function(a) {
        a ? (this.m_flags|=p.e_awakeFlag, this.m_sleepTime = 0) : (this.m_flags&=~p.e_awakeFlag, this.m_sleepTime = 0, this.m_linearVelocity.SetZero(), this.m_angularVelocity = 0, this.m_force.SetZero(), this.m_torque = 0)
    };
    p.prototype.IsAwake = function() {
        return (this.m_flags &
        p.e_awakeFlag) == p.e_awakeFlag
    };
    p.prototype.SetFixedRotation = function(a) {
        this.m_flags = a ? this.m_flags | p.e_fixedRotationFlag : this.m_flags&~p.e_fixedRotationFlag;
        this.ResetMassData()
    };
    p.prototype.IsFixedRotation = function() {
        return (this.m_flags & p.e_fixedRotationFlag) == p.e_fixedRotationFlag
    };
    p.prototype.SetActive = function(a) {
        if (a != this.IsActive()) {
            var b;
            if (a)
                for (this.m_flags|=p.e_activeFlag, a = this.m_world.m_contactManager.m_broadPhase, b = this.m_fixtureList; b; b = b.m_next)
                    b.CreateProxy(a, this.m_xf);
            else {
                this.m_flags&=
                ~p.e_activeFlag;
                a = this.m_world.m_contactManager.m_broadPhase;
                for (b = this.m_fixtureList; b; b = b.m_next)
                    b.DestroyProxy(a);
                for (a = this.m_contactList; a;)
                    b = a, a = a.next, this.m_world.m_contactManager.Destroy(b.contact);
                this.m_contactList = null
            }
        }
    };
    p.prototype.IsActive = function() {
        return (this.m_flags & p.e_activeFlag) == p.e_activeFlag
    };
    p.prototype.IsSleepingAllowed = function() {
        return (this.m_flags & p.e_allowSleepFlag) == p.e_allowSleepFlag
    };
    p.prototype.GetFixtureList = function() {
        return this.m_fixtureList
    };
    p.prototype.GetJointList =
    function() {
        return this.m_jointList
    };
    p.prototype.GetControllerList = function() {
        return this.m_controllerList
    };
    p.prototype.GetContactList = function() {
        return this.m_contactList
    };
    p.prototype.GetNext = function() {
        return this.m_next
    };
    p.prototype.GetUserData = function() {
        return this.m_userData
    };
    p.prototype.SetUserData = function(a) {
        this.m_userData = a
    };
    p.prototype.GetWorld = function() {
        return this.m_world
    };
    p.prototype.b2Body = function(a, b) {
        this.m_flags = 0;
        a.bullet && (this.m_flags|=p.e_bulletFlag);
        a.fixedRotation && (this.m_flags|=
        p.e_fixedRotationFlag);
        a.allowSleep && (this.m_flags|=p.e_allowSleepFlag);
        a.awake && (this.m_flags|=p.e_awakeFlag);
        a.active && (this.m_flags|=p.e_activeFlag);
        this.m_world = b;
        this.m_xf.position.SetV(a.position);
        this.m_xf.R.Set(a.angle);
        this.m_sweep.localCenter.SetZero();
        this.m_sweep.t0 = 1;
        this.m_sweep.a0 = this.m_sweep.a = a.angle;
        var c = this.m_xf.R, d = this.m_sweep.localCenter;
        this.m_sweep.c.x = c.col1.x * d.x + c.col2.x * d.y;
        this.m_sweep.c.y = c.col1.y * d.x + c.col2.y * d.y;
        this.m_sweep.c.x += this.m_xf.position.x;
        this.m_sweep.c.y +=
        this.m_xf.position.y;
        this.m_sweep.c0.SetV(this.m_sweep.c);
        this.m_contactList = this.m_controllerList = this.m_jointList = null;
        this.m_controllerCount = 0;
        this.m_next = this.m_prev = null;
        this.m_linearVelocity.SetV(a.linearVelocity);
        this.m_angularVelocity = a.angularVelocity;
        this.m_linearDamping = a.linearDamping;
        this.m_angularDamping = a.angularDamping;
        this.m_force.Set(0, 0);
        this.m_sleepTime = this.m_torque = 0;
        this.m_type = a.type;
        this.m_invMass = this.m_type == p.b2_dynamicBody ? this.m_mass = 1 : this.m_mass = 0;
        this.m_invI = this.m_I =
        0;
        this.m_inertiaScale = a.inertiaScale;
        this.m_userData = a.userData;
        this.m_fixtureList = null;
        this.m_fixtureCount = 0
    };
    p.prototype.SynchronizeFixtures = function() {
        var a = p.s_xf1;
        a.R.Set(this.m_sweep.a0);
        var b = a.R, c = this.m_sweep.localCenter;
        a.position.x = this.m_sweep.c0.x - (b.col1.x * c.x + b.col2.x * c.y);
        a.position.y = this.m_sweep.c0.y - (b.col1.y * c.x + b.col2.y * c.y);
        c = this.m_world.m_contactManager.m_broadPhase;
        for (b = this.m_fixtureList; b; b = b.m_next)
            b.Synchronize(c, a, this.m_xf)
    };
    p.prototype.SynchronizeTransform = function() {
        this.m_xf.R.Set(this.m_sweep.a);
        var a = this.m_xf.R, b = this.m_sweep.localCenter;
        this.m_xf.position.x = this.m_sweep.c.x - (a.col1.x * b.x + a.col2.x * b.y);
        this.m_xf.position.y = this.m_sweep.c.y - (a.col1.y * b.x + a.col2.y * b.y)
    };
    p.prototype.ShouldCollide = function(a) {
        if (this.m_type != p.b2_dynamicBody && a.m_type != p.b2_dynamicBody)
            return !1;
        for (var b = this.m_jointList; b; b = b.next)
            if (b.other == a&&!1 == b.joint.m_collideConnected)
                return !1;
        return !0
    };
    p.prototype.Advance = function(a) {
        void 0 === a && (a = 0);
        this.m_sweep.Advance(a);
        this.m_sweep.c.SetV(this.m_sweep.c0);
        this.m_sweep.a =
        this.m_sweep.a0;
        this.SynchronizeTransform()
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2Body.s_xf1 = new b;
        Box2D.Dynamics.b2Body.e_islandFlag = 1;
        Box2D.Dynamics.b2Body.e_awakeFlag = 2;
        Box2D.Dynamics.b2Body.e_allowSleepFlag = 4;
        Box2D.Dynamics.b2Body.e_bulletFlag = 8;
        Box2D.Dynamics.b2Body.e_fixedRotationFlag = 16;
        Box2D.Dynamics.b2Body.e_activeFlag = 32;
        Box2D.Dynamics.b2Body.b2_staticBody = 0;
        Box2D.Dynamics.b2Body.b2_kinematicBody = 1;
        Box2D.Dynamics.b2Body.b2_dynamicBody = 2
    });
    C.b2BodyDef = function() {
        this.position =
        new k;
        this.linearVelocity = new k
    };
    C.prototype.b2BodyDef = function() {
        this.userData = null;
        this.position.Set(0, 0);
        this.angle = 0;
        this.linearVelocity.Set(0, 0);
        this.angularDamping = this.linearDamping = this.angularVelocity = 0;
        this.awake = this.allowSleep=!0;
        this.bullet = this.fixedRotation=!1;
        this.type = p.b2_staticBody;
        this.active=!0;
        this.inertiaScale = 1
    };
    B.b2ContactFilter = function() {};
    B.prototype.ShouldCollide = function(a, b) {
        var c = a.GetFilterData(), d = b.GetFilterData();
        return c.groupIndex == d.groupIndex && 0 != c.groupIndex ?
        0 < c.groupIndex : 0 != (c.maskBits & d.categoryBits) && 0 != (c.categoryBits & d.maskBits)
    };
    B.prototype.RayCollide = function(a, b) {
        return a ? this.ShouldCollide(a instanceof I ? a : null, b) : !0
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2ContactFilter.b2_defaultFilter = new B
    });
    H.b2ContactImpulse = function() {
        this.normalImpulses = new Vector_a2j_Number(e.b2_maxManifoldPoints);
        this.tangentImpulses = new Vector_a2j_Number(e.b2_maxManifoldPoints)
    };
    E.b2ContactListener = function() {};
    E.prototype.BeginContact = function() {};
    E.prototype.EndContact =
    function() {};
    E.prototype.PreSolve = function() {};
    E.prototype.PostSolve = function() {};
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2ContactListener.b2_defaultListener = new E
    });
    G.b2ContactManager = function() {};
    G.prototype.b2ContactManager = function() {
        this.m_world = null;
        this.m_contactCount = 0;
        this.m_contactFilter = B.b2_defaultFilter;
        this.m_contactListener = E.b2_defaultListener;
        this.m_contactFactory = new z(this.m_allocator);
        this.m_broadPhase = new h
    };
    G.prototype.AddPair = function(a, b) {
        var c = a instanceof I ? a: null,
        d = b instanceof I ? b: null, e = c.GetBody(), f = d.GetBody();
        if (e != f) {
            for (var r = f.GetContactList(); r;) {
                if (r.other == e) {
                    var g = r.contact.GetFixtureA(), s = r.contact.GetFixtureB();
                    if (g == c && s == d || g == d && s == c)
                        return 
                }
                r = r.next
            }
            !1 != f.ShouldCollide(e)&&!1 != this.m_contactFilter.ShouldCollide(c, d) && (r = this.m_contactFactory.Create(c, d), c = r.GetFixtureA(), d = r.GetFixtureB(), e = c.m_body, f = d.m_body, r.m_prev = null, r.m_next = this.m_world.m_contactList, null != this.m_world.m_contactList && (this.m_world.m_contactList.m_prev = r), this.m_world.m_contactList =
            r, r.m_nodeA.contact = r, r.m_nodeA.other = f, r.m_nodeA.prev = null, r.m_nodeA.next = e.m_contactList, null != e.m_contactList && (e.m_contactList.prev = r.m_nodeA), e.m_contactList = r.m_nodeA, r.m_nodeB.contact = r, r.m_nodeB.other = e, r.m_nodeB.prev = null, r.m_nodeB.next = f.m_contactList, null != f.m_contactList && (f.m_contactList.prev = r.m_nodeB), f.m_contactList = r.m_nodeB, ++this.m_world.m_contactCount)
        }
    };
    G.prototype.FindNewContacts = function() {
        this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this, this.AddPair))
    };
    G.prototype.Destroy =
    function(a) {
        var b = a.GetFixtureA(), c = a.GetFixtureB(), b = b.GetBody(), c = c.GetBody();
        a.IsTouching() && this.m_contactListener.EndContact(a);
        a.m_prev && (a.m_prev.m_next = a.m_next);
        a.m_next && (a.m_next.m_prev = a.m_prev);
        a == this.m_world.m_contactList && (this.m_world.m_contactList = a.m_next);
        a.m_nodeA.prev && (a.m_nodeA.prev.next = a.m_nodeA.next);
        a.m_nodeA.next && (a.m_nodeA.next.prev = a.m_nodeA.prev);
        a.m_nodeA == b.m_contactList && (b.m_contactList = a.m_nodeA.next);
        a.m_nodeB.prev && (a.m_nodeB.prev.next = a.m_nodeB.next);
        a.m_nodeB.next &&
        (a.m_nodeB.next.prev = a.m_nodeB.prev);
        a.m_nodeB == c.m_contactList && (c.m_contactList = a.m_nodeB.next);
        this.m_contactFactory.Destroy(a);
        --this.m_contactCount
    };
    G.prototype.Collide = function() {
        for (var a = this.m_world.m_contactList; a;) {
            var b = a.GetFixtureA(), c = a.GetFixtureB(), d = b.GetBody(), e = c.GetBody();
            if (!1 == d.IsAwake()&&!1 == e.IsAwake())
                a = a.GetNext();
            else {
                if (a.m_flags & A.e_filterFlag) {
                    if (!1 == e.ShouldCollide(d)) {
                        b = a;
                        a = b.GetNext();
                        this.Destroy(b);
                        continue
                    }
                    if (!1 == this.m_contactFilter.ShouldCollide(b, c)) {
                        b = a;
                        a =
                        b.GetNext();
                        this.Destroy(b);
                        continue
                    }
                    a.m_flags&=~A.e_filterFlag
                }
                !1 == this.m_broadPhase.TestOverlap(b.m_proxy, c.m_proxy) ? (b = a, a = b.GetNext(), this.Destroy(b)) : (a.Update(this.m_contactListener), a = a.GetNext())
            }
        }
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2ContactManager.s_evalCP = new g
    });
    D.b2DebugDraw = function() {};
    D.prototype.b2DebugDraw = function() {};
    D.prototype.SetFlags = function() {};
    D.prototype.GetFlags = function() {};
    D.prototype.AppendFlags = function() {};
    D.prototype.ClearFlags = function() {};
    D.prototype.SetSprite =
    function() {};
    D.prototype.GetSprite = function() {};
    D.prototype.SetDrawScale = function() {};
    D.prototype.GetDrawScale = function() {};
    D.prototype.SetLineThickness = function() {};
    D.prototype.GetLineThickness = function() {};
    D.prototype.SetAlpha = function() {};
    D.prototype.GetAlpha = function() {};
    D.prototype.SetFillAlpha = function() {};
    D.prototype.GetFillAlpha = function() {};
    D.prototype.SetXFormScale = function() {};
    D.prototype.GetXFormScale = function() {};
    D.prototype.DrawPolygon = function() {};
    D.prototype.DrawSolidPolygon = function() {};
    D.prototype.DrawCircle = function() {};
    D.prototype.DrawSolidCircle = function() {};
    D.prototype.DrawSegment = function() {};
    D.prototype.DrawTransform = function() {};
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2DebugDraw.e_shapeBit = 1;
        Box2D.Dynamics.b2DebugDraw.e_jointBit = 2;
        Box2D.Dynamics.b2DebugDraw.e_aabbBit = 4;
        Box2D.Dynamics.b2DebugDraw.e_pairBit = 8;
        Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit = 16;
        Box2D.Dynamics.b2DebugDraw.e_controllerBit = 32
    });
    K.b2DestructionListener = function() {};
    K.prototype.SayGoodbyeJoint =
    function() {};
    K.prototype.SayGoodbyeFixture = function() {};
    F.b2FilterData = function() {
        this.categoryBits = 1;
        this.maskBits = 65535;
        this.groupIndex = 0
    };
    F.prototype.Copy = function() {
        var a = new F;
        a.categoryBits = this.categoryBits;
        a.maskBits = this.maskBits;
        a.groupIndex = this.groupIndex;
        return a
    };
    I.b2Fixture = function() {
        this.m_filter = new F
    };
    I.prototype.GetType = function() {
        return this.m_shape.GetType()
    };
    I.prototype.GetShape = function() {
        return this.m_shape
    };
    I.prototype.SetSensor = function(a) {
        if (this.m_isSensor != a && (this.m_isSensor =
        a, null != this.m_body))
            for (a = this.m_body.GetContactList(); a;) {
                var b = a.contact, c = b.GetFixtureA(), d = b.GetFixtureB();
                c != this && d != this || b.SetSensor(c.IsSensor() || d.IsSensor());
                a = a.next
            }
    };
    I.prototype.IsSensor = function() {
        return this.m_isSensor
    };
    I.prototype.SetFilterData = function(a) {
        this.m_filter = a.Copy();
        if (!this.m_body)
            for (a = this.m_body.GetContactList(); a;) {
                var b = a.contact, c = b.GetFixtureA(), d = b.GetFixtureB();
                c != this && d != this || b.FlagForFiltering();
                a = a.next
            }
    };
    I.prototype.GetFilterData = function() {
        return this.m_filter.Copy()
    };
    I.prototype.GetBody = function() {
        return this.m_body
    };
    I.prototype.GetNext = function() {
        return this.m_next
    };
    I.prototype.GetUserData = function() {
        return this.m_userData
    };
    I.prototype.SetUserData = function(a) {
        this.m_userData = a
    };
    I.prototype.TestPoint = function(a) {
        return this.m_shape.TestPoint(this.m_body.GetTransform(), a)
    };
    I.prototype.RayCast = function(a, b) {
        return this.m_shape.RayCast(a, b, this.m_body.GetTransform())
    };
    I.prototype.GetMassData = function(a) {
        void 0 === a && (a = null);
        null == a && (a = new v);
        this.m_shape.ComputeMass(a,
        this.m_density);
        return a
    };
    I.prototype.SetDensity = function(a) {
        void 0 === a && (a = 0);
        this.m_density = a
    };
    I.prototype.GetDensity = function() {
        return this.m_density
    };
    I.prototype.GetFriction = function() {
        return this.m_friction
    };
    I.prototype.SetFriction = function(a) {
        void 0 === a && (a = 0);
        this.m_friction = a
    };
    I.prototype.GetRestitution = function() {
        return this.m_restitution
    };
    I.prototype.SetRestitution = function(a) {
        void 0 === a && (a = 0);
        this.m_restitution = a
    };
    I.prototype.GetAABB = function() {
        return this.m_aabb
    };
    I.prototype.b2Fixture =
    function() {
        this.m_aabb = new f;
        this.m_shape = this.m_next = this.m_body = this.m_userData = null;
        this.m_restitution = this.m_friction = this.m_density = 0
    };
    I.prototype.Create = function(a, b, c) {
        this.m_userData = c.userData;
        this.m_friction = c.friction;
        this.m_restitution = c.restitution;
        this.m_body = a;
        this.m_next = null;
        this.m_filter = c.filter.Copy();
        this.m_isSensor = c.isSensor;
        this.m_shape = c.shape.Copy();
        this.m_density = c.density
    };
    I.prototype.Destroy = function() {
        this.m_shape = null
    };
    I.prototype.CreateProxy = function(a, b) {
        this.m_shape.ComputeAABB(this.m_aabb,
        b);
        this.m_proxy = a.CreateProxy(this.m_aabb, this)
    };
    I.prototype.DestroyProxy = function(a) {
        null != this.m_proxy && (a.DestroyProxy(this.m_proxy), this.m_proxy = null)
    };
    I.prototype.Synchronize = function(a, b, d) {
        if (this.m_proxy) {
            var e = new f, r = new f;
            this.m_shape.ComputeAABB(e, b);
            this.m_shape.ComputeAABB(r, d);
            this.m_aabb.Combine(e, r);
            b = c.SubtractVV(d.position, b.position);
            a.MoveProxy(this.m_proxy, this.m_aabb, b)
        }
    };
    O.b2FixtureDef = function() {
        this.filter = new F
    };
    O.prototype.b2FixtureDef = function() {
        this.userData = this.shape =
        null;
        this.friction = 0.2;
        this.density = this.restitution = 0;
        this.filter.categoryBits = 1;
        this.filter.maskBits = 65535;
        this.filter.groupIndex = 0;
        this.isSensor=!1
    };
    L.b2Island = function() {};
    L.prototype.b2Island = function() {
        this.m_bodies = new Vector;
        this.m_contacts = new Vector;
        this.m_joints = new Vector
    };
    L.prototype.Initialize = function(a, b, c, d, e, f) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var r = 0;
        this.m_bodyCapacity = a;
        this.m_contactCapacity = b;
        this.m_jointCapacity = c;
        this.m_jointCount = this.m_contactCount =
        this.m_bodyCount = 0;
        this.m_allocator = d;
        this.m_listener = e;
        this.m_contactSolver = f;
        for (r = this.m_bodies.length; r < a; r++)
            this.m_bodies[r] = null;
        for (r = this.m_contacts.length; r < b; r++)
            this.m_contacts[r] = null;
        for (r = this.m_joints.length; r < c; r++)
            this.m_joints[r] = null
    };
    L.prototype.Clear = function() {
        this.m_jointCount = this.m_contactCount = this.m_bodyCount = 0
    };
    L.prototype.Solve = function(a, b, d) {
        for (var r = 0, f = 0, g, r = 0; r < this.m_bodyCount; ++r)
            f = this.m_bodies[r], f.GetType() == p.b2_dynamicBody && (f.m_linearVelocity.x += a.dt * (b.x +
        f.m_invMass * f.m_force.x), f.m_linearVelocity.y += a.dt * (b.y + f.m_invMass * f.m_force.y), f.m_angularVelocity += a.dt * f.m_invI * f.m_torque, f.m_linearVelocity.Multiply(c.Clamp(1 - a.dt * f.m_linearDamping, 0, 1)), f.m_angularVelocity*=c.Clamp(1 - a.dt * f.m_angularDamping, 0, 1));
        this.m_contactSolver.Initialize(a, this.m_contacts, this.m_contactCount, this.m_allocator);
        b = this.m_contactSolver;
        b.InitVelocityConstraints(a);
        for (r = 0; r < this.m_jointCount; ++r)
            g = this.m_joints[r], g.InitVelocityConstraints(a);
        for (r = 0; r < a.velocityIterations; ++r) {
            for (f =
            0; f < this.m_jointCount; ++f)
                g = this.m_joints[f], g.SolveVelocityConstraints(a);
            b.SolveVelocityConstraints()
        }
        for (r = 0; r < this.m_jointCount; ++r)
            g = this.m_joints[r], g.FinalizeVelocityConstraints();
        b.FinalizeVelocityConstraints();
        for (r = 0; r < this.m_bodyCount; ++r)
            if (f = this.m_bodies[r], f.GetType() != p.b2_staticBody) {
            var s = a.dt * f.m_linearVelocity.x, z = a.dt * f.m_linearVelocity.y;
            s * s + z * z > e.b2_maxTranslationSquared && (f.m_linearVelocity.Normalize(), f.m_linearVelocity.x = f.m_linearVelocity.x * e.b2_maxTranslation * a.inv_dt,
            f.m_linearVelocity.y = f.m_linearVelocity.y * e.b2_maxTranslation * a.inv_dt);
            s = a.dt * f.m_angularVelocity;
            s * s > e.b2_maxRotationSquared && (f.m_angularVelocity = 0 > f.m_angularVelocity?-e.b2_maxRotation * a.inv_dt : e.b2_maxRotation * a.inv_dt);
            f.m_sweep.c0.SetV(f.m_sweep.c);
            f.m_sweep.a0 = f.m_sweep.a;
            f.m_sweep.c.x += a.dt * f.m_linearVelocity.x;
            f.m_sweep.c.y += a.dt * f.m_linearVelocity.y;
            f.m_sweep.a += a.dt * f.m_angularVelocity;
            f.SynchronizeTransform()
        }
        for (r = 0; r < a.positionIterations; ++r) {
            s = b.SolvePositionConstraints(e.b2_contactBaumgarte);
            z=!0;
            for (f = 0; f < this.m_jointCount; ++f)
                g = this.m_joints[f], g = g.SolvePositionConstraints(e.b2_contactBaumgarte), z = z && g;
            if (s && z)
                break
        }
        this.Report(b.m_constraints);
        if (d) {
            d = Number.MAX_VALUE;
            b = e.b2_linearSleepTolerance * e.b2_linearSleepTolerance;
            s = e.b2_angularSleepTolerance * e.b2_angularSleepTolerance;
            for (r = 0; r < this.m_bodyCount; ++r)
                f = this.m_bodies[r], f.GetType() != p.b2_staticBody && (0 == (f.m_flags & p.e_allowSleepFlag) && (d = f.m_sleepTime = 0), 0 == (f.m_flags & p.e_allowSleepFlag) || f.m_angularVelocity * f.m_angularVelocity >
            s || c.Dot(f.m_linearVelocity, f.m_linearVelocity) > b ? d = f.m_sleepTime = 0 : (f.m_sleepTime += a.dt, d = c.Min(d, f.m_sleepTime)));
            if (d >= e.b2_timeToSleep)
                for (r = 0; r < this.m_bodyCount; ++r)
                    f = this.m_bodies[r], f.SetAwake(!1)
        }
    };
    L.prototype.SolveTOI = function(a) {
        var b = 0, c = 0;
        this.m_contactSolver.Initialize(a, this.m_contacts, this.m_contactCount, this.m_allocator);
        for (var d = this.m_contactSolver, b = 0; b < this.m_jointCount; ++b)
            this.m_joints[b].InitVelocityConstraints(a);
        for (b = 0; b < a.velocityIterations; ++b)
            for (d.SolveVelocityConstraints(),
            c = 0; c < this.m_jointCount; ++c)
                this.m_joints[c].SolveVelocityConstraints(a);
        for (b = 0; b < this.m_bodyCount; ++b)
            if (c = this.m_bodies[b], c.GetType() != p.b2_staticBody) {
            var f = a.dt * c.m_linearVelocity.x, r = a.dt * c.m_linearVelocity.y;
            f * f + r * r > e.b2_maxTranslationSquared && (c.m_linearVelocity.Normalize(), c.m_linearVelocity.x = c.m_linearVelocity.x * e.b2_maxTranslation * a.inv_dt, c.m_linearVelocity.y = c.m_linearVelocity.y * e.b2_maxTranslation * a.inv_dt);
            f = a.dt * c.m_angularVelocity;
            f * f > e.b2_maxRotationSquared && (c.m_angularVelocity =
            0 > c.m_angularVelocity?-e.b2_maxRotation * a.inv_dt : e.b2_maxRotation * a.inv_dt);
            c.m_sweep.c0.SetV(c.m_sweep.c);
            c.m_sweep.a0 = c.m_sweep.a;
            c.m_sweep.c.x += a.dt * c.m_linearVelocity.x;
            c.m_sweep.c.y += a.dt * c.m_linearVelocity.y;
            c.m_sweep.a += a.dt * c.m_angularVelocity;
            c.SynchronizeTransform()
        }
        for (b = 0; b < a.positionIterations; ++b) {
            f = d.SolvePositionConstraints(0.75);
            r=!0;
            for (c = 0; c < this.m_jointCount; ++c)
                var g = this.m_joints[c].SolvePositionConstraints(e.b2_contactBaumgarte), r = r && g;
            if (f && r)
                break
        }
        this.Report(d.m_constraints)
    };
    L.prototype.Report = function(a) {
        if (null != this.m_listener)
            for (var b = 0; b < this.m_contactCount; ++b) {
                for (var c = this.m_contacts[b], d = a[b], e = 0; e < d.pointCount; ++e)
                    L.s_impulse.normalImpulses[e] = d.points[e].normalImpulse, L.s_impulse.tangentImpulses[e] = d.points[e].tangentImpulse;
                    this.m_listener.PostSolve(c, L.s_impulse)
            }
    };
    L.prototype.AddBody = function(a) {
        a.m_islandIndex = this.m_bodyCount;
        this.m_bodies[this.m_bodyCount++] = a
    };
    L.prototype.AddContact = function(a) {
        this.m_contacts[this.m_contactCount++] = a
    };
    L.prototype.AddJoint =
    function(a) {
        this.m_joints[this.m_jointCount++] = a
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2Island.s_impulse = new H
    });
    r.b2TimeStep = function() {};
    r.prototype.Set = function(a) {
        this.dt = a.dt;
        this.inv_dt = a.inv_dt;
        this.positionIterations = a.positionIterations;
        this.velocityIterations = a.velocityIterations;
        this.warmStarting = a.warmStarting
    };
    s.b2World = function() {
        this.s_stack = new Vector;
        this.m_contactManager = new G;
        this.m_contactSolver = new J;
        this.m_island = new L
    };
    s.prototype.b2World = function(a, b) {
        this.m_controllerList =
        this.m_jointList = this.m_contactList = this.m_bodyList = this.m_debugDraw = this.m_destructionListener = null;
        this.m_controllerCount = this.m_jointCount = this.m_contactCount = this.m_bodyCount = 0;
        s.m_warmStarting=!0;
        s.m_continuousPhysics=!0;
        this.m_allowSleep = b;
        this.m_gravity = a;
        this.m_inv_dt0 = 0;
        this.m_contactManager.m_world = this;
        this.m_groundBody = this.CreateBody(new C)
    };
    s.prototype.SetDestructionListener = function(a) {
        this.m_destructionListener = a
    };
    s.prototype.SetContactFilter = function(a) {
        this.m_contactManager.m_contactFilter =
        a
    };
    s.prototype.SetContactListener = function(a) {
        this.m_contactManager.m_contactListener = a
    };
    s.prototype.SetDebugDraw = function(a) {
        this.m_debugDraw = a
    };
    s.prototype.SetBroadPhase = function(a) {
        var b = this.m_contactManager.m_broadPhase;
        this.m_contactManager.m_broadPhase = a;
        for (var c = this.m_bodyList; c; c = c.m_next)
            for (var d = c.m_fixtureList; d; d = d.m_next)
                d.m_proxy = a.CreateProxy(b.GetFatAABB(d.m_proxy), d)
    };
    s.prototype.Validate = function() {
        this.m_contactManager.m_broadPhase.Validate()
    };
    s.prototype.GetProxyCount = function() {
        return this.m_contactManager.m_broadPhase.GetProxyCount()
    };
    s.prototype.CreateBody = function(a) {
        if (!0 == this.IsLocked())
            return null;
        a = new p(a, this);
        a.m_prev = null;
        if (a.m_next = this.m_bodyList)
            this.m_bodyList.m_prev = a;
        this.m_bodyList = a;
        ++this.m_bodyCount;
        return a
    };
    s.prototype.DestroyBody = function(a) {
        if (!0 != this.IsLocked()) {
            for (var b = a.m_jointList; b;) {
                var c = b, b = b.next;
                this.m_destructionListener && this.m_destructionListener.SayGoodbyeJoint(c.joint);
                this.DestroyJoint(c.joint)
            }
            for (b = a.m_controllerList; b;)
                c = b, b = b.nextController, c.controller.RemoveBody(a);
            for (b = a.m_contactList; b;)
                c =
                b, b = b.next, this.m_contactManager.Destroy(c.contact);
            a.m_contactList = null;
            for (b = a.m_fixtureList; b;)
                c = b, b = b.m_next, this.m_destructionListener && this.m_destructionListener.SayGoodbyeFixture(c), c.DestroyProxy(this.m_contactManager.m_broadPhase), c.Destroy();
            a.m_fixtureList = null;
            a.m_fixtureCount = 0;
            a.m_prev && (a.m_prev.m_next = a.m_next);
            a.m_next && (a.m_next.m_prev = a.m_prev);
            a == this.m_bodyList && (this.m_bodyList = a.m_next);
            --this.m_bodyCount
        }
    };
    s.prototype.CreateJoint = function(a) {
        var b = M.Create(a, null);
        b.m_prev =
        null;
        if (b.m_next = this.m_jointList)
            this.m_jointList.m_prev = b;
        this.m_jointList = b;
        ++this.m_jointCount;
        b.m_edgeA.joint = b;
        b.m_edgeA.other = b.m_bodyB;
        b.m_edgeA.prev = null;
        if (b.m_edgeA.next = b.m_bodyA.m_jointList)
            b.m_bodyA.m_jointList.prev = b.m_edgeA;
        b.m_bodyA.m_jointList = b.m_edgeA;
        b.m_edgeB.joint = b;
        b.m_edgeB.other = b.m_bodyA;
        b.m_edgeB.prev = null;
        if (b.m_edgeB.next = b.m_bodyB.m_jointList)
            b.m_bodyB.m_jointList.prev = b.m_edgeB;
        b.m_bodyB.m_jointList = b.m_edgeB;
        var c = a.bodyA, d = a.bodyB;
        if (!1 == a.collideConnected)
            for (a =
            d.GetContactList(); a;)
                a.other == c && a.contact.FlagForFiltering(), a = a.next;
        return b
    };
    s.prototype.DestroyJoint = function(a) {
        var b = a.m_collideConnected;
        a.m_prev && (a.m_prev.m_next = a.m_next);
        a.m_next && (a.m_next.m_prev = a.m_prev);
        a == this.m_jointList && (this.m_jointList = a.m_next);
        var c = a.m_bodyA, d = a.m_bodyB;
        c.SetAwake(!0);
        d.SetAwake(!0);
        a.m_edgeA.prev && (a.m_edgeA.prev.next = a.m_edgeA.next);
        a.m_edgeA.next && (a.m_edgeA.next.prev = a.m_edgeA.prev);
        a.m_edgeA == c.m_jointList && (c.m_jointList = a.m_edgeA.next);
        a.m_edgeA.prev =
        null;
        a.m_edgeA.next = null;
        a.m_edgeB.prev && (a.m_edgeB.prev.next = a.m_edgeB.next);
        a.m_edgeB.next && (a.m_edgeB.next.prev = a.m_edgeB.prev);
        a.m_edgeB == d.m_jointList && (d.m_jointList = a.m_edgeB.next);
        a.m_edgeB.prev = null;
        a.m_edgeB.next = null;
        M.Destroy(a, null);
        --this.m_jointCount;
        if (!1 == b)
            for (a = d.GetContactList(); a;)
                a.other == c && a.contact.FlagForFiltering(), a = a.next
    };
    s.prototype.AddController = function(a) {
        a.m_next = this.m_controllerList;
        a.m_prev = null;
        this.m_controllerList = a;
        a.m_world = this;
        this.m_controllerCount++;
        return a
    };
    s.prototype.RemoveController = function(a) {
        a.m_prev && (a.m_prev.m_next = a.m_next);
        a.m_next && (a.m_next.m_prev = a.m_prev);
        this.m_controllerList == a && (this.m_controllerList = a.m_next);
        this.m_controllerCount--
    };
    s.prototype.CreateController = function(a) {
        if (a.m_world != this)
            throw Error("Controller can only be a member of one world");
        a.m_next = this.m_controllerList;
        a.m_prev = null;
        this.m_controllerList && (this.m_controllerList.m_prev = a);
        this.m_controllerList = a;
        ++this.m_controllerCount;
        a.m_world = this;
        return a
    };
    s.prototype.DestroyController = function(a) {
        a.Clear();
        a.m_next && (a.m_next.m_prev = a.m_prev);
        a.m_prev && (a.m_prev.m_next = a.m_next);
        a == this.m_controllerList && (this.m_controllerList = a.m_next);
        --this.m_controllerCount
    };
    s.prototype.SetWarmStarting = function(a) {
        s.m_warmStarting = a
    };
    s.prototype.SetContinuousPhysics = function(a) {
        s.m_continuousPhysics = a
    };
    s.prototype.GetBodyCount = function() {
        return this.m_bodyCount
    };
    s.prototype.GetJointCount = function() {
        return this.m_jointCount
    };
    s.prototype.GetContactCount = function() {
        return this.m_contactCount
    };
    s.prototype.SetGravity = function(a) {
        this.m_gravity = a
    };
    s.prototype.GetGravity = function() {
        return this.m_gravity
    };
    s.prototype.GetGroundBody = function() {
        return this.m_groundBody
    };
    s.prototype.Step = function(a, b, c) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        this.m_flags & s.e_newFixture && (this.m_contactManager.FindNewContacts(), this.m_flags&=~s.e_newFixture);
        this.m_flags|=s.e_locked;
        var d = s.s_timestep2;
        d.dt = a;
        d.velocityIterations = b;
        d.positionIterations = c;
        d.inv_dt = 0 < a ? 1 / a : 0;
        d.dtRatio = this.m_inv_dt0 *
        a;
        d.warmStarting = s.m_warmStarting;
        this.m_contactManager.Collide();
        0 < d.dt && this.Solve(d);
        s.m_continuousPhysics && 0 < d.dt && this.SolveTOI(d);
        0 < d.dt && (this.m_inv_dt0 = d.inv_dt);
        this.m_flags&=~s.e_locked
    };
    s.prototype.ClearForces = function() {
        for (var a = this.m_bodyList; a; a = a.m_next)
            a.m_force.SetZero(), a.m_torque = 0
    };
    s.prototype.DrawDebugData = function() {
        if (null != this.m_debugDraw) {
            this.m_debugDraw.m_sprite.graphics.clear();
            var a = this.m_debugDraw.GetFlags(), b, c, e;
            new k;
            new k;
            new k;
            var r;
            new f;
            new f;
            new k;
            new k;
            new k;
            new k;
            var g = new d(0, 0, 0);
            if (a & D.e_shapeBit)
                for (b = this.m_bodyList; b; b = b.m_next)
                    for (r = b.m_xf, c = b.GetFixtureList();
            c;
            c = c.m_next)e = c.GetShape(), !1 == b.IsActive() ? g.Set(0.5, 0.5, 0.3) : b.GetType() == p.b2_staticBody ? g.Set(0.5, 0.9, 0.5) : b.GetType() == p.b2_kinematicBody ? g.Set(0.5, 0.5, 0.9) : !1 == b.IsAwake() ? g.Set(0.6, 0.6, 0.6) : g.Set(0.9, 0.7, 0.7), this.DrawShape(e, r, g);
            if (a & D.e_jointBit)
                for (b = this.m_jointList; b; b = b.m_next)
                    this.DrawJoint(b);
            if (a & D.e_controllerBit)
                for (b = this.m_controllerList; b; b = b.m_next)
                    b.Draw(this.m_debugDraw);
            if (a & D.e_pairBit)
                for (g.Set(0.3, 0.9, 0.9), b = this.m_contactManager.m_contactList; b; b = b.GetNext()
                    )e = b.GetFixtureA(), c = b.GetFixtureB(), e = e.GetAABB().GetCenter(), c = c.GetAABB().GetCenter(), this.m_debugDraw.DrawSegment(e, c, g);
            if (a & D.e_aabbBit)
                for (e = this.m_contactManager.m_broadPhase, r = [new k, new k, new k, new k], b = this.m_bodyList; b; b = b.GetNext()
                    )if (!1 != b.IsActive())
                for (c = b.GetFixtureList(); c; c = c.GetNext()
                    ) {
                var z = e.GetFatAABB(c.m_proxy);
                r[0].Set(z.lowerBound.x, z.lowerBound.y);
                r[1].Set(z.upperBound.x, z.lowerBound.y);
                r[2].Set(z.upperBound.x, z.upperBound.y);
                r[3].Set(z.lowerBound.x, z.upperBound.y);
                this.m_debugDraw.DrawPolygon(r, 4, g)
            }
            if (a & D.e_centerOfMassBit)
                for (b = this.m_bodyList; b; b = b.m_next)
                    r = s.s_xf, r.R = b.m_xf.R, r.position = b.GetWorldCenter(), this.m_debugDraw.DrawTransform(r)
        }
    };
    s.prototype.QueryAABB = function(a, b) {
        var c = this.m_contactManager.m_broadPhase;
        c.Query(function(b) {
            return a(c.GetUserData(b))
        }, b)
    };
    s.prototype.QueryShape = function(a, c, d) {
        void 0 === d && (d = null);
        null == d && (d = new b, d.SetIdentity());
        var e = this.m_contactManager.m_broadPhase,
        r = new f;
        c.ComputeAABB(r, d);
        e.Query(function(b) {
            b = e.GetUserData(b)instanceof I ? e.GetUserData(b) : null;
            return y.TestOverlap(c, d, b.GetShape(), b.GetBody().GetTransform()) ? a(b) : !0
        }, r)
    };
    s.prototype.QueryPoint = function(a, b) {
        var c = this.m_contactManager.m_broadPhase, d = new f;
        d.lowerBound.Set(b.x - e.b2_linearSlop, b.y - e.b2_linearSlop);
        d.upperBound.Set(b.x + e.b2_linearSlop, b.y + e.b2_linearSlop);
        c.Query(function(d) {
            d = c.GetUserData(d)instanceof I ? c.GetUserData(d) : null;
            return d.TestPoint(b) ? a(d) : !0
        }, d)
    };
    s.prototype.RayCast =
    function(a, b, c) {
        var d = this.m_contactManager.m_broadPhase, e = new n, f = new m(b, c);
        d.RayCast(function(f, r) {
            var g = d.GetUserData(r), g = g instanceof I ? g: null;
            if (g.RayCast(e, f)) {
                var s = e.fraction, z = new k((1 - s) * b.x + s * c.x, (1 - s) * b.y + s * c.y);
                return a(g, z, e.normal, s)
            }
            return f.maxFraction
        }, f)
    };
    s.prototype.RayCastOne = function(a, b) {
        var c;
        this.RayCast(function(a, b, d, e) {
            void 0 === e && (e = 0);
            c = a;
            return e
        }, a, b);
        return c
    };
    s.prototype.RayCastAll = function(a, b) {
        var c = new Vector;
        this.RayCast(function(a) {
            c[c.length] = a;
            return 1
        },
        a, b);
        return c
    };
    s.prototype.GetBodyList = function() {
        return this.m_bodyList
    };
    s.prototype.GetJointList = function() {
        return this.m_jointList
    };
    s.prototype.GetContactList = function() {
        return this.m_contactList
    };
    s.prototype.IsLocked = function() {
        return 0 < (this.m_flags & s.e_locked)
    };
    s.prototype.Solve = function(a) {
        for (var b, c = this.m_controllerList; c; c = c.m_next)
            c.Step(a);
        c = this.m_island;
        c.Initialize(this.m_bodyCount, this.m_contactCount, this.m_jointCount, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
        for (b = this.m_bodyList; b; b = b.m_next)
            b.m_flags&=~p.e_islandFlag;
        for (var d = this.m_contactList; d; d = d.m_next)
            d.m_flags&=~A.e_islandFlag;
        for (d = this.m_jointList; d; d = d.m_next)
            d.m_islandFlag=!1;
        parseInt(this.m_bodyCount);
        for (var d = this.s_stack, e = this.m_bodyList; e; e = e.m_next)
            if (!(e.m_flags & p.e_islandFlag)&&!1 != e.IsAwake()&&!1 != e.IsActive() && e.GetType() != p.b2_staticBody) {
                c.Clear();
                var f = 0;
                d[f++] = e;
                for (e.m_flags|=p.e_islandFlag; 0 < f;)
                    if (b = d[--f], c.AddBody(b)
                        , !1 == b.IsAwake() && b.SetAwake(!0), b.GetType() != p.b2_staticBody) {
                            for (var r,
                            g = b.m_contactList; g; g = g.next)
                                g.contact.m_flags & A.e_islandFlag ||!0 == g.contact.IsSensor() ||!1 == g.contact.IsEnabled() ||!1 == g.contact.IsTouching() || (c.AddContact(g.contact), g.contact.m_flags|=A.e_islandFlag, r = g.other, r.m_flags & p.e_islandFlag || (d[f++] = r, r.m_flags|=p.e_islandFlag));
                                for (b = b.m_jointList; b; b = b.next)
                                    !0 != b.joint.m_islandFlag && (r = b.other, !1 != r.IsActive() && (c.AddJoint(b.joint), b.joint.m_islandFlag=!0, r.m_flags & p.e_islandFlag || (d[f++] = r, r.m_flags|=p.e_islandFlag)))
                                }
                                c.Solve(a, this.m_gravity, this.m_allowSleep);
                                for (f = 0; f < c.m_bodyCount; ++f)
                                    b = c.m_bodies[f], b.GetType() == p.b2_staticBody && (b.m_flags&=~p.e_islandFlag)
        }
        for (f = 0; f < d.length && d[f]; ++f)
            d[f] = null;
        for (b = this.m_bodyList; b; b = b.m_next)
            !1 == b.IsAwake() ||!1 == b.IsActive() || b.GetType() != p.b2_staticBody && b.SynchronizeFixtures();
        this.m_contactManager.FindNewContacts()
    };
    s.prototype.SolveTOI = function(a) {
        var b, c, d, f = this.m_island;
        f.Initialize(this.m_bodyCount, e.b2_maxTOIContactsPerIsland, e.b2_maxTOIJointsPerIsland, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
        var r = s.s_queue;
        for (b = this.m_bodyList; b; b = b.m_next)
            b.m_flags&=~p.e_islandFlag, b.m_sweep.t0 = 0;
        for (d = this.m_contactList; d; d = d.m_next)
            d.m_flags&=~(A.e_toiFlag | A.e_islandFlag);
        for (d = this.m_jointList; d; d = d.m_next)
            d.m_islandFlag=!1;
        for (; ;) {
            var g = null, z = 1;
            for (d = this.m_contactList; d; d = d.m_next)
                if (!0 != d.IsSensor()&&!1 != d.IsEnabled()&&!1 != d.IsContinuous()) {
                    if (d.m_flags & A.e_toiFlag)
                        b = d.m_toi;
                    else {
                        b = d.m_fixtureA;
                        c = d.m_fixtureB;
                        b = b.m_body;
                        c = c.m_body;
                        if (!(b.GetType() == p.b2_dynamicBody&&!1 != b.IsAwake() || c.GetType() ==
                        p.b2_dynamicBody&&!1 != c.IsAwake()))
                            continue;
                            var k = b.m_sweep.t0;
                            b.m_sweep.t0 < c.m_sweep.t0 ? (k = c.m_sweep.t0, b.m_sweep.Advance(k)) : c.m_sweep.t0 < b.m_sweep.t0 && (k = b.m_sweep.t0, c.m_sweep.Advance(k));
                            b = d.ComputeTOI(b.m_sweep, c.m_sweep);
                            e.b2Assert(0 <= b && 1 >= b);
                            0 < b && 1 > b && (b = (1 - b) * k + b, 1 < b && (b = 1));
                            d.m_toi = b;
                            d.m_flags|=A.e_toiFlag
                    }
                    Number.MIN_VALUE < b && b < z && (g = d, z = b)
                }
            if (null == g || 1-100 * Number.MIN_VALUE < z)
                break;
            b = g.m_fixtureA;
            c = g.m_fixtureB;
            b = b.m_body;
            c = c.m_body;
            s.s_backupA.Set(b.m_sweep);
            s.s_backupB.Set(c.m_sweep);
            b.Advance(z);
            c.Advance(z);
            g.Update(this.m_contactManager.m_contactListener);
            g.m_flags&=~A.e_toiFlag;
            if (!0 == g.IsSensor() ||!1 == g.IsEnabled())
                b.m_sweep.Set(s.s_backupA), c.m_sweep.Set(s.s_backupB), b.SynchronizeTransform(), c.SynchronizeTransform();
            else if (!1 != g.IsTouching()) {
                b.GetType() != p.b2_dynamicBody && (b = c);
                f.Clear();
                g = d = 0;
                r[d + g++] = b;
                for (b.m_flags|=p.e_islandFlag; 0 < g;)
                    if (b = r[d++], --g, f.AddBody(b)
                        , !1 == b.IsAwake() && b.SetAwake(!0), b.GetType() == p.b2_dynamicBody) {
                            for (c = b.m_contactList; c && f.m_contactCount !=
                            f.m_contactCapacity; c = c.next)
                                c.contact.m_flags & A.e_islandFlag ||!0 == c.contact.IsSensor() ||!1 == c.contact.IsEnabled() ||!1 == c.contact.IsTouching() || (f.AddContact(c.contact), c.contact.m_flags|=A.e_islandFlag, k = c.other, k.m_flags & p.e_islandFlag || (k.GetType() != p.b2_staticBody && (k.Advance(z), k.SetAwake(!0)), r[d + g] = k, ++g, k.m_flags|=p.e_islandFlag));
                                for (b = b.m_jointList; b; b = b.next)
                                    f.m_jointCount != f.m_jointCapacity&&!0 != b.joint.m_islandFlag && (k = b.other, !1 != k.IsActive() && (f.AddJoint(b.joint), b.joint.m_islandFlag =
                                    !0, k.m_flags & p.e_islandFlag || (k.GetType() != p.b2_staticBody && (k.Advance(z), k.SetAwake(!0)), r[d + g] = k, ++g, k.m_flags|=p.e_islandFlag)))
                                }
                                d = s.s_timestep;
                                d.warmStarting=!1;
                                d.dt = (1 - z) * a.dt;
                                d.inv_dt = 1 / d.dt;
                                d.dtRatio = 0;
                                d.velocityIterations = a.velocityIterations;
                                d.positionIterations = a.positionIterations;
                                f.SolveTOI(d);
                                for (z = z = 0; z < f.m_bodyCount; ++z)
                                    if (b = f.m_bodies[z], b.m_flags&=~p.e_islandFlag, !1 != b.IsAwake() && b.GetType() == p.b2_dynamicBody)for (b.SynchronizeFixtures(), c = b.m_contactList; c; c = c.next)
                                        c.contact.m_flags&=
                                        ~A.e_toiFlag;
                                        for (z = 0; z < f.m_contactCount; ++z)
                                            d = f.m_contacts[z], d.m_flags&=~(A.e_toiFlag | A.e_islandFlag);
                                            for (z = 0; z < f.m_jointCount; ++z)
                                                d = f.m_joints[z], d.m_islandFlag=!1;
                                                this.m_contactManager.FindNewContacts()
            }
        }
    };
    s.prototype.DrawJoint = function(a) {
        var b = a.GetBodyA(), c = a.GetBodyB(), d = b.m_xf.position, e = c.m_xf.position, f = a.GetAnchorA(), r = a.GetAnchorB(), g = s.s_jointColor;
        switch (a.m_type) {
        case M.e_distanceJoint:
            this.m_debugDraw.DrawSegment(f, r, g);
            break;
        case M.e_pulleyJoint:
            b = a instanceof P ? a : null;
            a = b.GetGroundAnchorA();
            b = b.GetGroundAnchorB();
            this.m_debugDraw.DrawSegment(a, f, g);
            this.m_debugDraw.DrawSegment(b, r, g);
            this.m_debugDraw.DrawSegment(a, b, g);
            break;
        case M.e_mouseJoint:
            this.m_debugDraw.DrawSegment(f, r, g);
            break;
        default:
            b != this.m_groundBody && this.m_debugDraw.DrawSegment(d, f, g), this.m_debugDraw.DrawSegment(f, r, g), c != this.m_groundBody && this.m_debugDraw.DrawSegment(e, r, g)
        }
    };
    s.prototype.DrawShape = function(a, b, d) {
        switch (a.m_type) {
        case y.e_circleShape:
            var e = a instanceof w ? a: null;
            this.m_debugDraw.DrawSolidCircle(c.MulX(b,
            e.m_p), e.m_radius, b.R.col1, d);
            break;
        case y.e_polygonShape:
            e = a instanceof x ? a : null;
            a = parseInt(e.GetVertexCount());
            for (var f = e.GetVertices(), r = new Vector(a), e = 0; e < a; ++e)
                r[e] = c.MulX(b, f[e]);
            this.m_debugDraw.DrawSolidPolygon(r, a, d);
            break;
        case y.e_edgeShape:
            e = a instanceof t ? a : null, this.m_debugDraw.DrawSegment(c.MulX(b, e.GetVertex1()), c.MulX(b, e.GetVertex2()), d)
        }
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.b2World.s_timestep2 = new r;
        Box2D.Dynamics.b2World.s_xf = new b;
        Box2D.Dynamics.b2World.s_backupA = new a;
        Box2D.Dynamics.b2World.s_backupB = new a;
        Box2D.Dynamics.b2World.s_timestep = new r;
        Box2D.Dynamics.b2World.s_queue = new Vector;
        Box2D.Dynamics.b2World.s_jointColor = new d(0.5, 0.8, 0.8);
        Box2D.Dynamics.b2World.e_newFixture = 1;
        Box2D.Dynamics.b2World.e_locked = 2
    })
})();
(function() {
    var c = Box2D.Collision.Shapes.b2CircleShape, a = Box2D.Collision.Shapes.b2EdgeShape, b = Box2D.Collision.Shapes.b2PolygonShape, k = Box2D.Collision.Shapes.b2Shape, d = Box2D.Dynamics.Contacts.b2CircleContact, e = Box2D.Dynamics.Contacts.b2Contact, f = Box2D.Dynamics.Contacts.b2ContactConstraint, g = Box2D.Dynamics.Contacts.b2ContactConstraintPoint, h = Box2D.Dynamics.Contacts.b2ContactEdge, m = Box2D.Dynamics.Contacts.b2ContactFactory, n = Box2D.Dynamics.Contacts.b2ContactRegister, w = Box2D.Dynamics.Contacts.b2ContactResult,
    t = Box2D.Dynamics.Contacts.b2ContactSolver, v = Box2D.Dynamics.Contacts.b2EdgeAndCircleContact, x = Box2D.Dynamics.Contacts.b2NullContact, y = Box2D.Dynamics.Contacts.b2PolyAndCircleContact, p = Box2D.Dynamics.Contacts.b2PolyAndEdgeContact, C = Box2D.Dynamics.Contacts.b2PolygonContact, B = Box2D.Dynamics.Contacts.b2PositionSolverManifold, H = Box2D.Dynamics.b2Body, E = Box2D.Dynamics.b2TimeStep, G = Box2D.Common.b2Settings, D = Box2D.Common.Math.b2Mat22, K = Box2D.Common.Math.b2Math, F = Box2D.Common.Math.b2Vec2, I = Box2D.Collision.b2Collision,
    O = Box2D.Collision.b2ContactID, L = Box2D.Collision.b2Manifold, r = Box2D.Collision.b2TimeOfImpact, s = Box2D.Collision.b2TOIInput, A = Box2D.Collision.b2WorldManifold;
    Box2D.inherit(d, Box2D.Dynamics.Contacts.b2Contact);
    d.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    d.b2CircleContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    d.Create = function() {
        return new d
    };
    d.Destroy = function() {};
    d.prototype.Reset = function(a, b) {
        this.__super.Reset.call(this, a, b)
    };
    d.prototype.Evaluate =
    function() {
        var a = this.m_fixtureA.GetBody(), b = this.m_fixtureB.GetBody();
        I.CollideCircles(this.m_manifold, this.m_fixtureA.GetShape()instanceof c ? this.m_fixtureA.GetShape() : null, a.m_xf, this.m_fixtureB.GetShape()instanceof c ? this.m_fixtureB.GetShape() : null, b.m_xf)
    };
    e.b2Contact = function() {
        this.m_nodeA = new h;
        this.m_nodeB = new h;
        this.m_manifold = new L;
        this.m_oldManifold = new L
    };
    e.prototype.GetManifold = function() {
        return this.m_manifold
    };
    e.prototype.GetWorldManifold = function(a) {
        var b = this.m_fixtureA.GetBody(),
        c = this.m_fixtureB.GetBody(), d = this.m_fixtureA.GetShape(), e = this.m_fixtureB.GetShape();
        a.Initialize(this.m_manifold, b.GetTransform(), d.m_radius, c.GetTransform(), e.m_radius)
    };
    e.prototype.IsTouching = function() {
        return (this.m_flags & e.e_touchingFlag) == e.e_touchingFlag
    };
    e.prototype.IsContinuous = function() {
        return (this.m_flags & e.e_continuousFlag) == e.e_continuousFlag
    };
    e.prototype.SetSensor = function(a) {
        this.m_flags = a ? this.m_flags | e.e_sensorFlag : this.m_flags&~e.e_sensorFlag
    };
    e.prototype.IsSensor = function() {
        return (this.m_flags &
        e.e_sensorFlag) == e.e_sensorFlag
    };
    e.prototype.SetEnabled = function(a) {
        this.m_flags = a ? this.m_flags | e.e_enabledFlag : this.m_flags&~e.e_enabledFlag
    };
    e.prototype.IsEnabled = function() {
        return (this.m_flags & e.e_enabledFlag) == e.e_enabledFlag
    };
    e.prototype.GetNext = function() {
        return this.m_next
    };
    e.prototype.GetFixtureA = function() {
        return this.m_fixtureA
    };
    e.prototype.GetFixtureB = function() {
        return this.m_fixtureB
    };
    e.prototype.FlagForFiltering = function() {
        this.m_flags|=e.e_filterFlag
    };
    e.prototype.b2Contact = function() {};
    e.prototype.Reset = function(a, b) {
        void 0 === a && (a = null);
        void 0 === b && (b = null);
        this.m_flags = e.e_enabledFlag;
        if (a && b) {
            if (a.IsSensor() || b.IsSensor())
                this.m_flags|=e.e_sensorFlag;
            var c = a.GetBody(), d = b.GetBody();
            if (c.GetType() != H.b2_dynamicBody || c.IsBullet() || d.GetType() != H.b2_dynamicBody || d.IsBullet())
                this.m_flags|=e.e_continuousFlag;
            this.m_fixtureA = a;
            this.m_fixtureB = b;
            this.m_manifold.m_pointCount = 0;
            this.m_next = this.m_prev = null;
            this.m_nodeA.contact = null;
            this.m_nodeA.prev = null;
            this.m_nodeA.next = null;
            this.m_nodeA.other =
            null;
            this.m_nodeB.contact = null;
            this.m_nodeB.prev = null;
            this.m_nodeB.next = null;
            this.m_nodeB.other = null
        } else 
            this.m_fixtureB = this.m_fixtureA = null
    };
    e.prototype.Update = function(a) {
        var b = this.m_oldManifold;
        this.m_oldManifold = this.m_manifold;
        this.m_manifold = b;
        this.m_flags|=e.e_enabledFlag;
        var c=!1, b = (this.m_flags & e.e_touchingFlag) == e.e_touchingFlag, d = this.m_fixtureA.m_body, f = this.m_fixtureB.m_body, r = this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);
        if (this.m_flags & e.e_sensorFlag)
            r && (c = this.m_fixtureA.GetShape(),
            r = this.m_fixtureB.GetShape(), d = d.GetTransform(), f = f.GetTransform(), c = k.TestOverlap(c, d, r, f)), this.m_manifold.m_pointCount = 0;
        else {
            d.GetType() != H.b2_dynamicBody || d.IsBullet() || f.GetType() != H.b2_dynamicBody || f.IsBullet() ? this.m_flags|=e.e_continuousFlag : this.m_flags&=~e.e_continuousFlag;
            if (r)
                for (this.Evaluate(), c = 0 < this.m_manifold.m_pointCount, r = 0; r < this.m_manifold.m_pointCount; ++r) {
                    var g = this.m_manifold.m_points[r];
                    g.m_normalImpulse = 0;
                    g.m_tangentImpulse = 0;
                    for (var s = g.m_id, A = 0; A < this.m_oldManifold.m_pointCount; ++A) {
                        var h =
                        this.m_oldManifold.m_points[A];
                        if (h.m_id.key == s.key) {
                            g.m_normalImpulse = h.m_normalImpulse;
                            g.m_tangentImpulse = h.m_tangentImpulse;
                            break
                        }
                    }
                } else 
                    this.m_manifold.m_pointCount = 0;
            c != b && (d.SetAwake(!0), f.SetAwake(!0))
        }
        this.m_flags = c ? this.m_flags | e.e_touchingFlag : this.m_flags&~e.e_touchingFlag;
        !1 == b&&!0 == c && a.BeginContact(this);
        !0 == b&&!1 == c && a.EndContact(this);
        0 == (this.m_flags & e.e_sensorFlag) && a.PreSolve(this, this.m_oldManifold)
    };
    e.prototype.Evaluate = function() {};
    e.prototype.ComputeTOI = function(a, b) {
        e.s_input.proxyA.Set(this.m_fixtureA.GetShape());
        e.s_input.proxyB.Set(this.m_fixtureB.GetShape());
        e.s_input.sweepA = a;
        e.s_input.sweepB = b;
        e.s_input.tolerance = G.b2_linearSlop;
        return r.TimeOfImpact(e.s_input)
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag = 1;
        Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag = 2;
        Box2D.Dynamics.Contacts.b2Contact.e_islandFlag = 4;
        Box2D.Dynamics.Contacts.b2Contact.e_toiFlag = 8;
        Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag = 16;
        Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag = 32;
        Box2D.Dynamics.Contacts.b2Contact.e_filterFlag =
        64;
        Box2D.Dynamics.Contacts.b2Contact.s_input = new s
    });
    f.b2ContactConstraint = function() {
        this.localPlaneNormal = new F;
        this.localPoint = new F;
        this.normal = new F;
        this.normalMass = new D;
        this.K = new D
    };
    f.prototype.b2ContactConstraint = function() {
        this.points = new Vector(G.b2_maxManifoldPoints);
        for (var a = 0; a < G.b2_maxManifoldPoints; a++)
            this.points[a] = new g
    };
    g.b2ContactConstraintPoint = function() {
        this.localPoint = new F;
        this.rA = new F;
        this.rB = new F
    };
    h.b2ContactEdge = function() {};
    m.b2ContactFactory = function() {};
    m.prototype.b2ContactFactory =
    function(a) {
        this.m_allocator = a;
        this.InitializeRegisters()
    };
    m.prototype.AddType = function(a, b, c, d) {
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        this.m_registers[c][d].createFcn = a;
        this.m_registers[c][d].destroyFcn = b;
        this.m_registers[c][d].primary=!0;
        c != d && (this.m_registers[d][c].createFcn = a, this.m_registers[d][c].destroyFcn = b, this.m_registers[d][c].primary=!1)
    };
    m.prototype.InitializeRegisters = function() {
        this.m_registers = new Vector(k.e_shapeTypeCount);
        for (var a = 0; a < k.e_shapeTypeCount; a++) {
            this.m_registers[a] =
            new Vector(k.e_shapeTypeCount);
            for (var b = 0; b < k.e_shapeTypeCount; b++)
                this.m_registers[a][b] = new n
        }
        this.AddType(d.Create, d.Destroy, k.e_circleShape, k.e_circleShape);
        this.AddType(y.Create, y.Destroy, k.e_polygonShape, k.e_circleShape);
        this.AddType(C.Create, C.Destroy, k.e_polygonShape, k.e_polygonShape);
        this.AddType(v.Create, v.Destroy, k.e_edgeShape, k.e_circleShape);
        this.AddType(p.Create, p.Destroy, k.e_polygonShape, k.e_edgeShape)
    };
    m.prototype.Create = function(a, b) {
        var c = parseInt(a.GetType()), d = parseInt(b.GetType()),
        c = this.m_registers[c][d];
        if (c.pool)
            return d = c.pool, c.pool = d.m_next, c.poolCount--, d.Reset(a, b), d;
        d = c.createFcn;
        return null != d ? (c.primary ? (d = d(this.m_allocator), d.Reset(a, b)) : (d = d(this.m_allocator), d.Reset(b, a)), d) : null
    };
    m.prototype.Destroy = function(a) {
        0 < a.m_manifold.m_pointCount && (a.m_fixtureA.m_body.SetAwake(!0), a.m_fixtureB.m_body.SetAwake(!0));
        var b = parseInt(a.m_fixtureA.GetType()), c = parseInt(a.m_fixtureB.GetType()), b = this.m_registers[b][c];
        b.poolCount++;
        a.m_next = b.pool;
        b.pool = a;
        b = b.destroyFcn;
        b(a, this.m_allocator)
    };
    n.b2ContactRegister = function() {};
    w.b2ContactResult = function() {
        this.position = new F;
        this.normal = new F;
        this.id = new O
    };
    t.b2ContactSolver = function() {
        this.m_step = new E;
        this.m_constraints = new Vector
    };
    t.prototype.b2ContactSolver = function() {};
    t.prototype.Initialize = function(a, b, c, d) {
        void 0 === c && (c = 0);
        var e;
        this.m_step.Set(a);
        this.m_allocator = d;
        for (this.m_constraintCount = c; this.m_constraints.length < this.m_constraintCount;)
            this.m_constraints[this.m_constraints.length] = new f;
        for (a = 0; a <
        c; ++a) {
            e = b[a];
            d = e.m_fixtureA;
            var r = e.m_fixtureB, g = d.m_shape.m_radius, s = r.m_shape.m_radius, A = d.m_body, k = r.m_body, h = e.GetManifold(), p = G.b2MixFriction(d.GetFriction(), r.GetFriction()), m = G.b2MixRestitution(d.GetRestitution(), r.GetRestitution()), n = A.m_linearVelocity.x, v = A.m_linearVelocity.y, w = k.m_linearVelocity.x, x = k.m_linearVelocity.y, y = A.m_angularVelocity, B = k.m_angularVelocity;
            G.b2Assert(0 < h.m_pointCount);
            t.s_worldManifold.Initialize(h, A.m_xf, g, k.m_xf, s);
            r = t.s_worldManifold.m_normal.x;
            e = t.s_worldManifold.m_normal.y;
            d = this.m_constraints[a];
            d.bodyA = A;
            d.bodyB = k;
            d.manifold = h;
            d.normal.x = r;
            d.normal.y = e;
            d.pointCount = h.m_pointCount;
            d.friction = p;
            d.restitution = m;
            d.localPlaneNormal.x = h.m_localPlaneNormal.x;
            d.localPlaneNormal.y = h.m_localPlaneNormal.y;
            d.localPoint.x = h.m_localPoint.x;
            d.localPoint.y = h.m_localPoint.y;
            d.radius = g + s;
            d.type = h.m_type;
            for (g = 0; g < d.pointCount; ++g) {
                p = h.m_points[g];
                s = d.points[g];
                s.normalImpulse = p.m_normalImpulse;
                s.tangentImpulse = p.m_tangentImpulse;
                s.localPoint.SetV(p.m_localPoint);
                var p = s.rA.x = t.s_worldManifold.m_points[g].x -
                A.m_sweep.c.x, m = s.rA.y = t.s_worldManifold.m_points[g].y - A.m_sweep.c.y, C = s.rB.x = t.s_worldManifold.m_points[g].x - k.m_sweep.c.x, D = s.rB.y = t.s_worldManifold.m_points[g].y - k.m_sweep.c.y, E = p * e - m * r, F = C * e - D * r, E = E * E, F = F * F;
                s.normalMass = 1 / (A.m_invMass + k.m_invMass + A.m_invI * E + k.m_invI * F);
                var H = A.m_mass * A.m_invMass + k.m_mass * k.m_invMass, H = H + (A.m_mass * A.m_invI * E + k.m_mass * k.m_invI * F);
                s.equalizedMass = 1 / H;
                F = e;
                H =- r;
                E = p * H - m * F;
                F = C * H - D * F;
                E*=E;
                F*=F;
                s.tangentMass = 1 / (A.m_invMass + k.m_invMass + A.m_invI * E + k.m_invI * F);
                s.velocityBias =
                0;
                p = d.normal.x * (w +- B * D - n - - y * m) + d.normal.y * (x + B * C - v - y * p);
                p<-G.b2_velocityThreshold && (s.velocityBias +=- d.restitution * p)
            }
            2 == d.pointCount && (x = d.points[0], w = d.points[1], h = A.m_invMass, A = A.m_invI, n = k.m_invMass, k = k.m_invI, v = x.rA.x * e - x.rA.y * r, x = x.rB.x * e - x.rB.y * r, y = w.rA.x * e - w.rA.y * r, w = w.rB.x * e - w.rB.y * r, r = h + n + A * v * v + k * x * x, e = h + n + A * y * y + k * w * w, k = h + n + A * v * y + k * x * w, r * r < 100 * (r * e - k * k) ? (d.K.col1.Set(r, k), d.K.col2.Set(k, e), d.K.GetInverse(d.normalMass)) : d.pointCount = 1)
        }
    };
    t.prototype.InitVelocityConstraints = function(a) {
        for (var b =
        0; b < this.m_constraintCount; ++b) {
            var c = this.m_constraints[b], d = c.bodyA, e = c.bodyB, f = d.m_invMass, r = d.m_invI, g = e.m_invMass, s = e.m_invI, A = c.normal.x, k = c.normal.y, h = k, p =- A, m = 0, n = 0;
            if (a.warmStarting)
                for (n = c.pointCount, m = 0; m < n; ++m) {
                    var t = c.points[m];
                    t.normalImpulse*=a.dtRatio;
                    t.tangentImpulse*=a.dtRatio;
                    var v = t.normalImpulse * A + t.tangentImpulse * h, w = t.normalImpulse * k + t.tangentImpulse * p;
                    d.m_angularVelocity -= r * (t.rA.x * w - t.rA.y * v);
                    d.m_linearVelocity.x -= f * v;
                    d.m_linearVelocity.y -= f * w;
                    e.m_angularVelocity += s * (t.rB.x *
                    w - t.rB.y * v);
                    e.m_linearVelocity.x += g * v;
                    e.m_linearVelocity.y += g * w
                } else 
                    for (n = c.pointCount, m = 0; m < n; ++m)
                        d = c.points[m], d.normalImpulse = 0, d.tangentImpulse = 0
        }
    };
    t.prototype.SolveVelocityConstraints = function() {
        for (var a = 0, b, c = 0, d = 0, e = 0, f = 0, r = 0, g = 0, s = 0, A, k = 0; k < this.m_constraintCount; ++k) {
            var e = this.m_constraints[k], h = e.bodyA, p = e.bodyB, m = h.m_angularVelocity, n = p.m_angularVelocity, t = h.m_linearVelocity, v = p.m_linearVelocity, w = h.m_invMass, x = h.m_invI, y = p.m_invMass, B = p.m_invI, g = e.normal.x, C = s = e.normal.y;
            A =- g;
            r = e.friction;
            for (a = 0; a < e.pointCount; a++)
                b = e.points[a], c = v.x - n * b.rB.y - t.x + m * b.rA.y, d = v.y + n * b.rB.x - t.y - m * b.rA.x, c = c * C + d * A, c = b.tangentMass*-c, d = r * b.normalImpulse, d = K.Clamp(b.tangentImpulse + c, - d, d), c = d - b.tangentImpulse, f = c * C, c*=A, t.x -= w * f, t.y -= w * c, m -= x * (b.rA.x * c - b.rA.y * f), v.x += y * f, v.y += y * c, n += B * (b.rB.x * c - b.rB.y * f), b.tangentImpulse = d;
            parseInt(e.pointCount);
            if (1 == e.pointCount)
                b = e.points[0], c = v.x +- n * b.rB.y - t.x - - m * b.rA.y, d = v.y + n * b.rB.x - t.y - m * b.rA.x, e = c * g + d * s, c =- b.normalMass * (e - b.velocityBias), d = b.normalImpulse + c, d = 0 <
            d ? d : 0, c = d - b.normalImpulse, f = c * g, c*=s, t.x -= w * f, t.y -= w * c, m -= x * (b.rA.x * c - b.rA.y * f), v.x += y * f, v.y += y * c, n += B * (b.rB.x * c - b.rB.y * f), b.normalImpulse = d;
            else {
                b = e.points[0];
                var a = e.points[1], c = b.normalImpulse, r = a.normalImpulse, D = (v.x - n * b.rB.y - t.x + m * b.rA.y) * g + (v.y + n * b.rB.x - t.y - m * b.rA.x) * s, E = (v.x - n * a.rB.y - t.x + m * a.rA.y) * g + (v.y + n * a.rB.x - t.y - m * a.rA.x) * s, d = D - b.velocityBias, f = E - a.velocityBias;
                A = e.K;
                d -= A.col1.x * c + A.col2.x * r;
                for (f -= A.col1.y * c + A.col2.y * r; ;) {
                    A = e.normalMass;
                    C =- (A.col1.x * d + A.col2.x * f);
                    A =- (A.col1.y * d + A.col2.y *
                    f);
                    if (0 <= C && 0 <= A) {
                        c = C - c;
                        r = A - r;
                        e = c * g;
                        c*=s;
                        g*=r;
                        s*=r;
                        t.x -= w * (e + g);
                        t.y -= w * (c + s);
                        m -= x * (b.rA.x * c - b.rA.y * e + a.rA.x * s - a.rA.y * g);
                        v.x += y * (e + g);
                        v.y += y * (c + s);
                        n += B * (b.rB.x * c - b.rB.y * e + a.rB.x * s - a.rB.y * g);
                        b.normalImpulse = C;
                        a.normalImpulse = A;
                        break
                    }
                    C =- b.normalMass * d;
                    A = 0;
                    E = e.K.col1.y * C + f;
                    if (0 <= C && 0 <= E) {
                        c = C - c;
                        r = A - r;
                        e = c * g;
                        c*=s;
                        g*=r;
                        s*=r;
                        t.x -= w * (e + g);
                        t.y -= w * (c + s);
                        m -= x * (b.rA.x * c - b.rA.y * e + a.rA.x * s - a.rA.y * g);
                        v.x += y * (e + g);
                        v.y += y * (c + s);
                        n += B * (b.rB.x * c - b.rB.y * e + a.rB.x * s - a.rB.y * g);
                        b.normalImpulse = C;
                        a.normalImpulse = A;
                        break
                    }
                    C = 0;
                    A =- a.normalMass * f;
                    D = e.K.col2.x * A + d;
                    if (0 <= A && 0 <= D) {
                        c = C - c;
                        r = A - r;
                        e = c * g;
                        c*=s;
                        g*=r;
                        s*=r;
                        t.x -= w * (e + g);
                        t.y -= w * (c + s);
                        m -= x * (b.rA.x * c - b.rA.y * e + a.rA.x * s - a.rA.y * g);
                        v.x += y * (e + g);
                        v.y += y * (c + s);
                        n += B * (b.rB.x * c - b.rB.y * e + a.rB.x * s - a.rB.y * g);
                        b.normalImpulse = C;
                        a.normalImpulse = A;
                        break
                    }
                    A = C = 0;
                    D = d;
                    E = f;
                    if (0 <= D && 0 <= E) {
                        c = C - c;
                        r = A - r;
                        e = c * g;
                        c*=s;
                        g*=r;
                        s*=r;
                        t.x -= w * (e + g);
                        t.y -= w * (c + s);
                        m -= x * (b.rA.x * c - b.rA.y * e + a.rA.x * s - a.rA.y * g);
                        v.x += y * (e + g);
                        v.y += y * (c + s);
                        n += B * (b.rB.x * c - b.rB.y * e + a.rB.x * s - a.rB.y * g);
                        b.normalImpulse = C;
                        a.normalImpulse = A;
                        break
                    }
                    break
                }
            }
            h.m_angularVelocity =
            m;
            p.m_angularVelocity = n
        }
    };
    t.prototype.FinalizeVelocityConstraints = function() {
        for (var a = 0; a < this.m_constraintCount; ++a)
            for (var b = this.m_constraints[a], c = b.manifold, d = 0; d < b.pointCount; ++d) {
                var e = c.m_points[d], f = b.points[d];
                e.m_normalImpulse = f.normalImpulse;
                e.m_tangentImpulse = f.tangentImpulse
            }
    };
    t.prototype.SolvePositionConstraints = function(a) {
        void 0 === a && (a = 0);
        for (var b = 0, c = 0; c < this.m_constraintCount; c++) {
            var d = this.m_constraints[c], e = d.bodyA, f = d.bodyB, r = e.m_mass * e.m_invMass, g = e.m_mass * e.m_invI, s = f.m_mass *
            f.m_invMass, A = f.m_mass * f.m_invI;
            t.s_psm.Initialize(d);
            for (var k = t.s_psm.m_normal, h = 0; h < d.pointCount; h++) {
                var m = d.points[h], p = t.s_psm.m_points[h], n = t.s_psm.m_separations[h], v = p.x - e.m_sweep.c.x, w = p.y - e.m_sweep.c.y, x = p.x - f.m_sweep.c.x, p = p.y - f.m_sweep.c.y, b = b < n ? b: n, n = K.Clamp(a * (n + G.b2_linearSlop), - G.b2_maxLinearCorrection, 0), n =- m.equalizedMass * n, m = n * k.x, n = n * k.y;
                e.m_sweep.c.x -= r * m;
                e.m_sweep.c.y -= r * n;
                e.m_sweep.a -= g * (v * n - w * m);
                e.SynchronizeTransform();
                f.m_sweep.c.x += s * m;
                f.m_sweep.c.y += s * n;
                f.m_sweep.a += A *
                (x * n - p * m);
                f.SynchronizeTransform()
            }
        }
        return b>-1.5 * G.b2_linearSlop
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold = new A;
        Box2D.Dynamics.Contacts.b2ContactSolver.s_psm = new B
    });
    Box2D.inherit(v, Box2D.Dynamics.Contacts.b2Contact);
    v.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    v.b2EdgeAndCircleContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    v.Create = function() {
        return new v
    };
    v.Destroy = function() {};
    v.prototype.Reset =
    function(a, b) {
        this.__super.Reset.call(this, a, b)
    };
    v.prototype.Evaluate = function() {
        var b = this.m_fixtureA.GetBody(), d = this.m_fixtureB.GetBody();
        this.b2CollideEdgeAndCircle(this.m_manifold, this.m_fixtureA.GetShape()instanceof a ? this.m_fixtureA.GetShape() : null, b.m_xf, this.m_fixtureB.GetShape()instanceof c ? this.m_fixtureB.GetShape() : null, d.m_xf)
    };
    v.prototype.b2CollideEdgeAndCircle = function() {};
    Box2D.inherit(x, Box2D.Dynamics.Contacts.b2Contact);
    x.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    x.b2NullContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    x.prototype.b2NullContact = function() {
        this.__super.b2Contact.call(this)
    };
    x.prototype.Evaluate = function() {};
    Box2D.inherit(y, Box2D.Dynamics.Contacts.b2Contact);
    y.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    y.b2PolyAndCircleContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    y.Create = function() {
        return new y
    };
    y.Destroy = function() {};
    y.prototype.Reset = function(a,
    b) {
        this.__super.Reset.call(this, a, b);
        G.b2Assert(a.GetType() == k.e_polygonShape);
        G.b2Assert(b.GetType() == k.e_circleShape)
    };
    y.prototype.Evaluate = function() {
        var a = this.m_fixtureA.m_body, d = this.m_fixtureB.m_body;
        I.CollidePolygonAndCircle(this.m_manifold, this.m_fixtureA.GetShape()instanceof b ? this.m_fixtureA.GetShape() : null, a.m_xf, this.m_fixtureB.GetShape()instanceof c ? this.m_fixtureB.GetShape() : null, d.m_xf)
    };
    Box2D.inherit(p, Box2D.Dynamics.Contacts.b2Contact);
    p.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    p.b2PolyAndEdgeContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    p.Create = function() {
        return new p
    };
    p.Destroy = function() {};
    p.prototype.Reset = function(a, b) {
        this.__super.Reset.call(this, a, b);
        G.b2Assert(a.GetType() == k.e_polygonShape);
        G.b2Assert(b.GetType() == k.e_edgeShape)
    };
    p.prototype.Evaluate = function() {
        var c = this.m_fixtureA.GetBody(), d = this.m_fixtureB.GetBody();
        this.b2CollidePolyAndEdge(this.m_manifold, this.m_fixtureA.GetShape()instanceof b ? this.m_fixtureA.GetShape() :
        null, c.m_xf, this.m_fixtureB.GetShape()instanceof a ? this.m_fixtureB.GetShape() : null, d.m_xf)
    };
    p.prototype.b2CollidePolyAndEdge = function() {};
    Box2D.inherit(C, Box2D.Dynamics.Contacts.b2Contact);
    C.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype;
    C.b2PolygonContact = function() {
        Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
    };
    C.Create = function() {
        return new C
    };
    C.Destroy = function() {};
    C.prototype.Reset = function(a, b) {
        this.__super.Reset.call(this, a, b)
    };
    C.prototype.Evaluate = function() {
        var a =
        this.m_fixtureA.GetBody(), c = this.m_fixtureB.GetBody();
        I.CollidePolygons(this.m_manifold, this.m_fixtureA.GetShape()instanceof b ? this.m_fixtureA.GetShape() : null, a.m_xf, this.m_fixtureB.GetShape()instanceof b ? this.m_fixtureB.GetShape() : null, c.m_xf)
    };
    B.b2PositionSolverManifold = function() {};
    B.prototype.b2PositionSolverManifold = function() {
        this.m_normal = new F;
        this.m_separations = new Vector_a2j_Number(G.b2_maxManifoldPoints);
        this.m_points = new Vector(G.b2_maxManifoldPoints);
        for (var a = 0; a < G.b2_maxManifoldPoints; a++)
            this.m_points[a] =
            new F
    };
    B.prototype.Initialize = function(a) {
        G.b2Assert(0 < a.pointCount);
        var b = 0, c = 0, d = 0, e, f = 0, r = 0;
        switch (a.type) {
        case L.e_circles:
            e = a.bodyA.m_xf.R;
            d = a.localPoint;
            b = a.bodyA.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y);
            c = a.bodyA.m_xf.position.y + (e.col1.y * d.x + e.col2.y * d.y);
            e = a.bodyB.m_xf.R;
            d = a.points[0].localPoint;
            f = a.bodyB.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y);
            e = a.bodyB.m_xf.position.y + (e.col1.y * d.x + e.col2.y * d.y);
            var d = f - b, r = e - c, g = d * d + r * r;
            g > Number.MIN_VALUE * Number.MIN_VALUE ? (g = Math.sqrt(g), this.m_normal.x =
            d / g, this.m_normal.y = r / g) : (this.m_normal.x = 1, this.m_normal.y = 0);
            this.m_points[0].x = 0.5 * (b + f);
            this.m_points[0].y = 0.5 * (c + e);
            this.m_separations[0] = d * this.m_normal.x + r * this.m_normal.y - a.radius;
            break;
        case L.e_faceA:
            e = a.bodyA.m_xf.R;
            d = a.localPlaneNormal;
            this.m_normal.x = e.col1.x * d.x + e.col2.x * d.y;
            this.m_normal.y = e.col1.y * d.x + e.col2.y * d.y;
            e = a.bodyA.m_xf.R;
            d = a.localPoint;
            f = a.bodyA.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y);
            r = a.bodyA.m_xf.position.y + (e.col1.y * d.x + e.col2.y * d.y);
            e = a.bodyB.m_xf.R;
            for (b = 0; b < a.pointCount; ++b)
                d =
                a.points[b].localPoint, c = a.bodyB.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y), d = a.bodyB.m_xf.position.y + (e.col1.y * d.x + e.col2.y * d.y), this.m_separations[b] = (c - f) * this.m_normal.x + (d - r) * this.m_normal.y - a.radius, this.m_points[b].x = c, this.m_points[b].y = d;
            break;
        case L.e_faceB:
            e = a.bodyB.m_xf.R;
            d = a.localPlaneNormal;
            this.m_normal.x = e.col1.x * d.x + e.col2.x * d.y;
            this.m_normal.y = e.col1.y * d.x + e.col2.y * d.y;
            e = a.bodyB.m_xf.R;
            d = a.localPoint;
            f = a.bodyB.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y);
            r = a.bodyB.m_xf.position.y +
            (e.col1.y * d.x + e.col2.y * d.y);
            e = a.bodyA.m_xf.R;
            for (b = 0; b < a.pointCount; ++b)
                d = a.points[b].localPoint, c = a.bodyA.m_xf.position.x + (e.col1.x * d.x + e.col2.x * d.y), d = a.bodyA.m_xf.position.y + (e.col1.y * d.x + e.col2.y * d.y), this.m_separations[b] = (c - f) * this.m_normal.x + (d - r) * this.m_normal.y - a.radius, this.m_points[b].Set(c, d);
            this.m_normal.x*=-1;
            this.m_normal.y*=-1
        }
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA = new F;
        Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB =
        new F
    })
})();
(function() {
    var c = Box2D.Common.Math.b2Mat22, a = Box2D.Common.Math.b2Math, b = Box2D.Common.Math.b2Vec2, k = Box2D.Common.b2Color, d = Box2D.Dynamics.Controllers.b2BuoyancyController, e = Box2D.Dynamics.Controllers.b2ConstantAccelController, f = Box2D.Dynamics.Controllers.b2ConstantForceController, g = Box2D.Dynamics.Controllers.b2Controller, h = Box2D.Dynamics.Controllers.b2ControllerEdge, m = Box2D.Dynamics.Controllers.b2GravityController, n = Box2D.Dynamics.Controllers.b2TensorDampingController;
    Box2D.inherit(d, Box2D.Dynamics.Controllers.b2Controller);
    d.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype;
    d.b2BuoyancyController = function() {
        Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments);
        this.normal = new b(0, -1);
        this.density = this.offset = 0;
        this.velocity = new b(0, 0);
        this.linearDrag = 2;
        this.angularDrag = 1;
        this.useDensity=!1;
        this.useWorldGravity=!0;
        this.gravity = null
    };
    d.prototype.Step = function() {
        if (this.m_bodyList) {
            this.useWorldGravity && (this.gravity = this.GetWorld().GetGravity().Copy());
            for (var a = this.m_bodyList; a; a =
            a.nextBody) {
                var c = a.body;
                if (!1 != c.IsAwake()) {
                    for (var d = new b, e = new b, f = 0, g = 0, k = c.GetFixtureList(); k; k = k.GetNext()) {
                        var h = new b, m = k.GetShape().ComputeSubmergedArea(this.normal, this.offset, c.GetTransform(), h), f = f + m;
                        d.x += m * h.x;
                        d.y += m * h.y;
                        var n = 0, n = 1, g = g + m * n;
                        e.x += m * h.x * n;
                        e.y += m * h.y * n
                    }
                    d.x/=f;
                    d.y/=f;
                    e.x/=g;
                    e.y/=g;
                    f < Number.MIN_VALUE || (g = this.gravity.GetNegative(), g.Multiply(this.density * f), c.ApplyForce(g, e), e = c.GetLinearVelocityFromWorldPoint(d), e.Subtract(this.velocity), e.Multiply( - this.linearDrag * f), c.ApplyForce(e,
                    d), c.ApplyTorque( - c.GetInertia() / c.GetMass() * f * c.GetAngularVelocity() * this.angularDrag))
                }
            }
        }
    };
    d.prototype.Draw = function(a) {
        var c = new b, d = new b;
        c.x = this.normal.x * this.offset + 1E3 * this.normal.y;
        c.y = this.normal.y * this.offset-1E3 * this.normal.x;
        d.x = this.normal.x * this.offset-1E3 * this.normal.y;
        d.y = this.normal.y * this.offset + 1E3 * this.normal.x;
        var e = new k(0, 0, 1);
        a.DrawSegment(c, d, e)
    };
    Box2D.inherit(e, Box2D.Dynamics.Controllers.b2Controller);
    e.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype;
    e.b2ConstantAccelController = function() {
        Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments);
        this.A = new b(0, 0)
    };
    e.prototype.Step = function(a) {
        a = new b(this.A.x * a.dt, this.A.y * a.dt);
        for (var c = this.m_bodyList; c; c = c.nextBody) {
            var d = c.body;
            d.IsAwake() && d.SetLinearVelocity(new b(d.GetLinearVelocity().x + a.x, d.GetLinearVelocity().y + a.y))
        }
    };
    Box2D.inherit(f, Box2D.Dynamics.Controllers.b2Controller);
    f.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype;
    f.b2ConstantForceController =
    function() {
        Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments);
        this.F = new b(0, 0)
    };
    f.prototype.Step = function() {
        for (var a = this.m_bodyList; a; a = a.nextBody) {
            var b = a.body;
            b.IsAwake() && b.ApplyForce(this.F, b.GetWorldCenter())
        }
    };
    g.b2Controller = function() {};
    g.prototype.Step = function() {};
    g.prototype.Draw = function() {};
    g.prototype.AddBody = function(a) {
        var b = new h;
        b.controller = this;
        b.body = a;
        b.nextBody = this.m_bodyList;
        b.prevBody = null;
        this.m_bodyList = b;
        b.nextBody && (b.nextBody.prevBody = b);
        this.m_bodyCount++;
        b.nextController = a.m_controllerList;
        b.prevController = null;
        a.m_controllerList = b;
        b.nextController && (b.nextController.prevController = b);
        a.m_controllerCount++
    };
    g.prototype.RemoveBody = function(a) {
        for (var b = a.m_controllerList; b && b.controller != this;)
            b = b.nextController;
        b.prevBody && (b.prevBody.nextBody = b.nextBody);
        b.nextBody && (b.nextBody.prevBody = b.prevBody);
        b.nextController && (b.nextController.prevController = b.prevController);
        b.prevController && (b.prevController.nextController = b.nextController);
        this.m_bodyList ==
        b && (this.m_bodyList = b.nextBody);
        a.m_controllerList == b && (a.m_controllerList = b.nextController);
        a.m_controllerCount--;
        this.m_bodyCount--
    };
    g.prototype.Clear = function() {
        for (; this.m_bodyList;)
            this.RemoveBody(this.m_bodyList.body)
    };
    g.prototype.GetNext = function() {
        return this.m_next
    };
    g.prototype.GetWorld = function() {
        return this.m_world
    };
    g.prototype.GetBodyList = function() {
        return this.m_bodyList
    };
    h.b2ControllerEdge = function() {};
    Box2D.inherit(m, Box2D.Dynamics.Controllers.b2Controller);
    m.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype;
    m.b2GravityController = function() {
        Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments);
        this.G = 1;
        this.invSqr=!0
    };
    m.prototype.Step = function() {
        var a = null, c = null, d = null, e = 0, f = null, g = null, k = null, h = 0, m = 0, n = 0;
        if (this.invSqr)
            for (a = this.m_bodyList; a; a = a.nextBody)
                for (c = a.body, d = c.GetWorldCenter()
                    , e = c.GetMass(), f = this.m_bodyList;
        f != a;
        f = f.nextBody)g = f.body, k = g.GetWorldCenter(), h = k.x - d.x, m = k.y - d.y, n = h * h + m * m, n < Number.MIN_VALUE || (h = new b(h, m), h.Multiply(this.G / n / Math.sqrt(n) * e * g.GetMass()),
        c.IsAwake() && c.ApplyForce(h, d), h.Multiply(-1), g.IsAwake() && g.ApplyForce(h, k));
        else 
            for (a = this.m_bodyList; a; a = a.nextBody)
                for (c = a.body, d = c.GetWorldCenter()
                    , e = c.GetMass(), f = this.m_bodyList;
        f != a;
        f = f.nextBody)g = f.body, k = g.GetWorldCenter(), h = k.x - d.x, m = k.y - d.y, n = h * h + m * m, n < Number.MIN_VALUE || (h = new b(h, m), h.Multiply(this.G / n * e * g.GetMass()), c.IsAwake() && c.ApplyForce(h, d), h.Multiply(-1), g.IsAwake() && g.ApplyForce(h, k))
    };
    Box2D.inherit(n, Box2D.Dynamics.Controllers.b2Controller);
    n.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype;
    n.b2TensorDampingController = function() {
        Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments);
        this.T = new c;
        this.maxTimestep = 0
    };
    n.prototype.SetAxisAligned = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.T.col1.x =- a;
        this.T.col1.y = 0;
        this.T.col2.x = 0;
        this.T.col2.y =- b;
        this.maxTimestep = 0 < a || 0 < b ? 1 / Math.max(a, b) : 0
    };
    n.prototype.Step = function(c) {
        c = c.dt;
        if (!(c <= Number.MIN_VALUE)) {
            c > this.maxTimestep && 0 < this.maxTimestep && (c = this.maxTimestep);
            for (var d = this.m_bodyList; d; d = d.nextBody) {
                var e =
                d.body;
                if (e.IsAwake()) {
                    var f = e.GetWorldVector(a.MulMV(this.T, e.GetLocalVector(e.GetLinearVelocity())));
                    e.SetLinearVelocity(new b(e.GetLinearVelocity().x + f.x * c, e.GetLinearVelocity().y + f.y * c))
                }
            }
        }
    }
})();
(function() {
    var c = Box2D.Common.b2Settings, a = Box2D.Common.Math.b2Mat22, b = Box2D.Common.Math.b2Mat33, k = Box2D.Common.Math.b2Math, d = Box2D.Common.Math.b2Vec2, e = Box2D.Common.Math.b2Vec3, f = Box2D.Dynamics.Joints.b2DistanceJoint, g = Box2D.Dynamics.Joints.b2DistanceJointDef, h = Box2D.Dynamics.Joints.b2FrictionJoint, m = Box2D.Dynamics.Joints.b2FrictionJointDef, n = Box2D.Dynamics.Joints.b2GearJoint, w = Box2D.Dynamics.Joints.b2GearJointDef, t = Box2D.Dynamics.Joints.b2Jacobian, v = Box2D.Dynamics.Joints.b2Joint, x = Box2D.Dynamics.Joints.b2JointDef,
    y = Box2D.Dynamics.Joints.b2JointEdge, p = Box2D.Dynamics.Joints.b2LineJoint, C = Box2D.Dynamics.Joints.b2LineJointDef, B = Box2D.Dynamics.Joints.b2MouseJoint, H = Box2D.Dynamics.Joints.b2MouseJointDef, E = Box2D.Dynamics.Joints.b2PrismaticJoint, G = Box2D.Dynamics.Joints.b2PrismaticJointDef, D = Box2D.Dynamics.Joints.b2PulleyJoint, K = Box2D.Dynamics.Joints.b2PulleyJointDef, F = Box2D.Dynamics.Joints.b2RevoluteJoint, I = Box2D.Dynamics.Joints.b2RevoluteJointDef, O = Box2D.Dynamics.Joints.b2WeldJoint, L = Box2D.Dynamics.Joints.b2WeldJointDef;
    Box2D.inherit(f, Box2D.Dynamics.Joints.b2Joint);
    f.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    f.b2DistanceJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 = new d;
        this.m_u = new d
    };
    f.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    f.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    f.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * this.m_impulse * this.m_u.x, a * this.m_impulse * this.m_u.y)
    };
    f.prototype.GetReactionTorque = function() {
        return 0
    };
    f.prototype.GetLength = function() {
        return this.m_length
    };
    f.prototype.SetLength = function(a) {
        void 0 === a && (a = 0);
        this.m_length = a
    };
    f.prototype.GetFrequency = function() {
        return this.m_frequencyHz
    };
    f.prototype.SetFrequency = function(a) {
        void 0 === a && (a = 0);
        this.m_frequencyHz = a
    };
    f.prototype.GetDampingRatio = function() {
        return this.m_dampingRatio
    };
    f.prototype.SetDampingRatio = function(a) {
        void 0 ===
        a && (a = 0);
        this.m_dampingRatio = a
    };
    f.prototype.b2DistanceJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchor1.SetV(a.localAnchorA);
        this.m_localAnchor2.SetV(a.localAnchorB);
        this.m_length = a.length;
        this.m_frequencyHz = a.frequencyHz;
        this.m_dampingRatio = a.dampingRatio;
        this.m_bias = this.m_gamma = this.m_impulse = 0
    };
    f.prototype.InitVelocityConstraints = function(a) {
        var b, d = 0, e = this.m_bodyA, f = this.m_bodyB;
        b = e.m_xf.R;
        var g = this.m_localAnchor1.x - e.m_sweep.localCenter.x, k = this.m_localAnchor1.y - e.m_sweep.localCenter.y,
        d = b.col1.x * g + b.col2.x * k, k = b.col1.y * g + b.col2.y * k, g = d;
        b = f.m_xf.R;
        var h = this.m_localAnchor2.x - f.m_sweep.localCenter.x, q = this.m_localAnchor2.y - f.m_sweep.localCenter.y, d = b.col1.x * h + b.col2.x * q, q = b.col1.y * h + b.col2.y * q, h = d;
        this.m_u.x = f.m_sweep.c.x + h - e.m_sweep.c.x - g;
        this.m_u.y = f.m_sweep.c.y + q - e.m_sweep.c.y - k;
        d = Math.sqrt(this.m_u.x * this.m_u.x + this.m_u.y * this.m_u.y);
        d > c.b2_linearSlop ? this.m_u.Multiply(1 / d) : this.m_u.SetZero();
        b = g * this.m_u.y - k * this.m_u.x;
        var m = h * this.m_u.y - q * this.m_u.x;
        b = e.m_invMass + e.m_invI *
        b * b + f.m_invMass + f.m_invI * m * m;
        this.m_mass = 0 != b ? 1 / b : 0;
        if (0 < this.m_frequencyHz) {
            var d = d - this.m_length, m = 2 * Math.PI * this.m_frequencyHz, n = this.m_mass * m * m;
            this.m_gamma = a.dt * (2 * this.m_mass * this.m_dampingRatio * m + a.dt * n);
            this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0;
            this.m_bias = d * a.dt * n * this.m_gamma;
            this.m_mass = b + this.m_gamma;
            this.m_mass = 0 != this.m_mass ? 1 / this.m_mass : 0
        }
        a.warmStarting ? (this.m_impulse*=a.dtRatio, a = this.m_impulse * this.m_u.x, b = this.m_impulse * this.m_u.y, e.m_linearVelocity.x -= e.m_invMass * a, e.m_linearVelocity.y -=
        e.m_invMass * b, e.m_angularVelocity -= e.m_invI * (g * b - k * a), f.m_linearVelocity.x += f.m_invMass * a, f.m_linearVelocity.y += f.m_invMass * b, f.m_angularVelocity += f.m_invI * (h * b - q * a)) : this.m_impulse = 0
    };
    f.prototype.SolveVelocityConstraints = function() {
        var a, b = this.m_bodyA, c = this.m_bodyB;
        a = b.m_xf.R;
        var d = this.m_localAnchor1.x - b.m_sweep.localCenter.x, e = this.m_localAnchor1.y - b.m_sweep.localCenter.y, f = a.col1.x * d + a.col2.x * e, e = a.col1.y * d + a.col2.y * e, d = f;
        a = c.m_xf.R;
        var g = this.m_localAnchor2.x - c.m_sweep.localCenter.x, k = this.m_localAnchor2.y -
        c.m_sweep.localCenter.y, f = a.col1.x * g + a.col2.x * k, k = a.col1.y * g + a.col2.y * k, g = f, f =- this.m_mass * (this.m_u.x * (c.m_linearVelocity.x +- c.m_angularVelocity * k - (b.m_linearVelocity.x +- b.m_angularVelocity * e)) + this.m_u.y * (c.m_linearVelocity.y + c.m_angularVelocity * g - (b.m_linearVelocity.y + b.m_angularVelocity * d)) + this.m_bias + this.m_gamma * this.m_impulse);
        this.m_impulse += f;
        a = f * this.m_u.x;
        f*=this.m_u.y;
        b.m_linearVelocity.x -= b.m_invMass * a;
        b.m_linearVelocity.y -= b.m_invMass * f;
        b.m_angularVelocity -= b.m_invI * (d * f - e * a);
        c.m_linearVelocity.x +=
        c.m_invMass * a;
        c.m_linearVelocity.y += c.m_invMass * f;
        c.m_angularVelocity += c.m_invI * (g * f - k * a)
    };
    f.prototype.SolvePositionConstraints = function() {
        var a;
        if (0 < this.m_frequencyHz)
            return !0;
        var b = this.m_bodyA, d = this.m_bodyB;
        a = b.m_xf.R;
        var e = this.m_localAnchor1.x - b.m_sweep.localCenter.x, f = this.m_localAnchor1.y - b.m_sweep.localCenter.y, g = a.col1.x * e + a.col2.x * f, f = a.col1.y * e + a.col2.y * f, e = g;
        a = d.m_xf.R;
        var h = this.m_localAnchor2.x - d.m_sweep.localCenter.x, u = this.m_localAnchor2.y - d.m_sweep.localCenter.y, g = a.col1.x * h + a.col2.x *
        u, u = a.col1.y * h + a.col2.y * u, h = g, g = d.m_sweep.c.x + h - b.m_sweep.c.x - e, q = d.m_sweep.c.y + u - b.m_sweep.c.y - f;
        a = Math.sqrt(g * g + q * q);
        g/=a;
        q/=a;
        a -= this.m_length;
        a = k.Clamp(a, - c.b2_maxLinearCorrection, c.b2_maxLinearCorrection);
        var m =- this.m_mass * a;
        this.m_u.Set(g, q);
        g = m * this.m_u.x;
        q = m * this.m_u.y;
        b.m_sweep.c.x -= b.m_invMass * g;
        b.m_sweep.c.y -= b.m_invMass * q;
        b.m_sweep.a -= b.m_invI * (e * q - f * g);
        d.m_sweep.c.x += d.m_invMass * g;
        d.m_sweep.c.y += d.m_invMass * q;
        d.m_sweep.a += d.m_invI * (h * q - u * g);
        b.SynchronizeTransform();
        d.SynchronizeTransform();
        return k.Abs(a) < c.b2_linearSlop
    };
    Box2D.inherit(g, Box2D.Dynamics.Joints.b2JointDef);
    g.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    g.b2DistanceJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.localAnchorA = new d;
        this.localAnchorB = new d
    };
    g.prototype.b2DistanceJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_distanceJoint;
        this.length = 1;
        this.dampingRatio = this.frequencyHz = 0
    };
    g.prototype.Initialize = function(a, b, c, d) {
        this.bodyA =
        a;
        this.bodyB = b;
        this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c));
        this.localAnchorB.SetV(this.bodyB.GetLocalPoint(d));
        a = d.x - c.x;
        c = d.y - c.y;
        this.length = Math.sqrt(a * a + c * c);
        this.dampingRatio = this.frequencyHz = 0
    };
    Box2D.inherit(h, Box2D.Dynamics.Joints.b2Joint);
    h.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    h.b2FrictionJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_localAnchorA = new d;
        this.m_localAnchorB = new d;
        this.m_linearMass = new a;
        this.m_linearImpulse =
        new d
    };
    h.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)
    };
    h.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)
    };
    h.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * this.m_linearImpulse.x, a * this.m_linearImpulse.y)
    };
    h.prototype.GetReactionTorque = function(a) {
        void 0 === a && (a = 0);
        return a * this.m_angularImpulse
    };
    h.prototype.SetMaxForce = function(a) {
        void 0 === a && (a = 0);
        this.m_maxForce = a
    };
    h.prototype.GetMaxForce = function() {
        return this.m_maxForce
    };
    h.prototype.SetMaxTorque = function(a) {
        void 0 === a && (a = 0);
        this.m_maxTorque = a
    };
    h.prototype.GetMaxTorque = function() {
        return this.m_maxTorque
    };
    h.prototype.b2FrictionJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchorA.SetV(a.localAnchorA);
        this.m_localAnchorB.SetV(a.localAnchorB);
        this.m_linearMass.SetZero();
        this.m_angularMass = 0;
        this.m_linearImpulse.SetZero();
        this.m_angularImpulse = 0;
        this.m_maxForce = a.maxForce;
        this.m_maxTorque = a.maxTorque
    };
    h.prototype.InitVelocityConstraints = function(b) {
        var c,
        d = 0, e = this.m_bodyA, f = this.m_bodyB;
        c = e.m_xf.R;
        var g = this.m_localAnchorA.x - e.m_sweep.localCenter.x, k = this.m_localAnchorA.y - e.m_sweep.localCenter.y, d = c.col1.x * g + c.col2.x * k, k = c.col1.y * g + c.col2.y * k, g = d;
        c = f.m_xf.R;
        var h = this.m_localAnchorB.x - f.m_sweep.localCenter.x, q = this.m_localAnchorB.y - f.m_sweep.localCenter.y, d = c.col1.x * h + c.col2.x * q, q = c.col1.y * h + c.col2.y * q, h = d;
        c = e.m_invMass;
        var d = f.m_invMass, m = e.m_invI, n = f.m_invI, p = new a;
        p.col1.x = c + d;
        p.col2.x = 0;
        p.col1.y = 0;
        p.col2.y = c + d;
        p.col1.x += m * k * k;
        p.col2.x +=- m * g *
        k;
        p.col1.y +=- m * g * k;
        p.col2.y += m * g * g;
        p.col1.x += n * q * q;
        p.col2.x +=- n * h * q;
        p.col1.y +=- n * h * q;
        p.col2.y += n * h * h;
        p.GetInverse(this.m_linearMass);
        this.m_angularMass = m + n;
        0 < this.m_angularMass && (this.m_angularMass = 1 / this.m_angularMass);
        b.warmStarting ? (this.m_linearImpulse.x*=b.dtRatio, this.m_linearImpulse.y*=b.dtRatio, this.m_angularImpulse*=b.dtRatio, b = this.m_linearImpulse, e.m_linearVelocity.x -= c * b.x, e.m_linearVelocity.y -= c * b.y, e.m_angularVelocity -= m * (g * b.y - k * b.x + this.m_angularImpulse), f.m_linearVelocity.x += d * b.x,
        f.m_linearVelocity.y += d * b.y, f.m_angularVelocity += n * (h * b.y - q * b.x + this.m_angularImpulse)) : (this.m_linearImpulse.SetZero(), this.m_angularImpulse = 0)
    };
    h.prototype.SolveVelocityConstraints = function(a) {
        var b, c = 0, e = this.m_bodyA, f = this.m_bodyB, g = e.m_linearVelocity, h = e.m_angularVelocity, u = f.m_linearVelocity, q = f.m_angularVelocity, m = e.m_invMass, n = f.m_invMass, p = e.m_invI, v = f.m_invI;
        b = e.m_xf.R;
        var t = this.m_localAnchorA.x - e.m_sweep.localCenter.x, w = this.m_localAnchorA.y - e.m_sweep.localCenter.y, c = b.col1.x * t + b.col2.x *
        w, w = b.col1.y * t + b.col2.y * w, t = c;
        b = f.m_xf.R;
        var x = this.m_localAnchorB.x - f.m_sweep.localCenter.x, y = this.m_localAnchorB.y - f.m_sweep.localCenter.y, c = b.col1.x * x + b.col2.x * y, y = b.col1.y * x + b.col2.y * y, x = c, c =- this.m_angularMass * (q - h), B = this.m_angularImpulse;
        b = a.dt * this.m_maxTorque;
        this.m_angularImpulse = k.Clamp(this.m_angularImpulse + c, - b, b);
        c = this.m_angularImpulse - B;
        h -= p * c;
        q += v * c;
        b = k.MulMV(this.m_linearMass, new d( - (u.x - q * y - g.x + h * w), - (u.y + q * x - g.y - h * t)));
        c = this.m_linearImpulse.Copy();
        this.m_linearImpulse.Add(b);
        b = a.dt * this.m_maxForce;
        this.m_linearImpulse.LengthSquared() > b * b && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.Multiply(b));
        b = k.SubtractVV(this.m_linearImpulse, c);
        g.x -= m * b.x;
        g.y -= m * b.y;
        h -= p * (t * b.y - w * b.x);
        u.x += n * b.x;
        u.y += n * b.y;
        q += v * (x * b.y - y * b.x);
        e.m_angularVelocity = h;
        f.m_angularVelocity = q
    };
    h.prototype.SolvePositionConstraints = function() {
        return !0
    };
    Box2D.inherit(m, Box2D.Dynamics.Joints.b2JointDef);
    m.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    m.b2FrictionJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,
        arguments);
        this.localAnchorA = new d;
        this.localAnchorB = new d
    };
    m.prototype.b2FrictionJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_frictionJoint;
        this.maxTorque = this.maxForce = 0
    };
    m.prototype.Initialize = function(a, b, c) {
        this.bodyA = a;
        this.bodyB = b;
        this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c));
        this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c))
    };
    Box2D.inherit(n, Box2D.Dynamics.Joints.b2Joint);
    n.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    n.b2GearJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,
        arguments);
        this.m_groundAnchor1 = new d;
        this.m_groundAnchor2 = new d;
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 = new d;
        this.m_J = new t
    };
    n.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    n.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    n.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * this.m_impulse * this.m_J.linearB.x, a * this.m_impulse * this.m_J.linearB.y)
    };
    n.prototype.GetReactionTorque = function(a) {
        void 0 ===
        a && (a = 0);
        var b = this.m_bodyB.m_xf.R, c = this.m_localAnchor1.x - this.m_bodyB.m_sweep.localCenter.x, d = this.m_localAnchor1.y - this.m_bodyB.m_sweep.localCenter.y, e = b.col1.x * c + b.col2.x * d, d = b.col1.y * c + b.col2.y * d;
        return a * (this.m_impulse * this.m_J.angularB - e * this.m_impulse * this.m_J.linearB.y + d * this.m_impulse * this.m_J.linearB.x)
    };
    n.prototype.GetRatio = function() {
        return this.m_ratio
    };
    n.prototype.SetRatio = function(a) {
        void 0 === a && (a = 0);
        this.m_ratio = a
    };
    n.prototype.b2GearJoint = function(a) {
        this.__super.b2Joint.call(this,
        a);
        var b = parseInt(a.joint1.m_type), c = parseInt(a.joint2.m_type);
        this.m_prismatic2 = this.m_revolute2 = this.m_prismatic1 = this.m_revolute1 = null;
        var d = 0, e = 0;
        this.m_ground1 = a.joint1.GetBodyA();
        this.m_bodyA = a.joint1.GetBodyB();
        b == v.e_revoluteJoint ? (this.m_revolute1 = a.joint1 instanceof F ? a.joint1 : null, this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1), this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2), d = this.m_revolute1.GetJointAngle()) : (this.m_prismatic1 = a.joint1 instanceof E ? a.joint1 : null,
        this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1), this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2), d = this.m_prismatic1.GetJointTranslation());
        this.m_ground2 = a.joint2.GetBodyA();
        this.m_bodyB = a.joint2.GetBodyB();
        c == v.e_revoluteJoint ? (this.m_revolute2 = a.joint2 instanceof F ? a.joint2 : null, this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1), this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2), e = this.m_revolute2.GetJointAngle()) : (this.m_prismatic2 = a.joint2 instanceof E ? a.joint2 :
        null, this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1), this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2), e = this.m_prismatic2.GetJointTranslation());
        this.m_ratio = a.ratio;
        this.m_constant = d + this.m_ratio * e;
        this.m_impulse = 0
    };
    n.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_ground1, c = this.m_ground2, d = this.m_bodyA, e = this.m_bodyB, f = 0, g = 0, k = 0, h = 0, m = 0, n = 0;
        this.m_J.SetZero();
        this.m_revolute1 ? (this.m_J.angularA =- 1, n += d.m_invI) : (b = b.m_xf.R, g = this.m_prismatic1.m_localXAxis1, f = b.col1.x *
        g.x + b.col2.x * g.y, g = b.col1.y * g.x + b.col2.y * g.y, b = d.m_xf.R, k = this.m_localAnchor1.x - d.m_sweep.localCenter.x, h = this.m_localAnchor1.y - d.m_sweep.localCenter.y, m = b.col1.x * k + b.col2.x * h, h = b.col1.y * k + b.col2.y * h, k = m * g - h * f, this.m_J.linearA.Set( - f, - g), this.m_J.angularA =- k, n += d.m_invMass + d.m_invI * k * k);
        this.m_revolute2 ? (this.m_J.angularB =- this.m_ratio, n += this.m_ratio * this.m_ratio * e.m_invI) : (b = c.m_xf.R, g = this.m_prismatic2.m_localXAxis1, f = b.col1.x * g.x + b.col2.x * g.y, g = b.col1.y * g.x + b.col2.y * g.y, b = e.m_xf.R, k = this.m_localAnchor2.x -
        e.m_sweep.localCenter.x, h = this.m_localAnchor2.y - e.m_sweep.localCenter.y, m = b.col1.x * k + b.col2.x * h, h = b.col1.y * k + b.col2.y * h, k = m * g - h * f, this.m_J.linearB.Set( - this.m_ratio * f, - this.m_ratio * g), this.m_J.angularB =- this.m_ratio * k, n += this.m_ratio * this.m_ratio * (e.m_invMass + e.m_invI * k * k));
        this.m_mass = 0 < n ? 1 / n : 0;
        a.warmStarting ? (d.m_linearVelocity.x += d.m_invMass * this.m_impulse * this.m_J.linearA.x, d.m_linearVelocity.y += d.m_invMass * this.m_impulse * this.m_J.linearA.y, d.m_angularVelocity += d.m_invI * this.m_impulse * this.m_J.angularA,
        e.m_linearVelocity.x += e.m_invMass * this.m_impulse * this.m_J.linearB.x, e.m_linearVelocity.y += e.m_invMass * this.m_impulse * this.m_J.linearB.y, e.m_angularVelocity += e.m_invI * this.m_impulse * this.m_J.angularB) : this.m_impulse = 0
    };
    n.prototype.SolveVelocityConstraints = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c =- this.m_mass * this.m_J.Compute(a.m_linearVelocity, a.m_angularVelocity, b.m_linearVelocity, b.m_angularVelocity);
        this.m_impulse += c;
        a.m_linearVelocity.x += a.m_invMass * c * this.m_J.linearA.x;
        a.m_linearVelocity.y +=
        a.m_invMass * c * this.m_J.linearA.y;
        a.m_angularVelocity += a.m_invI * c * this.m_J.angularA;
        b.m_linearVelocity.x += b.m_invMass * c * this.m_J.linearB.x;
        b.m_linearVelocity.y += b.m_invMass * c * this.m_J.linearB.y;
        b.m_angularVelocity += b.m_invI * c * this.m_J.angularB
    };
    n.prototype.SolvePositionConstraints = function() {
        var a = this.m_bodyA, b = this.m_bodyB, d = 0, e = 0, d = this.m_revolute1 ? this.m_revolute1.GetJointAngle(): this.m_prismatic1.GetJointTranslation(), e = this.m_revolute2 ? this.m_revolute2.GetJointAngle(): this.m_prismatic2.GetJointTranslation(),
        d =- this.m_mass * (this.m_constant - (d + this.m_ratio * e));
        a.m_sweep.c.x += a.m_invMass * d * this.m_J.linearA.x;
        a.m_sweep.c.y += a.m_invMass * d * this.m_J.linearA.y;
        a.m_sweep.a += a.m_invI * d * this.m_J.angularA;
        b.m_sweep.c.x += b.m_invMass * d * this.m_J.linearB.x;
        b.m_sweep.c.y += b.m_invMass * d * this.m_J.linearB.y;
        b.m_sweep.a += b.m_invI * d * this.m_J.angularB;
        a.SynchronizeTransform();
        b.SynchronizeTransform();
        return 0 < c.b2_linearSlop
    };
    Box2D.inherit(w, Box2D.Dynamics.Joints.b2JointDef);
    w.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    w.b2GearJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments)
    };
    w.prototype.b2GearJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_gearJoint;
        this.joint2 = this.joint1 = null;
        this.ratio = 1
    };
    t.b2Jacobian = function() {
        this.linearA = new d;
        this.linearB = new d
    };
    t.prototype.SetZero = function() {
        this.linearA.SetZero();
        this.angularA = 0;
        this.linearB.SetZero();
        this.angularB = 0
    };
    t.prototype.Set = function(a, b, c, d) {
        void 0 === b && (b = 0);
        void 0 === d && (d = 0);
        this.linearA.SetV(a);
        this.angularA =
        b;
        this.linearB.SetV(c);
        this.angularB = d
    };
    t.prototype.Compute = function(a, b, c, d) {
        void 0 === b && (b = 0);
        void 0 === d && (d = 0);
        return this.linearA.x * a.x + this.linearA.y * a.y + this.angularA * b + (this.linearB.x * c.x + this.linearB.y * c.y) + this.angularB * d
    };
    v.b2Joint = function() {
        this.m_edgeA = new y;
        this.m_edgeB = new y;
        this.m_localCenterA = new d;
        this.m_localCenterB = new d
    };
    v.prototype.GetType = function() {
        return this.m_type
    };
    v.prototype.GetAnchorA = function() {
        return null
    };
    v.prototype.GetAnchorB = function() {
        return null
    };
    v.prototype.GetReactionForce =
    function() {
        return null
    };
    v.prototype.GetReactionTorque = function() {
        return 0
    };
    v.prototype.GetBodyA = function() {
        return this.m_bodyA
    };
    v.prototype.GetBodyB = function() {
        return this.m_bodyB
    };
    v.prototype.GetNext = function() {
        return this.m_next
    };
    v.prototype.GetUserData = function() {
        return this.m_userData
    };
    v.prototype.SetUserData = function(a) {
        this.m_userData = a
    };
    v.prototype.IsActive = function() {
        return this.m_bodyA.IsActive() && this.m_bodyB.IsActive()
    };
    v.Create = function(a) {
        var b = null;
        switch (a.type) {
        case v.e_distanceJoint:
            b =
            new f(a instanceof g ? a : null);
            break;
        case v.e_mouseJoint:
            b = new B(a instanceof H ? a : null);
            break;
        case v.e_prismaticJoint:
            b = new E(a instanceof G ? a : null);
            break;
        case v.e_revoluteJoint:
            b = new F(a instanceof I ? a : null);
            break;
        case v.e_pulleyJoint:
            b = new D(a instanceof K ? a : null);
            break;
        case v.e_gearJoint:
            b = new n(a instanceof w ? a : null);
            break;
        case v.e_lineJoint:
            b = new p(a instanceof C ? a : null);
            break;
        case v.e_weldJoint:
            b = new O(a instanceof L ? a : null);
            break;
        case v.e_frictionJoint:
            b = new h(a instanceof m ? a : null)
        }
        return b
    };
    v.Destroy = function() {};
    v.prototype.b2Joint = function(a) {
        c.b2Assert(a.bodyA != a.bodyB);
        this.m_type = a.type;
        this.m_next = this.m_prev = null;
        this.m_bodyA = a.bodyA;
        this.m_bodyB = a.bodyB;
        this.m_collideConnected = a.collideConnected;
        this.m_islandFlag=!1;
        this.m_userData = a.userData
    };
    v.prototype.InitVelocityConstraints = function() {};
    v.prototype.SolveVelocityConstraints = function() {};
    v.prototype.FinalizeVelocityConstraints = function() {};
    v.prototype.SolvePositionConstraints = function() {
        return !1
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Joints.b2Joint.e_unknownJoint =
        0;
        Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint = 1;
        Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint = 2;
        Box2D.Dynamics.Joints.b2Joint.e_distanceJoint = 3;
        Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint = 4;
        Box2D.Dynamics.Joints.b2Joint.e_mouseJoint = 5;
        Box2D.Dynamics.Joints.b2Joint.e_gearJoint = 6;
        Box2D.Dynamics.Joints.b2Joint.e_lineJoint = 7;
        Box2D.Dynamics.Joints.b2Joint.e_weldJoint = 8;
        Box2D.Dynamics.Joints.b2Joint.e_frictionJoint = 9;
        Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit = 0;
        Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit =
        1;
        Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit = 2;
        Box2D.Dynamics.Joints.b2Joint.e_equalLimits = 3
    });
    x.b2JointDef = function() {};
    x.prototype.b2JointDef = function() {
        this.type = v.e_unknownJoint;
        this.bodyB = this.bodyA = this.userData = null;
        this.collideConnected=!1
    };
    y.b2JointEdge = function() {};
    Box2D.inherit(p, Box2D.Dynamics.Joints.b2Joint);
    p.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    p.b2LineJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 =
        new d;
        this.m_localXAxis1 = new d;
        this.m_localYAxis1 = new d;
        this.m_axis = new d;
        this.m_perp = new d;
        this.m_K = new a;
        this.m_impulse = new d
    };
    p.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    p.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    p.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x), a * (this.m_impulse.x * this.m_perp.y +
        (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y))
    };
    p.prototype.GetReactionTorque = function(a) {
        void 0 === a && (a = 0);
        return a * this.m_impulse.y
    };
    p.prototype.GetJointTranslation = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c = a.GetWorldPoint(this.m_localAnchor1), d = b.GetWorldPoint(this.m_localAnchor2), b = d.x - c.x, c = d.y - c.y, a = a.GetWorldVector(this.m_localXAxis1);
        return a.x * b + a.y * c
    };
    p.prototype.GetJointSpeed = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c;
        c = a.m_xf.R;
        var d = this.m_localAnchor1.x - a.m_sweep.localCenter.x,
        e = this.m_localAnchor1.y - a.m_sweep.localCenter.y, f = c.col1.x * d + c.col2.x * e, e = c.col1.y * d + c.col2.y * e, d = f;
        c = b.m_xf.R;
        var g = this.m_localAnchor2.x - b.m_sweep.localCenter.x, k = this.m_localAnchor2.y - b.m_sweep.localCenter.y, f = c.col1.x * g + c.col2.x * k, k = c.col1.y * g + c.col2.y * k, g = f;
        c = b.m_sweep.c.x + g - (a.m_sweep.c.x + d);
        var f = b.m_sweep.c.y + k - (a.m_sweep.c.y + e), h = a.GetWorldVector(this.m_localXAxis1), m = a.m_linearVelocity, n = b.m_linearVelocity, a = a.m_angularVelocity, b = b.m_angularVelocity;
        return c*-a * h.y + f * a * h.x + (h.x * (n.x +- b *
        k - m.x - - a * e) + h.y * (n.y + b * g - m.y - a * d))
    };
    p.prototype.IsLimitEnabled = function() {
        return this.m_enableLimit
    };
    p.prototype.EnableLimit = function(a) {
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_enableLimit = a
    };
    p.prototype.GetLowerLimit = function() {
        return this.m_lowerTranslation
    };
    p.prototype.GetUpperLimit = function() {
        return this.m_upperTranslation
    };
    p.prototype.SetLimits = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_lowerTranslation = a;
        this.m_upperTranslation =
        b
    };
    p.prototype.IsMotorEnabled = function() {
        return this.m_enableMotor
    };
    p.prototype.EnableMotor = function(a) {
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_enableMotor = a
    };
    p.prototype.SetMotorSpeed = function(a) {
        void 0 === a && (a = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_motorSpeed = a
    };
    p.prototype.GetMotorSpeed = function() {
        return this.m_motorSpeed
    };
    p.prototype.SetMaxMotorForce = function(a) {
        void 0 === a && (a = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_maxMotorForce =
        a
    };
    p.prototype.GetMaxMotorForce = function() {
        return this.m_maxMotorForce
    };
    p.prototype.GetMotorForce = function() {
        return this.m_motorImpulse
    };
    p.prototype.b2LineJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchor1.SetV(a.localAnchorA);
        this.m_localAnchor2.SetV(a.localAnchorB);
        this.m_localXAxis1.SetV(a.localAxisA);
        this.m_localYAxis1.x =- this.m_localXAxis1.y;
        this.m_localYAxis1.y = this.m_localXAxis1.x;
        this.m_impulse.SetZero();
        this.m_motorImpulse = this.m_motorMass = 0;
        this.m_lowerTranslation = a.lowerTranslation;
        this.m_upperTranslation = a.upperTranslation;
        this.m_maxMotorForce = a.maxMotorForce;
        this.m_motorSpeed = a.motorSpeed;
        this.m_enableLimit = a.enableLimit;
        this.m_enableMotor = a.enableMotor;
        this.m_limitState = v.e_inactiveLimit;
        this.m_axis.SetZero();
        this.m_perp.SetZero()
    };
    p.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_bodyA, d = this.m_bodyB, e, f = 0;
        this.m_localCenterA.SetV(b.GetLocalCenter());
        this.m_localCenterB.SetV(d.GetLocalCenter());
        var g = b.GetTransform();
        d.GetTransform();
        e = b.m_xf.R;
        var h = this.m_localAnchor1.x -
        this.m_localCenterA.x, u = this.m_localAnchor1.y - this.m_localCenterA.y, f = e.col1.x * h + e.col2.x * u, u = e.col1.y * h + e.col2.y * u, h = f;
        e = d.m_xf.R;
        var q = this.m_localAnchor2.x - this.m_localCenterB.x, m = this.m_localAnchor2.y - this.m_localCenterB.y, f = e.col1.x * q + e.col2.x * m, m = e.col1.y * q + e.col2.y * m, q = f;
        e = d.m_sweep.c.x + q - b.m_sweep.c.x - h;
        f = d.m_sweep.c.y + m - b.m_sweep.c.y - u;
        this.m_invMassA = b.m_invMass;
        this.m_invMassB = d.m_invMass;
        this.m_invIA = b.m_invI;
        this.m_invIB = d.m_invI;
        this.m_axis.SetV(k.MulMV(g.R, this.m_localXAxis1));
        this.m_a1 =
        (e + h) * this.m_axis.y - (f + u) * this.m_axis.x;
        this.m_a2 = q * this.m_axis.y - m * this.m_axis.x;
        this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
        this.m_motorMass = this.m_motorMass > Number.MIN_VALUE ? 1 / this.m_motorMass : 0;
        this.m_perp.SetV(k.MulMV(g.R, this.m_localYAxis1));
        this.m_s1 = (e + h) * this.m_perp.y - (f + u) * this.m_perp.x;
        this.m_s2 = q * this.m_perp.y - m * this.m_perp.x;
        g = this.m_invMassA;
        h = this.m_invMassB;
        u = this.m_invIA;
        q = this.m_invIB;
        this.m_K.col1.x = g + h + u * this.m_s1 *
        this.m_s1 + q * this.m_s2 * this.m_s2;
        this.m_K.col1.y = u * this.m_s1 * this.m_a1 + q * this.m_s2 * this.m_a2;
        this.m_K.col2.x = this.m_K.col1.y;
        this.m_K.col2.y = g + h + u * this.m_a1 * this.m_a1 + q * this.m_a2 * this.m_a2;
        this.m_enableLimit ? (e = this.m_axis.x * e + this.m_axis.y * f, k.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * c.b2_linearSlop ? this.m_limitState = v.e_equalLimits : e <= this.m_lowerTranslation ? this.m_limitState != v.e_atLowerLimit && (this.m_limitState = v.e_atLowerLimit, this.m_impulse.y = 0) : e >= this.m_upperTranslation ? this.m_limitState !=
        v.e_atUpperLimit && (this.m_limitState = v.e_atUpperLimit, this.m_impulse.y = 0) : (this.m_limitState = v.e_inactiveLimit, this.m_impulse.y = 0)) : this.m_limitState = v.e_inactiveLimit;
        !1 == this.m_enableMotor && (this.m_motorImpulse = 0);
        a.warmStarting ? (this.m_impulse.x*=a.dtRatio, this.m_impulse.y*=a.dtRatio, this.m_motorImpulse*=a.dtRatio, a = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x, e = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y, f = this.m_impulse.x *
        this.m_s1 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a1, g = this.m_impulse.x * this.m_s2 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a2, b.m_linearVelocity.x -= this.m_invMassA * a, b.m_linearVelocity.y -= this.m_invMassA * e, b.m_angularVelocity -= this.m_invIA * f, d.m_linearVelocity.x += this.m_invMassB * a, d.m_linearVelocity.y += this.m_invMassB * e, d.m_angularVelocity += this.m_invIB * g) : (this.m_impulse.SetZero(), this.m_motorImpulse = 0)
    };
    p.prototype.SolveVelocityConstraints = function(a) {
        var b = this.m_bodyA, c = this.m_bodyB,
        e = b.m_linearVelocity, f = b.m_angularVelocity, g = c.m_linearVelocity, h = c.m_angularVelocity, u = 0, q = 0, m = 0, n = 0;
        this.m_enableMotor && this.m_limitState != v.e_equalLimits && (n = this.m_motorMass * (this.m_motorSpeed - (this.m_axis.x * (g.x - e.x) + this.m_axis.y * (g.y - e.y) + this.m_a2 * h - this.m_a1 * f)), u = this.m_motorImpulse, q = a.dt * this.m_maxMotorForce, this.m_motorImpulse = k.Clamp(this.m_motorImpulse + n, - q, q), n = this.m_motorImpulse - u, u = n * this.m_axis.x, q = n * this.m_axis.y, m = n * this.m_a1, n*=this.m_a2, e.x -= this.m_invMassA * u, e.y -= this.m_invMassA *
        q, f -= this.m_invIA * m, g.x += this.m_invMassB * u, g.y += this.m_invMassB * q, h += this.m_invIB * n);
        q = this.m_perp.x * (g.x - e.x) + this.m_perp.y * (g.y - e.y) + this.m_s2 * h - this.m_s1 * f;
        this.m_enableLimit && this.m_limitState != v.e_inactiveLimit ? (m = this.m_axis.x * (g.x - e.x) + this.m_axis.y * (g.y - e.y) + this.m_a2 * h - this.m_a1 * f, u = this.m_impulse.Copy(), a = this.m_K.Solve(new d, - q, - m), this.m_impulse.Add(a), this.m_limitState == v.e_atLowerLimit ? this.m_impulse.y = k.Max(this.m_impulse.y, 0) : this.m_limitState == v.e_atUpperLimit && (this.m_impulse.y =
        k.Min(this.m_impulse.y, 0)), q =- q - (this.m_impulse.y - u.y) * this.m_K.col2.x, m = 0 != this.m_K.col1.x ? q / this.m_K.col1.x + u.x : u.x, this.m_impulse.x = m, a.x = this.m_impulse.x - u.x, a.y = this.m_impulse.y - u.y, u = a.x * this.m_perp.x + a.y * this.m_axis.x, q = a.x * this.m_perp.y + a.y * this.m_axis.y, m = a.x * this.m_s1 + a.y * this.m_a1, n = a.x * this.m_s2 + a.y * this.m_a2) : (a = 0 != this.m_K.col1.x?-q / this.m_K.col1.x : 0, this.m_impulse.x += a, u = a * this.m_perp.x, q = a * this.m_perp.y, m = a * this.m_s1, n = a * this.m_s2);
        e.x -= this.m_invMassA * u;
        e.y -= this.m_invMassA * q;
        f -=
        this.m_invIA * m;
        g.x += this.m_invMassB * u;
        g.y += this.m_invMassB * q;
        h += this.m_invIB * n;
        b.m_linearVelocity.SetV(e);
        b.m_angularVelocity = f;
        c.m_linearVelocity.SetV(g);
        c.m_angularVelocity = h
    };
    p.prototype.SolvePositionConstraints = function() {
        var b = this.m_bodyA, e = this.m_bodyB, f = b.m_sweep.c, g = b.m_sweep.a, h = e.m_sweep.c, m = e.m_sweep.a, n, u = 0, q = 0, p = 0, v = 0, t = 0, w = 0, q=!1, x = 0, y = a.FromAngle(g), p = a.FromAngle(m);
        n = y;
        var w = this.m_localAnchor1.x - this.m_localCenterA.x, B = this.m_localAnchor1.y - this.m_localCenterA.y, u = n.col1.x * w + n.col2.x *
        B, B = n.col1.y * w + n.col2.y * B, w = u;
        n = p;
        p = this.m_localAnchor2.x - this.m_localCenterB.x;
        v = this.m_localAnchor2.y - this.m_localCenterB.y;
        u = n.col1.x * p + n.col2.x * v;
        v = n.col1.y * p + n.col2.y * v;
        p = u;
        n = h.x + p - f.x - w;
        u = h.y + v - f.y - B;
        if (this.m_enableLimit) {
            this.m_axis = k.MulMV(y, this.m_localXAxis1);
            this.m_a1 = (n + w) * this.m_axis.y - (u + B) * this.m_axis.x;
            this.m_a2 = p * this.m_axis.y - v * this.m_axis.x;
            var C = this.m_axis.x * n + this.m_axis.y * u;
            k.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * c.b2_linearSlop ? (x = k.Clamp(C, - c.b2_maxLinearCorrection,
            c.b2_maxLinearCorrection), t = k.Abs(C), q=!0) : C <= this.m_lowerTranslation ? (x = k.Clamp(C - this.m_lowerTranslation + c.b2_linearSlop, - c.b2_maxLinearCorrection, 0), t = this.m_lowerTranslation - C, q=!0) : C >= this.m_upperTranslation && (x = k.Clamp(C - this.m_upperTranslation + c.b2_linearSlop, 0, c.b2_maxLinearCorrection), t = C - this.m_upperTranslation, q=!0)
        }
        this.m_perp = k.MulMV(y, this.m_localYAxis1);
        this.m_s1 = (n + w) * this.m_perp.y - (u + B) * this.m_perp.x;
        this.m_s2 = p * this.m_perp.y - v * this.m_perp.x;
        y = new d;
        B = this.m_perp.x * n + this.m_perp.y *
        u;
        t = k.Max(t, k.Abs(B));
        w = 0;
        q ? (q = this.m_invMassA, p = this.m_invMassB, v = this.m_invIA, n = this.m_invIB, this.m_K.col1.x = q + p + v * this.m_s1 * this.m_s1 + n * this.m_s2 * this.m_s2, this.m_K.col1.y = v * this.m_s1 * this.m_a1 + n * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = q + p + v * this.m_a1 * this.m_a1 + n * this.m_a2 * this.m_a2, this.m_K.Solve(y, - B, - x)) : (q = this.m_invMassA, p = this.m_invMassB, v = this.m_invIA, n = this.m_invIB, x = q + p + v * this.m_s1 * this.m_s1 + n * this.m_s2 * this.m_s2, y.x = 0 != x?-B / x : 0, y.y = 0);
        x = y.x * this.m_perp.x + y.y *
        this.m_axis.x;
        q = y.x * this.m_perp.y + y.y * this.m_axis.y;
        B = y.x * this.m_s1 + y.y * this.m_a1;
        y = y.x * this.m_s2 + y.y * this.m_a2;
        f.x -= this.m_invMassA * x;
        f.y -= this.m_invMassA * q;
        g -= this.m_invIA * B;
        h.x += this.m_invMassB * x;
        h.y += this.m_invMassB * q;
        m += this.m_invIB * y;
        b.m_sweep.a = g;
        e.m_sweep.a = m;
        b.SynchronizeTransform();
        e.SynchronizeTransform();
        return t <= c.b2_linearSlop && w <= c.b2_angularSlop
    };
    Box2D.inherit(C, Box2D.Dynamics.Joints.b2JointDef);
    C.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    C.b2LineJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,
        arguments);
        this.localAnchorA = new d;
        this.localAnchorB = new d;
        this.localAxisA = new d
    };
    C.prototype.b2LineJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_lineJoint;
        this.localAxisA.Set(1, 0);
        this.enableLimit=!1;
        this.upperTranslation = this.lowerTranslation = 0;
        this.enableMotor=!1;
        this.motorSpeed = this.maxMotorForce = 0
    };
    C.prototype.Initialize = function(a, b, c, d) {
        this.bodyA = a;
        this.bodyB = b;
        this.localAnchorA = this.bodyA.GetLocalPoint(c);
        this.localAnchorB = this.bodyB.GetLocalPoint(c);
        this.localAxisA =
        this.bodyA.GetLocalVector(d)
    };
    Box2D.inherit(B, Box2D.Dynamics.Joints.b2Joint);
    B.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    B.b2MouseJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.K = new a;
        this.K1 = new a;
        this.K2 = new a;
        this.m_localAnchor = new d;
        this.m_target = new d;
        this.m_impulse = new d;
        this.m_mass = new a;
        this.m_C = new d
    };
    B.prototype.GetAnchorA = function() {
        return this.m_target
    };
    B.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor)
    };
    B.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * this.m_impulse.x, a * this.m_impulse.y)
    };
    B.prototype.GetReactionTorque = function() {
        return 0
    };
    B.prototype.GetTarget = function() {
        return this.m_target
    };
    B.prototype.SetTarget = function(a) {
        !1 == this.m_bodyB.IsAwake() && this.m_bodyB.SetAwake(!0);
        this.m_target = a
    };
    B.prototype.GetMaxForce = function() {
        return this.m_maxForce
    };
    B.prototype.SetMaxForce = function(a) {
        void 0 === a && (a = 0);
        this.m_maxForce = a
    };
    B.prototype.GetFrequency = function() {
        return this.m_frequencyHz
    };
    B.prototype.SetFrequency = function(a) {
        void 0 === a && (a = 0);
        this.m_frequencyHz = a
    };
    B.prototype.GetDampingRatio = function() {
        return this.m_dampingRatio
    };
    B.prototype.SetDampingRatio = function(a) {
        void 0 === a && (a = 0);
        this.m_dampingRatio = a
    };
    B.prototype.b2MouseJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_target.SetV(a.target);
        var b = this.m_target.x - this.m_bodyB.m_xf.position.x, c = this.m_target.y - this.m_bodyB.m_xf.position.y, d = this.m_bodyB.m_xf.R;
        this.m_localAnchor.x = b * d.col1.x + c * d.col1.y;
        this.m_localAnchor.y =
        b * d.col2.x + c * d.col2.y;
        this.m_maxForce = a.maxForce;
        this.m_impulse.SetZero();
        this.m_frequencyHz = a.frequencyHz;
        this.m_dampingRatio = a.dampingRatio;
        this.m_gamma = this.m_beta = 0
    };
    B.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_bodyB, c = b.GetMass(), d = 2 * Math.PI * this.m_frequencyHz, e = c * d * d;
        this.m_gamma = a.dt * (2 * c * this.m_dampingRatio * d + a.dt * e);
        this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0;
        this.m_beta = a.dt * e * this.m_gamma;
        var e = b.m_xf.R, c = this.m_localAnchor.x - b.m_sweep.localCenter.x, d = this.m_localAnchor.y -
        b.m_sweep.localCenter.y, f = e.col1.x * c + e.col2.x * d, d = e.col1.y * c + e.col2.y * d, c = f, e = b.m_invMass, f = b.m_invI;
        this.K1.col1.x = e;
        this.K1.col2.x = 0;
        this.K1.col1.y = 0;
        this.K1.col2.y = e;
        this.K2.col1.x = f * d * d;
        this.K2.col2.x =- f * c * d;
        this.K2.col1.y =- f * c * d;
        this.K2.col2.y = f * c * c;
        this.K.SetM(this.K1);
        this.K.AddM(this.K2);
        this.K.col1.x += this.m_gamma;
        this.K.col2.y += this.m_gamma;
        this.K.GetInverse(this.m_mass);
        this.m_C.x = b.m_sweep.c.x + c - this.m_target.x;
        this.m_C.y = b.m_sweep.c.y + d - this.m_target.y;
        b.m_angularVelocity*=0.98;
        this.m_impulse.x*=
        a.dtRatio;
        this.m_impulse.y*=a.dtRatio;
        b.m_linearVelocity.x += e * this.m_impulse.x;
        b.m_linearVelocity.y += e * this.m_impulse.y;
        b.m_angularVelocity += f * (c * this.m_impulse.y - d * this.m_impulse.x)
    };
    B.prototype.SolveVelocityConstraints = function(a) {
        var b = this.m_bodyB, c, d = 0, e = 0;
        c = b.m_xf.R;
        var f = this.m_localAnchor.x - b.m_sweep.localCenter.x, g = this.m_localAnchor.y - b.m_sweep.localCenter.y, d = c.col1.x * f + c.col2.x * g, g = c.col1.y * f + c.col2.y * g, f = d, d = b.m_linearVelocity.x +- b.m_angularVelocity * g, k = b.m_linearVelocity.y + b.m_angularVelocity *
        f;
        c = this.m_mass;
        d = d + this.m_beta * this.m_C.x + this.m_gamma * this.m_impulse.x;
        e = k + this.m_beta * this.m_C.y + this.m_gamma * this.m_impulse.y;
        k =- (c.col1.x * d + c.col2.x * e);
        e =- (c.col1.y * d + c.col2.y * e);
        c = this.m_impulse.x;
        d = this.m_impulse.y;
        this.m_impulse.x += k;
        this.m_impulse.y += e;
        a = a.dt * this.m_maxForce;
        this.m_impulse.LengthSquared() > a * a && this.m_impulse.Multiply(a / this.m_impulse.Length());
        k = this.m_impulse.x - c;
        e = this.m_impulse.y - d;
        b.m_linearVelocity.x += b.m_invMass * k;
        b.m_linearVelocity.y += b.m_invMass * e;
        b.m_angularVelocity +=
        b.m_invI * (f * e - g * k)
    };
    B.prototype.SolvePositionConstraints = function() {
        return !0
    };
    Box2D.inherit(H, Box2D.Dynamics.Joints.b2JointDef);
    H.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    H.b2MouseJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.target = new d
    };
    H.prototype.b2MouseJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_mouseJoint;
        this.maxForce = 0;
        this.frequencyHz = 5;
        this.dampingRatio = 0.7
    };
    Box2D.inherit(E, Box2D.Dynamics.Joints.b2Joint);
    E.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    E.b2PrismaticJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 = new d;
        this.m_localXAxis1 = new d;
        this.m_localYAxis1 = new d;
        this.m_axis = new d;
        this.m_perp = new d;
        this.m_K = new b;
        this.m_impulse = new e
    };
    E.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    E.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    E.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), a * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y))
    };
    E.prototype.GetReactionTorque = function(a) {
        void 0 === a && (a = 0);
        return a * this.m_impulse.y
    };
    E.prototype.GetJointTranslation = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c = a.GetWorldPoint(this.m_localAnchor1), d = b.GetWorldPoint(this.m_localAnchor2), b = d.x - c.x,
        c = d.y - c.y, a = a.GetWorldVector(this.m_localXAxis1);
        return a.x * b + a.y * c
    };
    E.prototype.GetJointSpeed = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c;
        c = a.m_xf.R;
        var d = this.m_localAnchor1.x - a.m_sweep.localCenter.x, e = this.m_localAnchor1.y - a.m_sweep.localCenter.y, f = c.col1.x * d + c.col2.x * e, e = c.col1.y * d + c.col2.y * e, d = f;
        c = b.m_xf.R;
        var g = this.m_localAnchor2.x - b.m_sweep.localCenter.x, k = this.m_localAnchor2.y - b.m_sweep.localCenter.y, f = c.col1.x * g + c.col2.x * k, k = c.col1.y * g + c.col2.y * k, g = f;
        c = b.m_sweep.c.x + g - (a.m_sweep.c.x +
        d);
        var f = b.m_sweep.c.y + k - (a.m_sweep.c.y + e), h = a.GetWorldVector(this.m_localXAxis1), m = a.m_linearVelocity, n = b.m_linearVelocity, a = a.m_angularVelocity, b = b.m_angularVelocity;
        return c*-a * h.y + f * a * h.x + (h.x * (n.x +- b * k - m.x - - a * e) + h.y * (n.y + b * g - m.y - a * d))
    };
    E.prototype.IsLimitEnabled = function() {
        return this.m_enableLimit
    };
    E.prototype.EnableLimit = function(a) {
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_enableLimit = a
    };
    E.prototype.GetLowerLimit = function() {
        return this.m_lowerTranslation
    };
    E.prototype.GetUpperLimit =
    function() {
        return this.m_upperTranslation
    };
    E.prototype.SetLimits = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_lowerTranslation = a;
        this.m_upperTranslation = b
    };
    E.prototype.IsMotorEnabled = function() {
        return this.m_enableMotor
    };
    E.prototype.EnableMotor = function(a) {
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_enableMotor = a
    };
    E.prototype.SetMotorSpeed = function(a) {
        void 0 === a && (a = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_motorSpeed = a
    };
    E.prototype.GetMotorSpeed = function() {
        return this.m_motorSpeed
    };
    E.prototype.SetMaxMotorForce = function(a) {
        void 0 === a && (a = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_maxMotorForce = a
    };
    E.prototype.GetMotorForce = function() {
        return this.m_motorImpulse
    };
    E.prototype.b2PrismaticJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchor1.SetV(a.localAnchorA);
        this.m_localAnchor2.SetV(a.localAnchorB);
        this.m_localXAxis1.SetV(a.localAxisA);
        this.m_localYAxis1.x =- this.m_localXAxis1.y;
        this.m_localYAxis1.y = this.m_localXAxis1.x;
        this.m_refAngle = a.referenceAngle;
        this.m_impulse.SetZero();
        this.m_motorImpulse = this.m_motorMass = 0;
        this.m_lowerTranslation = a.lowerTranslation;
        this.m_upperTranslation = a.upperTranslation;
        this.m_maxMotorForce = a.maxMotorForce;
        this.m_motorSpeed = a.motorSpeed;
        this.m_enableLimit = a.enableLimit;
        this.m_enableMotor = a.enableMotor;
        this.m_limitState = v.e_inactiveLimit;
        this.m_axis.SetZero();
        this.m_perp.SetZero()
    };
    E.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_bodyA,
        d = this.m_bodyB, e, f = 0;
        this.m_localCenterA.SetV(b.GetLocalCenter());
        this.m_localCenterB.SetV(d.GetLocalCenter());
        var g = b.GetTransform();
        d.GetTransform();
        e = b.m_xf.R;
        var h = this.m_localAnchor1.x - this.m_localCenterA.x, u = this.m_localAnchor1.y - this.m_localCenterA.y, f = e.col1.x * h + e.col2.x * u, u = e.col1.y * h + e.col2.y * u, h = f;
        e = d.m_xf.R;
        var q = this.m_localAnchor2.x - this.m_localCenterB.x, m = this.m_localAnchor2.y - this.m_localCenterB.y, f = e.col1.x * q + e.col2.x * m, m = e.col1.y * q + e.col2.y * m, q = f;
        e = d.m_sweep.c.x + q - b.m_sweep.c.x -
        h;
        f = d.m_sweep.c.y + m - b.m_sweep.c.y - u;
        this.m_invMassA = b.m_invMass;
        this.m_invMassB = d.m_invMass;
        this.m_invIA = b.m_invI;
        this.m_invIB = d.m_invI;
        this.m_axis.SetV(k.MulMV(g.R, this.m_localXAxis1));
        this.m_a1 = (e + h) * this.m_axis.y - (f + u) * this.m_axis.x;
        this.m_a2 = q * this.m_axis.y - m * this.m_axis.x;
        this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
        this.m_motorMass > Number.MIN_VALUE && (this.m_motorMass = 1 / this.m_motorMass);
        this.m_perp.SetV(k.MulMV(g.R, this.m_localYAxis1));
        this.m_s1 = (e + h) * this.m_perp.y - (f + u) * this.m_perp.x;
        this.m_s2 = q * this.m_perp.y - m * this.m_perp.x;
        g = this.m_invMassA;
        h = this.m_invMassB;
        u = this.m_invIA;
        q = this.m_invIB;
        this.m_K.col1.x = g + h + u * this.m_s1 * this.m_s1 + q * this.m_s2 * this.m_s2;
        this.m_K.col1.y = u * this.m_s1 + q * this.m_s2;
        this.m_K.col1.z = u * this.m_s1 * this.m_a1 + q * this.m_s2 * this.m_a2;
        this.m_K.col2.x = this.m_K.col1.y;
        this.m_K.col2.y = u + q;
        this.m_K.col2.z = u * this.m_a1 + q * this.m_a2;
        this.m_K.col3.x = this.m_K.col1.z;
        this.m_K.col3.y = this.m_K.col2.z;
        this.m_K.col3.z = g + h + u * this.m_a1 *
        this.m_a1 + q * this.m_a2 * this.m_a2;
        this.m_enableLimit ? (e = this.m_axis.x * e + this.m_axis.y * f, k.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * c.b2_linearSlop ? this.m_limitState = v.e_equalLimits : e <= this.m_lowerTranslation ? this.m_limitState != v.e_atLowerLimit && (this.m_limitState = v.e_atLowerLimit, this.m_impulse.z = 0) : e >= this.m_upperTranslation ? this.m_limitState != v.e_atUpperLimit && (this.m_limitState = v.e_atUpperLimit, this.m_impulse.z = 0) : (this.m_limitState = v.e_inactiveLimit, this.m_impulse.z = 0)) : this.m_limitState =
        v.e_inactiveLimit;
        !1 == this.m_enableMotor && (this.m_motorImpulse = 0);
        a.warmStarting ? (this.m_impulse.x*=a.dtRatio, this.m_impulse.y*=a.dtRatio, this.m_motorImpulse*=a.dtRatio, a = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x, e = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y, f = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1, g = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse +
        this.m_impulse.z) * this.m_a2, b.m_linearVelocity.x -= this.m_invMassA * a, b.m_linearVelocity.y -= this.m_invMassA * e, b.m_angularVelocity -= this.m_invIA * f, d.m_linearVelocity.x += this.m_invMassB * a, d.m_linearVelocity.y += this.m_invMassB * e, d.m_angularVelocity += this.m_invIB * g) : (this.m_impulse.SetZero(), this.m_motorImpulse = 0)
    };
    E.prototype.SolveVelocityConstraints = function(a) {
        var b = this.m_bodyA, c = this.m_bodyB, f = b.m_linearVelocity, g = b.m_angularVelocity, h = c.m_linearVelocity, m = c.m_angularVelocity, u = 0, q = 0, n = 0, p = 0;
        this.m_enableMotor &&
        this.m_limitState != v.e_equalLimits && (p = this.m_motorMass * (this.m_motorSpeed - (this.m_axis.x * (h.x - f.x) + this.m_axis.y * (h.y - f.y) + this.m_a2 * m - this.m_a1 * g)), u = this.m_motorImpulse, a = a.dt * this.m_maxMotorForce, this.m_motorImpulse = k.Clamp(this.m_motorImpulse + p, - a, a), p = this.m_motorImpulse - u, u = p * this.m_axis.x, q = p * this.m_axis.y, n = p * this.m_a1, p*=this.m_a2, f.x -= this.m_invMassA * u, f.y -= this.m_invMassA * q, g -= this.m_invIA * n, h.x += this.m_invMassB * u, h.y += this.m_invMassB * q, m += this.m_invIB * p);
        n = this.m_perp.x * (h.x - f.x) + this.m_perp.y *
        (h.y - f.y) + this.m_s2 * m - this.m_s1 * g;
        q = m - g;
        this.m_enableLimit && this.m_limitState != v.e_inactiveLimit ? (a = this.m_axis.x * (h.x - f.x) + this.m_axis.y * (h.y - f.y) + this.m_a2 * m - this.m_a1 * g, u = this.m_impulse.Copy(), a = this.m_K.Solve33(new e, - n, - q, - a), this.m_impulse.Add(a), this.m_limitState == v.e_atLowerLimit ? this.m_impulse.z = k.Max(this.m_impulse.z, 0) : this.m_limitState == v.e_atUpperLimit && (this.m_impulse.z = k.Min(this.m_impulse.z, 0)), n =- n - (this.m_impulse.z - u.z) * this.m_K.col3.x, q =- q - (this.m_impulse.z - u.z) * this.m_K.col3.y,
        q = this.m_K.Solve22(new d, n, q), q.x += u.x, q.y += u.y, this.m_impulse.x = q.x, this.m_impulse.y = q.y, a.x = this.m_impulse.x - u.x, a.y = this.m_impulse.y - u.y, a.z = this.m_impulse.z - u.z, u = a.x * this.m_perp.x + a.z * this.m_axis.x, q = a.x * this.m_perp.y + a.z * this.m_axis.y, n = a.x * this.m_s1 + a.y + a.z * this.m_a1, p = a.x * this.m_s2 + a.y + a.z * this.m_a2) : (a = this.m_K.Solve22(new d, - n, - q), this.m_impulse.x += a.x, this.m_impulse.y += a.y, u = a.x * this.m_perp.x, q = a.x * this.m_perp.y, n = a.x * this.m_s1 + a.y, p = a.x * this.m_s2 + a.y);
        f.x -= this.m_invMassA * u;
        f.y -= this.m_invMassA *
        q;
        g -= this.m_invIA * n;
        h.x += this.m_invMassB * u;
        h.y += this.m_invMassB * q;
        m += this.m_invIB * p;
        b.m_linearVelocity.SetV(f);
        b.m_angularVelocity = g;
        c.m_linearVelocity.SetV(h);
        c.m_angularVelocity = m
    };
    E.prototype.SolvePositionConstraints = function() {
        var b = this.m_bodyA, f = this.m_bodyB, g = b.m_sweep.c, h = b.m_sweep.a, m = f.m_sweep.c, n = f.m_sweep.a, p, u = 0, q = 0, v = 0, t = 0, w = 0, q=!1, y = 0, x = a.FromAngle(h), B = a.FromAngle(n);
        p = x;
        var w = this.m_localAnchor1.x - this.m_localCenterA.x, C = this.m_localAnchor1.y - this.m_localCenterA.y, u = p.col1.x * w + p.col2.x *
        C, C = p.col1.y * w + p.col2.y * C, w = u;
        p = B;
        B = this.m_localAnchor2.x - this.m_localCenterB.x;
        v = this.m_localAnchor2.y - this.m_localCenterB.y;
        u = p.col1.x * B + p.col2.x * v;
        v = p.col1.y * B + p.col2.y * v;
        B = u;
        p = m.x + B - g.x - w;
        u = m.y + v - g.y - C;
        if (this.m_enableLimit) {
            this.m_axis = k.MulMV(x, this.m_localXAxis1);
            this.m_a1 = (p + w) * this.m_axis.y - (u + C) * this.m_axis.x;
            this.m_a2 = B * this.m_axis.y - v * this.m_axis.x;
            var D = this.m_axis.x * p + this.m_axis.y * u;
            k.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * c.b2_linearSlop ? (y = k.Clamp(D, - c.b2_maxLinearCorrection,
            c.b2_maxLinearCorrection), t = k.Abs(D), q=!0) : D <= this.m_lowerTranslation ? (y = k.Clamp(D - this.m_lowerTranslation + c.b2_linearSlop, - c.b2_maxLinearCorrection, 0), t = this.m_lowerTranslation - D, q=!0) : D >= this.m_upperTranslation && (y = k.Clamp(D - this.m_upperTranslation + c.b2_linearSlop, 0, c.b2_maxLinearCorrection), t = D - this.m_upperTranslation, q=!0)
        }
        this.m_perp = k.MulMV(x, this.m_localYAxis1);
        this.m_s1 = (p + w) * this.m_perp.y - (u + C) * this.m_perp.x;
        this.m_s2 = B * this.m_perp.y - v * this.m_perp.x;
        x = new e;
        C = this.m_perp.x * p + this.m_perp.y *
        u;
        B = n - h - this.m_refAngle;
        t = k.Max(t, k.Abs(C));
        w = k.Abs(B);
        q ? (q = this.m_invMassA, v = this.m_invMassB, p = this.m_invIA, u = this.m_invIB, this.m_K.col1.x = q + v + p * this.m_s1 * this.m_s1 + u * this.m_s2 * this.m_s2, this.m_K.col1.y = p * this.m_s1 + u * this.m_s2, this.m_K.col1.z = p * this.m_s1 * this.m_a1 + u * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = p + u, this.m_K.col2.z = p * this.m_a1 + u * this.m_a2, this.m_K.col3.x = this.m_K.col1.z, this.m_K.col3.y = this.m_K.col2.z, this.m_K.col3.z = q + v + p * this.m_a1 * this.m_a1 + u * this.m_a2 * this.m_a2,
        this.m_K.Solve33(x, - C, - B, - y)) : (q = this.m_invMassA, v = this.m_invMassB, p = this.m_invIA, u = this.m_invIB, y = p * this.m_s1 + u * this.m_s2, D = p + u, this.m_K.col1.Set(q + v + p * this.m_s1 * this.m_s1 + u * this.m_s2 * this.m_s2, y, 0), this.m_K.col2.Set(y, D, 0), y = this.m_K.Solve22(new d, - C, - B), x.x = y.x, x.y = y.y, x.z = 0);
        y = x.x * this.m_perp.x + x.z * this.m_axis.x;
        q = x.x * this.m_perp.y + x.z * this.m_axis.y;
        C = x.x * this.m_s1 + x.y + x.z * this.m_a1;
        x = x.x * this.m_s2 + x.y + x.z * this.m_a2;
        g.x -= this.m_invMassA * y;
        g.y -= this.m_invMassA * q;
        h -= this.m_invIA * C;
        m.x += this.m_invMassB *
        y;
        m.y += this.m_invMassB * q;
        n += this.m_invIB * x;
        b.m_sweep.a = h;
        f.m_sweep.a = n;
        b.SynchronizeTransform();
        f.SynchronizeTransform();
        return t <= c.b2_linearSlop && w <= c.b2_angularSlop
    };
    Box2D.inherit(G, Box2D.Dynamics.Joints.b2JointDef);
    G.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    G.b2PrismaticJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.localAnchorA = new d;
        this.localAnchorB = new d;
        this.localAxisA = new d
    };
    G.prototype.b2PrismaticJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_prismaticJoint;
        this.localAxisA.Set(1, 0);
        this.referenceAngle = 0;
        this.enableLimit=!1;
        this.upperTranslation = this.lowerTranslation = 0;
        this.enableMotor=!1;
        this.motorSpeed = this.maxMotorForce = 0
    };
    G.prototype.Initialize = function(a, b, c, d) {
        this.bodyA = a;
        this.bodyB = b;
        this.localAnchorA = this.bodyA.GetLocalPoint(c);
        this.localAnchorB = this.bodyB.GetLocalPoint(c);
        this.localAxisA = this.bodyA.GetLocalVector(d);
        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
    };
    Box2D.inherit(D, Box2D.Dynamics.Joints.b2Joint);
    D.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    D.b2PulleyJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_groundAnchor1 = new d;
        this.m_groundAnchor2 = new d;
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 = new d;
        this.m_u1 = new d;
        this.m_u2 = new d
    };
    D.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    D.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    D.prototype.GetReactionForce = function(a) {
        void 0 ===
        a && (a = 0);
        return new d(a * this.m_impulse * this.m_u2.x, a * this.m_impulse * this.m_u2.y)
    };
    D.prototype.GetReactionTorque = function() {
        return 0
    };
    D.prototype.GetGroundAnchorA = function() {
        var a = this.m_ground.m_xf.position.Copy();
        a.Add(this.m_groundAnchor1);
        return a
    };
    D.prototype.GetGroundAnchorB = function() {
        var a = this.m_ground.m_xf.position.Copy();
        a.Add(this.m_groundAnchor2);
        return a
    };
    D.prototype.GetLength1 = function() {
        var a = this.m_bodyA.GetWorldPoint(this.m_localAnchor1), b = a.x - (this.m_ground.m_xf.position.x + this.m_groundAnchor1.x),
        a = a.y - (this.m_ground.m_xf.position.y + this.m_groundAnchor1.y);
        return Math.sqrt(b * b + a * a)
    };
    D.prototype.GetLength2 = function() {
        var a = this.m_bodyB.GetWorldPoint(this.m_localAnchor2), b = a.x - (this.m_ground.m_xf.position.x + this.m_groundAnchor2.x), a = a.y - (this.m_ground.m_xf.position.y + this.m_groundAnchor2.y);
        return Math.sqrt(b * b + a * a)
    };
    D.prototype.GetRatio = function() {
        return this.m_ratio
    };
    D.prototype.b2PulleyJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_ground = this.m_bodyA.m_world.m_groundBody;
        this.m_groundAnchor1.x =
        a.groundAnchorA.x - this.m_ground.m_xf.position.x;
        this.m_groundAnchor1.y = a.groundAnchorA.y - this.m_ground.m_xf.position.y;
        this.m_groundAnchor2.x = a.groundAnchorB.x - this.m_ground.m_xf.position.x;
        this.m_groundAnchor2.y = a.groundAnchorB.y - this.m_ground.m_xf.position.y;
        this.m_localAnchor1.SetV(a.localAnchorA);
        this.m_localAnchor2.SetV(a.localAnchorB);
        this.m_ratio = a.ratio;
        this.m_constant = a.lengthA + this.m_ratio * a.lengthB;
        this.m_maxLength1 = k.Min(a.maxLengthA, this.m_constant - this.m_ratio * D.b2_minPulleyLength);
        this.m_maxLength2 = k.Min(a.maxLengthB, (this.m_constant - D.b2_minPulleyLength) / this.m_ratio);
        this.m_limitImpulse2 = this.m_limitImpulse1 = this.m_impulse = 0
    };
    D.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_bodyA, d = this.m_bodyB, e;
        e = b.m_xf.R;
        var f = this.m_localAnchor1.x - b.m_sweep.localCenter.x, g = this.m_localAnchor1.y - b.m_sweep.localCenter.y, k = e.col1.x * f + e.col2.x * g, g = e.col1.y * f + e.col2.y * g, f = k;
        e = d.m_xf.R;
        var h = this.m_localAnchor2.x - d.m_sweep.localCenter.x, q = this.m_localAnchor2.y - d.m_sweep.localCenter.y,
        k = e.col1.x * h + e.col2.x * q, q = e.col1.y * h + e.col2.y * q, h = k;
        e = d.m_sweep.c.x + h;
        var k = d.m_sweep.c.y + q, m = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x, n = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
        this.m_u1.Set(b.m_sweep.c.x + f - (this.m_ground.m_xf.position.x + this.m_groundAnchor1.x), b.m_sweep.c.y + g - (this.m_ground.m_xf.position.y + this.m_groundAnchor1.y));
        this.m_u2.Set(e - m, k - n);
        e = this.m_u1.Length();
        k = this.m_u2.Length();
        e > c.b2_linearSlop ? this.m_u1.Multiply(1 / e) : this.m_u1.SetZero();
        k > c.b2_linearSlop ?
        this.m_u2.Multiply(1 / k) : this.m_u2.SetZero();
        0 < this.m_constant - e - this.m_ratio * k ? (this.m_state = v.e_inactiveLimit, this.m_impulse = 0) : this.m_state = v.e_atUpperLimit;
        e < this.m_maxLength1 ? (this.m_limitState1 = v.e_inactiveLimit, this.m_limitImpulse1 = 0) : this.m_limitState1 = v.e_atUpperLimit;
        k < this.m_maxLength2 ? (this.m_limitState2 = v.e_inactiveLimit, this.m_limitImpulse2 = 0) : this.m_limitState2 = v.e_atUpperLimit;
        e = f * this.m_u1.y - g * this.m_u1.x;
        k = h * this.m_u2.y - q * this.m_u2.x;
        this.m_limitMass1 = b.m_invMass + b.m_invI * e * e;
        this.m_limitMass2 =
        d.m_invMass + d.m_invI * k * k;
        this.m_pulleyMass = this.m_limitMass1 + this.m_ratio * this.m_ratio * this.m_limitMass2;
        this.m_limitMass1 = 1 / this.m_limitMass1;
        this.m_limitMass2 = 1 / this.m_limitMass2;
        this.m_pulleyMass = 1 / this.m_pulleyMass;
        a.warmStarting ? (this.m_impulse*=a.dtRatio, this.m_limitImpulse1*=a.dtRatio, this.m_limitImpulse2*=a.dtRatio, a = ( - this.m_impulse - this.m_limitImpulse1) * this.m_u1.x, e = ( - this.m_impulse - this.m_limitImpulse1) * this.m_u1.y, k = ( - this.m_ratio * this.m_impulse - this.m_limitImpulse2) * this.m_u2.x, m = ( - this.m_ratio *
        this.m_impulse - this.m_limitImpulse2) * this.m_u2.y, b.m_linearVelocity.x += b.m_invMass * a, b.m_linearVelocity.y += b.m_invMass * e, b.m_angularVelocity += b.m_invI * (f * e - g * a), d.m_linearVelocity.x += d.m_invMass * k, d.m_linearVelocity.y += d.m_invMass * m, d.m_angularVelocity += d.m_invI * (h * m - q * k)) : this.m_limitImpulse2 = this.m_limitImpulse1 = this.m_impulse = 0
    };
    D.prototype.SolveVelocityConstraints = function() {
        var a = this.m_bodyA, b = this.m_bodyB, c;
        c = a.m_xf.R;
        var d = this.m_localAnchor1.x - a.m_sweep.localCenter.x, e = this.m_localAnchor1.y -
        a.m_sweep.localCenter.y, f = c.col1.x * d + c.col2.x * e, e = c.col1.y * d + c.col2.y * e, d = f;
        c = b.m_xf.R;
        var g = this.m_localAnchor2.x - b.m_sweep.localCenter.x, h = this.m_localAnchor2.y - b.m_sweep.localCenter.y, f = c.col1.x * g + c.col2.x * h, h = c.col1.y * g + c.col2.y * h, g = f, q = 0, m = 0;
        this.m_state == v.e_atUpperLimit && (c = a.m_linearVelocity.x +- a.m_angularVelocity * e, f = a.m_linearVelocity.y + a.m_angularVelocity * d, q = b.m_linearVelocity.x +- b.m_angularVelocity * h, m = b.m_linearVelocity.y + b.m_angularVelocity * g, c =- (this.m_u1.x * c + this.m_u1.y * f) - this.m_ratio *
        (this.m_u2.x * q + this.m_u2.y * m), m = this.m_pulleyMass*-c, c = this.m_impulse, this.m_impulse = k.Max(0, this.m_impulse + m), m = this.m_impulse - c, c =- m * this.m_u1.x, f =- m * this.m_u1.y, q =- this.m_ratio * m * this.m_u2.x, m =- this.m_ratio * m * this.m_u2.y, a.m_linearVelocity.x += a.m_invMass * c, a.m_linearVelocity.y += a.m_invMass * f, a.m_angularVelocity += a.m_invI * (d * f - e * c), b.m_linearVelocity.x += b.m_invMass * q, b.m_linearVelocity.y += b.m_invMass * m, b.m_angularVelocity += b.m_invI * (g * m - h * q));
        this.m_limitState1 == v.e_atUpperLimit && (c = a.m_linearVelocity.x +
        - a.m_angularVelocity * e, f = a.m_linearVelocity.y + a.m_angularVelocity * d, c =- (this.m_u1.x * c + this.m_u1.y * f), m =- this.m_limitMass1 * c, c = this.m_limitImpulse1, this.m_limitImpulse1 = k.Max(0, this.m_limitImpulse1 + m), m = this.m_limitImpulse1 - c, c =- m * this.m_u1.x, f =- m * this.m_u1.y, a.m_linearVelocity.x += a.m_invMass * c, a.m_linearVelocity.y += a.m_invMass * f, a.m_angularVelocity += a.m_invI * (d * f - e * c));
        this.m_limitState2 == v.e_atUpperLimit && (q = b.m_linearVelocity.x +- b.m_angularVelocity * h, m = b.m_linearVelocity.y + b.m_angularVelocity * g,
        c =- (this.m_u2.x * q + this.m_u2.y * m), m =- this.m_limitMass2 * c, c = this.m_limitImpulse2, this.m_limitImpulse2 = k.Max(0, this.m_limitImpulse2 + m), m = this.m_limitImpulse2 - c, q =- m * this.m_u2.x, m =- m * this.m_u2.y, b.m_linearVelocity.x += b.m_invMass * q, b.m_linearVelocity.y += b.m_invMass * m, b.m_angularVelocity += b.m_invI * (g * m - h * q))
    };
    D.prototype.SolvePositionConstraints = function() {
        var a = this.m_bodyA, b = this.m_bodyB, d, e = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x, f = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y, g =
        this.m_ground.m_xf.position.x + this.m_groundAnchor2.x, h = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y, m = 0, q = 0, n = 0, p = 0, t = 0, w = 0, x = 0, y = 0;
        this.m_state == v.e_atUpperLimit && (d = a.m_xf.R, m = this.m_localAnchor1.x - a.m_sweep.localCenter.x, q = this.m_localAnchor1.y - a.m_sweep.localCenter.y, t = d.col1.x * m + d.col2.x * q, q = d.col1.y * m + d.col2.y * q, m = t, d = b.m_xf.R, n = this.m_localAnchor2.x - b.m_sweep.localCenter.x, p = this.m_localAnchor2.y - b.m_sweep.localCenter.y, t = d.col1.x * n + d.col2.x * p, p = d.col1.y * n + d.col2.y * p, n = t, d = a.m_sweep.c.x +
        m, t = a.m_sweep.c.y + q, w = b.m_sweep.c.x + n, x = b.m_sweep.c.y + p, this.m_u1.Set(d - e, t - f), this.m_u2.Set(w - g, x - h), d = this.m_u1.Length(), t = this.m_u2.Length(), d > c.b2_linearSlop ? this.m_u1.Multiply(1 / d) : this.m_u1.SetZero(), t > c.b2_linearSlop ? this.m_u2.Multiply(1 / t) : this.m_u2.SetZero(), d = this.m_constant - d - this.m_ratio * t, y = k.Max(y, - d), d = k.Clamp(d + c.b2_linearSlop, - c.b2_maxLinearCorrection, 0), x =- this.m_pulleyMass * d, d =- x * this.m_u1.x, t =- x * this.m_u1.y, w =- this.m_ratio * x * this.m_u2.x, x =- this.m_ratio * x * this.m_u2.y, a.m_sweep.c.x +=
        a.m_invMass * d, a.m_sweep.c.y += a.m_invMass * t, a.m_sweep.a += a.m_invI * (m * t - q * d), b.m_sweep.c.x += b.m_invMass * w, b.m_sweep.c.y += b.m_invMass * x, b.m_sweep.a += b.m_invI * (n * x - p * w), a.SynchronizeTransform(), b.SynchronizeTransform());
        this.m_limitState1 == v.e_atUpperLimit && (d = a.m_xf.R, m = this.m_localAnchor1.x - a.m_sweep.localCenter.x, q = this.m_localAnchor1.y - a.m_sweep.localCenter.y, t = d.col1.x * m + d.col2.x * q, q = d.col1.y * m + d.col2.y * q, m = t, d = a.m_sweep.c.x + m, t = a.m_sweep.c.y + q, this.m_u1.Set(d - e, t - f), d = this.m_u1.Length(), d > c.b2_linearSlop ?
        (this.m_u1.x*=1 / d, this.m_u1.y*=1 / d) : this.m_u1.SetZero(), d = this.m_maxLength1 - d, y = k.Max(y, - d), d = k.Clamp(d + c.b2_linearSlop, - c.b2_maxLinearCorrection, 0), x =- this.m_limitMass1 * d, d =- x * this.m_u1.x, t =- x * this.m_u1.y, a.m_sweep.c.x += a.m_invMass * d, a.m_sweep.c.y += a.m_invMass * t, a.m_sweep.a += a.m_invI * (m * t - q * d), a.SynchronizeTransform());
        this.m_limitState2 == v.e_atUpperLimit && (d = b.m_xf.R, n = this.m_localAnchor2.x - b.m_sweep.localCenter.x, p = this.m_localAnchor2.y - b.m_sweep.localCenter.y, t = d.col1.x * n + d.col2.x * p, p = d.col1.y *
        n + d.col2.y * p, n = t, w = b.m_sweep.c.x + n, x = b.m_sweep.c.y + p, this.m_u2.Set(w - g, x - h), t = this.m_u2.Length(), t > c.b2_linearSlop ? (this.m_u2.x*=1 / t, this.m_u2.y*=1 / t) : this.m_u2.SetZero(), d = this.m_maxLength2 - t, y = k.Max(y, - d), d = k.Clamp(d + c.b2_linearSlop, - c.b2_maxLinearCorrection, 0), x =- this.m_limitMass2 * d, w =- x * this.m_u2.x, x =- x * this.m_u2.y, b.m_sweep.c.x += b.m_invMass * w, b.m_sweep.c.y += b.m_invMass * x, b.m_sweep.a += b.m_invI * (n * x - p * w), b.SynchronizeTransform());
        return y < c.b2_linearSlop
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength =
        2
    });
    Box2D.inherit(K, Box2D.Dynamics.Joints.b2JointDef);
    K.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    K.b2PulleyJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.groundAnchorA = new d;
        this.groundAnchorB = new d;
        this.localAnchorA = new d;
        this.localAnchorB = new d
    };
    K.prototype.b2PulleyJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_pulleyJoint;
        this.groundAnchorA.Set(-1, 1);
        this.groundAnchorB.Set(1, 1);
        this.localAnchorA.Set(-1, 0);
        this.localAnchorB.Set(1,
        0);
        this.maxLengthB = this.lengthB = this.maxLengthA = this.lengthA = 0;
        this.ratio = 1;
        this.collideConnected=!0
    };
    K.prototype.Initialize = function(a, b, c, d, e, f, g) {
        void 0 === g && (g = 0);
        this.bodyA = a;
        this.bodyB = b;
        this.groundAnchorA.SetV(c);
        this.groundAnchorB.SetV(d);
        this.localAnchorA = this.bodyA.GetLocalPoint(e);
        this.localAnchorB = this.bodyB.GetLocalPoint(f);
        a = e.x - c.x;
        c = e.y - c.y;
        this.lengthA = Math.sqrt(a * a + c * c);
        c = f.x - d.x;
        d = f.y - d.y;
        this.lengthB = Math.sqrt(c * c + d * d);
        this.ratio = g;
        g = this.lengthA + this.ratio * this.lengthB;
        this.maxLengthA =
        g - this.ratio * D.b2_minPulleyLength;
        this.maxLengthB = (g - D.b2_minPulleyLength) / this.ratio
    };
    Box2D.inherit(F, Box2D.Dynamics.Joints.b2Joint);
    F.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    F.b2RevoluteJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.K = new a;
        this.K1 = new a;
        this.K2 = new a;
        this.K3 = new a;
        this.impulse3 = new e;
        this.impulse2 = new d;
        this.reduced = new d;
        this.m_localAnchor1 = new d;
        this.m_localAnchor2 = new d;
        this.m_impulse = new e;
        this.m_mass = new b
    };
    F.prototype.GetAnchorA =
    function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
    };
    F.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
    };
    F.prototype.GetReactionForce = function(a) {
        void 0 === a && (a = 0);
        return new d(a * this.m_impulse.x, a * this.m_impulse.y)
    };
    F.prototype.GetReactionTorque = function(a) {
        void 0 === a && (a = 0);
        return a * this.m_impulse.z
    };
    F.prototype.GetJointAngle = function() {
        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle
    };
    F.prototype.GetJointSpeed = function() {
        return this.m_bodyB.m_angularVelocity -
        this.m_bodyA.m_angularVelocity
    };
    F.prototype.IsLimitEnabled = function() {
        return this.m_enableLimit
    };
    F.prototype.EnableLimit = function(a) {
        this.m_enableLimit = a
    };
    F.prototype.GetLowerLimit = function() {
        return this.m_lowerAngle
    };
    F.prototype.GetUpperLimit = function() {
        return this.m_upperAngle
    };
    F.prototype.SetLimits = function(a, b) {
        void 0 === a && (a = 0);
        void 0 === b && (b = 0);
        this.m_lowerAngle = a;
        this.m_upperAngle = b
    };
    F.prototype.IsMotorEnabled = function() {
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        return this.m_enableMotor
    };
    F.prototype.EnableMotor = function(a) {
        this.m_enableMotor = a
    };
    F.prototype.SetMotorSpeed = function(a) {
        void 0 === a && (a = 0);
        this.m_bodyA.SetAwake(!0);
        this.m_bodyB.SetAwake(!0);
        this.m_motorSpeed = a
    };
    F.prototype.GetMotorSpeed = function() {
        return this.m_motorSpeed
    };
    F.prototype.SetMaxMotorTorque = function(a) {
        void 0 === a && (a = 0);
        this.m_maxMotorTorque = a
    };
    F.prototype.GetMotorTorque = function() {
        return this.m_maxMotorTorque
    };
    F.prototype.b2RevoluteJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchor1.SetV(a.localAnchorA);
        this.m_localAnchor2.SetV(a.localAnchorB);
        this.m_referenceAngle = a.referenceAngle;
        this.m_impulse.SetZero();
        this.m_motorImpulse = 0;
        this.m_lowerAngle = a.lowerAngle;
        this.m_upperAngle = a.upperAngle;
        this.m_maxMotorTorque = a.maxMotorTorque;
        this.m_motorSpeed = a.motorSpeed;
        this.m_enableLimit = a.enableLimit;
        this.m_enableMotor = a.enableMotor;
        this.m_limitState = v.e_inactiveLimit
    };
    F.prototype.InitVelocityConstraints = function(a) {
        var b = this.m_bodyA, d = this.m_bodyB, e, f = 0;
        e = b.m_xf.R;
        var g = this.m_localAnchor1.x - b.m_sweep.localCenter.x,
        h = this.m_localAnchor1.y - b.m_sweep.localCenter.y, f = e.col1.x * g + e.col2.x * h, h = e.col1.y * g + e.col2.y * h, g = f;
        e = d.m_xf.R;
        var m = this.m_localAnchor2.x - d.m_sweep.localCenter.x, q = this.m_localAnchor2.y - d.m_sweep.localCenter.y, f = e.col1.x * m + e.col2.x * q, q = e.col1.y * m + e.col2.y * q, m = f;
        e = b.m_invMass;
        var f = d.m_invMass, n = b.m_invI, p = d.m_invI;
        this.m_mass.col1.x = e + f + h * h * n + q * q * p;
        this.m_mass.col2.x =- h * g * n - q * m * p;
        this.m_mass.col3.x =- h * n - q * p;
        this.m_mass.col1.y = this.m_mass.col2.x;
        this.m_mass.col2.y = e + f + g * g * n + m * m * p;
        this.m_mass.col3.y =
        g * n + m * p;
        this.m_mass.col1.z = this.m_mass.col3.x;
        this.m_mass.col2.z = this.m_mass.col3.y;
        this.m_mass.col3.z = n + p;
        this.m_motorMass = 1 / (n + p);
        !1 == this.m_enableMotor && (this.m_motorImpulse = 0);
        if (this.m_enableLimit) {
            var t = d.m_sweep.a - b.m_sweep.a - this.m_referenceAngle;
            k.Abs(this.m_upperAngle - this.m_lowerAngle) < 2 * c.b2_angularSlop ? this.m_limitState = v.e_equalLimits : t <= this.m_lowerAngle ? (this.m_limitState != v.e_atLowerLimit && (this.m_impulse.z = 0), this.m_limitState = v.e_atLowerLimit) : t >= this.m_upperAngle ? (this.m_limitState !=
            v.e_atUpperLimit && (this.m_impulse.z = 0), this.m_limitState = v.e_atUpperLimit) : (this.m_limitState = v.e_inactiveLimit, this.m_impulse.z = 0)
        } else 
            this.m_limitState = v.e_inactiveLimit;
        a.warmStarting ? (this.m_impulse.x*=a.dtRatio, this.m_impulse.y*=a.dtRatio, this.m_motorImpulse*=a.dtRatio, a = this.m_impulse.x, t = this.m_impulse.y, b.m_linearVelocity.x -= e * a, b.m_linearVelocity.y -= e * t, b.m_angularVelocity -= n * (g * t - h * a + this.m_motorImpulse + this.m_impulse.z), d.m_linearVelocity.x += f * a, d.m_linearVelocity.y += f * t, d.m_angularVelocity +=
        p * (m * t - q * a + this.m_motorImpulse + this.m_impulse.z)) : (this.m_impulse.SetZero(), this.m_motorImpulse = 0)
    };
    F.prototype.SolveVelocityConstraints = function(a) {
        var b = this.m_bodyA, c = this.m_bodyB, d = 0, e = 0, f = 0, g = 0, h = 0, m = b.m_linearVelocity, n = b.m_angularVelocity, p = c.m_linearVelocity, t = c.m_angularVelocity, w = b.m_invMass, x = c.m_invMass, y = b.m_invI, B = c.m_invI;
        this.m_enableMotor && this.m_limitState != v.e_equalLimits && (e = this.m_motorMass*-(t - n - this.m_motorSpeed), f = this.m_motorImpulse, g = a.dt * this.m_maxMotorTorque, this.m_motorImpulse =
        k.Clamp(this.m_motorImpulse + e, - g, g), e = this.m_motorImpulse - f, n -= y * e, t += B * e);
        if (this.m_enableLimit && this.m_limitState != v.e_inactiveLimit) {
            a = b.m_xf.R;
            e = this.m_localAnchor1.x - b.m_sweep.localCenter.x;
            f = this.m_localAnchor1.y - b.m_sweep.localCenter.y;
            d = a.col1.x * e + a.col2.x * f;
            f = a.col1.y * e + a.col2.y * f;
            e = d;
            a = c.m_xf.R;
            g = this.m_localAnchor2.x - c.m_sweep.localCenter.x;
            h = this.m_localAnchor2.y - c.m_sweep.localCenter.y;
            d = a.col1.x * g + a.col2.x * h;
            h = a.col1.y * g + a.col2.y * h;
            g = d;
            a = p.x +- t * h - m.x - - n * f;
            var C = p.y + t * g - m.y - n * e;
            this.m_mass.Solve33(this.impulse3,
            - a, - C, - (t - n));
            this.m_limitState == v.e_equalLimits ? this.m_impulse.Add(this.impulse3) : this.m_limitState == v.e_atLowerLimit ? (d = this.m_impulse.z + this.impulse3.z, 0 > d && (this.m_mass.Solve22(this.reduced, - a, - C), this.impulse3.x = this.reduced.x, this.impulse3.y = this.reduced.y, this.impulse3.z =- this.m_impulse.z, this.m_impulse.x += this.reduced.x, this.m_impulse.y += this.reduced.y, this.m_impulse.z = 0)) : this.m_limitState == v.e_atUpperLimit && (d = this.m_impulse.z + this.impulse3.z, 0 < d && (this.m_mass.Solve22(this.reduced, - a, - C),
            this.impulse3.x = this.reduced.x, this.impulse3.y = this.reduced.y, this.impulse3.z =- this.m_impulse.z, this.m_impulse.x += this.reduced.x, this.m_impulse.y += this.reduced.y, this.m_impulse.z = 0));
            m.x -= w * this.impulse3.x;
            m.y -= w * this.impulse3.y;
            n -= y * (e * this.impulse3.y - f * this.impulse3.x + this.impulse3.z);
            p.x += x * this.impulse3.x;
            p.y += x * this.impulse3.y;
            t += B * (g * this.impulse3.y - h * this.impulse3.x + this.impulse3.z)
        } else 
            a = b.m_xf.R, e = this.m_localAnchor1.x - b.m_sweep.localCenter.x, f = this.m_localAnchor1.y - b.m_sweep.localCenter.y,
        d = a.col1.x * e + a.col2.x * f, f = a.col1.y * e + a.col2.y * f, e = d, a = c.m_xf.R, g = this.m_localAnchor2.x - c.m_sweep.localCenter.x, h = this.m_localAnchor2.y - c.m_sweep.localCenter.y, d = a.col1.x * g + a.col2.x * h, h = a.col1.y * g + a.col2.y * h, g = d, this.m_mass.Solve22(this.impulse2, - (p.x +- t * h - m.x - - n * f), - (p.y + t * g - m.y - n * e)), this.m_impulse.x += this.impulse2.x, this.m_impulse.y += this.impulse2.y, m.x -= w * this.impulse2.x, m.y -= w * this.impulse2.y, n -= y * (e * this.impulse2.y - f * this.impulse2.x), p.x += x * this.impulse2.x, p.y += x * this.impulse2.y, t += B * (g * this.impulse2.y -
        h * this.impulse2.x);
        b.m_linearVelocity.SetV(m);
        b.m_angularVelocity = n;
        c.m_linearVelocity.SetV(p);
        c.m_angularVelocity = t
    };
    F.prototype.SolvePositionConstraints = function() {
        var a = 0, b, d = this.m_bodyA, e = this.m_bodyB, f = 0, g = 0, h = 0, m = 0;
        if (this.m_enableLimit && this.m_limitState != v.e_inactiveLimit) {
            var a = e.m_sweep.a - d.m_sweep.a - this.m_referenceAngle, q = 0;
            this.m_limitState == v.e_equalLimits ? (a = k.Clamp(a - this.m_lowerAngle, - c.b2_maxAngularCorrection, c.b2_maxAngularCorrection), q =- this.m_motorMass * a, f = k.Abs(a)) : this.m_limitState ==
            v.e_atLowerLimit ? (a -= this.m_lowerAngle, f =- a, a = k.Clamp(a + c.b2_angularSlop, - c.b2_maxAngularCorrection, 0), q =- this.m_motorMass * a) : this.m_limitState == v.e_atUpperLimit && (f = a -= this.m_upperAngle, a = k.Clamp(a - c.b2_angularSlop, 0, c.b2_maxAngularCorrection), q =- this.m_motorMass * a);
            d.m_sweep.a -= d.m_invI * q;
            e.m_sweep.a += e.m_invI * q;
            d.SynchronizeTransform();
            e.SynchronizeTransform()
        }
        b = d.m_xf.R;
        q = this.m_localAnchor1.x - d.m_sweep.localCenter.x;
        a = this.m_localAnchor1.y - d.m_sweep.localCenter.y;
        g = b.col1.x * q + b.col2.x * a;
        a = b.col1.y *
        q + b.col2.y * a;
        q = g;
        b = e.m_xf.R;
        var n = this.m_localAnchor2.x - e.m_sweep.localCenter.x, p = this.m_localAnchor2.y - e.m_sweep.localCenter.y, g = b.col1.x * n + b.col2.x * p, p = b.col1.y * n + b.col2.y * p, n = g, h = e.m_sweep.c.x + n - d.m_sweep.c.x - q, m = e.m_sweep.c.y + p - d.m_sweep.c.y - a, t = h * h + m * m;
        b = Math.sqrt(t);
        var g = d.m_invMass, w = e.m_invMass, x = d.m_invI, y = e.m_invI, B = 10 * c.b2_linearSlop;
        t > B * B && (t = 1 / (g + w), h = t*-h, m = t*-m, d.m_sweep.c.x -= 0.5 * g * h, d.m_sweep.c.y -= 0.5 * g * m, e.m_sweep.c.x += 0.5 * w * h, e.m_sweep.c.y += 0.5 * w * m, h = e.m_sweep.c.x + n - d.m_sweep.c.x -
        q, m = e.m_sweep.c.y + p - d.m_sweep.c.y - a);
        this.K1.col1.x = g + w;
        this.K1.col2.x = 0;
        this.K1.col1.y = 0;
        this.K1.col2.y = g + w;
        this.K2.col1.x = x * a * a;
        this.K2.col2.x =- x * q * a;
        this.K2.col1.y =- x * q * a;
        this.K2.col2.y = x * q * q;
        this.K3.col1.x = y * p * p;
        this.K3.col2.x =- y * n * p;
        this.K3.col1.y =- y * n * p;
        this.K3.col2.y = y * n * n;
        this.K.SetM(this.K1);
        this.K.AddM(this.K2);
        this.K.AddM(this.K3);
        this.K.Solve(F.tImpulse, - h, - m);
        h = F.tImpulse.x;
        m = F.tImpulse.y;
        d.m_sweep.c.x -= d.m_invMass * h;
        d.m_sweep.c.y -= d.m_invMass * m;
        d.m_sweep.a -= d.m_invI * (q * m - a * h);
        e.m_sweep.c.x +=
        e.m_invMass * h;
        e.m_sweep.c.y += e.m_invMass * m;
        e.m_sweep.a += e.m_invI * (n * m - p * h);
        d.SynchronizeTransform();
        e.SynchronizeTransform();
        return b <= c.b2_linearSlop && f <= c.b2_angularSlop
    };
    Box2D.postDefs.push(function() {
        Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse = new d
    });
    Box2D.inherit(I, Box2D.Dynamics.Joints.b2JointDef);
    I.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    I.b2RevoluteJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.localAnchorA = new d;
        this.localAnchorB =
        new d
    };
    I.prototype.b2RevoluteJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_revoluteJoint;
        this.localAnchorA.Set(0, 0);
        this.localAnchorB.Set(0, 0);
        this.motorSpeed = this.maxMotorTorque = this.upperAngle = this.lowerAngle = this.referenceAngle = 0;
        this.enableMotor = this.enableLimit=!1
    };
    I.prototype.Initialize = function(a, b, c) {
        this.bodyA = a;
        this.bodyB = b;
        this.localAnchorA = this.bodyA.GetLocalPoint(c);
        this.localAnchorB = this.bodyB.GetLocalPoint(c);
        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
    };
    Box2D.inherit(O, Box2D.Dynamics.Joints.b2Joint);
    O.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype;
    O.b2WeldJoint = function() {
        Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments);
        this.m_localAnchorA = new d;
        this.m_localAnchorB = new d;
        this.m_impulse = new e;
        this.m_mass = new b
    };
    O.prototype.GetAnchorA = function() {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)
    };
    O.prototype.GetAnchorB = function() {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)
    };
    O.prototype.GetReactionForce = function(a) {
        void 0 ===
        a && (a = 0);
        return new d(a * this.m_impulse.x, a * this.m_impulse.y)
    };
    O.prototype.GetReactionTorque = function(a) {
        void 0 === a && (a = 0);
        return a * this.m_impulse.z
    };
    O.prototype.b2WeldJoint = function(a) {
        this.__super.b2Joint.call(this, a);
        this.m_localAnchorA.SetV(a.localAnchorA);
        this.m_localAnchorB.SetV(a.localAnchorB);
        this.m_referenceAngle = a.referenceAngle;
        this.m_impulse.SetZero();
        this.m_mass = new b
    };
    O.prototype.InitVelocityConstraints = function(a) {
        var b, c = 0, d = this.m_bodyA, e = this.m_bodyB;
        b = d.m_xf.R;
        var f = this.m_localAnchorA.x -
        d.m_sweep.localCenter.x, g = this.m_localAnchorA.y - d.m_sweep.localCenter.y, c = b.col1.x * f + b.col2.x * g, g = b.col1.y * f + b.col2.y * g, f = c;
        b = e.m_xf.R;
        var k = this.m_localAnchorB.x - e.m_sweep.localCenter.x, h = this.m_localAnchorB.y - e.m_sweep.localCenter.y, c = b.col1.x * k + b.col2.x * h, h = b.col1.y * k + b.col2.y * h, k = c;
        b = d.m_invMass;
        var c = e.m_invMass, m = d.m_invI, n = e.m_invI;
        this.m_mass.col1.x = b + c + g * g * m + h * h * n;
        this.m_mass.col2.x =- g * f * m - h * k * n;
        this.m_mass.col3.x =- g * m - h * n;
        this.m_mass.col1.y = this.m_mass.col2.x;
        this.m_mass.col2.y = b + c + f * f *
        m + k * k * n;
        this.m_mass.col3.y = f * m + k * n;
        this.m_mass.col1.z = this.m_mass.col3.x;
        this.m_mass.col2.z = this.m_mass.col3.y;
        this.m_mass.col3.z = m + n;
        a.warmStarting ? (this.m_impulse.x*=a.dtRatio, this.m_impulse.y*=a.dtRatio, this.m_impulse.z*=a.dtRatio, d.m_linearVelocity.x -= b * this.m_impulse.x, d.m_linearVelocity.y -= b * this.m_impulse.y, d.m_angularVelocity -= m * (f * this.m_impulse.y - g * this.m_impulse.x + this.m_impulse.z), e.m_linearVelocity.x += c * this.m_impulse.x, e.m_linearVelocity.y += c * this.m_impulse.y, e.m_angularVelocity += n *
        (k * this.m_impulse.y - h * this.m_impulse.x + this.m_impulse.z)) : this.m_impulse.SetZero()
    };
    O.prototype.SolveVelocityConstraints = function() {
        var a, b = 0, c = this.m_bodyA, d = this.m_bodyB, f = c.m_linearVelocity, g = c.m_angularVelocity, k = d.m_linearVelocity, h = d.m_angularVelocity, m = c.m_invMass, n = d.m_invMass, p = c.m_invI, t = d.m_invI;
        a = c.m_xf.R;
        var v = this.m_localAnchorA.x - c.m_sweep.localCenter.x, w = this.m_localAnchorA.y - c.m_sweep.localCenter.y, b = a.col1.x * v + a.col2.x * w, w = a.col1.y * v + a.col2.y * w, v = b;
        a = d.m_xf.R;
        var x = this.m_localAnchorB.x -
        d.m_sweep.localCenter.x, y = this.m_localAnchorB.y - d.m_sweep.localCenter.y, b = a.col1.x * x + a.col2.x * y, y = a.col1.y * x + a.col2.y * y, x = b;
        a = k.x - h * y - f.x + g * w;
        var b = k.y + h * x - f.y - g * v, B = h - g, C = new e;
        this.m_mass.Solve33(C, - a, - b, - B);
        this.m_impulse.Add(C);
        f.x -= m * C.x;
        f.y -= m * C.y;
        g -= p * (v * C.y - w * C.x + C.z);
        k.x += n * C.x;
        k.y += n * C.y;
        h += t * (x * C.y - y * C.x + C.z);
        c.m_angularVelocity = g;
        d.m_angularVelocity = h
    };
    O.prototype.SolvePositionConstraints = function() {
        var a, b = 0, d = this.m_bodyA, f = this.m_bodyB;
        a = d.m_xf.R;
        var g = this.m_localAnchorA.x - d.m_sweep.localCenter.x,
        h = this.m_localAnchorA.y - d.m_sweep.localCenter.y, b = a.col1.x * g + a.col2.x * h, h = a.col1.y * g + a.col2.y * h, g = b;
        a = f.m_xf.R;
        var m = this.m_localAnchorB.x - f.m_sweep.localCenter.x, n = this.m_localAnchorB.y - f.m_sweep.localCenter.y, b = a.col1.x * m + a.col2.x * n, n = a.col1.y * m + a.col2.y * n, m = b;
        a = d.m_invMass;
        var b = f.m_invMass, q = d.m_invI, p = f.m_invI, t = f.m_sweep.c.x + m - d.m_sweep.c.x - g, v = f.m_sweep.c.y + n - d.m_sweep.c.y - h, w = f.m_sweep.a - d.m_sweep.a - this.m_referenceAngle, x = 10 * c.b2_linearSlop, y = Math.sqrt(t * t + v * v), B = k.Abs(w);
        y > x && (q*=1, p*=1);
        this.m_mass.col1.x = a + b + h * h * q + n * n * p;
        this.m_mass.col2.x =- h * g * q - n * m * p;
        this.m_mass.col3.x =- h * q - n * p;
        this.m_mass.col1.y = this.m_mass.col2.x;
        this.m_mass.col2.y = a + b + g * g * q + m * m * p;
        this.m_mass.col3.y = g * q + m * p;
        this.m_mass.col1.z = this.m_mass.col3.x;
        this.m_mass.col2.z = this.m_mass.col3.y;
        this.m_mass.col3.z = q + p;
        x = new e;
        this.m_mass.Solve33(x, - t, - v, - w);
        d.m_sweep.c.x -= a * x.x;
        d.m_sweep.c.y -= a * x.y;
        d.m_sweep.a -= q * (g * x.y - h * x.x + x.z);
        f.m_sweep.c.x += b * x.x;
        f.m_sweep.c.y += b * x.y;
        f.m_sweep.a += p * (m * x.y - n * x.x + x.z);
        d.SynchronizeTransform();
        f.SynchronizeTransform();
        return y <= c.b2_linearSlop && B <= c.b2_angularSlop
    };
    Box2D.inherit(L, Box2D.Dynamics.Joints.b2JointDef);
    L.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype;
    L.b2WeldJointDef = function() {
        Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments);
        this.localAnchorA = new d;
        this.localAnchorB = new d
    };
    L.prototype.b2WeldJointDef = function() {
        this.__super.b2JointDef.call(this);
        this.type = v.e_weldJoint;
        this.referenceAngle = 0
    };
    L.prototype.Initialize = function(a, b, c) {
        this.bodyA = a;
        this.bodyB = b;
        this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c));
        this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c));
        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
    }
})();
(function() {
    var c = Box2D.Dynamics.b2DebugDraw;
    c.b2DebugDraw = function() {
        this.m_xformScale = this.m_fillAlpha = this.m_alpha = this.m_lineThickness = this.m_drawScale = 1;
        var a = this;
        this.m_sprite = {
            graphics: {
                clear: function() {
                    a.m_ctx.clearRect(0, 0, a.m_ctx.canvas.width, a.m_ctx.canvas.height)
                }
            }
        }
    };
    c.prototype._color = function(a, b) {
        return "rgba(" + ((a & 16711680)>>16) + "," + ((a & 65280)>>8) + "," + (a & 255) + "," + b + ")"
    };
    c.prototype.b2DebugDraw = function() {
        this.m_drawFlags = 0
    };
    c.prototype.SetFlags = function(a) {
        void 0 === a && (a = 0);
        this.m_drawFlags =
        a
    };
    c.prototype.GetFlags = function() {
        return this.m_drawFlags
    };
    c.prototype.AppendFlags = function(a) {
        void 0 === a && (a = 0);
        this.m_drawFlags|=a
    };
    c.prototype.ClearFlags = function(a) {
        void 0 === a && (a = 0);
        this.m_drawFlags&=~a
    };
    c.prototype.SetSprite = function(a) {
        this.m_ctx = a
    };
    c.prototype.GetSprite = function() {
        return this.m_ctx
    };
    c.prototype.SetDrawScale = function(a) {
        void 0 === a && (a = 0);
        this.m_drawScale = a
    };
    c.prototype.GetDrawScale = function() {
        return this.m_drawScale
    };
    c.prototype.SetLineThickness = function(a) {
        void 0 === a && (a =
        0);
        this.m_lineThickness = a;
        this.m_ctx.strokeWidth = a
    };
    c.prototype.GetLineThickness = function() {
        return this.m_lineThickness
    };
    c.prototype.SetAlpha = function(a) {
        void 0 === a && (a = 0);
        this.m_alpha = a
    };
    c.prototype.GetAlpha = function() {
        return this.m_alpha
    };
    c.prototype.SetFillAlpha = function(a) {
        void 0 === a && (a = 0);
        this.m_fillAlpha = a
    };
    c.prototype.GetFillAlpha = function() {
        return this.m_fillAlpha
    };
    c.prototype.SetXFormScale = function(a) {
        void 0 === a && (a = 0);
        this.m_xformScale = a
    };
    c.prototype.GetXFormScale = function() {
        return this.m_xformScale
    };
    c.prototype.DrawPolygon = function(a, b, c) {
        if (b) {
            var d = this.m_ctx, e = this.m_drawScale;
            d.beginPath();
            d.strokeStyle = this._color(c.color, this.m_alpha);
            d.moveTo(a[0].x * e, a[0].y * e);
            for (c = 1; c < b; c++)
                d.lineTo(a[c].x * e, a[c].y * e);
            d.lineTo(a[0].x * e, a[0].y * e);
            d.closePath();
            d.stroke()
        }
    };
    c.prototype.DrawSolidPolygon = function(a, b, c) {
        if (b) {
            var d = this.m_ctx, e = this.m_drawScale;
            d.beginPath();
            d.strokeStyle = this._color(c.color, this.m_alpha);
            d.fillStyle = this._color(c.color, this.m_fillAlpha);
            d.moveTo(a[0].x * e, a[0].y * e);
            for (c =
            1; c < b; c++)
                d.lineTo(a[c].x * e, a[c].y * e);
            d.lineTo(a[0].x * e, a[0].y * e);
            d.closePath();
            d.fill();
            d.stroke()
        }
    };
    c.prototype.DrawCircle = function(a, b, c) {
        if (b) {
            var d = this.m_ctx, e = this.m_drawScale;
            d.beginPath();
            d.strokeStyle = this._color(c.color, this.m_alpha);
            d.arc(a.x * e, a.y * e, b * e, 0, 2 * Math.PI, !0);
            d.closePath();
            d.stroke()
        }
    };
    c.prototype.DrawSolidCircle = function(a, b, c, d) {
        if (b) {
            var e = this.m_ctx, f = this.m_drawScale, g = a.x * f, h = a.y * f;
            e.moveTo(0, 0);
            e.beginPath();
            e.strokeStyle = this._color(d.color, this.m_alpha);
            e.fillStyle =
            this._color(d.color, this.m_fillAlpha);
            e.arc(g, h, b * f, 0, 2 * Math.PI, !0);
            e.moveTo(g, h);
            e.lineTo((a.x + c.x * b) * f, (a.y + c.y * b) * f);
            e.closePath();
            e.fill();
            e.stroke()
        }
    };
    c.prototype.DrawSegment = function(a, b, c) {
        var d = this.m_ctx, e = this.m_drawScale;
        d.strokeStyle = this._color(c.color, this.m_alpha);
        d.beginPath();
        d.moveTo(a.x * e, a.y * e);
        d.lineTo(b.x * e, b.y * e);
        d.closePath();
        d.stroke()
    };
    c.prototype.DrawTransform = function(a) {
        var b = this.m_ctx, c = this.m_drawScale;
        b.beginPath();
        b.strokeStyle = this._color(16711680, this.m_alpha);
        b.moveTo(a.position.x * c, a.position.y * c);
        b.lineTo((a.position.x + this.m_xformScale * a.R.col1.x) * c, (a.position.y + this.m_xformScale * a.R.col1.y) * c);
        b.strokeStyle = this._color(65280, this.m_alpha);
        b.moveTo(a.position.x * c, a.position.y * c);
        b.lineTo((a.position.x + this.m_xformScale * a.R.col2.x) * c, (a.position.y + this.m_xformScale * a.R.col2.y) * c);
        b.closePath();
        b.stroke()
    }
})();
var i;
for (i = 0; i < Box2D.postDefs.length; ++i)
    Box2D.postDefs[i]();
delete Box2D.postDefs;
function isArrayContains(c, a) {
    return -1 < c.indexOf(a)
}(function(c, a) {
    function b() {
        function b() {
            var c;
            c = a("amd");
            c.fork = b;
            return c
        }
        return b()
    }
    function k() {
        function b() {
            var e, f = [], g = {};
            e = a("global");
            e.fork = b;
            e.noConflict = function() {
                var a, b;
                b = Array.prototype.slice.apply(arguments);
                for (a = 0; a < f.length; a += 1)
                    "undefined" === typeof g[f[a]] ? delete c[f[a]] : c[f[a]] = g[f[a]];
                g = {};
                for (a = 0; a < b.length; a += 1) {
                    if ("string" !== typeof b[a])
                        throw Error("Cannot replace namespaces. All new namespaces must be strings.");
                    g[b[a]] = c[b[a]];
                    c[b[a]] = e
                }
                return f = b
            };
            return e
        }
        b().noConflict("KeyboardJS",
        "k")
    }
    [].indexOf || (Array.prototype.indexOf = function(a, b, c) {
        c = this.length;
        for (b = (c+~~b)%c; b < c && (!(b in this) || this[b] !== a); b++);
        return b^c ? b : -1
    });
    "function" === typeof define && define.amd ? define(b) : k()
})(this, function(c) {
    function a() {
        window.addEventListener ? (document.addEventListener("keydown", k, !1), document.addEventListener("keyup", d, !1), window.addEventListener("blur", b, !1), window.addEventListener("webkitfullscreenchange", b, !1), window.addEventListener("mozfullscreenchange", b, !1)) : window.attachEvent &&
        (document.attachEvent("onkeydown", k), document.attachEvent("onkeyup", d), window.attachEvent("onblur", b))
    }
    function b(a) {
        K = [];
        g();
        h(a)
    }
    function k(a) {
        var b, c;
        b = e(a.keyCode);
        if (!(1 > b.length)) {
            for (c = 0; c < b.length; c += 1)
                y(b[c]);
            for (b = 0; b < D.length; b += 1)
                if (c = t(D[b][0]), -1 === O.indexOf(D[b]) && n(c)
                    )for (O.push(D[b]), c = 0; c < D[b][1].length; c += 1)
                y(D[b][1][c]);
            var d, f, g, k, h, m, p = [];
            c = [].concat(K);
            for (b = 0; b < F.length; b += 1)
                d = w(F[b].keyCombo).length, p[d] || (p[d] = []), p[d].push(F[b]);
            for (d = p.length-1; 0 <= d; d -= 1)
                if (p[d])
                    for (b =
                    0; b < p[d].length; b += 1) {
                        f = p[d][b];
                        g = w(f.keyCombo);
                        m=!0;
                        for (h = 0; h < g.length; h += 1)
                            if (-1 === c.indexOf(g[h])) {
                                m=!1;
                                break
                            }
                            if (m && n(f.keyCombo)) {
                                I.push(f);
                                for (h = 0; h < g.length; h += 1)
                                    m = c.indexOf(g[h]), -1 < m && (c.splice(m, 1), h -= 1);
                                    for (g = 0; g < f.keyDownCallback.length; g += 1)
                                        !1 === f.keyDownCallback[g](a, x(), f.keyCombo) && (k=!0);
                                        !0 === k && (a.preventDefault(), a.stopPropagation())
                                    }
                        }
                }
    }
    function d(a) {
        var b, c;
        b = e(a.keyCode);
        if (!(1 > b.length)) {
            for (c = 0; c < b.length; c += 1)
                p(b[c]);
            g();
            h(a)
        }
    }
    function e(a) {
        return G[a] || []
    }
    function f(a) {
        for (var b in G)
            if (G.hasOwnProperty(b) &&
            -1 < G[b].indexOf(a))
                return b;
        return !1
    }
    function g() {
        var a, b;
        for (a = 0; a < O.length; a += 1)
            if (b = t(O[a][0]), !1 === n(b)
                ) {
            for (b = 0; b < O[a][1].length; b += 1)
                p(O[a][1][b]);
            O.splice(a, 1);
            a -= 1
        }
    }
    function h(a) {
        var b, c, d, e;
        for (b = 0; b < I.length; b += 1)
            if (d = I[b], !1 === n(d.keyCombo)
                ) {
            for (c = 0; c < d.keyUpCallback.length; c += 1)
                !1 === d.keyUpCallback[c](a, x(), d.keyCombo) && (e=!0);
            !0 === e && (a.preventDefault(), a.stopPropagation());
            I.splice(b, 1);
            b -= 1
        }
    }
    function m(a, b) {
        var c, d, e;
        a = t(a);
        b = t(b);
        if (a.length !== b.length)
            return !1;
        for (c = 0; c < a.length; c +=
        1) {
            if (a[c].length !== b[c].length)
                return !1;
            for (d = 0; d < a[c].length; d += 1) {
                if (a[c][d].length !== b[c][d].length)
                    return !1;
                for (e = 0; e < a[c][d].length; e += 1)
                    if (-1 === b[c][d].indexOf(a[c][d][e]))
                        return !1
            }
        }
        return !0
    }
    function n(a) {
        var b, c, d, e, f = 0, g, h;
        a = t(a);
        for (b = 0; b < a.length; b += 1) {
            h=!0;
            for (c = f = 0; c < a[b].length; c += 1) {
                d = [].concat(a[b][c]);
                for (e = f; e < K.length; e += 1)
                    g = d.indexOf(K[e]), -1 < g && (d.splice(g, 1), f = e);
                if (0 !== d.length) {
                    h=!1;
                    break
                }
            }
            if (h)
                return !0
        }
        return !1
    }
    function w(a) {
        var b, c, d = [];
        a = t(a);
        for (b = 0; b < a.length; b += 1)
            for (c =
            0; c < a[b].length; c += 1)
                d = d.concat(a[b][c]);
        return d
    }
    function t(a) {
        var b = 0, c = 0, d=!1, e=!1, f = [], g = [], h = [], k = "";
        if ("object" === typeof a && "function" === typeof a.push)
            return a;
        if ("string" !== typeof a)
            throw Error('Cannot parse "keyCombo" because its type is "' + typeof a + '". It must be a "string".');
        for (; " " === a.charAt(b);)
            b += 1;
        for (; ;) {
            if (" " === a.charAt(b)) {
                for (; " " === a.charAt(b);)
                    b += 1;
                d=!0
            } else if ("," === a.charAt(b)) {
                if (c || e)
                    throw Error("Failed to parse key combo. Unexpected , at character index " + b + ".");
                    e=!0;
                    b += 1
            } else if ("+" === a.charAt(b)) {
                k.length && (h.push(k), k = "");
                if (c || e)
                    throw Error("Failed to parse key combo. Unexpected + at character index " + b + ".");
                    c=!0;
                    b += 1
            } else if (">" === a.charAt(b)) {
                k.length && (h.push(k), k = "");
                h.length && (g.push(h), h = []);
                if (c || e)
                    throw Error("Failed to parse key combo. Unexpected > at character index " + b + ".");
                    c=!0;
                    b += 1
            } else if (b < a.length-1 && "!" === a.charAt(b) && (">" === a.charAt(b + 1) || "," === a.charAt(b + 1) || "+" === a.charAt(b + 1))
                )k += a.charAt(b + 1), e = d = c=!1, b += 2;
            else if (b < a.length && "+" !== a.charAt(b) &&
            ">" !== a.charAt(b) && "," !== a.charAt(b) && " " !== a.charAt(b)) {
                if (!1 === c&&!0 === d ||!0 === e)
                    k.length && (h.push(k), k = ""), h.length && (g.push(h), h = []), g.length && (f.push(g), g = []);
                    for (e = d = c=!1; b < a.length && "+" !== a.charAt(b) && ">" !== a.charAt(b) && "," !== a.charAt(b) && " " !== a.charAt(b);)
                        k += a.charAt(b), b += 1
            } else {
                b += 1;
                continue
            }
            if (b >= a.length) {
                k.length && h.push(k);
                h.length && g.push(h);
                g.length && f.push(g);
                break
            }
        }
        return f
    }
    function v(a) {
        var b, c, d = [];
        if ("string" === typeof a)
            return a;
        if ("object" !== typeof a || "function" !== typeof a.push)
            throw Error("Cannot stringify key combo.");
        for (b = 0; b < a.length; b += 1) {
            d[b] = [];
            for (c = 0; c < a[b].length; c += 1)
                d[b][c] = a[b][c].join(" + ");
            d[b] = d[b].join(" > ")
        }
        return d.join(" ")
    }
    function x(a) {
        return [].concat(K)
    }
    function y(a) {
        if (a.match(/\s/))
            throw Error("Cannot add key name " + a + " to active keys because it contains whitespace.");
        -1 < K.indexOf(a) || K.push(a)
    }
    function p(a) {
        var b = f(a);
        "91" === b || "92" === b ? K = [] : K.splice(K.indexOf(a), 1)
    }
    function C(a, b) {
        if ("string" !== typeof a)
            throw Error("Cannot register new locale. The locale name must be a string.");
        if ("object" !==
        typeof b)
            throw Error("Cannot register " + a + " locale. The locale map must be an object.");
        if ("object" !== typeof b.map)
            throw Error("Cannot register " + a + " locale. The locale map is invalid.");
        b.macros || (b.macros = []);
        H[a] = b
    }
    function B(a) {
        if (a) {
            if ("string" !== typeof a)
                throw Error("Cannot set locale. The locale name must be a string.");
            if (!H[a])
                throw Error("Cannot set locale to " + a + " because it does not exist. If you would like to submit a " + a + " locale map for KeyboardJS please submit it at https://github.com/RobertWHurst/KeyboardJS/issues.");
            G = H[a].map;
            D = H[a].macros;
            E = a
        }
        return E
    }
    c = {};
    var H = {}, E, G, D, K = [], F = [], I = [], O = [], L, r;
    r = {
        map: {
            3: ["cancel"],
            8: ["backspace"],
            9: ["tab"],
            12: ["clear"],
            13: ["enter"],
            16: ["shift"],
            17: ["ctrl"],
            18: ["alt", "menu"],
            19: ["pause", "break"],
            20: ["capslock"],
            27: ["escape", "esc"],
            32: ["space", "spacebar"],
            33: ["pageup"],
            34: ["pagedown"],
            35: ["end"],
            36: ["home"],
            37: ["left"],
            38: ["up"],
            39: ["right"],
            40: ["down"],
            41: ["select"],
            42: ["printscreen"],
            43: ["execute"],
            44: ["snapshot"],
            45: ["insert", "ins"],
            46: ["delete", "del"],
            47: ["help"],
            91: "command windows win super leftcommand leftwindows leftwin leftsuper".split(" "),
            92: "command windows win super rightcommand rightwindows rightwin rightsuper".split(" "),
            145: ["scrolllock", "scroll"],
            186: ["semicolon", ";"],
            187: ["equal", "equalsign", "="],
            188: ["comma", ","],
            189: ["dash", "-"],
            190: ["period", "."],
            191: ["slash", "forwardslash", "/"],
            192: ["graveaccent", "`"],
            219: ["openbracket", "["],
            220: ["backslash", "\\"],
            221: ["closebracket", "]"],
            222: ["apostrophe", "'"],
            48: ["zero", "0"],
            49: ["one", "1"],
            50: ["two", "2"],
            51: ["three", "3"],
            52: ["four", "4"],
            53: ["five", "5"],
            54: ["six", "6"],
            55: ["seven", "7"],
            56: ["eight", "8"],
            57: ["nine", "9"],
            96: ["numzero", "num0"],
            97: ["numone", "num1"],
            98: ["numtwo", "num2"],
            99: ["numthree", "num3"],
            100: ["numfour", "num4"],
            101: ["numfive", "num5"],
            102: ["numsix", "num6"],
            103: ["numseven", "num7"],
            104: ["numeight", "num8"],
            105: ["numnine", "num9"],
            106: ["nummultiply", "num*"],
            107: ["numadd", "num+"],
            108: ["numenter"],
            109: ["numsubtract", "num-"],
            110: ["numdecimal", "num."],
            111: ["numdevide", "num/"],
            144: ["numlock", "num"],
            112: ["f1"],
            113: ["f2"],
            114: ["f3"],
            115: ["f4"],
            116: ["f5"],
            117: ["f6"],
            118: ["f7"],
            119: ["f8"],
            120: ["f9"],
            121: ["f10"],
            122: ["f11"],
            123: ["f12"]
        },
        macros: [["shift + `", ["tilde", "~"]], ["shift + 1", ["exclamation", "exclamationpoint", "!"]], ["shift + 2", ["at", "@"]], ["shift + 3", ["number", "#"]], ["shift + 4", ["dollar", "dollars", "dollarsign", "$"]], ["shift + 5", ["percent", "%"]], ["shift + 6", ["caret", "^"]], ["shift + 7", ["ampersand", "and", "&"]], ["shift + 8", ["asterisk", "*"]], ["shift + 9", ["openparen", "("]], ["shift + 0", ["closeparen", ")"]], ["shift + -", ["underscore", "_"]], ["shift + =", ["plus", "+"]],
        ["shift + (", ["opencurlybrace", "opencurlybracket", "{"]], ["shift + )", ["closecurlybrace", "closecurlybracket", "}"]], ["shift + \\", ["verticalbar", "|"]], ["shift + ;", ["colon", ":"]], ["shift + '", ["quotationmark", '"']], ["shift + !,", ["openanglebracket", "<"]], ["shift + .", ["closeanglebracket", ">"]], ["shift + /", ["questionmark", "?"]]]
    };
    for (L = 65; 90 >= L; L += 1)
        r.map[L] = String.fromCharCode(L + 32), r.macros.push(["shift + " + String.fromCharCode(L + 32) + ", capslock + " + String.fromCharCode(L + 32), [String.fromCharCode(L)]]);
    C("us", r);
    B("us");
    a();
    c.enable = a;
    c.disable = function() {
        b();
        window.removeEventListener ? (document.removeEventListener("keydown", k, !1), document.removeEventListener("keyup", d, !1), window.removeEventListener("blur", b, !1), window.removeEventListener("webkitfullscreenchange", b, !1), window.removeEventListener("mozfullscreenchange", b, !1)) : window.detachEvent && (document.detachEvent("onkeydown", k), document.detachEvent("onkeyup", d), window.detachEvent("onblur", b))
    };
    c.activeKeys = x;
    c.isPressed = function(a) {
        return -1 < K.indexOf(a)
    };
    c.on = function(a, b, c) {
        var d = {}, e, f = [], g, h;
        "string" === typeof a && (a = t(a));
        for (g = 0; g < a.length; g += 1) {
            e = {};
            h = v([a[g]]);
            if ("string" !== typeof h)
                throw Error("Failed to bind key combo. The key combo must be string.");
            e.keyCombo = h;
            e.keyDownCallback = [];
            e.keyUpCallback = [];
            b && e.keyDownCallback.push(b);
            c && e.keyUpCallback.push(c);
            F.push(e);
            f.push(e)
        }
        d.clear = function() {
            var a;
            for (a = 0; a < f.length; a += 1)
                F.splice(F.indexOf(f[a]), 1)
        };
        d.on = function(a) {
            var b = {}, c, d, e;
            if ("string" !== typeof a)
                throw Error("Cannot bind callback. The event name must be a string.");
            if ("keyup" !== a && "keydown" !== a)
                throw Error('Cannot bind callback. The event name must be a "keyup" or "keydown".');
            c = Array.prototype.slice.apply(arguments, [1]);
            for (d = 0; d < c.length; d += 1)
                if ("function" === typeof c[d])
                    if ("keyup" === a)
                        for (e = 0; e < f.length; e += 1)
                            f[e].keyUpCallback.push(c[d]);
                    else if ("keydown" === a)
                        for (e = 0; e < f.length; e += 1)
                            f[e].keyDownCallback.push(c[d]);
            b.clear = function() {
                var b, d;
                for (b = 0; b < c.length; b += 1)
                    if ("function" === typeof c[b])
                        if ("keyup" === a)
                            for (d = 0; d < f.length; d += 1)
                                f[d].keyUpCallback.splice(f[d].keyUpCallback.indexOf(c[b]),
                                1);
                        else 
                            for (d = 0; d < f.length; d += 1)
                                f[d].keyDownCallback.splice(f[d].keyDownCallback.indexOf(c[b]), 1)
            };
            return b
        };
        return d
    };
    c.clear = function(a) {
        var b, c;
        for (b = 0; b < F.length; b += 1)
            c = F[b], m(a, c.keyCombo) && (F.splice(b, 1), b -= 1)
    };
    c.clear.key = function(a) {
        var b, c, d;
        if (a)
            for (b = 0; b < F.length; b += 1)
                for (d = F[b], c = 0; c < d.keyCombo.length; c += 1) {
                    if (-1 < d.keyCombo[c].indexOf(a)) {
                        F.splice(b, 1);
                        b -= 1;
                        break
                    }
                } else 
                    F = []
    };
    c.locale = B;
    c.locale.register = C;
    c.macro = function(a, b) {
        if ("string" !== typeof a && ("object" !== typeof a || "function" !==
        typeof a.push))
            throw Error("Cannot create macro. The combo must be a string or array.");
        if ("object" !== typeof b || "function" !== typeof b.push)
            throw Error("Cannot create macro. The injectedKeys must be an array.");
        D.push([a, b])
    };
    c.macro.remove = function(a) {
        var b;
        if ("string" !== typeof a && ("object" !== typeof a || "function" !== typeof a.push))
            throw Error("Cannot remove macro. The combo must be a string or array.");
        for (mI = 0; mI < D.length; mI += 1)
            if (b = D[mI], m(a, b[0])
                ) {
            p(b[1]);
            D.splice(mI, 1);
            break
        }
    };
    c.key = {};
    c.key.name =
    e;
    c.key.code = f;
    c.combo = {};
    c.combo.active = n;
    c.combo.parse = t;
    c.combo.stringify = v;
    return c
});
var allLevels = [[[HERO_TYPE, 160, 176, 0.13]], [[HERO_TYPE, 238, 86, 0.75], [ENEMY_SIMPLE_TYPE, 76, 214, 0.29]], [[HERO_TYPE, 261, 185, 0.38], [ENEMY_SIMPLE_TYPE, 133, 45, 0.35], [ENEMY_SIMPLE_TYPE, 53, 229, 0.17]], [[HERO_TYPE, 273, 78, 0.25], [ENEMY_SIMPLE_TYPE, 264, 308, 0.35], [HERO_TYPE, 48, 312, 0.21], [ENEMY_SIMPLE_TYPE, 49, 79, 0.25]], [[HERO_TYPE, 245, 306, 0.38], [ENEMY_SIMPLE_TYPE, 251, 64, 0.41], [ENEMY_STONE_TYPE, 172, 132, 0.3], [HERO_TYPE, 41, 313, 0.09]], [[ENEMY_SIMPLE_TYPE, 291, 37, 0.07], [ENEMY_SIMPLE_TYPE, 252, 183, 0.35], [HERO_TYPE, 32, 184,
0.09], [ENEMY_SIMPLE_TYPE, 284, 324, 0.07]], [[ENEMY_SIMPLE_TYPE, 198, 46, 0.29], [HERO_TYPE, 48, 90, 0.5], [HERO_TYPE, 251, 305, 0.4], [ENEMY_STONE_TYPE, 143, 190, 0.6], [ENEMY_SIMPLE_TYPE, 37, 312, 0.12], [ENEMY_SIMPLE_TYPE, 285, 133, 0.12]], [[HERO_TYPE, 158, 186, 0.71], [ENEMY_SIMPLE_TYPE, 37, 312, 0.12], [ENEMY_SIMPLE_TYPE, 257, 80, 0.12], [ENEMY_SIMPLE_TYPE, 291, 328, 0.1], [ENEMY_SIMPLE_TYPE, 28, 45, 0.13]], [[HERO_TYPE, 158, 66, 0.33], [ENEMY_HARD_TYPE, 155, 282, 0.75]], [[ENEMY_SIMPLE_TYPE, 101, 147, 0.96], [HERO_TYPE, 42, 314, 0.09], [HERO_TYPE, 264, 314,
0.34], [HERO_TYPE, 277, 42, 0.09]], [[HERO_TYPE, 196, 46, 0.22], [ENEMY_HARD_TYPE, 46, 154, 0.33], [ENEMY_HARD_TYPE, 282, 241, 0.33], [HERO_TYPE, 113, 312, 0.22]], [[HERO_TYPE, 44, 32, 0.03], [HERO_TYPE, 131, 161, 0.03], [HERO_TYPE, 287, 327, 0.03], [ENEMY_HARD_TYPE, 56, 296, 0.45], [HERO_TYPE, 295, 32, 0.03], [HERO_TYPE, 287, 176, 0.03]], [[HERO_TYPE, 89, 321, 0.11], [ENEMY_HARD_TYPE, 260, 293, 0.25], [HERO_TYPE, 37, 133, 0.22], [ENEMY_STONE_TYPE, 183, 171, 0.3], [ENEMY_SIMPLE_TYPE, 270, 52, 0.11]], [[HERO_TYPE, 160, 306, 0.22], [ENEMY_INFLATE_TYPE, 173, 72, 0.3]], [[HERO_TYPE,
283, 110, 0.22], [ENEMY_INFLATE_TYPE, 57, 308, 0.19], [ENEMY_INFLATE_TYPE, 57, 51, 0.01], [HERO_TYPE, 277, 315, 0.03], [ENEMY_STONE_TYPE, 191, 217, 0.3]], [[HERO_TYPE, 153, 315, 0.22], [ENEMY_INFLATE_TYPE, 160, 63, 0.54], [ENEMY_SIMPLE_TYPE, 81, 75, 0.02], [ENEMY_SIMPLE_TYPE, 237, 83, 0.02]], [[HERO_TYPE, 257, 32, 0.02], [ENEMY_INFLATE_TYPE, 262, 280, 0.25], [HERO_TYPE, 166, 180, 0.22], [ENEMY_HARD_TYPE, 62, 304, 0.32]], [[HERO_TYPE, 166, 212, 0.22], [HERO_TYPE, 140, 161, 0.22], [HERO_TYPE, 192, 161, 0.22], [ENEMY_HARD_TYPE, 54, 319, 0.18], [ENEMY_SIMPLE_TYPE, 265,
309, 0.5], [ENEMY_STONE_TYPE, 162, 44, 0.3]], [[HERO_TYPE, 166, 180, 0.83], [ENEMY_INFLATE_TYPE, 211, 53, 0.2], [ENEMY_INFLATE_TYPE, 264, 318, 0.16], [ENEMY_INFLATE_TYPE, 42, 312, 0.03], [ENEMY_INFLATE_TYPE, 37, 77, 0.14]], [[HERO_TYPE, 234, 119, 0.25], [ENEMY_SICK_TYPE, 96, 269, 0.45]], [[HERO_TYPE, 47, 68, 0.25], [ENEMY_SICK_TYPE, 266, 183, 0.45], [HERO_TYPE, 181, 316, 0.14], [ENEMY_SIMPLE_TYPE, 272, 56, 0.35], [ENEMY_SICK_TYPE, 42, 274, 0.03]], [[HERO_TYPE, 154, 288, 0.18], [HERO_TYPE, 154, 338, 0.05], [ENEMY_SIMPLE_TYPE, 155, 148, 0.35], [ENEMY_SICK_TYPE, 155,
81, 0.18], [HERO_TYPE, 154, 227, 0.31], [ENEMY_SIMPLE_TYPE, 151, 24, 0.04]], [[HERO_TYPE, 282, 291, 0.18], [ENEMY_SIMPLE_TYPE, 238, 96, 0.35], [HERO_TYPE, 44, 294, 0.14], [ENEMY_SIMPLE_TYPE, 151, 42, 0.21], [ENEMY_STONE_TYPE, 158, 296, 0.75], [ENEMY_HARD_TYPE, 82, 106, 0.3]], [[HERO_TYPE, 267, 74, 0.18], [HERO_TYPE, 53, 144, 0.14], [ENEMY_STONE_TYPE, 175, 195, 0.38], [ENEMY_HARD_TYPE, 50, 313, 0.3], [ENEMY_INFLATE_TYPE, 265, 309, 0.23], [ENEMY_STONE_TYPE, 133, 50, 0.38]], [[HERO_TYPE, 249, 243, 0.29], [HERO_TYPE, 48, 107, 0.36], [ENEMY_SIMPLE_TYPE, 236, 58, 0.35],
[ENEMY_SIMPLE_TYPE, 59, 313, 0.35], [ENEMY_SIMPLE_TYPE, 148, 181, 0.13]], [[HERO_TYPE, 67, 69, 0.29], [HERO_TYPE, 58, 302, 0.36], [ENEMY_HARD_TYPE, 254, 199, 0.5], [ENEMY_STONE_TYPE, 259, 47, 0.3]], [[HERO_TYPE, 242, 185, 0.71], [ENEMY_SIMPLE_TYPE, 37, 67, 0.35], [ENEMY_SIMPLE_TYPE, 255, 60, 0.35], [ENEMY_SIMPLE_TYPE, 54, 314, 0.35], [ENEMY_SIMPLE_TYPE, 100, 190, 0.03], [ENEMY_SICK_TYPE, 221, 324, 0.25]], [[HERO_TYPE, 36, 321, 0.07], [ENEMY_SICK_TYPE, 160, 278, 0.37], [HERO_TYPE, 261, 329, 0.07], [HERO_TYPE, 274, 178, 0.07], [HERO_TYPE, 43, 178, 0.07], [ENEMY_SICK_TYPE,
153, 108, 0.34], [HERO_TYPE, 274, 57, 0.07]], [[HERO_TYPE, 46, 318, 0.36], [ENEMY_SIMPLE_TYPE, 267, 134, 0.35], [ENEMY_SIMPLE_TYPE, 282, 308, 0.35], [ENEMY_STONE_TYPE, 192, 55, 0.3], [ENEMY_STONE_TYPE, 160, 241, 0.72], [ENEMY_STONE_TYPE, 42, 190, 0.3]], [[HERO_TYPE, 270, 298, 0.36], [ENEMY_INFLATE_TYPE, 56, 61, 0.23], [HERO_TYPE, 65, 302, 0.36], [ENEMY_SIMPLE_TYPE, 164, 64, 0.31], [ENEMY_STONE_TYPE, 157, 176, 0.57], [ENEMY_HARD_TYPE, 262, 70, 0.36], [HERO_TYPE, 167, 304, 0.36]]], manifest = [{
    src: "bgassets.jpg",
    id: "bgspritesheet"
}, {
    src: "expandassets.png",
    id: "zoespritesheet"
},
{
    src: "interfaceassets.png",
    id: "interfacespritesheet"
}
], zoeCFG = {
    framerate: 30,
    images: ["expandassets.png"],
    frames: [[127, 312, 35, 35, 0, 17, 16], [985, 2, 35, 35, 0, 17, 16], [955, 312, 27, 22, 0, 11, 13], [709, 312, 26, 24, 0, 11, 13], [826, 312, 27, 23, 0, 11, 13], [801, 312, 25, 23, 0, 11, 13], [927, 312, 28, 23, 0, 12, 14], [618, 312, 28, 24, 0, 12, 13], [590, 312, 28, 24, 0, 12, 14], [684, 312, 25, 24, 0, 10, 13], [773, 312, 28, 23, 0, 12, 13], [237, 312, 27, 25, 0, 11, 13], [447, 312, 36, 24, 0, 16, 13], [555, 312, 35, 24, 0, 16, 13], [520, 312, 35, 24, 0, 15, 13], [483, 312, 37, 24, 0, 17, 13], [199, 312,
    38, 25, 0, 17, 14], [410, 312, 37, 24, 0, 16, 13], [264, 312, 36, 25, 0, 16, 14], [336, 312, 36, 24, 0, 16, 13], [372, 312, 38, 24, 0, 17, 13], [162, 312, 37, 25, 0, 16, 13], [853, 312, 37, 23, 0, 16, 13], [300, 312, 36, 24, 0, 16, 13], [890, 312, 37, 23, 0, 16, 13], [735, 312, 38, 23, 0, 17, 13], [646, 312, 38, 24, 0, 17, 14], [946, 2, 39, 36, 0, 20, 15], [905, 2, 41, 36, 0, 20, 15], [551, 2, 177, 168, 0, 87, 82], [188, 2, 177, 171, 0, 87, 85], [2, 2, 186, 174, 0, 92, 88], [728, 2, 177, 164, 0, 87, 78], [365, 2, 186, 170, 0, 92, 84], [382, 176, 132, 135, 0, 64, 65], [250, 176, 132, 135, 0, 64, 65], [2, 312, 125, 125, 0, 60, 60], [764, 176,
    125, 126, 0, 60, 60], [889, 176, 125, 125, 0, 61, 62], [126, 176, 124, 136, 0, 60, 63], [2, 176, 124, 136, 0, 60, 63], [639, 176, 125, 130, 0, 61, 63], [514, 176, 125, 130, 0, 61, 63]],
    animations: {
        numb17: {
            speed: 1,
            frames: [19]
        },
        numb12: {
            speed: 1,
            frames: [14]
        },
        numb8: {
            speed: 1,
            frames: [10]
        },
        heroinfected: {
            speed: 1,
            frames: [32, 32, 33, 33, 33, 33, 33]
        },
        numb2: {
            speed: 1,
            frames: [4]
        },
        numb22: {
            speed: 1,
            frames: [24]
        },
        sickv: {
            speed: 1,
            frames: [41, 42, 42, 42, 42]
        },
        particle2v: {
            speed: 1,
            frames: [1]
        },
        numb23: {
            speed: 1,
            frames: [25]
        },
        numb13: {
            speed: 1,
            frames: [15]
        },
        numb19: {
            speed: 1,
            frames: [21]
        },
        numb15: {
            speed: 1,
            frames: [17]
        },
        homyakv: {
            speed: 1,
            frames: [39, 40, 40]
        },
        hero1v: {
            speed: 1,
            frames: [29, 30, 31, 31]
        },
        cloud1v: {
            speed: 1,
            frames: [27]
        },
        stonev: {
            speed: 1,
            frames: [38]
        },
        numb7: {
            speed: 1,
            frames: [9]
        },
        enemy1v: {
            speed: 1,
            frames: [34, 35, 35]
        },
        numb1: {
            speed: 1,
            frames: [3]
        },
        cloud2v: {
            speed: 1,
            frames: [28]
        },
        numb6: {
            speed: 1,
            frames: [8]
        },
        numb24: {
            speed: 1,
            frames: [26]
        },
        numb16: {
            speed: 1,
            frames: [18]
        },
        numb10: {
            speed: 1,
            frames: [12]
        },
        numb4: {
            speed: 1,
            frames: [6]
        },
        enemysimple: {
            speed: 1,
            frames: [36, 37, 37]
        },
        numb5: {
            speed: 1,
            frames: [7]
        },
        numb0: {
            speed: 1,
            frames: [2]
        },
        numb21: {
            speed: 1,
            frames: [23]
        },
        numb3: {
            speed: 1,
            frames: [5]
        },
        numb18: {
            speed: 1,
            frames: [20]
        },
        numb11: {
            speed: 1,
            frames: [13]
        },
        numb20: {
            speed: 1,
            frames: [22]
        },
        numb9: {
            speed: 1,
            frames: [11]
        },
        numb14: {
            speed: 1,
            frames: [16]
        },
        particle1v: {
            speed: 1,
            frames: [0]
        }
    }
}, interfaceCFG = {
    framerate: 24,
    images: ["interfaceassets.png"],
    frames: [[322, 2, 319, 303, 0, -3, -29], [641, 2, 326, 236, 0, 170, 147], [513, 322, 110, 114, 0, 54, 53], [403, 322, 110, 114, 0, 54, 53], [2, 775, 210, 42, 0, 97, 16], [468, 577, 65, 68, 0, 31, 30], [404, 577, 64, 68, 0, 30, 30], [340, 577, 64, 68,
    0, 30, 30], [737, 721, 113, 44, 0, 51, 18], [76, 577, 72, 75, 0, 35, 34], [2, 577, 74, 78, 0, 36, 35], [849, 487, 74, 79, 0, 36, 36], [923, 487, 75, 79, 0, 36, 36], [167, 322, 110, 134, 0, 53, 82], [274, 655, 60, 64, 0, 29, 28], [967, 2, 47, 48, 0, 22, 22], [623, 322, 203, 107, 0, 101, 22], [850, 721, 36, 40, 0, 0, 0], [281, 721, 182, 53, 0, 89, 22], [2, 856, 242, 37, 0, 119, 15], [2, 655, 272, 66, 0, 134, 37], [281, 487, 81, 86, 0, 39, 39], [927, 322, 81, 86, 0, 39, 39], [148, 577, 64, 74, 0, 30, 36], [212, 577, 64, 74, 0, 30, 36], [276, 577, 64, 74, 0, 30, 36], [2, 2, 320, 320, 0, 153, 149], [196, 487, 85, 89, 0, 41, 40], [826, 322, 101,
    100, 0, 49, 51], [676, 775, 264, 40, 0, 131, 16], [2, 322, 165, 165, 0, 80, 80], [212, 775, 221, 41, 0, 110, 17], [2, 893, 107, 31, 0, 56, 14], [459, 893, 129, 29, 0, 62, 13], [821, 856, 154, 32, 0, 75, 15], [343, 893, 116, 29, 0, 56, 13], [886, 721, 86, 36, 0, 41, 13], [597, 817, 193, 37, 0, 94, 13], [433, 775, 243, 40, 0, 120, 15], [109, 893, 190, 31, 0, 93, 15], [441, 817, 156, 38, 0, 76, 15], [244, 856, 308, 37, 0, 153, 14], [2, 817, 230, 39, 0, 113, 16], [334, 655, 278, 62, 0, 136, 16], [362, 487, 284, 81, 0, 141, 40], [2, 721, 279, 54, 0, 137, 14], [552, 856, 269, 35, 0, 132, 15], [533, 577, 307, 68, 0, 150, 33], [232, 817, 209,
    38, 0, 105, 19], [277, 322, 126, 125, 0, 60, 60], [463, 721, 274, 47, 0, 137, 20], [2, 487, 194, 90, 0, 94, 7], [859, 655, 136, 44, 0, 68, 20], [610, 893, 171, 28, 0, 90, 14], [790, 817, 197, 35, 0, 80, 18], [940, 775, 77, 35, 0, 63, 14], [840, 577, 181, 59, 0, 83, 26], [612, 655, 247, 60, 0, 121, 30], [646, 487, 203, 80, 0, 99, 40], [299, 893, 21, 29, 0, 0, -10], [320, 893, 23, 29, 0, 0, -10], [975, 856, 23, 29, 0, -1, -10], [972, 721, 26, 30, 0, 0, -7], [987, 817, 23, 30, 0, 0, -10], [998, 721, 21, 30, 0, 0, -10], [998, 856, 25, 29, 0, 0, -9], [995, 655, 23, 31, 0, 0, -10], [588, 893, 22, 28, 0, 0, -10], [998, 487, 23, 31, 0, 0, -7]],
    animations: {
        0: {
            speed: 1,
            frames: [67]
        },
        1: {
            speed: 1,
            frames: [59]
        },
        3: {
            speed: 1,
            frames: [61]
        },
        4: {
            speed: 1,
            frames: [62]
        },
        7: {
            speed: 1,
            frames: [64]
        },
        9: {
            speed: 1,
            frames: [66]
        },
        5: {
            speed: 1,
            frames: [63, 63]
        },
        6: {
            speed: 1,
            frames: [68]
        },
        8: {
            speed: 1,
            frames: [65]
        },
        2: {
            speed: 1,
            frames: [60]
        },
        achievdesc4: {
            speed: 1,
            frames: [37]
        },
        biglimetxt: {
            speed: 1,
            frames: [54]
        },
        lostallfishes: {
            speed: 1,
            frames: [19]
        },
        previouslevels: {
            speed: 1,
            frames: [22]
        },
        creditstitle: {
            speed: 1,
            frames: [52]
        },
        tintbg: {
            speed: 1,
            frames: [17]
        },
        quitbtn: {
            speed: 1,
            frames: [9]
        },
        moreeasybtn: {
            speed: 1,
            frames: [56]
        },
        achievdesc3: {
            speed: 1,
            frames: [36]
        },
        pausebtn: {
            speed: 1,
            frames: [15]
        },
        allcollectedstars: {
            speed: 1,
            frames: [51]
        },
        tryagaintitle: {
            speed: 1,
            frames: [18]
        },
        radugav: {
            speed: 1,
            frames: [30]
        },
        restartbtn: {
            speed: 1,
            frames: [12]
        },
        lvlLabelStar3: {
            speed: 1,
            frames: [25]
        },
        achievbtn: {
            speed: 1,
            frames: [13]
        },
        musiconbtn: {
            speed: 1,
            frames: [10]
        },
        pausetitle: {
            speed: 1,
            frames: [8]
        },
        achievdesc2: {
            speed: 1,
            frames: [35]
        },
        readytitle: {
            speed: 1,
            frames: [16]
        },
        btnbaseup: {
            speed: 1,
            frames: [14]
        },
        bigbgwindow: {
            speed: 1,
            frames: [0]
        },
        keygameslogo: {
            speed: 1,
            frames: [57]
        },
        nextlevelwin: {
            speed: 1,
            frames: [27]
        },
        logov: {
            speed: 1,
            frames: [1]
        },
        levelinstruction8: {
            speed: 1,
            frames: [48]
        },
        achievclosed: {
            speed: 1,
            frames: [32]
        },
        levelinstruction6: {
            speed: 1,
            frames: [47]
        },
        levelselecttitle: {
            speed: 1,
            frames: [4]
        },
        completestar: {
            speed: 1,
            frames: [28, 28]
        },
        lvlLabelStar0: {
            speed: 1,
            frames: [6]
        },
        musicoffbtn: {
            speed: 1,
            frames: [11]
        },
        levelinstruction5: {
            speed: 1,
            frames: [46]
        },
        lvlLabelStar1: {
            speed: 1,
            frames: [23]
        },
        inspiredby: {
            speed: 1,
            frames: [53]
        },
        levelinstruction4: {
            speed: 1,
            frames: [45]
        },
        growCircle: {
            speed: 1,
            frames: [49]
        },
        levelinstruction3: {
            speed: 1,
            frames: [44]
        },
        achievdesc1: {
            speed: 1,
            frames: [34]
        },
        levelreadylabel: {
            speed: 1,
            frames: [55]
        },
        levelinstruction2: {
            speed: 1,
            frames: [43]
        },
        playbtnup: {
            speed: 1,
            frames: [2]
        },
        levelinsruction1: {
            speed: 1,
            frames: [42]
        },
        backbtn: {
            speed: 1,
            frames: [5]
        },
        achievmenutitle: {
            speed: 1,
            frames: [31]
        },
        gamecompletedTitle: {
            speed: 1,
            frames: [50]
        },
        achievdesc7: {
            speed: 1,
            frames: [41]
        },
        nextlevels: {
            speed: 1,
            frames: [21]
        },
        spelelogo: {
            speed: 1,
            frames: [58]
        },
        lvlcompletebgnew: {
            speed: 1,
            frames: [26]
        },
        achievdesc0: {
            speed: 1,
            frames: [33]
        },
        achievdesc8: {
            speed: 1,
            frames: [40]
        },
        achievedtitle: {
            speed: 1,
            frames: [29]
        },
        downplaybtn: {
            speed: 1,
            frames: [3]
        },
        levelbuttonlocked: {
            speed: 1,
            frames: [7]
        },
        achievdesc6: {
            speed: 1,
            frames: [39]
        },
        achievdesc5: {
            speed: 1,
            frames: [38]
        },
        notcollidegrow: {
            speed: 1,
            frames: [20]
        },
        lvlLabelStar2: {
            speed: 1,
            frames: [24]
        }
    }
}, bgCFG = {
    framerate: 24,
    images: ["bgassets.jpg"],
    frames: [[0, 568, 321, 357, 0, 0, 0], [321, 568, 321, 357, 0, 0, 0], [426, 0, 321, 357, 0, 0, 0], [0, 0, 426, 568, 0, 0, 0], [747, 0, 261, 356, 0, 0, 0]],
    animations: {
        aquabg3: {
            frames: [2],
            speed: 1
        },
        bigbg: {
            frames: [3],
            speed: 1
        },
        aquabg1: {
            frames: [0],
            speed: 1
        },
        aquabg2: {
            frames: [1],
            speed: 1
        },
        rotateScreen: {
            frames: [4],
            speed: 1
        }
    }
}, PART_STAR_TYPE = 1, PART_CLOUD_TYPE = 2, PART_NUM_TYPE = 3, PART_INSTRUCTION_TYPE = 4, MAX_PARTICLES_ON_SCREEN = 12;
(function(c) {
    function a(a, b, c) {
        this.initialize(a, b, c)
    }
    var b = a.prototype;
    b.initialize = function(a, b, c) {
        var f = new createjs.Sprite(zoeSS);
        f.snapToPixel=!0;
        f.baseBlock = this;
        this.vision = f;
        this.reset(a, b, c)
    };
    b.reset = function(a, b, c) {
        this.type = a;
        this.vision.parent != b && removeFromParent(this.vision);
        createjs.Tween.removeTweens(this.vision);
        this.parent = b;
        this.vision.alpha = 1;
        this.vision.mouseEnabled=!1;
        this.speedA = this.speedY = this.speedX = 0;
        this.gravity = 0.6;
        this.isNeedDispose = this.isInstruction = this.isNum=!1;
        this.vision.spriteSheet =
        zoeSS;
        var f = "numb0";
        a == PART_STAR_TYPE ? f = 0.5 < Math.random() ? "particle1v" : "particle2v" : a == PART_NUM_TYPE ? this.isNum=!0 : a == PART_CLOUD_TYPE ? (this.gravity = 0, f = 0.5 < Math.random() ? "cloud1v" : "cloud2v") : a == PART_INSTRUCTION_TYPE && (this.isInstruction=!0, this.vision.spriteSheet = interfaceSS);
        this.vision.gotoAndStop(f);
        this.scale = c;
        this.updateVisionScale();
        b.addChild(this.vision)
    };
    b.setPos = function(a, b) {
        this.vision.x = a;
        this.vision.y = b
    };
    b.setNum = function(a) {
        this.gravity = 0;
        this.vision.rotation = 0;
        this.vision.gotoAndStop("numb" +
        a)
    };
    b.setFrame = function(a) {
        this.gravity = 0;
        this.vision.rotation = 0;
        this.vision.gotoAndStop(a)
    };
    b.tick = function() {
        this.isNeedDispose || (this.vision.x += this.speedX, this.vision.y += this.speedY, this.speedY += this.gravity, this.vision.rotation += this.speedA, this.isNum ? this.vision.alpha -= 0.03 : this.isInstruction || (this.vision.alpha -= 0.06, this.vision.scaleX += 0.03, this.vision.scaleY = this.vision.scaleX), 0.05 > this.vision.alpha && (this.isNeedDispose=!0))
    };
    b.updateVisionScale = function() {
        this.vision.scaleX = this.vision.scaleY =
        this.scale
    };
    b.dispose = function() {
        isArrayContains(allParts, this) && allParts.splice(allParts.indexOf(this, 0), 1);
        addToDisposedParts(this);
        this.vision.removeAllEventListeners();
        this.vision.stop();
        removeFromParent(this.vision)
    };
    c.ParticleBase = a
})(window);
var allParts = [], disposedParts = [];
function createPartExplode(c, a, b, k, d) {
    for (var e, f = 0; f < b; f++) {
        var g = f * (2 * Math.PI / b), h = Math.cos(g), g = Math.sin(g);
        e = 0.5 + 0.5 * Math.random();
        e = createPart(k, c, a, e, d ? d : blockContainer);
        e.speedX = (2 + 2 * Math.random()) * h;
        e.speedY = (2 + 2 * Math.random()) * g;
        e.speedA = 20 * Math.random()
    }
}
function createNumPart(c, a, b) {
    c = createPart(PART_NUM_TYPE, c, a, 1, blockContainer);
    c.setNum(b);
    c.speedX = 0;
    c.speedY =- 1;
    c.speedA = 0
}
var allPartsLenght = 0;
function createPart(c, a, b, k, d) {
    var e;
    allPartsLenght = allParts.length;
    if (allPartsLenght > MAX_PARTICLES_ON_SCREEN) {
        for (var f = 0; f < allPartsLenght; f++)
            if (allParts[f].type != PART_INSTRUCTION_TYPE) {
                e = allParts[f];
                break
            }
        e || (e = allParts[0]);
        e.reset(c, d, k)
    } else 
        e = gePartFromPool(c, d, k);
    e.setPos(a, b);
    isArrayContains(allParts, e) || allParts.push(e);
    return e
}
function addToDisposedParts(c) {
    isArrayContains(disposedParts, c) || disposedParts.push(c)
}
function gePartFromPool(c, a, b) {
    if (0 < disposedParts.length) {
        var k = disposedParts.pop();
        k.reset(c, a, b);
        return k
    }
    return new ParticleBase(c, a, b)
}
var partLength = 0, currPart = null, disposeNeededParts = [];
function updatePartManager() {
    partLength = allParts.length;
    for (var c = 0; c < partLength; c++)
        currPart = allParts[c], currPart.tick(), currPart.isNeedDispose && disposeNeededParts.push(currPart);
    for (; 0 < disposeNeededParts.length;)
        disposeNeededParts.pop().dispose()
}
var world, PHYS_SCALE = 30, RAD_TO_DEGREES = 180 / Math.PI, DEGREES_TO_RAD = Math.PI / 180, b2Vec2 = Box2D.Common.Math.b2Vec2, b2AABB = Box2D.Collision.b2AABB, b2BodyDef = Box2D.Dynamics.b2BodyDef, b2Body = Box2D.Dynamics.b2Body, b2FixtureDef = Box2D.Dynamics.b2FixtureDef, b2Fixture = Box2D.Dynamics.b2Fixture, b2World = Box2D.Dynamics.b2World, b2MassData = Box2D.Collision.Shapes.b2MassData, b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape, b2CircleShape = Box2D.Collision.Shapes.b2CircleShape, b2DebugDraw = Box2D.Dynamics.b2DebugDraw, b2MouseJointDef =
Box2D.Dynamics.Joints.b2MouseJointDef, objA, objB;
function initPhysics() {
    world = new b2World(new b2Vec2(0, 0), !1);
    if (isPhysicsDebugDraw) {
        var c = document.createElement("canvas");
        c.id = "debugCanvas";
        c.width = 1280;
        c.height = 1424;
        c.style.position = "absolute";
        c.style.left = "50%";
        c.style.top = "10%";
        c.style.marginLeft = "-160px";
        c.style.pointerEvents = "none";
        document.body.appendChild(c);
        var a = new b2DebugDraw;
        a.SetSprite(c.getContext("2d"));
        a.SetDrawScale(60);
        a.SetFillAlpha(0.5);
        a.SetLineThickness(1);
        a.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit);
        world.SetDebugDraw(a)
    }
    worldManifold =
    new Box2D.Collision.b2WorldManifold;
    fixDef = new b2FixtureDef;
    bodyDef = new b2BodyDef;
    c = new Box2D.Dynamics.b2ContactListener;
    c.BeginContact = beginContactListener;
    this.world.SetContactListener(c)
}
var worldManifold, isCollideParticlesNeed=!0;
function beginContactListener(c) {
    objA = c.m_fixtureA.m_body.m_userData;
    objB = c.m_fixtureB.m_body.m_userData;
    isCollideParticlesNeed=!0;
    var a;
    objA && objB && (objA.isEnemy&&!objB.isEnemy ? (a = objA.type, objA.withHeroCollide(objB), objB.withEnemyCollide(objA, a), checkLevelWin()) : !objA.isEnemy && objB.isEnemy && (a = objB.type, objB.withHeroCollide(objA), objA.withEnemyCollide(objB, a), checkLevelWin()), isCollideParticlesNeed && (c.GetWorldManifold(worldManifold), c = worldManifold.m_points[0], createPartExplode(c.x * PHYS_SCALE,
    c.y * PHYS_SCALE, 6, PART_STAR_TYPE)))
}
var fixDef, bodyDef;
function createPhysicsWalls() {
    fixDef.density = 1;
    fixDef.friction = 0.5;
    fixDef.restitution = 0.2;
    bodyDef.type = b2Body.b2_staticBody;
    fixDef.shape = new b2PolygonShape;
    fixDef.shape.SetAsBox(14, 2);
    bodyDef.position.Set(7, 356 / PHYS_SCALE + 2);
    world.CreateBody(bodyDef).CreateFixture(fixDef);
    bodyDef.position.Set(7, -2);
    world.CreateBody(bodyDef).CreateFixture(fixDef);
    fixDef.shape.SetAsBox(2, 8);
    bodyDef.position.Set(-2, 8);
    world.CreateBody(bodyDef).CreateFixture(fixDef);
    bodyDef.position.Set(320 / PHYS_SCALE + 2, 8);
    world.CreateBody(bodyDef).CreateFixture(fixDef)
}
function createCharShape(c, a, b, k) {
    k == HERO_TYPE ? (fixDef.density = 2, fixDef.friction = 2, fixDef.restitution = 0.7) : (fixDef.density = 20, fixDef.friction = 2, fixDef.restitution = 1);
    bodyDef.type = b2Body.b2_dynamicBody;
    fixDef.shape = new b2CircleShape(b);
    bodyDef.position.x = c;
    bodyDef.position.y = a;
    c = world.CreateBody(bodyDef);
    c.CreateFixture(fixDef);
    return c
}
function addShapeScale(c, a) {
    c && c.GetFixtureList().GetShape().SetRadius(55 * a / PHYS_SCALE)
}
var MINIMUM_SPEED = 3, MAX_SPEED = 6, IS_NITRO=!1, DEFAULT_LIFES = 40, DEFAULT_LIFES_INFLATE = DEFAULT_LIFES, DEFAULT_STATE = 0, COLLIDED_STATE = 1, MORE_EASY_MULT = 1;
(function(c) {
    function a(a, b, c, f) {
        this.initialize(a, b, c, f)
    }
    var b = a.prototype;
    b.initialize = function(a, b, c, f) {
        var g = new createjs.Sprite(zoeSS);
        g.baseBlock = this;
        this.vision = g;
        this.reset(a, b, c, f)
    };
    b.reset = function(a, b, c, f) {
        this.type = a;
        createjs.Tween.removeTweens(this.vision);
        this.name = f ? f : "charik";
        this.parent = b;
        this.vision.isOnTop=!1;
        this.vision.isOnBottom=!0;
        this.isNeedDispose = this.isInflate=!1;
        this.vision.alpha = 1;
        this.vision.mouseEnabled=!1;
        this.physBody = null;
        this.isEnemy=!1;
        this.shape = null;
        this.isNeutralEnemy =
        !1;
        this.speedOffset = this.currSpeed = 0;
        this.damageMult = 4;
        this.isSick=!1;
        this.state = DEFAULT_STATE;
        this.collideTimer = 0;
        this.lastColliderType =- 1;
        this.isInfected=!1;
        this.raduis = this.vision.rotation = 0;
        this.vel = null;
        this.lifes = c * DEFAULT_LIFES;
        this.vision.cursor = null;
        a == HERO_TYPE ? isDesktop() && (this.vision.cursor = "pointer", this.vision.mouseEnabled=!0) : a == ENEMY_SIMPLE_TYPE ? this.isEnemy=!0 : a == ENEMY_STONE_TYPE ? this.isNeutralEnemy = this.isEnemy=!0 : a == ENEMY_INFLATE_TYPE ? this.isEnemy=!0 : a == ENEMY_HARD_TYPE ? this.isEnemy =
        !0 : a == ENEMY_SICK_TYPE && (this.isSick = this.isEnemy=!0);
        this.setVisionByType();
        this.setDamageByType();
        this.updateVisionScale();
        b.addChild(this.vision)
    };
    b.setVisionByType = function() {
        this.type == HERO_TYPE ? this.isInfected ? this.vision.gotoAndStop("heroinfected") : this.vision.gotoAndStop("hero1v") : this.type == ENEMY_SIMPLE_TYPE ? this.vision.gotoAndStop("enemysimple") : this.type == ENEMY_STONE_TYPE ? this.vision.gotoAndStop("stonev") : this.type == ENEMY_INFLATE_TYPE ? this.vision.gotoAndStop("homyakv") : this.type == ENEMY_HARD_TYPE ?
        this.vision.gotoAndStop("enemy1v") : this.type == ENEMY_SICK_TYPE && this.vision.gotoAndStop("sickv")
    };
    b.setDamageByType = function() {
        this.type == HERO_TYPE ? this.damageMult = 4 * MORE_EASY_MULT : this.type == ENEMY_SIMPLE_TYPE ? this.damageMult = 3.2 : this.type == ENEMY_STONE_TYPE ? this.damageMult = 0 : this.type == ENEMY_INFLATE_TYPE ? this.damageMult = 3.2 : this.type == ENEMY_HARD_TYPE ? this.damageMult = 9 : this.type == ENEMY_SICK_TYPE && (this.damageMult = 3.2)
    };
    b.setPos = function(a, b) {
        this.vision.x = a;
        this.vision.y = b
    };
    b.initPhysics = function() {
        this.physBody &&
        world.DestroyBody(this.physBody);
        var a = createCharShape(this.vision.x / PHYS_SCALE, this.vision.y / PHYS_SCALE, 55 * this.scale / PHYS_SCALE, this);
        a.SetUserData(this);
        a.SetAngle(this.vision.rotation * DEGREES_TO_RAD);
        this.physBody = a;
        var b = 2 * Math.random() * MAX_SPEED - MAX_SPEED;
        0.5 > Math.abs(b) && (b = 0.5);
        a.m_linearVelocity.x = b;
        a.m_linearVelocity.y = 2 * Math.random() * MAX_SPEED - MAX_SPEED;
        a.m_angularVelocity = Math.random();
        this.shape = a.GetFixtureList().GetShape()
    };
    b.updateAnim = function() {
        this.collideTimer--;
        0 == this.collideTimer &&
        this.setVisionState(DEFAULT_STATE)
    };
    b.setVisionState = function(a) {
        this.setVisionByType();
        this.isInfected || (this.state = a, a != DEFAULT_STATE && a == COLLIDED_STATE && (this.vision.currentAnimationFrame = 1))
    };
    b.onInflateEnd = function() {
        this.isInflate=!1;
        this.vision.currentAnimationFrame = 0
    };
    b.tick = function() {
        if (this.isNeedDispose)
            this.dispose();
        else if (!isGamePaused) {
            this.updateAnim();
            this.isInflate && (this.isInfected && this.lifes > 0.8 * DEFAULT_LIFES && (this.isInfected=!1, this.setVisionByType()), this.vision.currentAnimationFrame =
            2, this.addDamage(IS_NITRO ? 21 / FPS : 15 / FPS));
            this.type == ENEMY_INFLATE_TYPE && 0 == animTicker%35 && this.lifes < DEFAULT_LIFES_INFLATE && this.addDamage(2);
            if (!this.isEnemy && this.isInfected && 0 == animTicker%Math.floor(FPS / 2)) {
                var a = Math.max(1, 2 * this.scale);
                this.addDamage( - a);
                createNumPart(this.vision.x, this.vision.y, Math.round(a))
            }
            this.physBody && (this.raduis = this.shape.m_radius, this.physBody.m_xf.position.x < this.raduis ? (this.physBody.m_xf.position.x = this.raduis, this.physBody.m_linearVelocity.x = Math.abs(this.physBody.m_linearVelocity.x)) :
            this.physBody.m_xf.position.x > 10.66 - this.raduis && (this.physBody.m_xf.position.x = 10.66 - this.raduis, this.physBody.m_linearVelocity.x =- Math.abs(this.physBody.m_linearVelocity.x)), this.physBody.m_xf.position.y < this.raduis ? (this.physBody.m_xf.position.y = this.raduis, this.physBody.m_linearVelocity.y = Math.abs(this.physBody.m_linearVelocity.y)) : this.physBody.m_xf.position.y > 11.86 - this.raduis && (this.physBody.m_xf.position.y = 11.86 - this.raduis, this.physBody.m_linearVelocity.y =- Math.abs(this.physBody.m_linearVelocity.y)),
            this.vel = this.physBody.m_linearVelocity, this.currSpeed = Math.abs(this.vel.x) + Math.abs(this.vel.y), this.currSpeed < MINIMUM_SPEED ? (this.speedOffset = MINIMUM_SPEED / this.currSpeed, this.physBody.m_linearVelocity.x = this.vel.x * this.speedOffset, this.physBody.m_linearVelocity.y = this.vel.y * this.speedOffset) : this.currSpeed > MAX_SPEED && (this.speedOffset = MAX_SPEED / this.currSpeed, this.physBody.m_linearVelocity.x = this.vel.x * this.speedOffset, this.physBody.m_linearVelocity.y = this.vel.y * this.speedOffset), this.vision.x =
            this.physBody.m_xf.position.x * PHYS_SCALE, this.vision.y = this.physBody.m_xf.position.y * PHYS_SCALE, this.vision.rotation = this.physBody.m_sweep.a * RAD_TO_DEGREES, -59 > this.collideTimer && 0 == this.collideTimer%30 && (0.2 > Math.abs(this.vel.x) ? this.physBody.m_linearVelocity.x += 160 < this.vision.x?-0.5 : 0.5 : 0.2 > Math.abs(this.vel.y) && (this.physBody.m_linearVelocity.y += 160 < this.vision.y?-0.5 : 0.5)))
        }
    };
    b.addDamage = function(a) {
        this.lifes = this.type == ENEMY_HARD_TYPE && 5 > this.lifes ? this.lifes + a / 2 : this.lifes + a;
        0 == currentLevel &&
        26 < this.lifes && (isLevelCompleted=!0, showLevelCompleteWin(), this.isInflate=!1);
        this.lifes = Math.min(65, this.lifes);
        0 >= this.lifes ? this.isEnemy ? this.transformToHero() : this.isInfected ? this.transformToEnemy(ENEMY_SICK_TYPE) : -1 < this.lastColliderType ? this.transformToEnemy(this.lastColliderType) : this.transformToEnemy(ENEMY_SIMPLE_TYPE) : (this.updateVisionScale(), addShapeScale(this.physBody, this.scale))
    };
    b.updateVisionScale = function() {
        this.scale = this.lifes / DEFAULT_LIFES + 0.25;
        this.vision.scaleX = this.isEnemy ?
        this.vision.scaleY = this.scale : this.vision.scaleY = 0.714 * this.scale
    };
    b.dispose = function() {
        isArrayContains(allChars, this) && allChars.splice(allChars.indexOf(this, 0), 1);
        this.lastColliderType =- 1;
        addToDisposed(this);
        this.vision.removeAllEventListeners();
        this.physBody && toDisposePhysicsBodies.push(this.physBody);
        this.shape = this.physBody = null;
        this.vision.stop();
        this.parent.removeChild(this.vision)
    };
    b.onMouseDown = function(a) {
        isGamePaused || (a.target.baseBlock.isInflate=!0, a.addEventListener("mouseup", function(a) {
            a.target.baseBlock.onMouseUp(a)
        }))
    };
    b.onMouseUp = function(a) {
        a.target.baseBlock.isInflate=!1
    };
    b.withHeroCollide = function(a) {
        a.isInflate && 2 < currentLevel || this.applyDamage(a)
    };
    b.withEnemyCollide = function(a, b) {
        this.isInflate && 2 <= currentLevel ? 10 < this.lifes ? (this.lifes = 2, this.isInflate=!1, this.collideTimer = 0, currentChar === this && (currentChar = null, stopInflateSound()), this.addDamage(0), this.setVisionState(DEFAULT_STATE), playSound("bubbleSound")) : this.transformToEnemy(b) : (this.lastColliderType = b, a.type == ENEMY_SICK_TYPE && (this.isInfected=!0),
        this.applyDamage(a), this.isEnemy || a.isNeutralEnemy || playSound("collideSound"));
        this.setDamageByType();
        a.setDamageByType()
    };
    b.applyDamage = function(a) {
        this.isNeutralEnemy || a.isNeutralEnemy || (a = a.damageMult * (0.5 * (a.scale / this.scale) + 0.5), this.collideTimer = 15, this.setVisionState(COLLIDED_STATE), this.addDamage( - a), createNumPart(this.vision.x, this.vision.y, Math.round(a)))
    };
    b.transformToEnemy = function(a) {
        this.type = a;
        this.isEnemy=!0;
        this.lifes = 2;
        this.isInfected=!1;
        this.collideTimer = 0;
        this.vision.mouseEnabled =
        !1;
        a == ENEMY_STONE_TYPE && (this.isNeutralEnemy=!0, this.lifes = 10);
        currentChar === this && (currentChar = null, stopInflateSound());
        this.isInflate ? checkLevelFailWhileInflate() : checkLevelFail();
        this.isInflate=!1;
        this.setVisionByType();
        this.addDamage(0);
        isCollideParticlesNeed=!1;
        createPartExplode(this.vision.x, this.vision.y, 6, PART_CLOUD_TYPE);
        playSound("bubbleSound")
    };
    b.transformToHero = function() {
        this.type = HERO_TYPE;
        this.isInflate = this.isInfected = this.isNeutralEnemy = this.isEnemy=!1;
        this.lifes = 2;
        this.collideTimer =
        0;
        this.setVisionByType();
        this.addDamage(0);
        isDesktop() && (this.vision.mouseEnabled=!0);
        currentChar === this && (currentChar = null);
        isCollideParticlesNeed=!1;
        createPartExplode(this.vision.x, this.vision.y, 6, PART_CLOUD_TYPE);
        playSound("bubbleSound")
    };
    c.CharBase = a
})(window);
var allChars = [], disposedChars = [], blockContainer, currentLevel = 0, isLevelCompleted=!1, isLevelFailed=!1, isInflateReason=!1, currentChar, totalFriends = 0;
function initLevelManager() {
    blockContainer = new createjs.Container;
    container.addChild(blockContainer);
    initPhysics();
    stage.addEventListener("stagemousedown", onCharContainerMouseDown);
    stage.addEventListener("stagemouseup", onCharContainerMouseUp)
}
function createChar(c, a, b, k, d) {
    d || (d = "ch" + a + "y" + b);
    c = geCharFromPool(c, blockContainer, k, d);
    c.setPos(a, b);
    0 != currentLevel && c.initPhysics();
    isArrayContains(allChars, c) || allChars.push(c);
    return c
}
var levelRestartsCounter = 0, totalRestartsCounter = 0;
function loadLevel(c) {
    currentLevel != c && (levelRestartsCounter = 0, MORE_EASY_MULT = 1);
    currentLevel = c;
    setCurrentLevelBg();
    currentLevel >= allLevels.length && (currentLevel%=allLevels.length);
    24 <= currentLevel ? (MINIMUM_SPEED = 5, MAX_SPEED = 10, IS_NITRO=!0) : (MINIMUM_SPEED = 3, MAX_SPEED = 6, IS_NITRO=!1);
    loadLevelByCode(allLevels[currentLevel]);
    isSkipReadyWin || 0 == currentLevel ? isGamePaused=!1 : showReadyWin();
    isLevelRestarted=!1
}
var allBgIndexes = [0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3];
function setCurrentLevelBg(c) {
    var a = allBgIndexes[currentLevel];
    c && (a = 0);
    1 > a ? smallBg.visible=!1 : (smallBg.visible=!0, smallBg.gotoAndStop("aquabg" + a))
}
var totalEnemies = 0;
function loadLevelByCode(c) {
    isGamePaused=!0;
    disposeLevel();
    stopInflateSound();
    addInstructions();
    if (c)
        for (var a = totalEnemies = 0; a < c.length; a++) {
            var b = c[a], b = createChar(b[0], b[1], b[2], b[3]);
            b.isEnemy&&!b.isNeutralEnemy && totalEnemies++
        }
}
var isLevelRestarted=!1;
function restartLevel() {
    isLevelRestarted=!0;
    levelRestartsCounter += 1;
    totalRestartsCounter += 1;
    loadLevel(currentLevel)
}
function loadNextLevel() {
    loadLevel(currentLevel + 1)
}
function disposeLevel() {
    disposeInstructions();
    isLevelFailed = isLevelCompleted = isInflateReason=!1;
    currentChar = null;
    var c = allChars.length, a;
    for (a = 0; a < c; a++)
        allChars.pop().dispose()
}
function addToDisposed(c) {
    isArrayContains(disposedChars, c) || disposedChars.push(c)
}
function geCharFromPool(c, a, b, k) {
    if (0 < disposedChars.length) {
        var d = disposedChars.pop();
        d.reset(c, a, b, k);
        return d
    }
    return new CharBase(c, a, b, k)
}
var BIG_DISTANCE = 1E8;
function onCharContainerMouseDown(c) {
    if (!(isGamePaused || isLevelCompleted || isLevelFailed)) {
        var a = (c.stageX - container.x) / scaleFactor;
        c = (c.stageY - container.y) / scaleFactor;
        var b, k = BIG_DISTANCE, d = 0, e = d = 0;
        currentChar = null;
        for (var f = 0; f < allChars.length; f++)
            b = allChars[f], b.isEnemy || (d = b.vision.x - a, e = b.vision.y - c, d = d * d + e * e, d < k && (currentChar = b, k = d));
        currentChar&&!isGamePaused && (currentChar.isInflate=!0, playInflateSound())
    }
}
function onCharContainerMouseUp(c) {
    if (currentChar)
        currentChar.onInflateEnd();
    stopInflateSound()
}
function checkLevelFailWhileInflate() {
    isDisableWin || isLevelFailed ||!isNoHeroes() || (isInflateReason = isLevelFailed=!0, createjs.Tween.get(blockContainer).wait(100).call(showRestartWin), stopInflateSound())
}
function checkLevelFail() {
    isDisableWin || isLevelFailed ||!isNoHeroes() || (isLevelFailed=!0, createjs.Tween.get(blockContainer).wait(500).call(showRestartWin), stopInflateSound())
}
function isNoHeroes() {
    for (var c = 0; c < allChars.length; c++)
        if (!allChars[c].isEnemy)
            return !1;
    return !0
}
function checkLevelWin() {
    isLevelCompleted || isDisableWin || 0 == currentLevel ||!isNoEnemies() || (isLevelCompleted=!0, showLevelCompleteWin(), stopInflateSound())
}
function isNoEnemies() {
    for (var c = 0; c < allChars.length; c++)
        if (allChars[c].isEnemy&&!allChars[c].isNeutralEnemy)
            return !1;
    return !0
}
var lastopenedlvl = 0, levelstates = [], LEVELS_NUM = 30, ZERO_STAR = 0, ONE_STAR = 1, TWO_STAR = 2, THREE_STAR = 3, ACHIEVS_NUM = 9, NOT_ACHIEVED = 0, ACHIEVED = 1, allachievs = [], GREAT_START_ACHIEV = 0, FRIENDS_ACHIEV = 1, RESTARTS_ACHIEV = 2, HALF_GAME_ACHIEV = 3, STRONGER_ACHIEV = 4, SICK_ACHIEV = 5, ALL_STARS_ACHIEV = 6, SPEED_ACHIEV = 8, PSYCO_ACHIEV = 7, PREFIX = "BattleFish1", isStorageSupported=!1;
function loadSaves() {
    lastopenedlvl = 0;
    if (isStorageSupported = isSupportshtml5storage())
        if (localStorage[PREFIX + "lastopenedlvl"]) {
            lastopenedlvl = parseInt(localStorage[PREFIX + "lastopenedlvl"]);
            for (c = 0; c < LEVELS_NUM; c++)
                levelstates.push(parseInt(localStorage[PREFIX + "levelstate" + c]));
                for (c = 0; c < ACHIEVS_NUM; c++)
                    allachievs.push(parseInt(localStorage[PREFIX + "achiev" + c]));
                    isMute = "1" == localStorage[PREFIX + "ismute"];
                    totalRestartsCounter = localStorage[PREFIX + "totalrestarts"] ? parseInt(localStorage[PREFIX + "totalrestarts"]) :
                    0;
                    totalFriends = localStorage[PREFIX + "totalfriends"] ? parseInt(localStorage[PREFIX + "totalFriends"]) : 0
        } else {
            trace("saves not found!");
            for (c = 0; c < LEVELS_NUM; c++)
                levelstates.push(ZERO_STAR);
                for (c = 0; c < ACHIEVS_NUM; c++)
                    allachievs.push(NOT_ACHIEVED);
                    updateSaves()
        } else {
        trace("storage not supported");
        for (var c = 0; c < LEVELS_NUM; c++)
            levelstates.push(ZERO_STAR);
        for (c = 0; c < ACHIEVS_NUM; c++)
            allachievs.push(NOT_ACHIEVED)
        }
}
function getStarsForLevel(c) {
    return levelstates[c]
}
function saveGame(c) {
    lastopenedlvl <= currentLevel && (lastopenedlvl = currentLevel + 1);
    levelstates[currentLevel] < c && (levelstates[currentLevel] = c);
    updateSaves()
}
function updateSaves() {
    if (isStorageSupported) {
        localStorage[PREFIX + "lastopenedlvl"] = lastopenedlvl;
        for (var c = 0; c < LEVELS_NUM; c++)
            localStorage[PREFIX + "levelstate" + c] = levelstates[c];
        for (c = 0; c < ACHIEVS_NUM; c++)
            localStorage[PREFIX + "achiev" + c] = allachievs[c];
        saveMuteState();
        localStorage[PREFIX + "totalrestarts"] = "" + totalRestartsCounter;
        localStorage[PREFIX + "totalfriends"] = "" + totalFriends
    }
}
function saveMuteState() {
    isStorageSupported && (localStorage[PREFIX + "ismute"] = isMute ? "1" : "0")
}
function isSupportshtml5storage() {
    try {
        var c = "localStorage"in window && null !== window.localStorage;
        c && (localStorage.setItem("storage", ""), localStorage.removeItem("storage"));
        return c
    } catch (a) {
        return !1
    }
}
var allInstructions = [];
function createInstruction(c, a, b, k) {
    c = createPart(PART_INSTRUCTION_TYPE, c, a, 1, k ? blockContainer : allBgContainer);
    c.setFrame(b);
    allInstructions.push(c);
    readyTip.gotoAndStop(b);
    readyTip.visible=!0;
    return c
}
function addInstructions() {
    readyTip.visible=!1;
    0 == currentLevel ? (createInstruction(160, 176, "growCircle", !0).speedA = 1, createInstruction(160, 290, "levelinsruction1")) : 1 == currentLevel ? createInstruction(160, 290, "levelinstruction2") : 2 == currentLevel ? createInstruction(160, 290, "notcollidegrow") : 4 == currentLevel ? createInstruction(160, 290, "levelinstruction3") : 8 == currentLevel ? createInstruction(160, 290, "levelinstruction4") : 13 == currentLevel ? createInstruction(160, 290, "levelinstruction5") : 19 == currentLevel && createInstruction(160,
    290, "levelinstruction6");
    isLevelRestarted || updateBgCache()
}
function disposeInstructions() {
    for (; 0 < allInstructions.length;)
        allInstructions.pop().dispose()
}
function getCollectedStarsNum() {
    for (var c = 0, a = 0; a < LEVELS_NUM; a++)
        c += levelstates[a];
    return c
}
var isAudioSupported=!1, isMute=!1;
function initSoundManager() {
    isDesktop() || createjs.Sound.registerPlugins([createjs.WebAudioPlugin]);
    (isAudioSupported = createjs.Sound.initializeDefaultPlugins()) && manifest.push({
        src: "buttonClick.ogg|buttonClick.m4a",
        id: "clickSound",
        data: 1
    }, {
        src: "explodeSound.ogg|explodeSound.m4a",
        id: "bubbleSound",
        data: 1
    }, {
        src: "collideSound.ogg|collideSound.m4a",
        id: "collideSound",
        data: 1
    }, {
        src: "note4.ogg|note4.m4a",
        id: "note1Sound",
        data: 1
    }, {
        src: "note6.ogg|note6.m4a",
        id: "note2Sound",
        data: 1
    }, {
        src: "note8.ogg|note8.m4a",
        id: "note3Sound",
        data: 1
    }, {
        src: "achievSound.ogg|achievSound.m4a",
        id: "achievSound",
        data: 1
    }, {
        src: "winSound.ogg|winSound.m4a",
        id: "winSound",
        data: 1
    }, {
        src: "restartSound.ogg|restartSound.m4a",
        id: "restartSound",
        data: 1
    }, {
        src: "inflateSound.ogg|inflateSound.m4a",
        id: "inflateSound",
        data: 1
    })
}
function playSound(c, a) {
    if (!isMute && isAudioSupported)
        return createjs.Sound.play(c, {
            interrupt: createjs.Sound.INTERRUPT_EARLY,
            loop: a?-1: 0
        })
}
var inflateSound;
function playInflateSound() {
    !isMute && isAudioSupported && (inflateSound ? inflateSound.play() : inflateSound = playSound("inflateSound", !0))
}
function stopInflateSound() {
    isAudioSupported && inflateSound && inflateSound.stop()
}
function toggleMute() {
    isMute=!isMute;
    saveMuteState()
}
var pauseBtnV, playMenuBtn, creditsBtn, logoImg, levelSelectContainer, isGamePaused, menuEase;
function initInterface() {
    pauseBtnV = createButton(24, 24, 1, "pausebtn", onPausePress, null, onPauseUp);
    menuEase = createjs.Ease.getElasticOut(1, 0.35);
    createMainMenu();
    createLevelSelectMenu();
    createLevelCompleteWin();
    createPauseWin();
    createReadyWin();
    createRestartWin();
    createAchievWin();
    createAchievGalleryMenu();
    createCreditsWin();
    creategameCompleteWin();
    isGamePaused=!0;
    isSkipMenus ? showGameInterface() : showMainMenu(!1)
}
function showGameInterface() {
    pauseBtnV.parent || container.addChild(pauseBtnV)
}
function hideGameInterface() {
    pauseBtnV.parent && container.removeChild(pauseBtnV)
}
function onPausePress(c) {
    isGamePaused || isLevelFailed || isLevelCompleted || (c.target.scaleX = c.target.scaleY = 1.2)
}
function onPauseUp(c) {
    isGamePaused || isLevelFailed || isLevelCompleted || (c.target.scaleX = c.target.scaleY = 1, isCursorOutMoved(c) || (playSound("clickSound"), showPauseWin()))
}
var readyContainer, readyTip, readyLevelNum, readyGoBtn;
function createReadyWin() {
    readyContainer = new createjs.Container;
    readyGoBtn = createButton(-1, 0, 10, "tintbg", onReadyPress, readyContainer, onReadyUp);
    readyGoBtn.scaleY = 9.8;
    createButton(160, 155, 1, "readytitle", null, readyContainer, null);
    createButton(173, 72, 1, "levelreadylabel", null, readyContainer, null);
    readyTip = createButton(160, 290, 1, "notcollidegrow", null, readyContainer, null);
    readyTip.visible=!1;
    readyLevelNum = new createjs.BitmapText("1", interfaceSS);
    readyLevelNum.letterSpacing =- 7;
    readyLevelNum.x = 188;
    readyLevelNum.y =
    52;
    readyLevelNum.mouseEnabled=!1;
    readyContainer.addChild(readyLevelNum)
}
function onReadyPress(c) {}
function onReadyUp(c) {
    isGamePaused && (hideReadyWin(), isGamePaused=!1)
}
function showReadyWin() {
    isGamePaused=!0;
    readyGoBtn.mouseEnabled=!0;
    readyLevelNum.text = (currentLevel + 1).toString();
    createjs.Tween.removeTweens(readyContainer);
    readyContainer.alpha = 1;
    readyContainer.parent || container.addChild(readyContainer)
}
function hideReadyWin() {
    readyGoBtn.mouseEnabled=!1;
    createjs.Tween.removeTweens(readyContainer);
    readyContainer.alpha = 1;
    createjs.Tween.get(readyContainer, {
        override: !0
    }).to({
        alpha: 0
    }, 250).call(removeChildOnTweenComplete)
}
var restartContainer, restartTitle, restartMessage, restartPlayBtn, moreEasyBtn;
function createRestartWin() {
    restartContainer = new createjs.Container;
    createButton(-1, 0, 10, "tintbg", null, restartContainer).scaleY = 9.8;
    restartTitle = createButton(160, 193, 1, "tryagaintitle", null, restartContainer);
    restartPlayBtn = createButton(160, 283, 1, "playbtnup", onRestartPress, restartContainer, onRestartUp);
    restartMessage = createButton(160, 148, 1, "notcollidegrow", null, restartContainer);
    moreEasyBtn = createButton(160, 49, 1, "moreeasybtn", onMoreEasyPress, restartContainer, onMoreEasyUp)
}
function onMoreEasyPress(c) {
    c.target.scaleX = c.target.scaleY = 1.1
}
function onMoreEasyUp(c) {
    c.target.scaleX = c.target.scaleY = 1;
    isCursorOutMoved(c) || (MORE_EASY_MULT += 0.5, hideRestartWin(), restartLevel(), updateBgCache(), playSound("clickSound"))
}
function onRestartPress(c) {
    c.target.scaleX = c.target.scaleY = 1.1
}
function onRestartUp(c) {
    c.target.scaleX = c.target.scaleY = 1;
    isCursorOutMoved(c) || (hideRestartWin(), restartLevel(), updateBgCache(), playSound("clickSound"))
}
function showRestartWin() {
    restartContainer.parent || container.addChild(restartContainer);
    disposeInstructions();
    updateBgCache();
    isInflateReason ? restartMessage.gotoAndStop("notcollidegrow") : restartMessage.gotoAndStop("lostallfishes");
    createjs.Tween.removeTweens(restartContainer);
    restartContainer.alpha = 0;
    createjs.Tween.get(restartContainer, {
        override: !0
    }).to({
        alpha: 1
    }, 300);
    var c = createjs.Ease.bounceOut;
    restartPlayBtn.scaleX = restartPlayBtn.scaleY = 0.8;
    createjs.Tween.get(restartPlayBtn, {
        override: !0,
        loop: !0
    }).to({
        scaleX: 1,
        scaleY: 1
    }, 3E3, c).wait(1E3).to({
        scaleX: 0.8,
        scaleY: 0.8
    }, 3E3, c);
    playSound("restartSound")
}
function hideRestartWin() {
    removeFromParent(restartContainer);
    createjs.Tween.removeTweens(restartPlayBtn)
}
var menuContainer, mainMenuMuteBtn;
function createMainMenu() {
    menuContainer = new createjs.Container;
    playMenuBtn = createButton(160, 270, 1, "playbtnup", onPlayPress, menuContainer, onPlayUp);
    creditsBtn = createButton(290, 325, 0.8, "btnbaseup", onCreditsPress, menuContainer, onCreditsUp);
    logoImg = createButton(156, 140, 0.8, "logov", null, menuContainer);
    createButton(37, 325, 0.5, "achievbtn", onAchievGalleryPress, menuContainer, onAchievGalleryUp).rotation =- 8;
    mainMenuMuteBtn = createButton(294, 26, 0.6, "musiconbtn", onMainMenuMutePress, menuContainer, onMainMenuMuteUp);
    isAudioSupported || (mainMenuMuteBtn.visible=!1)
}
var MUTED_FRAME = "musicoffbtn", UNMUTED_FRAME = "musiconbtn";
function onMainMenuMutePress(c) {
    c.target.scaleX = c.target.scaleY = 0.8
}
function onMainMenuMuteUp(c) {
    c.target.scaleX = c.target.scaleY = 0.6;
    isCursorOutMoved(c) || (toggleMute(), updateMusicIconFrame(c.target), playSound("clickSound"))
}
function updateMusicIconFrame(c) {
    c.gotoAndStop(isMute ? MUTED_FRAME : UNMUTED_FRAME)
}
function showMainMenu(c) {
    container.addChild(menuContainer);
    updateMusicIconFrame(mainMenuMuteBtn);
    playMenuBtn.scaleX = playMenuBtn.scaleY = 0.8;
    c ? (menuContainer.x =- 400, menuContainer.alpha = 0, createjs.Tween.removeTweens(menuContainer), createjs.Tween.get(menuContainer, {
        override : !0
    }).to({
        alpha: 1,
        x: 0
    }, 1300, menuEase).call(showMainMenuTweenComplete)) : createMainMenuTweens()
}
function showMainMenuTweenComplete(c) {
    createMainMenuTweens()
}
function hideMainMenu() {
    disposeMainMenuTweens();
    createjs.Tween.get(menuContainer, {
        override: !0
    }).to({
        alpha: 0,
        x: -400
    }, 200).call(hideMainMenuTweenComplete)
}
function hideMainMenuTweenComplete(c) {
    c = c.target;
    c.alpha = 1;
    playMenuBtn.scaleX = playMenuBtn.scaleY = 1;
    c.parent && container.removeChild(c)
}
function createBigWinBg(c, a) {
    return createButton(c, a, 1, "bigbgwindow", null, levelPauseContainer, null)
}
function createMainMenuTweens() {
    var c = createjs.Ease.bounceOut;
    playMenuBtn.scaleX = playMenuBtn.scaleY = 0.8;
    createjs.Tween.get(playMenuBtn, {
        override: !0,
        loop: !0
    }).to({
        scaleX: 1,
        scaleY: 1
    }, 3E3, c).wait(1E3).to({
        scaleX: 0.8,
        scaleY: 0.8
    }, 3E3, c)
}
function disposeMainMenuTweens() {
    createjs.Tween.removeTweens(playMenuBtn)
}
function onPlayPress(c) {
    c.target.gotoAndStop("downplaybtn")
}
function onPlayUp(c) {
    c.target.gotoAndStop("playbtnup");
    isCursorOutMoved(c) || (playSound("clickSound"), hideMainMenu(), showLevelsMenu())
}
function onAchievGalleryPress(c) {
    c.target.scaleX = c.target.scaleY = 0.6
}
function onAchievGalleryUp(c) {
    c.target.scaleX = c.target.scaleY = 0.5;
    isCursorOutMoved(c) || (playSound("clickSound"), hideMainMenu(), showAchievGallery())
}
function onCreditsPress(c) {
    c.target.scaleX = c.target.scaleY = 0.9;
    trace("play credits!")
}
function onCreditsUp(c) {
    c.target.scaleX = c.target.scaleY = 0.8;
    isCursorOutMoved(c) || (playSound("clickSound"), hideMainMenu(), showCreditsWin())
}
function createButton(c, a, b, k, d, e, f) {
    var g = new createjs.Sprite(interfaceSS);
    g.snapToPixel=!0;
    g.x = c;
    g.y = a;
    g.scaleX = g.scaleY = b;
    g.gotoAndStop(k);
    f && g.addEventListener("pressup", f, !1);
    d ? (g.addEventListener("mousedown", d, !1), g.cursor = "pointer") : g.mouseEnabled=!1;
    (d || f) && (c = interfaceSS.getAnimation(k)) && c.frames && 0 < c.frames.length && (c = interfaceSS.getFrameBounds(c.frames[0]), g.setBoundingBox(c.x * b, c.y * b, c.width * b, c.height * b));
    e && e.addChild(g);
    return g
}
var selectMenuBackBtn, selectMenuNextBtn, selectMenuPreviousBtn, allLevelBtns = [], levelsScreen1, levelsScreen2;
function createLevelSelectMenu() {
    levelSelectContainer = new createjs.Container;
    levelSelectContainer.name = "levelselcont";
    levelSelectContainer.addChild(createBigWinBg(0, 0));
    levelsScreen1 = new createjs.Container;
    levelsScreen1.name = "levelsScreen1";
    levelsScreen2 = new createjs.Container;
    createButton(156, 22, 1, "levelselecttitle", null, levelSelectContainer);
    selectMenuBackBtn = createButton(32, 322, 1, "backbtn", onBackToMenuPress, levelsScreen1, onBackToMenuUp);
    selectMenuNextBtn = createButton(281, 314, 1, "nextlevels", onNextLevelsPress,
    levelsScreen1, onNextLevelsUp);
    selectMenuPreviousBtn = createButton(40, 314, 1, "previouslevels", onPrevLevelsPress, levelsScreen2, onPrevLevelsUp);
    createLevelsButtons();
    levelSelectContainer.addChild(levelsScreen1);
    cacheWin(levelsScreen1);
    cacheWin(levelsScreen2)
}
function cacheWin(c) {
    c.cache(-10, -10, ow + 20, oh + 20)
}
function uncacheWin(c) {
    c.uncache()
}
function createLevelsButtons() {
    for (var c = 0; 30 > c; c++) {
        var a = c%15%4, b = Math.floor(c%15 / 4), k = 3 == b ? 90: 65, d = 3 == b ? 62: 65;
        26 < c && (k += 20);
        a = createButton(k + a * d, 80 + 67 * b, 1, "lvlLabelStar0", onLevelBtnPress, 15 <= c ? levelsScreen2 : levelsScreen1, onLevelBtnUp);
        a.levelNum = c;
        allLevelBtns.push(a);
        b = new createjs.BitmapText((c + 1).toString(), interfaceSS);
        b.letterSpacing =- 7;
        b.x = a.x;
        9 > c && (b.x -= 9);
        9 <= c && 19 > c && (b.x -= 15);
        10 == c && (b.x = a.x-13);
        19 <= c && (b.x -= 17);
        b.y = a.y-22;
        b.mouseEnabled=!1;
        a.txtNum = b
    }
}
function updateLevelsButtons() {
    for (var c = 0; 30 > c; c++) {
        var a = c <= lastopenedlvl;
        isOpenAllLevels && (a=!0);
        var b;
        b = a ? "lvlLabelStar" + getStarsForLevel(c) : "levelbuttonlocked";
        var k = allLevelBtns[c];
        k.gotoAndStop(b);
        (k.isOpened = a) ? k.txtNum.parent || k.parent.addChild(k.txtNum) : k.txtNum.parent && k.parent.removeChild(k.txtNum)
    }
}
function onLevelBtnPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2;
    trace("level " + c.levelNum + " load");
    updateCacheByBtnNum(c.levelNum)
}
function onLevelBtnUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) ? updateCacheByBtnNum(a.levelNum) : a.isOpened ? (levelRestartsCounter = 0, loadLevel(a.levelNum), showGameField(), hideLevelsMenu(), showGameInterface()) : (updateCacheByBtnNum(a.levelNum), playSound("clickSound"))
}
function updateCacheByBtnNum(c) {
    c && (15 > c ? levelsScreen1.updateCache() : levelsScreen2.updateCache())
}
function onBackToMenuPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2;
    levelsScreen1.updateCache()
}
function onBackToMenuUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) ? levelsScreen1.updateCache() : (hideLevelsMenu(), showMainMenu(!0), playSound("clickSound"))
}
function onNextLevelsPress(c) {
    isTweened(levelsScreen1) || (c = c.target, c.scaleX = c.scaleY = 1.2, levelsScreen1.updateCache())
}
function onNextLevelsUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) ? levelsScreen1.updateCache() : (levelsScreen1.x = 0, levelsScreen1.alpha = 1, createjs.Tween.get(levelsScreen1, {
        override : !0
    }).to({
        alpha: 0,
        x: -400
    }, 300).call(removeChildOnTweenComplete), levelSelectContainer.addChild(levelsScreen2), levelsScreen2.x = 200, levelsScreen2.updateCache(), levelsScreen2.alpha = 0, createjs.Tween.get(levelsScreen2, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 700, createjs.Ease.bounceOut), playSound("clickSound"))
}
function onPrevLevelsPress(c) {
    isTweened(levelsScreen2) || (c = c.target, c.scaleX = c.scaleY = 1.2, levelsScreen2.updateCache())
}
function onPrevLevelsUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) ? levelsScreen2.updateCache() : (levelsScreen2.x = 0, levelsScreen2.alpha = 1, createjs.Tween.get(levelsScreen2, {
        override : !0
    }).to({
        alpha: 0,
        x: 400
    }, 300).call(removeChildOnTweenComplete), levelsScreen1.x =- 200, levelSelectContainer.addChild(levelsScreen1), levelsScreen1.updateCache(), levelsScreen1.alpha = 0, createjs.Tween.get(levelsScreen1, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 700, createjs.Ease.bounceOut), playSound("clickSound"))
}
function showLevelsMenu() {
    container.addChild(levelSelectContainer);
    updateLevelsButtons();
    levelsScreen2.parent && levelSelectContainer.removeChild(levelsScreen2);
    levelsScreen1.parent || levelSelectContainer.addChild(levelsScreen1);
    levelsScreen1.x = 0;
    levelsScreen1.alpha = 1;
    levelsScreen1.updateCache();
    levelSelectContainer.x = 400;
    levelSelectContainer.alpha = 0;
    createjs.Tween.get(levelSelectContainer, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 1300, menuEase)
}
function hideLevelsMenu() {
    createjs.Tween.removeTweens(levelSelectContainer);
    createjs.Tween.get(levelSelectContainer, {
        override: !0
    }).to({
        alpha: 0,
        x: 400
    }, 200).call(removeChildOnTweenComplete)
}
function showGameField() {
    createjs.Tween.removeTweens(blockContainer);
    blockContainer.parent || container.addChild(blockContainer);
    blockContainer.alpha = 0;
    blockContainer.visible=!0;
    createjs.Tween.get(blockContainer, {
        override: !0
    }).to({
        alpha: 1
    }, 400)
}
function hideGameField(c, a) {
    isGamePaused=!0;
    createjs.Tween.removeTweens(blockContainer);
    createjs.Tween.get(blockContainer, {
        override: !0
    }).to({
        alpha: 0,
        visible: !1
    }, a ? a : 400).call(removeFromParent)
}
var levelCompleteContainer, completeWinNextBtn, star1, star2, star3, completeLevelTxt, completeRestartTxt;
function createLevelCompleteWin() {
    levelCompleteContainer = new createjs.Container;
    createButton(153, 170, 1, "lvlcompletebgnew", null, levelCompleteContainer);
    completeWinNextBtn = createButton(250, 290, 1, "nextlevelwin", onNextLevelPress, levelCompleteContainer, onNextLevelUp);
    createButton(157, 287, 0.56, "restartbtn", onCompleteRestartPress, levelCompleteContainer, onCompleteRestartUp);
    star1 = createButton(57, 134, 1, "completestar", null, null, null);
    star2 = createButton(153, 129, 1, "completestar", null, null, null);
    star3 = createButton(256,
    123, 1, "completestar", null, null, null);
    completeLevelTxt = new createjs.BitmapText("1", interfaceSS);
    completeLevelTxt.letterSpacing =- 7;
    completeLevelTxt.x = 212;
    completeLevelTxt.y = 178;
    completeLevelTxt.mouseEnabled=!1;
    levelCompleteContainer.addChild(completeLevelTxt);
    completeRestartTxt = new createjs.BitmapText("1", interfaceSS);
    completeLevelTxt.letterSpacing =- 7;
    completeRestartTxt.x = 248;
    completeRestartTxt.y = 213;
    completeRestartTxt.mouseEnabled=!1;
    levelCompleteContainer.addChild(completeRestartTxt)
}
function onCompleteRestartPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 0.75
}
function onCompleteRestartUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 0.56;
    isCursorOutMoved(c) || (playSound("clickSound"), MORE_EASY_MULT = 1, restartLevel(), levelRestartsCounter = 0, showGameField(), hideLevelCompleteWin())
}
function onNextLevelPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function onNextLevelUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), hideLevelCompleteWin(), c = getNewAchievedId(), -1 < c ? showAchievWin(c) : currentLevel >= LEVELS_NUM-1 ? (hideGameInterface(), disposeLevel(), showGameCompleteWin()) : (loadNextLevel(), showGameField()))
}
var currentLevelStarsNum = 0;
function showLevelCompleteWin() {
    hideGameInterface();
    createjs.Tween.removeTweens(levelCompleteContainer);
    removeFromParent(star1);
    removeFromParent(star2);
    removeFromParent(star3);
    completeLevelTxt.text = (currentLevel + 1).toString();
    completeRestartTxt.text = levelRestartsCounter.toString();
    container.addChild(levelCompleteContainer);
    levelCompleteContainer.x = 400;
    levelCompleteContainer.alpha = 0;
    createjs.Tween.get(blockContainer).wait(400).call(hideGameField);
    createjs.Tween.get(levelCompleteContainer).wait(500).to({
        alpha: 1,
        x: 0
    }, 1300, menuEase).call(showStars);
    currentLevelStarsNum = ONE_STAR;
    3 >= levelRestartsCounter ? currentLevelStarsNum = THREE_STAR : 9 >= levelRestartsCounter && (currentLevelStarsNum = TWO_STAR);
    totalFriends += totalEnemies;
    saveGame(currentLevelStarsNum);
    playSound("winSound")
}
function showStars(c) {
    animateStar(star1, 20, 0.8, "note1Sound");
    currentLevelStarsNum >= TWO_STAR && animateStar(star2, 600, 0.9, "note2Sound");
    currentLevelStarsNum >= THREE_STAR && animateStar(star3, 1200, 1, "note3Sound")
}
function animateStar(c, a, b, k) {
    levelCompleteContainer.addChild(c);
    c.alpha = 0;
    c.scaleX = c.scaleY = 0.2;
    c.rotation = 0;
    createjs.Tween.get(c, {
        override: !0
    }).wait(a).call(function() {
        playSound(k)
    }).to({
        alpha: 1,
        rotation: 360,
        scaleX: b,
        scaleY: b
    }, 400)
}
function removeFromParent(c) {
    c.parent && c.parent.removeChild(c)
}
function hideLevelCompleteWin() {
    createjs.Tween.removeTweens(star1);
    createjs.Tween.removeTweens(star2);
    createjs.Tween.removeTweens(star3);
    createjs.Tween.removeTweens(levelCompleteContainer);
    createjs.Tween.get(levelCompleteContainer).to({
        alpha: 0,
        x: -400
    }, 200).call(removeChildOnTweenComplete);
    showGameInterface()
}
var levelPauseContainer, pauseContinueBtn, pauseMuteBtn;
function createPauseWin() {
    levelPauseContainer = new createjs.Container;
    var c = createBigWinBg(0, 0);
    c.scaleX = c.scaleY = 0.8;
    c.x = 0.1 * ow;
    c.y = 0.1 * oh;
    levelPauseContainer.addChild(c);
    createButton(78, 250, 1, "quitbtn", onPauseQuitPress, levelPauseContainer, onPauseQuitUp);
    pauseMuteBtn = createButton(160, 250, 1, "musiconbtn", onPauseMutePress, levelPauseContainer, onPauseMuteUp);
    isAudioSupported || (pauseMuteBtn.visible=!1);
    createButton(243, 250, 1, "restartbtn", onPauseRestartPress, levelPauseContainer, onPauseRestartUp);
    pauseContinueBtn =
    createButton(160, 142, 1, "playbtnup", onPauseContinuePress, levelPauseContainer, onPauseContinueUp);
    createButton(156, 38, 1, "pausetitle", null, levelPauseContainer)
}
function onPauseMutePress(c) {
    c.target.scaleX = c.target.scaleY = 1.2
}
function onPauseMuteUp(c) {
    c.target.scaleX = c.target.scaleY = 1;
    isCursorOutMoved(c) || (toggleMute(), updateMusicIconFrame(c.target), isMute || playSound("clickSound"))
}
function onPauseRestartPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function onPauseRestartUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), hidePauseWin(!1, !1), showGameField(), restartLevel())
}
function onPauseQuitPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function onPauseQuitUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), isGamePaused=!0, disposeLevel(), setCurrentLevelBg(!0), updateBgCache(), hideGameField(!0, 100), hidePauseWin(!1, !0), showMainMenu(!0))
}
function onPauseContinuePress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function onPauseContinueUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), hidePauseWin(!1, !1))
}
function showPauseWin() {
    isGamePaused || isLevelCompleted || isLevelFailed || (isGamePaused=!0, stopInflateSound(), hideGameInterface(), updateMusicIconFrame(pauseMuteBtn), container.addChild(levelPauseContainer), levelPauseContainer.x =- 400, levelPauseContainer.y =- 250, levelPauseContainer.alpha = 0, createjs.Tween.get(levelPauseContainer).to({
        alpha: 1,
        x: 0,
        y: 0
    }, 1300, menuEase))
}
function hidePauseWin(c, a) {
    isGamePaused=!1;
    createjs.Tween.removeTweens(levelPauseContainer);
    createjs.Tween.get(levelPauseContainer).to({
        alpha: 0,
        x: 400,
        y: 700
    }, 300).call(removeChildOnTweenComplete);
    a || showGameInterface()
}
var achievContainer, raduga, achievDesc;
function createAchievWin() {
    achievContainer = new createjs.Container;
    createButton(-1, 0, 10, "tintbg", null, achievContainer).scaleY = 9.8;
    createButton(160, 44, 1, "achievedtitle", null, achievContainer);
    createButton(160, 313, 1, "nextlevelwin", onAchievContinuePress, achievContainer);
    raduga = createButton(160, 162, 1.34, "radugav", null, achievContainer);
    createButton(160, 172, 1, "achievbtn", null, achievContainer).rotation = 10;
    achievDesc = createButton(160, 253, 1, "achievdesc1", null, achievContainer)
}
function onAchievContinuePress(c) {
    hideAchievWin();
    currentLevel >= LEVELS_NUM-1 ? (hideGameInterface(), disposeLevel(), showGameCompleteWin()) : (showGameInterface(), loadNextLevel(), showGameField())
}
function showAchievWin(c) {
    achievContainer.parent || container.addChild(achievContainer);
    disposeLevel();
    updateBgCache();
    hideGameInterface();
    raduga.rotation = 0;
    createjs.Tween.get(raduga, {
        override: !0,
        loop: !0
    }).to({
        rotation: 180
    }, 4E3);
    achievDesc.gotoAndStop("achievdesc" + Math.round(c));
    allachievs[c] = ACHIEVED;
    updateSaves();
    createjs.Tween.removeTweens(achievContainer);
    achievContainer.alpha = 0;
    createjs.Tween.get(achievContainer, {
        override: !0
    }).to({
        alpha: 1
    }, 300).call(function() {
        playSound("achievSound")
    })
}
function hideAchievWin() {
    createjs.Tween.removeTweens(raduga);
    removeFromParent(achievContainer)
}
function getNewAchievedId() {
    return 2 != currentLevel || isAlreadyAchieved(GREAT_START_ACHIEV) ? 9 != currentLevel || isAlreadyAchieved(STRONGER_ACHIEV) ? 19 != currentLevel || isAlreadyAchieved(SICK_ACHIEV) ? 24 != currentLevel || isAlreadyAchieved(SPEED_ACHIEV) ? 27 != currentLevel || isAlreadyAchieved(PSYCO_ACHIEV) ? 14 != currentLevel || isAlreadyAchieved(HALF_GAME_ACHIEV) ? 90 <= getCollectedStarsNum()&&!isAlreadyAchieved(ALL_STARS_ACHIEV) ? ALL_STARS_ACHIEV : 7 <= totalRestartsCounter&&!isAlreadyAchieved(RESTARTS_ACHIEV) ? RESTARTS_ACHIEV :
    10 < totalFriends&&!isAlreadyAchieved(FRIENDS_ACHIEV) ? FRIENDS_ACHIEV : -1 : HALF_GAME_ACHIEV : PSYCO_ACHIEV : SPEED_ACHIEV : SICK_ACHIEV : STRONGER_ACHIEV : GREAT_START_ACHIEV
}
function isAlreadyAchieved(c) {
    return allachievs[c] == ACHIEVED
}
var achGalleryMenuBackBtn, achGalleryContainer, allAchievsLabels = [];
function createAchievGalleryMenu() {
    achGalleryContainer = new createjs.Container;
    achGalleryContainer.addChild(createBigWinBg(0, 0));
    createButton(160, 22, 1, "achievmenutitle", null, achGalleryContainer);
    createButton(32, 41, 0.45, "achievbtn", null, achGalleryContainer).rotation =- 14;
    createButton(290, 41, 0.45, "achievbtn", null, achGalleryContainer).rotation = 12;
    createAchievLabels();
    achGalleryMenuBackBtn = createButton(32, 322, 1, "backbtn", onAchievGalleryBackPress, achGalleryContainer, onAchievGalleryBackUp)
}
function createAchievLabels() {
    for (var c = 0; c < ACHIEVS_NUM; c++) {
        var a = 30 * c;
        if (0 != c%2) {
            var b = createButton(5, 53 + a, 1, "tintbg", null, achGalleryContainer, null);
            b.scaleX = 9.8;
            b.scaleY = 0.75
        }
        a = createButton(160, 66 + a, 1, "achievclosed", null, achGalleryContainer, null);
        allAchievsLabels.push(a)
    }
}
function updateAchievLabels() {
    for (var c = 0; c < ACHIEVS_NUM; c++)
        allAchievsLabels[c].gotoAndStop(allachievs[c] == ACHIEVED ? "achievdesc" + c.toString() : "achievclosed")
}
function onAchievGalleryBackPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2;
    achGalleryContainer.updateCache()
}
function onAchievGalleryBackUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) ? achGalleryContainer.updateCache() : (playSound("clickSound"), hideAchievGallery(), showMainMenu(!0))
}
function showAchievGallery() {
    container.addChild(achGalleryContainer);
    updateAchievLabels();
    cacheWin(achGalleryContainer);
    achGalleryContainer.x = 400;
    achGalleryContainer.alpha = 0;
    createjs.Tween.get(achGalleryContainer, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 1300, menuEase)
}
function hideAchievGallery() {
    createjs.Tween.removeTweens(achGalleryContainer);
    createjs.Tween.get(achGalleryContainer, {
        override: !0
    }).to({
        alpha: 0,
        x: 400
    }, 200).call(uncacheAndRemove)
}
var creditsContainer;
function createCreditsWin() {
    creditsContainer = new createjs.Container;
    var c = createBigWinBg(0, 0);
    c.scaleY = 0.88;
    c.y = 23;
    creditsContainer.addChild(c);
    createButton(31, 321, 1, "backbtn", onCreditsQuitPress, creditsContainer, onCreditsQuitUp);
    createButton(145, 172, 1, "biglimetxt", null, creditsContainer);
    createButton(233, 296, 1, "inspiredby", null, creditsContainer);
    createButton(160, 30, 1, "creditstitle", null, creditsContainer)
}
function onSiteLinkPress(c) {
    window.open("http://porubov.com", "_blank")
}
function onCreditsLinkPress(c) {
    window.location = "mailto:seddas@gmail.com?subject=BattleFish"
}
function onCreditsQuitPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function onCreditsQuitUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), hideCreditsWin(), showMainMenu(!0))
}
function showCreditsWin() {
    container.addChild(creditsContainer);
    creditsContainer.x = 400;
    creditsContainer.alpha = 0;
    createjs.Tween.get(creditsContainer, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 1300, menuEase)
}
function hideCreditsWin() {
    createjs.Tween.removeTweens(creditsContainer);
    createjs.Tween.get(creditsContainer, {
        override: !0
    }).to({
        alpha: 0,
        x: 400
    }, 200).call(removeChildOnTweenComplete)
}
var gameCompleteContainer, collectedStarsTxt;
function creategameCompleteWin() {
    gameCompleteContainer = new createjs.Container;
    var c = createBigWinBg(0, 0);
    c.scaleY = 0.88;
    c.y = 23;
    gameCompleteContainer.addChild(c);
    createButton(160, 310, 1, "nextlevelwin", ongameCompleteQuitPress, gameCompleteContainer, ongameCompleteQuitUp);
    createButton(160, 237, 1, "levelinstruction8", null, gameCompleteContainer);
    createButton(160, 105, 1, "allcollectedstars", null, gameCompleteContainer);
    createButton(160, 30, 1, "gamecompletedTitle", null, gameCompleteContainer);
    collectedStarsTxt = new createjs.BitmapText(getCollectedStarsNum().toString(),
    interfaceSS);
    collectedStarsTxt.letterSpacing =- 7;
    collectedStarsTxt.x = 85;
    collectedStarsTxt.y = 121;
    collectedStarsTxt.mouseEnabled=!1;
    gameCompleteContainer.addChild(collectedStarsTxt)
}
function ongameCompleteQuitPress(c) {
    c = c.target;
    c.scaleX = c.scaleY = 1.2
}
function ongameCompleteQuitUp(c) {
    var a = c.target;
    a.scaleX = a.scaleY = 1;
    isCursorOutMoved(c) || (playSound("clickSound"), hidegameCompleteWin(), showMainMenu(!0))
}
var isGameCompleteScreenShow=!1;
function showGameCompleteWin() {
    isGameCompleteScreenShow=!0;
    container.addChild(gameCompleteContainer);
    collectedStarsTxt.text = getCollectedStarsNum().toString();
    gameCompleteContainer.x = 400;
    gameCompleteContainer.alpha = 0;
    createjs.Tween.get(gameCompleteContainer, {
        override: !0
    }).to({
        alpha: 1,
        x: 0
    }, 1300, createjs.Ease.elasticOut)
}
function hidegameCompleteWin() {
    isGameCompleteScreenShow=!1;
    updateMobileBrowserParams();
    createjs.Tween.removeTweens(gameCompleteContainer);
    createjs.Tween.get(gameCompleteContainer, {
        override: !0
    }).to({
        alpha: 0,
        x: 400
    }, 200).call(removeChildOnTweenComplete)
}
function uncacheAndRemove(c) {
    c = c.target;
    uncacheWin(c);
    c.parent && c.parent.removeChild(c)
}
function removeChildOnTweenComplete(c) {
    c = c.target;
    c.parent && c.parent.removeChild(c)
}
function isTweened(c) {
    return createjs.Tween.hasActiveTweens(c)
}
var hitPoint;
function isCursorOutMoved(c) {
    if (!isDesktop())
        return !1;
    hitPoint = c.target.globalToLocal(c.stageX, c.stageY);
    return !c.target.hitTest(hitPoint.x, hitPoint.y)
}
var stage, exportRoot, canvas, rect, container, preload, rotationContainer, winWidth, winHeight, scaleFactor = 1, ow = 320, oh = 356, maxW = 426, maxH = 568, desctopMaxW = 426, desctopMaxH = 568, pixelDensity = 1;
function initResizeManager() {
    setPixelRatio();
    window.addEventListener("resize", onWindowResize);
    document.addEventListener("touchstart", PreventScrollTouch);
    window.onorientationchange = orientChange;
    onGameResize()
}
var isWasPaused = null, zoomFactor = 1;
function onGameResize() {
    var c = window.innerWidth, a = window.innerHeight;
    zoomFactor = 1;
    if (isLowQuality) {
        var b = Math.min(c / ow, a / oh);
        zoomFactor = Math.max(1, Math.min(2, b * b));
        c/=zoomFactor;
        a/=zoomFactor
    }
    b = "scale(" + zoomFactor + "," + zoomFactor + ")";
    canvas.style.transform = b;
    canvas.style.msTransform = b;
    canvas.style.MozTransform = b;
    canvas.style.WebkitTransform = b;
    canvas.style.OTransform = b;
    scaleFactor = Math.min(c / ow, a / oh);
    stage.scaleX = 1;
    stage.scaleY = 1;
    stage.canvas.width = Math.min(c, maxW * scaleFactor);
    stage.canvas.height = Math.min(a,
    maxH * scaleFactor);
    if (isDesktop()) {
        var b = 10, k = getURLParameter("scale");
        k && (b = parseFloat(k));
        scaleFactor = Math.min(c / desctopMaxW, a / desctopMaxH);
        scaleFactor = Math.min(scaleFactor, b / zoomFactor);
        stage.canvas.width = Math.min(c, desctopMaxW * scaleFactor);
        stage.canvas.height = Math.min(a, desctopMaxH * scaleFactor)
    }
    stage.canvas.style.marginTop = "0px";
    stage.canvas.style.marginLeft = "0px";
    stage.canvas.style.left = Math.floor((c * zoomFactor - stage.canvas.width) / 2) + "px";
    stage.canvas.style.top = Math.floor((a * zoomFactor - stage.canvas.height) /
    2) + "px";
    stage.autoClear = c > maxW * scaleFactor || a > maxH * scaleFactor;
    container.scaleX = scaleFactor;
    container.scaleY = scaleFactor;
    container.x = Math.round((stage.canvas.width - ow * scaleFactor) / 2);
    container.y = Math.round(stage.canvas.height - oh * scaleFactor) / 2;
    winWidth = c;
    winHeight = a;
    timer = null;
    stage.update();
    isNeedCacheSizeUpdate=!0
}
function orientChange(c) {
    setTimeout(hideAdressBar, 50);
    onWindowResize(null)
}
function hideAdressBar() {
    window.scrollTo(1, 0)
}
function PreventScrollTouch(c) {
    window.innerHeight != winHeight && onWindowResize(null);
    c.preventDefault();
    c.stopPropagation();
    c.cancelBubble=!0;
    return c.returnValue=!1
}
var timer;
function onWindowResize(c) {
    clearTimeout(timer);
    setTimeout(onGameResize, 300);
    trace("on Win Resize")
}
function setPixelRatio() {
    var c = document.createElement("meta");
    c.name = "viewport";
    var a = "target-densitydpi=device-dpi, user-scalable=0", a = isHiDPI() ? a + ", initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5": a + ", initial-scale=1, maximum-scale=1, minimum-scale=1";
    c.content = a;
    document.getElementsByTagName("head")[0].appendChild(c)
}
function isHiDPI() {
    return !window.hasOwnProperty("devicePixelRatio")||-1 == navigator.userAgent.indexOf("iPhone")&&-1 == navigator.userAgent.indexOf("iPad") || 2 != window.devicePixelRatio?!1 : !0
}
function getURLParameter(c) {
    return decodeURIComponent((RegExp("[?|&]" + c + "=([^&;]+?)(&|#|;|$)").exec(location.search) || [, ""])[1].replace(/\+/g, "%20")) || null
}
function isMobileDetected(c) {
    return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|android|ipad|playbook|silk|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(c) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
    4))
}
var MyGame = {}, images, files;
MyGame.init = function() {
    canvas = document.getElementById("canvas");
    images = images || {};
    files = files || {};
    stage = new createjs.Stage("canvas");
    container = new createjs.Container;
    container.isRoot=!0;
    container.width = ow;
    container.height = oh;
    stage.addChild(container);
    detectBrowser();
    rotationContainer = new createjs.Container;
    rotationContainer.width = ow;
    rotationContainer.height = oh;
    initResizeManager();
    createjs.Touch.enable(stage, !0);
    isDesktop() && stage.enableMouseOver(20);
    stage.mouseMoveOutside=!0;
    initLoaders();
    stage.update();
    var c = document.getElementById("loader");
    c && c.parentNode && c.parentNode.removeChild(c)
};
function isDesktop() {
    return isDesktopBrowser
}
function updateMobileBrowserParams() {
    MAX_PARTICLES_ON_SCREEN = isDesktopBrowser ? 30 : 12
}
function detectBrowser() {
    isDesktopBrowser=!isMobileDetected(navigator.userAgent || navigator.vendor || window.opera);
    var c = getURLParameter("mobile");
    c && 1 == parseInt(c) && (isDesktopBrowser=!1);
    updateMobileBrowserParams()
}
var loaderBar;
function initLoaders() {
    borderPadding = 10;
    loaderColor = createjs.Graphics.getRGB(247, 247, 247);
    loaderBar = new createjs.Container;
    bar = new createjs.Shape;
    bar.graphics.beginFill(loaderColor).drawRect(0, 0, 1, 20).endFill();
    loaderWidth = 300;
    var c = new createjs.Shape;
    c.graphics.setStrokeStyle(1).beginStroke(loaderColor).drawRect(-1.5, -1.5, loaderWidth + 3, 23);
    loaderBar.x = container.width - loaderWidth>>1;
    loaderBar.y = container.height-20>>1;
    loaderBar.addChild(bar, c);
    container.addChild(loaderBar);
    initSoundManager();
    preload =
    new createjs.LoadQueue(!0, "assets/");
    preload.installPlugin(createjs.Sound);
    preload.addEventListener("progress", handleOverallProgress);
    preload.addEventListener("complete", handleComplete);
    preload.addEventListener("fileload", handleFileLoad);
    isLoadAnimFromJSON && (manifest.push({
        src: "expandassets.json",
        id: "anim_json"
    }), manifest.push({
        src : "bgassets.json", id : "bgassets_json"
    }), manifest.push({
        src: "interfaceassets.json",
        id: "interfaceassets_json"
    }));
    preload.loadManifest(manifest);
    createjs.Ticker.timingMode = createjs.Ticker.RAF_SYNCHED;
    isDefaultAndroid() && (createjs.Ticker.timingMode = createjs.Ticker.TIMEOUT, isLowQuality=!0, (c = getURLParameter("highq")) && (isLowQuality = 1 !== parseInt(c)));
    createjs.Ticker.setFPS(FPS)
}
function isDefaultAndroid() {
    var c = navigator.userAgent;
    return -1 < c.indexOf("Mozilla/5.0")&&-1 < c.indexOf("Android ")&&-1 < c.indexOf("AppleWebKit")&&!(-1 < c.indexOf("Chrome"))
}
function handleOverallProgress(c) {
    if (0 != c.total) {
        var a = c.loaded / c.total;
        bar.scaleX = a * loaderWidth;
        stage.update()
    }
    trace(a)
}
var fpsText, zoeSS, interfaceSS, bgSS, isPreloaderLogoReady=!1;
function handleFileLoad(c) {
    "image" == c.item.type && (images[c.item.id] = c.result);
    files[c.item.id] = c.result;
    if (!isPreloaderLogoReady && "preloaderlogo" == c.item.id) {
        isPreloaderLogoReady=!0;
        var a = c.result;
        c = a.width;
        var b = a.height, a = (new createjs.Bitmap(a)).set({
            scaleX: 0.75,
            scaleY: 0.75,
            regX: c / 2,
            regY: b / 2,
            cursor: "pointer",
            x: ow / 2,
            y: 20 + 0.75 * b
        });
        a.setBoundingBox( - c / 2, - b / 2, c, b);
        a.addEventListener("mousedown", sponsorClick);
        loaderBar.addChild(a)
    }
}
function sponsorClick(c) {
    window.open(SPONSOR_URL, "_blank")
}
function createRotationScreen() {
    var c = new createjs.Sprite(bgSS);
    c.gotoAndStop("rotateScreen");
    c.x = 30;
    rotationContainer.addChild(c)
}
var isAllFilesLoaded=!1;
function handleComplete(c) {
    isAllFilesLoaded=!0;
    removeFromParent(loaderBar);
    loaderBar = null;
    configureSpritesheets();
    createBG();
    loadSaves();
    initLevelManager();
    isNeedFpsMeter && (fpsText = new createjs.BitmapText("1", interfaceSS), fpsText.scaleX = fpsText.scaleY = 0.6, fpsText.letterSpacing =- 7, fpsText.x = ow-27, container.addChild(fpsText));
    initInterface();
    isSkipMenus && (isLastLevelLoad ? loadLevel(allLevels.length-1) : loadLevel(editLevelToLoad));
    stage.update();
    createjs.Ticker.addEventListener("tick", tick);
    initEditorHandlers();
    isGetAllProperties && getAllProperties();
    createRotationScreen();
    onGameResize()
}
function initEditorHandlers() {
    isLevelEditor && stage.addEventListener("stagemousedown", handlePress)
}
function updateBgCache() {
    0 != allBgContainer.cacheID && allBgContainer.updateCache(!0)
}
var mainBg, allBgContainer, smallBg, isNeedCacheSizeUpdate=!1;
function createBG() {
    allBgContainer = new createjs.Container;
    container.addChild(allBgContainer);
    mainBg = (new createjs.Sprite(bgSS)).set({
        x: -53,
        y: -106
    });
    mainBg.gotoAndStop("bigbg");
    allBgContainer.addChild(mainBg);
    smallBg = new createjs.Sprite(bgSS);
    smallBg.x =- 1;
    smallBg.gotoAndStop("aquabg1");
    allBgContainer.addChild(smallBg);
    smallBg.visible=!1;
    allBgContainer.mouseEnabled=!1
}
var nameCounter = 0;
function handlePress(c) {
    isLevelEditor && (KeyboardJS.isPressed("n") && loadNextLevel(), KeyboardJS.isPressed("l") && (isLevelCompleted=!0, showLevelCompleteWin()), KeyboardJS.isPressed("a") && showAchievWin(), KeyboardJS.isPressed("u") && updateBgCache(), KeyboardJS.isPressed("g") && showGameCompleteWin())
}
function configureSpritesheets() {
    isLoadAnimFromJSON && (zoeCFG = eval(files.anim_json), interfaceCFG = eval(files.interfaceassets_json), bgCFG = eval(files.bgassets_json));
    zoeCFG.images[0] = "assets/" + zoeCFG.images[0];
    interfaceCFG.images[0] = "assets/" + interfaceCFG.images[0];
    bgCFG.images[0] = "assets/" + bgCFG.images[0];
    validateSpritesheetCFG(zoeCFG);
    validateSpritesheetCFG(interfaceCFG);
    validateSpritesheetCFG(bgCFG);
    zoeSS = new createjs.SpriteSheet(zoeCFG);
    interfaceSS = new createjs.SpriteSheet(interfaceCFG);
    bgSS = new createjs.SpriteSheet(bgCFG)
}
function validateSpritesheetCFG(c) {
    c = c.frames;
    for (var a = c.length, b, k = 0; k < a; k++)
        b = c[k], 1024 < b[0] + b[2] && (b[2] = 1024 - b[0]), 1024 < b[1] + b[3] && (b[3] = 1024 - b[1])
}
var counter = 0, animTicker = 0, toDisposePhysicsBodies = [], FPS = 30, WORLD_STEP = 1 / FPS;
function tick(c) {
    counter++;
    animTicker++;
    if (!isGamePaused) {
        for (; 0 < toDisposePhysicsBodies.length;)
            world.DestroyBody(toDisposePhysicsBodies.pop());
        world.Step(WORLD_STEP, 1, 2);
        isPhysicsDebugDraw && world.DrawDebugData();
        world.ClearForces()
    }
    for (c = 0; c < allChars.length; c++)
        allChars[c].tick();
    updatePartManager();
    stage.update();
    isGameCompleteScreenShow && (MAX_PARTICLES_ON_SCREEN = 30, 0 == animTicker%Math.floor(FPS / 6) && createPartExplode(Math.random() * ow, Math.random() * oh, 6, PART_STAR_TYPE, gameCompleteContainer));
    isNeedFpsMeter &&
    0 == counter%FPS && (fpsText.text = Math.floor(createjs.Ticker.getMeasuredFPS()).toString());
    if (30 < counter && isNeedCacheSizeUpdate) {
        isNeedCacheSizeUpdate=!1;
        c = Math.min(428, stage.canvas.width / scaleFactor);
        var a = Math.floor((c - ow) / 2) + 1, b = Math.min(570, stage.canvas.height / scaleFactor);
        allBgContainer.cache( - a, - (Math.floor((b - oh) / 2) + 1), c + 1, b + 1, 1)
    }
}
function trace(c) {
    isLevelEditor && console.log(c)
};

